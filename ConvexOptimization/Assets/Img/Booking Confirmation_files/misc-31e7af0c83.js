var BMS={},__TEST__=void 0!==__TEST__,merchTransactionURLs={"in.testbms.com":"https://in.testbms.com/api/store/transaction/","in.bms.bz":"https://in.bms.bz/api/fanhood/transaction/","in.bookmyshow.com":"https://in.bookmyshow.com/api/fanhood/transaction/",localhost:"https://in.testbms.com/api/store/transaction/"};$.extend(!0,global,{strContentUrl:"//in.bmscdn.com",strSocketUrl:"https://inbox-in.bookmyshow.com",fnBImgPath:"//in.bmscdn.com/bmsin/v2/Web-v2/d-combo/",fbAppId:"165665113451029",strWltAppCode:"WEBWLT2",defImageURL:"",defFirstName:"Guest",strCurrencyCode:"Rs.",strOneCurrencyCode:"Re.",getDataUrl:"/serv/getData",reqRgnArr:["home","movies"],notReqRgnArr:["static","box-office-listing","box-office","404"],RgnCallBack:[],SignInCallBack:[],SignOutCallBack:[],merchTransactionURL:merchTransactionURLs[window.location.host]},global),BMS={Region:{},Storage:{},Misc:{},SignIn:{},Validate:{},Notifications:{},Header:{},Giftcard:{},Modal:{},Experiences:{},Events:{},Ratings:{},Analytics:{}},"function"!=typeof Object.assign&&(Object.assign=function(e,t){"use strict";if(null===e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var a=arguments[i];if(null!==a)for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n});var XD=(function(){var e,i,a,o=1,s=this;return{postMessage:function(e,t,n){t&&(n=n||parent,s.postMessage?n.postMessage(e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):t&&(n.location=t.replace(/#.*$/,"")+"#"+ +new Date+o+++"&"+e))},receiveMessage:function(n,t){s.postMessage?(n&&(a=function(e){if("string"==typeof t&&e.origin!==t||"[object Function]"===Object.prototype.toString(t)&&!1===t(e.origin))return!1;n&&n(e),n=!1}),s.addEventListener?s[n?"addEventListener":"removeEventListener"]("message",a,!1):s[n?"attachEvent":"detachEvent"]("onmessage",a)):(e&&clearInterval(e),e=null,n&&(e=setInterval((function(){var e=document.location.hash,t=/^#?\d+&/;e!==i&&t.test(e)&&n({data:(i=e).replace(t,"")})}),100)))}}})();"object"!=typeof JSON&&(JSON={}),(function(){"use strict";function f(e){return e<10?"0"+e:e}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,(function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function str(e,t){var n,i,a,o,s,r=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,n=0;n<o;n+=1)s[n]=str(n,l)||"null";return a=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+r+"]":"["+s.join(",")+"]",gap=r,a}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;n<o;n+=1)"string"==typeof rep[n]&&(a=str(i=rep[n],l))&&s.push(quote(i)+(gap?": ":":")+a);else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(a=str(i,l))&&s.push(quote(i)+(gap?": ":":")+a);return a=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+r+"}":"{"+s.join(",")+"}",gap=r,a}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(indent=gap="","number"==typeof n)for(i=0;i<n;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if((rep=t)&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var n,i,a=e[t];if(a&&"object"==typeof a)for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(void 0!==(i=walk(a,n))?a[n]=i:delete a[n]);return reviver.call(e,t,a)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})})(),BMS.SignIn.CallBackArray={};var blnFBAccountKit=!1;function eyeViewer(){try{$(".password-field").hasClass("show-password")?($("#iPwd").attr("type","text"),$(".password-field").removeClass("show-password")):($("#iPwd").attr("type","password"),$(".password-field").addClass("show-password"))}catch(e){BMS.Misc.fnErr({fnName:"eyeViewer",err:e})}}function signInModalRestore(){var n;n=window.open,window.open=function(){var e=(window.open=n).apply(this,arguments),t=setInterval((function(){e.closed&&(clearInterval(t),BMS.Misc.fnBusy(!1,BMS.Modal.currentModal))}),3e3);return e}}function hideSignInOnUserLoginPage(){"user-login"==pageName&&$("#navbar #preSignIn, #navbar #withoutLogIn, #navbar #preSignup").removeAttr("data-modal"),global.blnIsTouchScreen&&$(".user-login ._signin-signup-popover").addClass("_touch")}BMS.SignIn.getGoogleSignInSDKUrl=function(){return"https://apis.google.com/js/platform.js"},BMS.SignIn.fnRegUser=function(){try{if($("#signUpIntiate div").hasClass("disable"))return!1;$("#signUpIntiate div").addClass("disable");var e=$("#iRegUserEmail");$("#iRegPwd"),$("#iRegCnfPwd");if(isSignUp=!0,""==e.val())return BMS.Misc.ErrDisplay("dSignUpErrorEmail","Please enter a mobile number","e"),e.addClass("_error").focus(),$("#iResendConfMobile").focus(),void BMS.SignIn.fnValErrorCheck("iSignUpParent","iRegUserEmail","iRegPwd","dSignUpErrorEmail","iRegCnfPwd");if(!BMS.Validate.mob(e.val()))return BMS.Misc.ErrDisplay("dSignUpErrorEmail","Please enter a valid mobile number","e"),e.addClass("_error").focus(),$("#iResendConfMobile").focus(),void BMS.SignIn.fnValErrorCheck("iSignUpParent","iRegUserEmail","iRegPwd","dSignUpErrorEmail","iRegCnfPwd");if(e.val().length<10)return BMS.Misc.ErrDisplay("dSignUpErrorEmail","Please enter a valid mobile number","e"),e.addClass("_error").focus(),$("#iResendConfMobile").focus(),void BMS.SignIn.fnValErrorCheck("iSignUpParent","iRegUserEmail","iRegPwd","dSignUpErrorEmail","iRegCnfPwd");"payment"!=pageName&&(window.AccountKit=void 0),BMS.Misc.fnBtnLoading("signUp-load",!0,"Continue"),BMS.SignIn.fnFBKit("OTPAPP",e.val())}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnRegUser",err:e})}},BMS.SignIn.fnFBKit=function(e,t){try{BMS.Storage.set({name:"_temp_usr",value:t,storage:"C"}),appType=e,dispMob=t,BMS.Misc.fnCallOtpApi({cmd:"send",AppC:global.strAppCode,blnSupp:!0},{fnCC:function(e){BMS.SignIn.fnSMSLogin(e),BMS.Misc.fnBtnLoading("login-loading-state",!1,"Continue"),BMS.Misc.fnBtnLoading("signUp-load",!1,"Continue")},fnEC:function(e){if(errDiv=isSignUp?"dSignUpErrorPassword":"dSignInErrorEmail",BMS.Misc.fnSCusErrDisplay(errDiv,e.message,"e"),BMS.Misc.fnBtnLoading("login-loading-state",!1,"Continue"),BMS.Misc.fnBtnLoading("signUp-load",!1,"Continue"),("VerifyMobileNumber"==appType||"updateMobile"==appType)&&(BMS.Misc.modal("enterOTP",!0),BMS.Misc.fnSCusErrDisplay("otp-error",e.message,"e"),"400"==e.statusCode))return BMS.SignIn.fnShowOtpBadReq(e.message),!1}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnFBKit",err:e})}},BMS.SignIn.fnSMSLogin=function(e){try{var t=$("#signinPopup").is(":visible")?$("#iUserName"):$("#iRegUserEmail");if($("#signupPopup").is(":visible")&&(!BMS.Validate.mob(t.val())||t.val().length<10))return BMS.Misc.ErrDisplay("dSignUpErrorEmail","Please enter a mobile number","e"),t.addClass("_error").focus(),$("#iResendConfMobile").focus(),void BMS.SignIn.fnValErrorCheck("iSignUpParent","iRegUserEmail","iRegPwd","dSignUpErrorEmail","iRegCnfPwd");BMS.Misc.fnBtnLoading("login-loading-state",!1,"Continue"),BMS.Misc.modal("signinPopup",!1),BMS.Misc.fnSCusErrDisplay("otp-error","","e"),$('input[name^="otp"]').removeAttr("disabled"),BMS.Misc.modal("enterOTP",!0),$("#enterOTP .popover-container").css({"min-height":"445px"}),BMS.SignIn.fireMobileClick(),BMS.SignIn.fireOTPView(),$(".otp-info").html("We have sent 6 digit code to <strong>"+dispMob+"</strong>"),$("#submit-otp").addClass("disable"),$('input[name^="otp"]').first().focus(),$("#spnResendOtp, #spnReqNewdOtp ").hide(),$("#spnResendOtp a").unbind("click"),$("#spnTimer").show(),$(".otpMobile").text(t.val()),intOtpTimer=e.resend.timeout,sendToken=e.id,BMS.SignIn.fnStartTimer(),BMS.SignIn.fnValOtp()}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnSMSLogin",err:e})}},BMS.SignIn.fireMobileClick=function(){try{BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"gtmstdevent",tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),product:"login",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",screenName:"login",eventCategory:"send_otp_button_clicked",eventAction:"click",eventLabel:"",pagetype:"login",pageurl:window.location.href,user_mode:"guest",app_code:"web",experiment:"",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",error_message:"",login_type:"mobile_OTP_login"});var e=new Date,t={session_id:BMS.Storage.get({name:"mqttsid"}),product:"login",screen_name:"login",event_name:"send_otp_button_clicked",event_type:"click",experiment:"",timestamp:e.toISOString()};t=$.extend({},t,BMS.Analytics.commonClickStreamParams())}catch(e){}},BMS.SignIn.fireOTPView=function(){try{BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_allpage",tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),product:"login",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",pagetype:"submit_otp",pageurl:window.location.href,user_mode:"guest",app_code:"web",experiment:"",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",error_message:""});var e=new Date,t={session_id:BMS.Storage.get({name:"mqttsid"}),product:"login",screen_name:"submit_otp",event_name:"submit_otp_viewed",event_type:"screen_view",experiment:"",timestamp:e.toISOString()};t=$.extend({},t,BMS.Analytics.commonClickStreamParams())}catch(e){BMS.Misc.fnErr({fnName:"fireOTPView",err:e})}},BMS.SignIn.fnValOtp=function(){try{charLimit=1,$("input[name^='otp']").keydown((function(e){if(8==e.which&&0==this.value.length)$(this).prev('input[name^="otp"]').focus();else{if(0<=$.inArray(e.which,[8,9,19,20,27,33,34,35,36,38,40,45,46,44,145]))return!0;if(e.shiftKey||(e.which<48||58<=e.which)&&(e.keyCode<96||105<e.keyCode))return!1}})).keyup((function(e){var t=e.keyCode?e.keyCode:e.which;if(BMS.SignIn.fnEnableOtp(t),39==e.which)$(this).next('input[name^="otp"]').focus();else if(37==e.which)$(this).prev('input[name^="otp"]').focus();else if(this.value.length>=charLimit)return $(this).next('input[name^="otp"]').focus(),!1}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnValOtp",fnParams:arguments,err:e})}},isEnterPressed=!1,BMS.SignIn.fnEnableOtp=function(e){try{intOtp="",$('input[name^="otp"]').each((function(){""!=this.value&&(intOtp+=this.value)})),6==intOtp.length?($("#submit-otp").removeClass("disable"),$("#submit-otp").click((function(){BMS.SignIn.fnCallOTPUpdate(intOtp)})),13!=e||isEnterPressed||(BMS.SignIn.fnCallOTPUpdate(intOtp),isEnterPressed=!0)):($("#submit-otp").unbind(),$("#submit-otp").addClass("disable"))}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnEnableOtp",fnParams:arguments,err:e})}},BMS.SignIn.fnCallOTPUpdate=function(e){try{"OTPAPP"==appType?BMS.SignIn.fnLoginOTP(e):"updateMobile"==appType||"VerifyMobileNumber"==appType?BMS.SignIn.fnUpdateMobile(e,appType):location.reload()}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnEnableOtp",fnParams:arguments,err:e})}},BMS.SignIn.fnStartTimer=function(){try{0<=intOtpTimer&&(BMS.SignIn.fnDispTimer(intOtpTimer),intOtpTimer-=1,clearTimeout(BMS.SignIn.fnStartTimer.objTimer),BMS.SignIn.fnStartTimer.objTimer=setTimeout(0<intOtpTimer?BMS.SignIn.fnStartTimer:BMS.SignIn.fnStopTimer,1e3))}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnStartTimer",fnParams:arguments,err:e})}},BMS.SignIn.fnDispTimer=function(e){try{var t=parseInt(e/60,10),n=e%60;n=n<10?"0"+n:n,0<t?$(".timer").html(t+":"+n):$(".timer").html("00:"+n)}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnDispTimer",fnParams:arguments,err:e})}},BMS.SignIn.fnStopTimer=function(){try{$(".timer").html("0"),$("#spnTimer , #spnReqNewdOtp").hide(),$("#spnResendOtp").show(),$("#spnResendOtp a").unbind(),$("#spnResendOtp a").click((function(){BMS.SignIn.fnResendOTP()})),clearTimeout(BMS.SignIn.fnStartTimer.objTimer)}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnStopTimer",fnParams:arguments,err:e})}},BMS.SignIn.fnResendOTP=function(){try{BMS.Misc.fnCallOtpApi({cmd:"resend",AppC:global.strAppCode,id:sendToken,blnSupp:!0},{fnCC:function(e){$(".otp-info").html("We have resent 6 digit code to <strong>"+dispMob+"</strong>"),BMS.Misc.fnSCusErrDisplay("otp-error","","e"),$('input[name^="otp"]').val(""),$("#spnResendOtp , #spnReqNewdOtp").hide(),$("#spnTimer").show(),$("#spnReqNewdOtp a").unbind(),intOtpTimer=e.resend.timeout,sendToken=e.id,BMS.SignIn.fnStartTimer(),BMS.SignIn.fireResendOTP()},fnEC:function(e){if(BMS.Misc.fnSCusErrDisplay("otp-error",e.message,"e"),void 0!==e.statusCode&&"400"==e.statusCode)return BMS.SignIn.fnShowOtpBadReq(e.message),!1;void 0===e.statusCode||"429"!=e.statusCode&&"419"!=e.statusCode?BMS.SignIn.fireErrorOTPEvents("resend_otp_button_clicked",e):BMS.SignIn.fnShowReqOtp(e)}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnResendOTP",err:e})}},BMS.SignIn.fnShowOtpBadReq=function(t){try{$("#submit-otp").addClass("disable"),$("#spnTimer , #spnResendOtp, #spnReqNewdOtp").hide(),$('input[name^="otp"]').val(""),$('input[name^="otp"]').attr("disabled","disabled"),clearTimeout(BMS.SignIn.fnStartTimer.objTimer),BMS.SignIn.fireErrorOTPEvents("resend_otp_button_clicked",t)}catch(t){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnShowOtpBadReq",err:e})}},BMS.SignIn.fnShowReqOtp=function(t){try{$("#submit-otp").removeClass("disable"),"419"!=t.statusCode&&"410"!=t.statusCode||($("#submit-otp").addClass("disable"),$('input[name^="otp"]').val(""),$('input[name^="otp"]').attr("disabled","disabled")),$("#spnReqNewdOtp").show(),$("#spnResendOtp , #spnTimer").hide(),clearTimeout(BMS.SignIn.fnStartTimer.objTimer),$("#spnReqNewdOtp a").click((function(){$("#spnReqNewdOtp").hide(),BMS.SignIn.fnFBKit("OTPAPP",dispMob),$(".otp-info").html("We have sent 6 digit code to <strong>"+dispMob+"</strong>"),BMS.SignIn.fireErrorOTPEvents("send_otp_button_clicked",t.message)}))}catch(t){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnResendOTP",err:e})}},BMS.SignIn.fireErrorOTPEvents=function(t,n){try{BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"gtmstdevent",tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),product:"login",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",screenName:"submit_otp",eventCategory:t,eventAction:"click",eventLabel:"",pagetype:"login",pageurl:window.location.href,user_mode:"guest",app_code:"web",experiment:"",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",error_message:n,login_type:"mobile_OTP_login"});var i=new Date,a={session_id:BMS.Storage.get({name:"mqttsid"}),product:"login",screen_name:"submit_otp",event_name:"send_otp_button_clicked",event_type:"click",experiment:"",timestamp:i.toISOString()};a=$.extend({},a,BMS.Analytics.commonClickStreamParams())}catch(t){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnResendOTP",err:e})}},BMS.SignIn.fireResendOTP=function(){try{BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"gtmstdevent",tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),product:"login",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",screenName:"submit_otp",eventCategory:"resend_otp_button_clicked",eventAction:"click",eventLabel:"",pagetype:"login",pageurl:window.location.href,user_mode:"guest",app_code:"web",experiment:"",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",error_message:"",login_type:"mobile_OTP_login"});var t=new Date,n={session_id:BMS.Storage.get({name:"mqttsid"}),product:"login",screen_name:"submit_otp",event_name:"resend_otp_button_clicked",event_type:"click",experiment:"",timestamp:t.toISOString()};n=$.extend({},n,BMS.Analytics.commonClickStreamParams())}catch(t){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnResendOTP",err:e})}},BMS.SignIn.fnUpdateMobile=function(e,t){try{blnUpdate=!1,"updateMobile"==t&&(blnUpdate=!0),"undefined"!=typeof pageName&&"myprofile"==pageName&&(BMS.Misc.fnBtnLoading("submit-otp",!0,""),$("#submit-otp").addClass("disable")),BMS.Misc.fnCallOtpApi({cmd:"verifymobile",otpReferenceId:sendToken,otp:e,update:blnUpdate,blnSupp:!0},{fnCC:function(e){if(null!=e&&""!=e){resUpdateMob=e.profile.contact.phoneNumbers[0];var t=resUpdateMob.verified?"Y":"N",n=resUpdateMob.value,i=new Date(BMS.Storage.get({name:"ld",key:"EXPIRY"}));BMS.Storage.set({name:"ld",key:"OTPMOBVERIFIED",value:t,storage:"C",expires:i}),BMS.Storage.set({name:"ld",key:"MOBILE",value:n,storage:"C",expires:i}),BMS.Misc.modal("enterOTP",!1),$("#listVerifiedMobile").hide(),"undefined"!=typeof pageName&&"myprofile"==pageName&&(BMS.Misc.fnBtnLoading("submit-otp",!1,"Confirm"),$("#submit-otp").removeClass("disable")),isEnterPressed=!1}},fnEC:function(e){isEnterPressed=!1,BMS.Misc.fnSCusErrDisplay("otp-error",e.message,"e"),"undefined"!=typeof pageName&&"myprofile"==pageName&&(BMS.Misc.fnBtnLoading("submit-otp",!1,"Confirm"),$("#submit-otp").removeClass("disable")),void 0===e.statusCode||"429"!=e.statusCode&&"419"!=e.statusCode&&"410"!=e.statusCode||BMS.SignIn.fnShowReqOtp(e)}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnUpdateMobile",err:e})}},BMS.SignIn.fnLoginOTP=function(e){try{void 0,BMS.Misc.fnBtnLoading("submit-otp",!0,""),$("#submit-otp").addClass("disable"),BMS.Misc.fnSCusErrDisplay("otp-error","","e"),BMS.Misc.fnCallOtpApi({cmd:"login",otpReferenceId:sendToken,otp:e,blnSupp:!0},{fnCC:function(e){ldData=e;var t=BMS.SignIn.getSessionLD(ldData)+BMS.SignIn.getProfileLD(ldData.profile)+BMS.SignIn.getNotificationLD(ldData)+BMS.SignIn.getLinkingLD(ldData.linking)+BMS.SignIn.getLoyaltyLD(ldData.superstar)+BMS.SignIn.getWalletLD();BMS.SignIn.fnAfterAuth(t),BMS.SignIn.fireOtpSubmitted(),BMS.Misc.fnBtnLoading("submit-otp",!1,"Confirm")},fnEC:function(e){if(isEnterPressed=!1,$("#submit-otp").removeClass("disable"),BMS.Misc.fnBtnLoading("submit-otp",!1,"Confirm"),BMS.Misc.fnSCusErrDisplay("otp-error",e.message,"e"),void 0!==e.statusCode&&"400"==e.statusCode)return BMS.SignIn.fnShowOtpBadReq(e.message),!1;void 0===e.statusCode||"429"!=e.statusCode&&"419"!=e.statusCode&&"410"!=e.statusCode||BMS.SignIn.fnShowReqOtp(e),BMS.SignIn.fireOtpSubmitted(e)}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnLoginOTP",err:e})}},BMS.SignIn.getSessionLD=function(e){try{intLSID=strLdExPairy="",strFavVen=[],0<e.sessions.length&&(intLSID=e.sessions[0].id,strLdExPairy=BMS.SignIn.gerLdExpairy(e.sessions[0].expiresAt)),null!=e.favourites&&e.favourites.movies&&null!=e.favourites.movies.venues&&0<e.favourites.movies.venues.length&&(strFavVen=e.favourites.movies.venues.toString());var t={active:"A",deactivated:"I",suspended:"S",duplicate:"D",removed:"R",blocked:"B"};return strStaus=null!=t[e.status]?t[e.status]:"",ldSessionData="|MEMBERID="+e.id+"|STATUS="+strStaus+"|LSID="+intLSID+"|SEQUENCE="+ldData.sessions[0].sequence+"|EXPIRY="+strLdExPairy+"|MEMBER_VERSION_ID="+ldData.version+"|SESSION_VERSION_ID="+ldData.sessions[0].version+"|FAV="+strFavVen}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.getSessionLD",err:e})}},BMS.SignIn.gerLdExpairy=function(e){try{var t=new Date(e),n=t.getMonth()+1,i=t.getDate(),a=t.getFullYear(),o=t.getHours(),s=o%12||12,r=t.getMinutes(),l=t.getSeconds();return intExpairy=n+"/"+i+"/"+a+" "+s+":"+r+":"+l+" "+(12<=o?"PM":"AM")}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.gerLdExpairy",err:e})}},BMS.SignIn.getProfileLD=function(e){try{return strFName=e.name.hasOwnProperty("first")&&null!=e.name.first?e.name.first:"",strLName=e.name.hasOwnProperty("last")&&null!=e.name.first?e.name.last:"",strGen=""!=e.gender&&"male"==e.gender?"M":"female"==e.gender?"F":"",isFBLogin=isGPLogin="N",strUserEmail=strEmailVR="",intMobile=strMobVR="",intBirthDate="",null!=e.contact.emailAddresses&&0<e.contact.emailAddresses.length&&(strUserEmail=e.contact.emailAddresses[0].hasOwnProperty("value")?e.contact.emailAddresses[0].value:"",strEmailVR=e.contact.emailAddresses[0].hasOwnProperty("verified")&&e.contact.emailAddresses[0].verified?"Y":""),null!=e.contact.phoneNumbers&&0<e.contact.phoneNumbers.length&&(intMobile=e.contact.phoneNumbers[0].hasOwnProperty("value")?e.contact.phoneNumbers[0].value:"",strMobVR=e.contact.phoneNumbers[0].hasOwnProperty("verified")&&e.contact.phoneNumbers[0].verified?"Y":""),null!=e.contact.social&&(isFBLogin=null!=e.contact.social.facebook?"Y":"N",isGPLogin=null!=e.contact.social.google?"Y":"N"),null!=e.relationship&&(isMarried=e.hasOwnProperty("relationship")&&"married"==e.relationship.status?"Y":"N"),null!=e.birth&&(intMonth=null!=e.birth.date.month?e.birth.date.month<10?"0"+e.birth.date.month+"/":e.birth.date.month+"/":"",intDay=null!=e.birth.date.day?e.birth.date.day<10?"0"+e.birth.date.day+"/":e.birth.date.day+"/":"",intYear=null!=e.birth.date.year?e.birth.date.year:"",intBirthDate=intMonth+intDay+intYear),strProfile="|MEMBEREMAIL="+strUserEmail+"|EMAILVERIFIED="+strEmailVR+"|MOBILE="+intMobile+"|OTPMOBVERIFIED="+strMobVR+"|NAME="+strFName+"|FIRSTNAME="+strFName+"|LASTNAME="+strLName+"|ISFCONNECTLOGIN="+isFBLogin+"|ISPLUSLOGIN="+isGPLogin+"|GENDER="+strGen+"|MARITIALSTATUS="+isMarried+"|DOB="+intBirthDate}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.getProfileLD",err:e})}},BMS.SignIn.getLoyaltyLD=function(e){try{return blnLoyaltyVID=e.hasOwnProperty("legacyVersion")?e.legacyVersion:"",blnLoyaltySB=e.hasOwnProperty("status")&&e.status?"Y":"N",ldLoyaltyData="|LOYALTYVARIANTID="+blnLoyaltyVID+"|LOYALTYISSUBSCRIBED="+blnLoyaltySB+"|LOYALTYISTARGETTED="+blnLoyaltySB}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.getLoyaltyLD",err:e})}},BMS.SignIn.getNotificationLD=function(e){try{return isEmailSub=isMobileSub="N",null!=e.notificationChannels&&0<e.notificationChannels.length&&e.notificationChannels.forEach((function(e){isMobileSub=e.hasOwnProperty("medium")&&"sms"==e.medium?"Y":"N",isEmailSub=e.hasOwnProperty("medium")&&"email"==e.medium?"Y":"N"})),ldNotifyData="|EMAILSUBSCRIPTION="+isEmailSub+"|MOBILESUBSCRIPTION="+isMobileSub}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.getNotificationLD",err:e})}},BMS.SignIn.getLinkingLD=function(e){try{return blnShowLink=e.hasOwnProperty("prompt")&&e.prompt.display?"Y":"",blnIsAccLink=e.hasOwnProperty("status")&&e.prompt.status?"Y":"NA",ldLinkingData="|ACCOUNTLINKED="+blnIsAccLink+"|SHOWLINKINGSCREEN="+blnShowLink+"|SUSPENDEDINFO="}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.getLinkingLD",err:e})}},BMS.SignIn.getWalletLD=function(){try{return ldWalletData="|ISWALLETELIGIBLE=|WALLETSTATUS=|WALLETLASTNAME=|WALLETFIRSTNAME=|WALLETEMAILID=|WALLETMOBILENO=|WALLETAUTOREFUNDMODE=|"}catch(t){BMS.Misc.fnErr({fnName:"BMS.SignIn.getWalletLD",err:e})}},BMS.SignIn.fireOtpSubmitted=function(e){try{strerror=void 0!==e?e.message:"",BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"gtmstdevent",tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),product:"login",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",screenName:"submit_otp",eventCategory:"submit_otp_button_clicked",eventAction:"click",eventLabel:"undefined"!=typeof intOtpTimer?intOtpTimer:"",pagetype:"login",pageurl:window.location.href,user_mode:""!=strerror?"logged_in":"guest",app_code:"web",experiment:"",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",error_message:strerror,login_type:"mobile_OTP_login"});var t=new Date,n={session_id:BMS.Storage.get({name:"mqttsid"}),product:"login",screen_name:"submit_otp",event_name:"submit_otp_button_clicked",event_type:"click",experiment:"",timestamp:t.toISOString()};n=$.extend({},n,BMS.Analytics.commonClickStreamParams())}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fireOtpSubmitted",err:e})}},BMS.SignIn.fnCloseOTP=function(){try{"undefined"==typeof appType||"VerifyMobileNumber"!=appType&&"updateMobile"!=appType?"undefined"!=typeof pageName&&"user-login"==pageName?(BMS.Misc.modal("enterOTP",!1),BMS.Misc.fnBtnLoading("loading-user",!1,"Continue"),$("#loading-user").addClass("disable")):"undefined"!=typeof isSignUp&&isSignUp?BMS.Misc.modal("signupPopup",!0):(BMS.Misc.modal("signinPopup",!0),$("#login-loading-state").addClass("disable")):(BMS.Misc.modal("enterOTP",!1),BMS.Misc.fnBtnLoading("loading-user",!1,"Continue"),$("#loading-user").addClass("disable"))}catch(t){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnCloseOTP",err:e})}},BMS.SignIn.validateUserLoginInput=function(){try{var e=$("#iUserName"),t=$("#iPwd");if($("#dSignInErrorPassword").hide(),""!=$("#dSignInErrorEmail").text()&&$("#dSignInErrorEmail").text("").hide(),""==$.trim(e.val())||0==$.trim(e.val().length))return $("#loginIntiate div").addClass("disable"),$("#iPwd").hide(),$("#eyeViewer").hide(),$("#forgetPassword").hide(),void $("#lblPlaceHolder").text("Continue with mobile number");if(/^\d+$/.test($.trim(e.val()))){if(10<e.val().length)return $("#iPwd").show(),$("#eyeViewer").show(),$("#forgetPassword").show(),$("#lblPlaceHolder").text("Continue with email id"),void(BMS.Validate.email(e.val())||$("#loginIntiate div").addClass("disable"));if($("#lblPlaceHolder").text("Continue with mobile number"),$("#iPwd").hide(),$("#forgetPassword").hide(),$("#eyeViewer").hide(),!BMS.Validate.mob(e.val()))return $("#lblPlaceHolder").text("Continue with mobile number"),$("#iPwd").hide(),$("#eyeViewer").hide(),$("#forgetPassword").hide(),void $("#loginIntiate div").addClass("disable")}if((/^[a-z]+$/i.test($.trim(e.val()))||-1<e.val().indexOf("@"))&&($("#iPwd").show(),$("#eyeViewer").show(),$("#forgetPassword").show(),$("#lblPlaceHolder").text("Continue with email id"),!BMS.Validate.email(e.val())))return void $("#loginIntiate div").addClass("disable");if(/^(?=.*[a-zA-Z])(?=.*[0-9])/.test(e.val())&&($("#iPwd").show(),$("#eyeViewer").show(),$("#forgetPassword").show(),$("#lblPlaceHolder").text("Continue with email id"),!BMS.Validate.email(e.val())))return void $("#loginIntiate div").addClass("disable");if($("#iPwd").is(":visible")){if(""==$.trim(t.val())||"Password"==t.val())return void $("#loginIntiate div").addClass("disable");if(t.val().length<1)return void $("#loginIntiate div").addClass("disable")}$("#loginIntiate div").removeClass("disable")}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.validateUserLoginInput",err:e})}},BMS.SignIn.validateUserSignUpInput=function(){try{if($("#dSignUpErrorPassword").text("").hide(),!BMS.Validate.mob($("#iRegUserEmail").val()))return void $("#signUpIntiate div").addClass("disable");$("#signUpIntiate div").removeClass("disable")}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.validateUserSignUpInput",err:e})}},BMS.SignIn.fnVerifyMobileNumber=function(){try{var e=BMS.Storage.get({name:"ld",key:"MOBILE"});BMS.SignIn.fnFBKit("VerifyMobileNumber",e),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_gtmstdevent",eventCategory:"verify_mobile_number",eventAction:"click",eventLabel:"",event_type:"click",user_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),pagetype:"verify_mobile_number",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"text",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",product:"otp_login",event_level:"major",experiement:"",model_tags:"",pageurl:"undefined"!=typeof pageName?pageName:"",user_mode:"guest",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnVerifyMobileNumber",err:e})}},BMS.SignIn.fnValErrorCheck=function(e,t,n,i,a){var o=$("#"+e),s=o.find("#"+t),r=o.find("#"+n),l=$("#"+i),c=void 0;return void 0!==a&&(c=$("#"+a)),$(document).keyup((function(e){27==e.keyCode&&(l.hide(),r.val="",s.val="",r.removeClass("_error"),s.removeClass("_error"),void 0!==c&&(c.val="",c.removeClass("_error")))})),"block"==l.css("display")&&(r.is(":focus")?(r.keypress((function(){l.hide(),r.removeClass("_error")})),s.bind("focus",(function(){l.hide(),r.removeClass("_error"),s.unbind("focus")})),void 0!==c&&c.bind("focus",(function(){l.hide(),r.removeClass("_error"),c.unbind("focus")}))):s.is(":focus")?(s.keypress((function(){l.hide(),s.removeClass("_error")})),r.bind("focus",(function(){l.hide(),s.removeClass("_error"),r.unbind("focus")})),void 0!==c&&c.bind("focus",(function(){l.hide(),s.removeClass("_error"),c.unbind("focus")}))):void 0!==c&&c.is(":focus")&&(c.keypress((function(){l.hide(),c.removeClass("_error")})),r.bind("focus",(function(){l.hide(),c.removeClass("_error"),r.unbind("focus")})),s.bind("focus",(function(){l.hide(),c.removeClass("_error"),s.unbind("focus")})))),!1},BMS.SignIn.fnValLogIn=function(e){try{if($("#loginIntiate div").hasClass("disable"))return!1;$("#loginIntiate div").addClass("disable"),"payment"!=pageName&&(window.AccountKit=void 0);var t={username:"iUserName",password:"iPwd",usernameParent:"iUserNameParent",errorEmail:"dSignInErrorEmail",errorPassword:"dSignInErrorPassword"};$.extend(t,e);var n=$("#"+t.username),i=$("#"+t.password);if(isSignUp=!1,""==$.trim(n.val()))return BMS.Misc.fnSCusErrDisplay("dSignInErrorEmail","Please enter an email address or mobile number","e"),n.addClass("_error").focus(),void BMS.SignIn.fnValErrorCheck(t.usernameParent,t.username,t.password,t.errorEmail);if(-1!=n.val().indexOf("@")){if(!BMS.Validate.email(n.val()))return BMS.Misc.fnSCusErrDisplay("dSignInErrorEmail","Please enter a valid email address","e"),n.addClass("_error").focus(),void BMS.SignIn.fnValErrorCheck(t.usernameParent,t.username,t.password,t.errorEmail);if(""==$.trim(i.val())||"Password"==i.val())return BMS.Misc.fnSCusErrDisplay("dSignInErrorPassword","Please enter a password","e"),i.addClass("_error").focus(),void BMS.SignIn.fnValErrorCheck(t.usernameParent,t.username,t.password,t.errorPassword)}else if(!BMS.Validate.mob(n.val()))return BMS.Misc.fnSCusErrDisplay("dSignInErrorEmail","Please enter a valid mobile number","e"),n.addClass("_error").focus(),void BMS.SignIn.fnValErrorCheck(t.usernameParent,t.username,t.password,t.errorEmail);"user-login"!=pageName?BMS.Misc.fnBtnLoading("login-loading-state",!0,"Continue"):BMS.Misc.fnBtnLoading("loading-user",!0,"Continue"),BMS.Misc.fnGATracker({location:"SignInBox",action:"SignIn"}),setTimeout((function(){BMS.SignIn.fnAuthUser({id:n.val(),pwd:i.val(),type:"logIn"})}),1e3)}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnValLogIn",err:e})}},BMS.SignIn.fnValPaymentLogIn=function(e){try{var t={username:"iUserName",password:"iPwd",usernameParent:"iUserNameParent",errorEmail:"dSignInErrorEmail",errorPassword:"dSignInErrorPassword"};$.extend(t,e);var n=$("#"+t.username),i=$("#"+t.password);if(""==$.trim(n.val())||"Email"==n.val())return BMS.Misc.fnSCusErrDisplay("dSignInErrorEmail","Please enter an email address","e"),n.addClass("_error").focus(),void BMS.SignIn.fnValErrorCheck(t.usernameParent,t.username,t.password,t.errorEmail);if(!BMS.Validate.email(n.val()))return BMS.Misc.fnSCusErrDisplay("dSignInErrorEmail","Please enter a valid email address","e"),n.addClass("_error").focus(),void BMS.SignIn.fnValErrorCheck(t.usernameParent,t.username,t.password,t.errorEmail);if(""==$.trim(i.val())||"Password"==i.val())return BMS.Misc.fnSCusErrDisplay("dSignInErrorPassword","Please enter a password","e"),i.addClass("_error").focus(),void BMS.SignIn.fnValErrorCheck(t.usernameParent,t.username,t.password,t.errorPassword);"user-login"!=pageName&&BMS.Misc.fnBusy(!0,BMS.Modal.currentModal),BMS.Misc.fnGATracker({location:"SignInBox",action:"SignIn"}),BMS.SignIn.fnAuthUser({id:n.val(),pwd:i.val(),type:"logIn"})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnValPaymentLogIn",err:e})}},BMS.SignIn.fnAuthUser=function(t){try{var e=null!=t&&null!=t.id&&""!=t.id?t.id:$("#iUserName").val(),n=null!=t&&null!=t.pwd&&""!=t.pwd?t.pwd:$("#iPwd").val(),i=null!=t&&null!=t.type&&""!=t.type?t.type:"";if(BMS.Validate.mob(e)&&"payment"!=pageName)return void BMS.SignIn.fnFBKit("OTPAPP",e);BMS.Misc.fnDoSecureTrans({cmd:"SIGNIN",p1:e,p2:n,blnSupp:!0,fnCC:function(e){BMS.SignIn.fnAfterAuth(e),"logIn"==i?($(".modal .popover._signin-signup-popover-fixed").trigger("signinsignuptracking",["stripsignin"]),BMS.SignIn.pushLoginTypeGA("Loggedin")):($(".modal .popover._signin-signup-popover-fixed").trigger("signinsignuptracking",["stripsignup"]),BMS.SignIn.pushLoginTypeGA("Register"))},fnEC:function(e){BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),BMS.Misc.fnBtnLoading("login-loading-state",!1,"Continue"),BMS.Misc.fnSCusErrDisplay("dSignInErrorPassword",e,"e")}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Signin.fnAuthUser",fnParams:t,err:e})}},BMS.SignIn.fireLoginView=function(){try{$("#iPwd").hide(),$("#eyeViewer").hide(),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_allpage",tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),product:"login",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",pagetype:"login",pageurl:window.location.href,user_mode:"guest",app_code:"web",experiment:"",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",error_message:"",login_type:"mobile_OTP_login"});var e=new Date,t={session_id:BMS.Storage.get({name:"mqttsid"}),product:"login",screen_name:"login",event_name:"login_viewed",event_type:"screen_view",experiment:"",timestamp:e.toISOString()};t=$.extend({},t,BMS.Analytics.commonClickStreamParams()),-1<window.navigator.userAgent.indexOf("Edge/")&&$("#lblPlaceHolder").hide()}catch(e){BMS.Misc.fnErr({fnName:"fireLoginView",err:e})}},BMS.SignIn.fnAfterAuth=function(t){try{var e=e||[];e.push(["uid",BMS.Misc.fnGVal({key:"MEMBERID",data:t})]),e.push(["email",BMS.Misc.fnGVal({key:"MEMBEREMAIL",data:t})]),"undefined"!=typeof wzrk_push&&wzrk_push(e),"undefined"!=typeof _kmq&&_kmq.push(["identify",BMS.Misc.fnGVal({key:"MEMBEREMAIL",data:t})]),BMS.Storage.set({name:"kmqIdentity",value:BMS.Misc.fnGVal({key:"MEMBEREMAIL",data:t}),sess:!1,expires:"Thu, 31 Dec 2099 23:59:59 GMT",storage:"C"}),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"loggedin",tvc_userid:BMS.Misc.fnGVal({key:"MEMBERID",data:t})}),t=unescape(t);var n=BMS.Misc.fnGVal({key:"MEMBEREMAIL",data:t}),i=BMS.Misc.fnGVal({key:"EXPIRY",data:t}),a=BMS.Misc.fnGVal({key:"SHOWLINKINGSCREEN",data:t}),o=BMS.Misc.fnGVal({key:"STATUS",data:t});"in.bms.bz"==location.host||"in.bookmyshow.com"==location.host?(BMS.Storage.set({name:"ld",value:t,storage:"C",secure:!0,sess:!1,expires:new Date(i).toGMTString()}),BMS.Storage.set({name:"userCine",value:BMS.Misc.fnGVal({key:"FAV",data:t}),key:"fav",storage:"C",secure:!0}),BMS.Storage.set({name:"ld",value:BMS.Misc.fnGVal({key:"NAME",data:t}),key:"FIRSTNAME",storage:"C",secure:!0}),BMS.Storage.set({name:"ld",key:"LASTLOGIN",value:(new Date).toISOString(),storage:"C",secure:!0,sess:!1,expires:new Date(i).toGMTString()})):(BMS.Storage.set({name:"le",value:n,storage:"C",sess:!1,expires:new Date(i).toGMTString()}),BMS.Storage.set({name:"ld",value:t,storage:"C",sess:!1,expires:new Date(i).toGMTString()}),BMS.Storage.set({name:"userCine",value:BMS.Misc.fnGVal({key:"FAV",data:t}),key:"fav",storage:"C"}),BMS.Storage.set({name:"ld",value:BMS.Misc.fnGVal({key:"NAME",data:t}),key:"FIRSTNAME",storage:"C"}),BMS.Storage.set({name:"ld",key:"LASTLOGIN",value:(new Date).toISOString(),storage:"C",sess:!1,expires:new Date(i).toGMTString()})),$("#emailVerified").hide(),$("#mobileVerified").hide(),$("#signInUName .__email").hide(),$("#signInUName .__mobile").hide(),BMS.SignIn.fnGUserImage(),BMS.SignIn.fnLoginPushCT(),BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),BMS.Modal.currentModal&&BMS.Modal.currentModal.hasClass("_signin-signup-popover-fixed")?($("body").css("top","auto"),$(document).scrollTop(0),$("#signinPopupFixed").hide(),$(".modal.popovers-modal .__overlay-scroll-signin").fadeOut()):$("#signinPopupFixed").is(":visible")&&global.blnIsTouchScreen&&($("#signinPopupFixed").hide(),$(".modal.popovers-modal .__overlay-scroll-signin").fadeOut()),BMS.Misc.modal("signinPopup",!1);var s=""!=BMS.Misc.fnGVal({key:"NAME",data:BMS.Storage.get({name:"ld"})})?BMS.Misc.fnGVal({key:"NAME",data:BMS.Storage.get({name:"ld"})}):"Guest";$("#dAfterSignInSuccess #spnUName").html(s),$("#profileNameId, .profile-user-name").text(s),setTimeout((function(){if(BMS.SignIn.fnClose({callBack:!0}),"Y"==a&&BMS.SignIn.fnShowRelProfile(),"S"==o){if("undefined"!=typeof pageName&&"payment"!=pageName){BMS.Misc.modal("verifyAcc",!0),$(".social-links div").addClass("disable"),info=$.parseJSON(BMS.Misc.fnGVal({key:"SUSPENDEDINFO",data:t}).replace(/\\/g,"")),liInfo="";for(var e=0;e<info.length;e++)liInfo+="<li>"+info[e].q+"</li>",liInfo+="<li>"+info[e].a+"</li>";$("#SusInfo").html(liInfo)}BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event_type:"page_view",pageurl:window.location.href,tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),user_mode:"logged_in",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"text",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",source:"",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),experiment:"",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web",product:"otp_login",pagetype:"reverify_mobile_number"})}}),1e3),-1==location.pathname.search("mami")&&"/api/fb-chatbot/signup.bms"!=location.pathname||location.reload()}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnAfterAuth",err:e})}},BMS.SignIn.fnSetUserProfileState=function(){try{BMS.SignIn.fnHideGuestProfileState(),BMS.SignIn.fnShowNormalProfileState(),BMS.SignIn.fnUnlockMenuItems(),BMS.Misc.fnAjax({url:"/serv/getData",data:{cmd:"UAPIPROFILE",date:Date.now()},success:function(e){if(!(null!=e&&""!=e&&0<Object.keys(e).length))throw e;if(null!=e.profile&&0<Object.keys(e.profile).length){var t=e.profile.FIRSTNAME+" "+e.profile.LASTNAME;$("#profileNameId, .profile-user-name").text(" "!=t?t:"Guest")}null!=e.superstar&&0<Object.keys(e.superstar).length&&e.superstar.showSuperstarWidget&&(BMS.SignIn.fnRenderBenefitsLabel(e.superstar.superstarBenefitsLabel,e.superstar.url),e.superstar.showSuperStarProgress?BMS.SignIn.fnGenerateProgressBar(e.superstar):e.superstar.isSuperstar&&BMS.SignIn.fnShowSuperstarState(e.superstar.superstarHeader,e.superstar.totalTransactions),BMS.SignIn.fnShowProfileWidget())},error:function(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnSetUserProfileState",fnParams:"",err:e})}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnSetUserProfileState",fnParams:"",err:e})}},BMS.SignIn.fnGenerateProgressBar=function(e){try{for(var t=e.transactionsNeeded,n=e.transactionsDone,i=1/t-.01,a="",o=BMS.SignIn.fnGenerateMessage(e.message),s=$("#progress-bar-template").html(),r=0;r<t;r++){var l=!1;r<n&&(l=!0),a+=BMS.Misc.Helpers.render(s,{flexValue:i,activeClass:l?"active":""})}$(".profile-progress-bar").html(a),$(".profile-progress-information").html(o),BMS.SignIn.fnShowProfileProgressBar()}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnGenerateProgressBar",fnParams:"",err:e})}},BMS.SignIn.fnGenerateMessage=function(e){try{var t="";return e.forEach((function(e){t+="<div class='message-paragraph'>",e.items.forEach((function(e){"IMAGE"==e.type?t+="<img class='message-image' src='"+e.image.url+"'/>":"TEXT"==e.type&&(t+="<div class='message-text' style='color:"+e.text.fontColor+"; background-color:"+e.text.bgColor+"'>"+e.text.content+"</div>")})),t+="</div>"})),t}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnGenerateMessage",fnParams:"",err:e})}},BMS.SignIn.fnRenderBenefitsLabel=function(e,t){try{var n=BMS.SignIn.fnGenerateMessage(e);$(".profile-extra-info").click((function(){BMS.SignIn.fnNavigateToUrl(t)})),$(".profile-extra-text").html(n)}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnRenderBenefitsLabel",fnParams:"",err:e})}},BMS.SignIn.fnHideGuestProfileState=function(){$(".profile-guest").hide()},BMS.SignIn.fnShowGuestProfileState=function(){$(".profile-guest").css("display","flex")},BMS.SignIn.fnHideNormalProfileState=function(){$(".profile-user").hide()},BMS.SignIn.fnShowNormalProfileState=function(){$(".profile-user").css("display","flex")},BMS.SignIn.fnShowProfileWidget=function(){$(".profile-progress-wrapper").css("display","flex")},BMS.SignIn.fnHideProfileWidget=function(){$(".profile-progress-wrapper").hide()},BMS.SignIn.fnShowProfileProgressBar=function(){$(".profile-progress-container").css("display","flex")},BMS.SignIn.fnHideProfileProgressBar=function(){$(".profile-progress-container").hide()},BMS.SignIn.fnNavigateToUrl=function(e){window.location.href=e},BMS.SignIn.fnUnlockMenuItems=function(){$(".list-element.locked").removeClass("locked")},BMS.SignIn.fnLockMenuItems=function(){$("[user-login-locked]").addClass("locked")},BMS.SignIn.fnCalculateMenuItemsHeight=function(){var e=$(".profile-sidebar-wrapper").height()+$(".sign-out-btn").height()+32;$("#sidebar-menu-items").css("height","100%").css("height","-="+e)},BMS.SignIn.fnShowSuperstarState=function(e,t){var n=BMS.SignIn.fnGenerateMessage(e),i=BMS.SignIn.fnGenerateMessage(t);$(".profile-superstar-header").html(n),$(".profile-superstar-body").html(i),$(".profile-superstar-container").show(),$(".profile-badge").show(),$(".profile-user-text").addClass("superstar"),$(".profile-details-wrapper").css("background-image","url(//in.bmscdn.com/webin/movies/superstar/profile_superstar_bg.png)"),BMS.SignIn.fnCalculateMenuItemsHeight()},BMS.SignIn.fnResetProfileState=function(){BMS.SignIn.fnHideNormalProfileState(),BMS.SignIn.fnShowGuestProfileState(),BMS.SignIn.fnLockMenuItems(),BMS.SignIn.fnHideProfileWidget(),$(".profile-badge").hide(),$(".profile-superstar-container").hide(),$(".profile-user-text").removeClass("superstar"),$(".profile-details-wrapper").css("background-image",""),BMS.SignIn.fnCalculateMenuItemsHeight(),BMS.Notifications.fnCalculateNotificationWrapperHeight()},BMS.SignIn.fnClose=function(t){try{if(t&&1==t.callBack&&null!=global.SignInCallBack&&0<global.SignInCallBack.length)for(var e=0;e<global.SignInCallBack.length;e++)global.SignInCallBack[e].apply();BMS.SignIn.fnApplyCallbacks(),BMS.Misc.fnGATracker({location:"SignInBox",action:"NoThanks"}),"undefined"!=typeof pageName&&"events"!==pageName&&"plays"!==pageName&&"sports"!==pageName&&"movieclub"!==pageName&&"home"!==pageName&&"movies"!==pageName&&(null!=global.SignInCallBack&&global.SignInCallBack.splice(global.SignInCallBack.length-1,1),null!=global.SignOutCallBack&&global.SignOutCallBack.splice(global.SignOutCallBack.length-1,1))}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnClose",fnParams:t,err:e})}},BMS.SignIn.fnLogOut=function(){try{""!=BMS.Storage.get({name:"fbsr_"+global.fbAppId})&&BMS.Storage.del({name:"fbsr_"+global.fbAppId}),BMS.Misc.fnBusy(!0);var e=BMS.Storage.get({name:"ld",key:"LSID",defVal:""}),t=BMS.Storage.get({name:"ld",key:"SEQUENCE",defVal:""}),n=BMS.Storage.get({name:"ld",key:"MEMBERID",defVal:""});BMS.Misc.fnDoSecureTrans({cmd:"SIGNOUT",p1:n,p2:t,p3:e,blnSupp:!0,fnCC:function(){if("undefined"!=typeof global&&void 0!==global.auth2&&global.auth2.signOut(),BMS.Storage.del({name:"ld"}),BMS.Storage.del({name:"le"}),BMS.Storage.del({name:"lm"}),BMS.Storage.del({name:"wd"}),BMS.Storage.del({name:"isOtpGenerated"}),BMS.Storage.del({name:"PLUSIMAGEURL"}),BMS.Storage.set({name:"userCine",key:"RL",value:"",sess:!1,storage:"C"}),""!=BMS.Storage.get({name:"MEMBERHIS"})&&BMS.Storage.del({name:"MEMBERHIS"}),BMS.Storage.del({name:"orderID"}),BMS.Storage.del({name:"notifyMe"}),null!=global.SignOutCallBack&&0<global.SignOutCallBack.length)for(var e=0;e<global.SignOutCallBack.length;e++)global.SignOutCallBack[e].apply();blnFBAccountKit=!1,"undefined"!=typeof _kmq&&_kmq.push(["clearIdentity"]),BMS.Storage.del({name:"kmqIdentity"}),BMS.Misc.fnBusy(!1),$(".select-overlay").click(),-1!=location.pathname.search("mami")&&location.reload()},fnEC:function(){if("undefined"!=typeof gapi&&void 0!==gapi.auth&&gapi.auth.signOut(),BMS.Storage.del({name:"ld"}),BMS.Storage.del({name:"wd"}),BMS.Storage.del({name:"isOtpGenerated"}),BMS.Storage.del({name:"PLUSIMAGEURL"}),BMS.Storage.del({name:"PROFILEIMAGEURL"}),BMS.Storage.del({name:"orderID"}),BMS.Storage.del({name:"notifyMe"}),BMS.Storage.set({name:"userCine",key:"RL",value:"",sess:!1,storage:"C"}),""!=BMS.Storage.get({name:"MEMBERHIS"})&&BMS.Storage.del({name:"MEMBERHIS"}),null!=global.SignOutCallBack&&0<global.SignOutCallBack.length)for(var e=0;e<global.SignOutCallBack.length;e++)global.SignOutCallBack[e].apply();blnFBAccountKit=!1,"undefined"!=typeof _kmq&&_kmq.push(["clearIdentity"]),BMS.Storage.del({name:"kmqIdentity"}),BMS.Misc.fnBusy(!1),$(".select-overlay").click(),-1!=location.pathname.search("mami")&&location.reload()}}),$("#loggedInImg, #loggedInImgProfile").attr("src",""),$("#signInUName strong").html(""),$("#preSignIn").parent().removeClass("_logged"),$("#postSignIn, #myWallet, #signOut, #post-Memberinfo, #postProfileImg").hide(),$("#myProfile").attr("data-id","preLogin"),$("#preSignIn, #preLogin, #pre-Memberinfo, #preProfileImg").show(),$("#iUserName").val(""),$("#iPwd").val(""),$("#iRegUserEmail").val(""),"payment"!=pageName&&$("#iPwd").hide(),$("#eyeViewer").hide(),$("#listVerifiedMobile").hide(),BMS.SignIn.fnResetProfileState()}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnLogOut",fnParams:arguments,err:e})}},BMS.SignIn.fnResetPwd=function(){try{var t=$("#iForgotEmail"),n=$("#dForgotError");if(""==t.val())return BMS.Misc.fnSCusErrDisplay("dForgotError","Please enter your email address to reset your password","e"),t.addClass("_error").focus(),void("block"==n.css("display")&&t.is(":focus")&&(t.keypress((function(){n.hide(),t.removeClass("_error")})),$(document).keyup((function(e){27==e.keyCode&&(n.hide(),t.val="",t.removeClass("_error"))}))));if(!BMS.Validate.email(t.val()))return BMS.Misc.fnSCusErrDisplay("dForgotError","Please enter a valid email address","e"),t.addClass("_error").focus(),void("block"==n.css("display")&&t.is(":focus")&&(t.keypress((function(){n.hide(),t.removeClass("_error")})),$(document).keyup((function(e){27==e.keyCode&&(n.hide(),t.val="",t.removeClass("_error"))}))));BMS.Misc.fnBusy(!0,BMS.Modal.currentModal),BMS.Misc.fnDoSecureTrans({cmd:"SENDRESETPASSWORDURL",p1:t.val(),blnSupp:!0,fnCC:function(){BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),BMS.Misc.fnSCusErrDisplay("dForgotError","Password reset link is emailed successfully","s")},fnEC:function(e){BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),BMS.Misc.fnSCusErrDisplay("dForgotError",e,"e")}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnResetPwd",err:e})}},BMS.SignIn.fnFbWrapper=function(){try{return BMS.Misc.fnBusy(!0,BMS.Modal.currentModal),BMS.SignIn.fnFbLogin(),void(null!=BMS.Modal.currentModal&&"signinPopup"==BMS.Modal.currentModal[0].id?BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_gtmstdevent",eventCategory:"login_clicked",eventAction:"click",eventLabel:"",event_type:"click",user_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),pagetype:"login",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",product:"otp_login",event_level:"major",experiement:"",model_tags:"",login_type:"social_connect_fb",pageurl:window.location.href,user_mode:"guest",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"}):null!=BMS.Modal.currentModal&&"signupPopup"==BMS.Modal.currentModal[0].id&&BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_gtmstdevent",eventCategory:"signup",eventAction:"click",eventLabel:"",event_type:"click",user_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),pagetype:"signup",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",product:"otp_login",event_level:"major",experiement:"",model_tags:"",login_type:"social_connect_fb",pageurl:window.location.href,user_mode:"guest",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnFbWrapper",fnParams:arguments,err:e})}},BMS.SignIn.fnGPlusWrapper=function(){try{signInModalRestore(),BMS.Misc.fnBusy(!0,BMS.Modal.currentModal),BMS.SignIn.fnGoogleSignIn(),null!=BMS.Modal.currentModal&&"signinPopup"==BMS.Modal.currentModal[0].id?BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_gtmstdevent",eventCategory:"login_clicked",eventAction:"click",eventLabel:"",event_type:"click",user_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),pagetype:"login",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",product:"otp_login",event_level:"major",experiement:"",model_tags:"",login_type:"social_connect_g+",pageurl:window.location.href,user_mode:"guest",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"}):null!=BMS.Modal.currentModal&&"signupPopup"==BMS.Modal.currentModal[0].id&&BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_gtmstdevent",eventCategory:"signup",eventAction:"click",eventLabel:"",event_type:"click",user_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),pagetype:"signup",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",product:"otp_login",event_level:"major",experiement:"",model_tags:"",login_type:"social_connect_g+",pageurl:window.location.href,user_mode:"guest",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnGPlusLogin",err:e})}},BMS.SignIn.fnValRes=function(){try{var e=$("#iResendConfEmail"),t=$("#iResendConfMobile");if(""==e.val())return BMS.Misc.ErrDisplay("errDivFRGEmail","Please enter an email address","e"),e.addClass("_error").focus(),$("#iResendConfEmail").focus(),void BMS.SignIn.fnValErrorCheck("errDivFRGParent","iResendConfEmail","iResendConfMobile","errDivFRGEmail");if(!BMS.Validate.email(e.val()))return BMS.Misc.ErrDisplay("errDivFRGEmail","Please enter a valid email address","e"),e.addClass("_error").focus(),$("#iResendConfEmail").focus(),void BMS.SignIn.fnValErrorCheck("errDivFRGParent","iResendConfEmail","iResendConfMobile","errDivFRGEmail");if(""==t.val())return BMS.Misc.ErrDisplay("errDivFRGMobile","Please enter a mobile number","e"),t.addClass("_error").focus(),$("#iResendConfMobile").focus(),void BMS.SignIn.fnValErrorCheck("errDivFRGParent","iResendConfEmail","iResendConfMobile","errDivFRGMobile");if(!BMS.Validate.mob(t.val()))return BMS.Misc.ErrDisplay("errDivFRGMobile","Please enter a valid mobile number","e"),t.addClass("_error").focus(),$("#iResendConfMobile").focus(),void BMS.SignIn.fnValErrorCheck("errDivFRGParent","iResendConfEmail","iResendConfMobile","errDivFRGMobile");if(t.val().length<10)return BMS.Misc.ErrDisplay("errDivFRGMobile","Please enter a valid mobile number","e"),t.addClass("_error").focus(),$("#iResendConfMobile").focus(),void BMS.SignIn.fnValErrorCheck("errDivFRGParent","iResendConfEmail","iResendConfMobile","errDivFRGMobile");$("#iResendConfEmail, #iResendConfMobile").attr("disabled","disabled"),$("#btnRes").hide(),$("#btndisab").show(),BMS.Misc.fnDoTrans({cmd:"RESENDCONFIRMATIONMAIL",p2:e.val(),p3:t.val(),fnCC:BMS.SignIn.fnResendSuc,fnEC:BMS.SignIn.fnResendFail,blnSupp:!0})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnValRes",err:e})}},BMS.SignIn.fnResendSuc=function(t){try{$("#btnRes").show(),$("#btndisab").hide(),$("iResendConfEmail").val(""),$("iResendConfMobile").val(""),$("#iResendConfEmail, #iResendConfMobile").removeAttr("disabled"),$("#errDivFRG").addClass("_success"),$("#resendCofirmationPopup").show(),$("#iResendConfEmail,#iResendConfMobile").val(""),$("#resendCofirmationPopup").addClass("animateTop"),$(".popup-overlay").fadeIn(200),$(".main").addClass("make-blur"),$("body").addClass("_fixed"),BMS.Misc.ErrDisplay("errDivFRGMobile","Confirmation sent successfully!","")}catch(e){fnErr({fnName:"BMS.SignIn.fnResendSuc",fnParams:t,err:e})}},BMS.SignIn.fnResendFail=function(t){try{$("#btnRes").show(),$("#btndisab").hide(),$("#iResendConfEmail, #iResendConfMobile").removeAttr("disabled"),$("#resendCofirmationPopup").show(),$("#iResendConfEmail,#iResendConfMobile").val(""),$("#resendCofirmationPopup").addClass("animateTop"),$(".popup-overlay").fadeIn(200),$(".main").addClass("make-blur"),$("body").addClass("_fixed"),""!=t&&null!=t?BMS.Misc.ErrDisplay("errDivFRGMobile",t,"e"):BMS.Misc.ErrDisplay("errDivFRGMobile","Sorry, something went wrong here. Try again after some time! .","e")}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnResendFail",fnParams:t,err:e})}},BMS.SignIn.fnDoSubMailErrorCheck=function(e,t,n){var i=$("#"+e).find("#"+t),a=$("#"+n);"block"==a.css("display")&&i.is(":focus")&&(i.keypress((function(){a.hide(),i.removeClass("_error")})),$(document).keyup((function(e){27==e.keyCode&&(a.hide(),i.removeClass("_error"),i.val="")})))},BMS.SignIn.fnDoSubMail=function(){try{var t=$("#subEmailmob"),e="",n="";if(""==t.val())return BMS.Misc.ErrDisplay("errDivSUB","Please enter a valid mobile number or email address","e"),t.addClass("_error").focus(),void BMS.SignIn.fnDoSubMailErrorCheck("subEmailmobParent","subEmailmob","errDivSUB");if(t.val($.trim(t.val()).replace(/[ ]+/gi,"")),isNaN(t.val())){if(e="|EMAIL="+t.val()+"|",!BMS.Validate.email(t.val()))return BMS.Misc.ErrDisplay("errDivSUB","Please enter a valid email address","e"),t.addClass("_error").focus(),void BMS.SignIn.fnDoSubMailErrorCheck("subEmailmobParent","subEmailmob","errDivSUB");n="EMAIL"}else{if(e="|MOBILENO="+t.val()+"|",!BMS.Validate.mob(t.val()))return BMS.Misc.ErrDisplay("errDivSUB","Please enter a valid mobile number","e"),t.addClass("_error").focus(),void BMS.SignIn.fnDoSubMailErrorCheck("subEmailmobParent","subEmailmob","errDivSUB");n="MOBILE"}BMS.Misc.fnBusy(!0),BMS.Misc.fnDoTrans({cmd:"SETPROFILE",p1:"NEWSLETTER",p2:"0",p10:e,fnCC:function(e){BMS.Misc.modal("subscribeNewsletters",!1),$("#popover-rating-msg").html("Thank you for registering. Look forward to your weekly alerts!"),BMS.Misc.modal("review-rating-response",!0),"EMAIL"==n?BMS.Storage.set({name:"EMAILSUBSCRIPTION",value:"Y",storage:"C"}):"MOBILE"==n&&0<$("#MOBSUBY").length&&t.val()==$("#acntDtls #mobile").val()&&BMS.Storage.set({name:"MOBILESUBSCRIPTION",value:"Y",storage:"C"}),t.val(""),BMS.Misc.fnBusy(!1)},fnEC:function(e){BMS.Misc.fnBusy(!1)}})}catch(e){BMS.Misc.fnErr({fnName:"fnDoSubMail",fnParams:arguments,err:e})}},BMS.Misc.ErrDisplay=function(t,n,i){try{$("#"+t).text(n),$("#"+t).show()}catch(e){BMS.Misc.fnErr({fnName:"BMs.Misc.fnSCusErrDisplay",fnParams:t+", "+n+", "+i,err:e})}},BMS.SignIn.fnGUserImage=function(){try{if(BMS.Storage.isset({name:"ld"})){var e="Y"==BMS.Storage.get({name:"ld",key:"ISFCONNECTLOGIN"}),t="Y"==BMS.Storage.get({name:"ld",key:"ISPLUSLOGIN"}),r={};r=e?{SOCIALID:"FB"}:t?{SOCIALID:"PLUS"}:{SOCIALID:"EMAIL"},BMS.Misc.fnGetUserImage(r,(function(e,t){try{var n=BMS.Storage.get({name:"ld",key:"FIRSTNAME"}),i=BMS.Storage.get({name:"ld",key:"LASTNAME"}),a=BMS.Storage.get({name:"ld",key:"MEMBEREMAIL"}),o=BMS.Storage.get({name:"ld",key:"MOBILE"}),s=n+" "+i;s=""!=s.trim()?s:"Guest",$("#loggedInImg, #loggedInImgProfile").attr("src",e),$("#signInUName strong").text(s),$(".__mobile").contents().filter((function(){return 3===this.nodeType})).remove(),$(".__email").contents().filter((function(){return 3===this.nodeType})).remove(),""!=a&&(13<a.substring(0,a.indexOf("@")).length&&(a=a.substring(0,14),a+="...."),$("#signInUName .__email span").before(a),$("#signInUName .__email").show()),""!=o&&($("#signInUName .__mobile span").before(o),$("#signInUName .__mobile").show()),"Y"==BMS.Storage.get({name:"ld",key:"EMAILVERIFIED"})&&$("#emailVerified").css("display","inline-block"),"Y"==BMS.Storage.get({name:"ld",key:"OTPMOBVERIFIED"})&&""!=BMS.Storage.get({name:"ld",key:"MOBILE"})?($("#mobileVerified").css("display","inline-block"),$("#listVerifiedMobile").hide()):"N"==BMS.Storage.get({name:"ld",key:"OTPMOBVERIFIED"})&&""!=BMS.Storage.get({name:"ld",key:"MOBILE"})&&$("#listVerifiedMobile").show(),"undefined"!=typeof pageName&&-1!=["myprofile","booking-history","myexperinces","rewards"].indexOf(pageName)&&(BMS.SignIn.UserInfo={strLoginType:r.SOCIALID,strImageURL:e,canDelete:t},profile.fnFillMemberDetails()),$("#preSignIn").is(":visible")&&BMS.Storage.isset({name:"ld"})&&($("#preSignIn").parent().addClass("_logged"),$("#preSignIn, #preLogin, #pre-Memberinfo, #preProfileImg").hide(),$("#myProfile").attr("data-id","postSignIn"),$("#postSignIn").css("display","block"),$("#myWallet, #post-Memberinfo, #postProfileImg").show(),$("#signOut").css("display","flex"))}catch(e){void 0}})),BMS.SignIn.fnSetUserProfileState()}}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnCheckLogin",fnParams:strData,err:e})}},BMS.SignIn.fnSignIn=function(t){try{t?(""!=$("#dSignInErrorEmail").text()&&$("#dSignInErrorEmail").text("").hide(),""!=$("#dSignInErrorPassword").text()&&$("#dSignInErrorPassword").text("").hide(),BMS.Misc.modal("signinPopup",!0)):BMS.Misc.modal("signinPopup",!1)}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnSignIn",fnParams:t,err:e})}},BMS.SignIn.fnRegister=function(t,e){try{BMS.SignIn.CallBackArray[t]=e}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnRegister",fnParams:t,err:e})}},BMS.SignIn.fnUnregister=function(t){try{-1!=Object.keys(BMS.SignIn.CallBackArray).indexOf(t)&&delete BMS.SignIn.CallBackArray[t]}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnRegister",fnParams:t,err:e})}},BMS.SignIn.fnApplyCallbacks=function(){try{0<Object.keys(BMS.SignIn.CallBackArray).length&&$.each(BMS.SignIn.CallBackArray,(function(e,t){t.apply()}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnApplyCallbacks",err:e})}},BMS.SignIn.fnReloadBookingFlowsAfterAuth=function(){try{!pageName||"bookticket"!=pageName&&"cinema"!=pageName&&"buytickets"!=pageName||(BMS.Misc.fnBusy(!0),location.reload())}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnReloadBookingFlowsAfterAuth",err:e})}},BMS.SignIn.fnResetPassword=function(){try{var e=$.trim($("#npwd").val()),t=$.trim($("#cnpwd").val());if(""==e)return BMS.Misc.fnSCusErrDisplay("RP_Err","Please Enter a Password.","e"),void $("#npwd").focus();if(e.toLowerCase()==$.trim($("#npwd").attr("placeholder")).toLowerCase())return BMS.Misc.fnSCusErrDisplay("RP_Err","Please Enter a valid Password.","e"),void $("#npwd").focus();if(""==t)return BMS.Misc.fnSCusErrDisplay("RP_Err","Please Enter a Confirm Password.","e"),void $("#cnpwd").focus();if(t.toLowerCase()==$.trim($("#cnpwd").attr("placeholder")).toLowerCase())return BMS.Misc.fnSCusErrDisplay("RP_Err","Please Enter a valid Confirm Password.","e"),void $("#cnpwd").focus();if($.trim(e.toLowerCase())!=$.trim(t.toLowerCase()))return void BMS.Misc.fnSCusErrDisplay("RP_Err","New Password and Confirm New Password doesn't match.","e");BMS.Misc.fnBusy(!0,$resendTabs),BMS.Misc.fnDoSecureTrans({cmd:"RESETPASSWORD",p1:rstPwdData,p2:e,p3:"|AUTOLOGIN="+autoLogin+"|",blnSupp:!0,fnCC:function(e){BMS.Misc.fnBusy(!1,$resendTabs),$("#npwd").val(""),$("#cnpwd").val(""),"Y"==autoLogin?(BMS.SignIn.fnAfterAuth(e),BMS.Misc.fnSCusErrDisplay("RP_Err","Your password has been successfully updated and you have been logged in.",""),window.location.href="/myprofile/"):BMS.Misc.fnSCusErrDisplay("RP_Err","Your password has been successfully updated.","")},fnEC:function(e){BMS.Misc.fnBusy(!1,$resendTabs),$("#npwd").val(""),$("#cnpwd").val(""),BMS.Misc.fnSCusErrDisplay("RP_Err",unescape(e),"e")}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnResetPassword",err:e})}},BMS.SignIn.fnDeactivateAccnt=function(){try{BMS.Misc.fnBusy(!0);var e=BMS.Storage.get({name:"ld",key:"MEMBEREMAIL"}),t=BMS.Storage.get({name:"ld",key:"MEMBERID"}),n=BMS.Storage.get({name:"ld",key:"LSID"});BMS.Misc.fnDoSecureTrans({cmd:"DEACTIVATEMEMBER",p1:t,p2:e,p3:n,blnSupp:!0,fnCC:function(){if(BMS.Storage.del({name:"ld"}),null!=global.SignOutCallBack&&0<global.SignOutCallBack.length)for(var e=0;e<global.SignOutCallBack.length;e++)global.SignOutCallBack[e].apply()},fnEC:function(){if(BMS.Storage.del({name:"ld"}),null!=global.SignOutCallBack&&0<global.SignOutCallBack.length)for(var e=0;e<global.SignOutCallBack.length;e++)global.SignOutCallBack[e].apply()}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnDeactivateAccnt",err:e})}},$(document).ready((function(){BMS.SignIn.fnGUserImage(),$("#iUserName, #iPwd").doEnter({callback:BMS.SignIn.fnValLogIn}),$("#iRegCnfPwd, #iRegUserEmail, #iRegPwd").doEnter({callback:BMS.SignIn.fnRegUser}),$("#iForgotEmail").doEnter({callback:BMS.SignIn.fnResetPwd}),$("#linkPwd,#iPwdsuperstart").doEnter({callback:BMS.SignIn.fnLinkAuthUser}),$("#susProfileLink").doEnter({callback:BMS.SignIn.fnVerifyAcc}),$("#upWalletInput").doEnter({callback:BMS.SignIn.fnSuspendedUpdateMobile}),hideSignInOnUserLoginPage(),BMS.Misc.fnGetSocialKeys(),BMS.Storage.isset({name:"ld"})&&"undefined"!=typeof pageName&&"payment"!=pageName&&"Y"==BMS.Storage.get({name:"superstarProfile"})&&"Y"!=BMS.Storage.get({name:"ld",key:"ACCOUNTLINKED"})&&(BMS.SignIn.fnLogOut(),BMS.Storage.del({name:"ld"}),$("#preSignIn").show(),$("#postSignIn").hide(),BMS.Storage.del({name:"superstarProfile"})),"S"==BMS.Storage.get({name:"ld",key:"STATUS"})&&(BMS.SignIn.fnLogOut(),BMS.Storage.del({name:"IsSusPendedStatus"}),BMS.Storage.del({name:"ld"}),$("#preSignIn").show(),$("#postSignIn").hide()),"undefined"!=typeof pageName&&"payment"!=pageName&&($("#iUserName").on("keyup input change paste",(function(){BMS.SignIn.validateUserLoginInput()})),$("#iPwd").on("keyup input change paste",(function(){BMS.SignIn.validateUserLoginInput()})),$("#iRegUserEmail").on("keyup input change paste",(function(){BMS.SignIn.validateUserSignUpInput()}))),"undefined"!=typeof global&&(global.SignOutCallBack.push(BMS.SignIn.fnReloadBookingFlowsAfterAuth),global.SignInCallBack.push(BMS.SignIn.fnReloadBookingFlowsAfterAuth))})),BMS.SignIn.fnLoginPushCT=function(){try{var e=""!=BMS.Misc.fnGVal({key:"NAME",data:BMS.Storage.get({name:"ld"})})?BMS.Misc.fnGVal({key:"NAME",data:BMS.Storage.get({name:"ld"})}):"",t=""!=BMS.Misc.fnGVal({key:"MEMBERID",data:BMS.Storage.get({name:"ld"})})?BMS.Misc.fnGVal({key:"MEMBERID",data:BMS.Storage.get({name:"ld"})}):"",n=""!=BMS.Misc.fnGVal({key:"MEMBEREMAIL",data:BMS.Storage.get({name:"ld"})})?BMS.Misc.fnGVal({key:"MEMBEREMAIL",data:BMS.Storage.get({name:"ld"})}):"",i=""!=BMS.Misc.fnGVal({key:"MOBILE",data:BMS.Storage.get({name:"ld"})})?BMS.Misc.fnGVal({key:"MOBILE",data:BMS.Storage.get({name:"ld"})}):"",a=""!=BMS.Misc.fnGVal({key:"GENDER",data:BMS.Storage.get({name:"ld"})})?BMS.Misc.fnGVal({key:"GENDER",data:BMS.Storage.get({name:"ld"})}):"",o=""!=BMS.Misc.fnGVal({key:"MARITALSTATUS",data:BMS.Storage.get({name:"ld"})})?BMS.Misc.fnGVal({key:"MARITALSTATUS",data:BMS.Storage.get({name:"ld"})}):"",s=new Date(""!=BMS.Misc.fnGVal({key:"DOB",data:BMS.Storage.get({name:"ld"})})?BMS.Misc.fnGVal({key:"DOB",data:BMS.Storage.get({name:"ld"})}):"");BMS.Misc.fnPushLoginAnalytics({Name:e,Identity:t,Email:n,Phone:"+91"+i,Gender:a,Married:o,DOB:s})}catch(e){void 0}},BMS.Misc.fnPushLoginAnalytics=function(e){try{clevertap.onUserLogin.push({Site:e})}catch(e){BMS.Misc.fnErr({fnName:"signin.js - fnPushLoginAnalytics",fnParams:arguments,err:e})}},BMS.SignIn.fnShowRelProfile=function(){try{BMS.Misc.fnBusy(!0);var e=BMS.Storage.get({name:"ld",key:"LSID",defVal:""}),t=BMS.Storage.get({name:"ld",key:"MOBILE",defVal:""}),n=BMS.Storage.get({name:"ld",key:"MEMBERID",defVal:""});StrShowRelParam='{"PhoneNo":"'+t+'","LSID":"'+e+'","MemberId":"'+n+'"}',BMS.Misc.fnDoSecureTrans({cmd:"SHOWSERVICES",p1:StrShowRelParam,blnSupp:!0,fnCC:function(e){0==e.length&&"myprofile"==pageName&&location.reload(),BMS.Misc.fnBusy(!1),StrShowRelResponce=$.parseJSON(e),StrShowRelResponce.showSkippedButton?(BMS.Misc.modal("linkPopup",!0),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event_type:"page_view",pageurl:"undefined"!=typeof pageName?pageName:"",tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),user_mode:"logged_in",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",source:"",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),experiment:"",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web",product:"otp_login",pagetype:"merge_profile_confirmation"})):(cnt=3,BMS.Misc.modal("superstarSigninPopup",!0),StrShowRelResponce.hasFBEmail||(cnt--,$(".LinkFBSoc").hide()),StrShowRelResponce.hasPlusEmail||(cnt--,$(".LinkGPSoc").hide()),$("#iPwdsuperstart").val(""),StrShowRelResponce.hasBMSEmail||$(".forgot-password,#iPwdsuperstart,.LinkBMSProf,.or-divider,#SupViewer").hide(),1==cnt&&$(".or-divider").hide(),BMS.Storage.set({name:"superstarProfile",value:"Y",storage:"C"}),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event_type:"page_view",pageurl:window.location.href,tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),user_mode:"logged_in",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",source:"",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),experiment:"",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web",product:"otp_login",pagetype:"merge_profile_validation"})),$(".linkEmail").text(StrShowRelResponce.emailId),$(".linkMobile").text(StrShowRelResponce.mobileNo),info=$.parseJSON(StrShowRelResponce.showServicesInfo.replace(/\\/g,"")),liInfo="";for(var t=0;t<info.length;t++)liInfo+="<li class='que'>"+info[t].q+"</li>",liInfo+="<li class='ans'>"+info[t].a+"</li></br>";$(".userInfo").html(liInfo)},fnEC:function(e){BMS.Misc.fnBusy(!1),BMS.Misc.fnGlobalErr({eMess:e,eRFn:"function: BMS.SignIn.fnShowRelProfile"})}}),"undefined"!=typeof pageName&&"myprofile"==pageName&&BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_gtmstdevent",eventCategory:"merge_profile_initiated","event_action ":"linkclick_yes",eventLabel:"",event_type:"click",user_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),event_name:"merge_profile_initiated",pagetype:"user_profile",eventAction:"click",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"text",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",product:"otp_login",event_level:"major",experiment:"",model_tags:"",user_mode:"logged_in",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnShowRelProfile",fnParams:arguments,err:e})}},BMS.SignIn.fnLinkForgotPass=function(t){try{BMS.Misc.fnBusy(!0,BMS.Modal.currentModal),t?$("#dSignSupInErrorPassword .__text").text(""):$("#dLinkSignInErrorPassword .__text").text("");var e=BMS.Storage.get({name:"ld",key:"LSID",defVal:""}),n=BMS.Storage.get({name:"ld",key:"MEMBERID",defVal:""});StrResetPass='{"EmailId":"'+StrShowRelResponce.emailId+'","OTPLSID":"'+e+'","OTPMEMBERID":"'+n+'"}',BMS.Misc.fnDoSecureTrans({cmd:"SENDRESETPASSWORDURL",p1:StrResetPass,blnSupp:!0,fnCC:function(){BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),t?(BMS.Misc.fnSCusErrDisplay("dSignSupInErrorPassword","Password reset link is emailed successfully","s"),setTimeout((function(){BMS.Misc.modal("superstarSigninPopup",!1)}),2e3)):(BMS.Misc.fnSCusErrDisplay("dLinkSignInErrorPassword","Password reset link is emailed successfully","s"),setTimeout((function(){BMS.Misc.modal("linkSigninPopup",!1)}),2e3)),BMS.Storage.del({name:"ld"}),$("#preSignIn").show(),$("#postSignIn").hide()},fnEC:function(e){BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),t?BMS.Misc.fnSCusErrDisplay("dSignSupInErrorPassword",e,"e"):BMS.Misc.fnSCusErrDisplay("dLinkSignInErrorPassword",e,"e")}})}catch(e){void 0}},BMS.SignIn.fnLinkAuthUser=function(){try{var e=StrShowRelResponce.showSkippedButton?$("#linkPwd"):$("#iPwdsuperstart"),t=StrShowRelResponce.showSkippedButton?"dLinkSignInErrorPassword":"dSignSupInErrorPassword";if(""==$.trim(e.val())||"Password"==e.val())return BMS.Misc.fnSCusErrDisplay(t,"Please enter a password","e"),e.addClass("_error").focus(),void setTimeout((function(){$("#"+t).fadeOut()}),2e3);BMS.Misc.fnBusy(!0,BMS.Modal.currentModal),strParam8="|OTPMEMBERID="+BMS.Storage.get({name:"ld",key:"MEMBERID"})+"|OTPLSID="+BMS.Storage.get({name:"ld",key:"LSID"})+"|",BMS.Misc.fnDoSecureTrans({cmd:"SIGNIN",p1:StrShowRelResponce.emailId,p2:e.val(),p8:strParam8,blnSupp:!0,fnCC:function(e){BMS.Misc.modal("skipLinkSuccPopup",!0),BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),setTimeout((function(){BMS.SignIn.fnAfterAuth(e)}),2e3)},fnEC:function(e){BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),StrShowRelResponce.showSkippedButton?BMS.Misc.fnSCusErrDisplay("dLinkSignInErrorPassword",e,"e"):BMS.Misc.fnSCusErrDisplay("dSignSupInErrorPassword",e,"e")}})}catch(e){void 0}},BMS.SignIn.fnSkipLink=function(t){try{if("N"==t)return BMS.Misc.modal("linkPopup",!0),void BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_gtmstdevent",eventCategory:"merge_profile_skipped",eventAction:"click",eventLabel:"",event_type:"click",user_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),event_name:"merge_profile_skipped",event_action:"no",pagetype:"merge_profile_skip",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"text",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",product:"otp_login",event_level:"major",experiment:"",model_tags:"",tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),user_mode:"guest",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"});BMS.Misc.fnBusy(!0);var e=BMS.Storage.get({name:"ld",key:"LSID",defVal:""}),n=BMS.Storage.get({name:"ld",key:"MEMBERID",defVal:""});t=1==$("#chkLinkCondn").prop("checked")&&"Y"==t?"Y":"N",StrShowRelParam='{"memberId":"'+n+'", "LSID":"'+e+'","skipForever":"'+t+'" }',BMS.Misc.fnDoSecureTrans({cmd:"SKIPOTPLINKING",p1:StrShowRelParam,blnSupp:!0,fnCC:function(e){BMS.Misc.fnBusy(!1),"undefined"!=typeof pageName&&"user-login"==pageName?window.location.href="/myprofile/settings":BMS.Misc.modal("skipLinkPopup",!1)},fnEC:function(e){BMS.Misc.fnBusy(!1),BMS.Misc.fnGlobalErr({eMess:e,eRFn:"function: BMS.SignIn.fnLinkAuthUser"})}}),GASkipValue="Y"==t?"skip_forever":"yes",BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_gtmstdevent",eventCategory:"merge_profile_skipped",eventAction:"click",eventLabel:"",event_type:"click",user_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),event_name:"merge_profile_skipped",eventLabel:"",event_action:GASkipValue,pagetype:"merge_profile_skip",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"text",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",product:"otp_login",event_level:"major",experiment:"",model_tags:"",Date_time:"",user_mode:"guest",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnClose",fnParams:t,err:e})}},BMS.SignIn.fnShowlinkPopup=function(e){try{if(e){$("#dLinkSignInErrorPassword").hide(),cnt=3,BMS.Misc.modal("linkSigninPopup",!0),StrShowRelResponce.hasFBEmail||(cnt--,$(".LinkFBSoc").hide()),StrShowRelResponce.hasPlusEmail||(cnt--,$(".LinkGPSoc").hide()),StrShowRelResponce.hasBMSEmail||$(".forgot-password,#linkPwd,.LinkBMSProf,.or-divider,#LinkViewer").hide(),1==cnt&&$(".or-divider").hide(),info=$.parseJSON(StrShowRelResponce.showServicesInfo.replace(/\\/g,"")),liInfo="";for(var t=0;t<info.length;t++)liInfo+="<li class='que'>"+info[t].q+"</li>",liInfo+="<liclass='ans'>"+info[t].a+"</li></br>";$(".userInfo").html(liInfo),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event_type:"page_view",pageurl:window.location.href,tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),user_mode:"logged_in",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",source:"",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),experiment:"",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web",product:"otp_login",pagetype:"merge_profile_validation"}),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_gtmstdevent",eventCategory:"merge_profile",eventAction:"click",eventLabel:" ",event_type:"click",user_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),pagetype:"merge_profile_confirmation",event_action:"yes",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:" ",product:"otp_login",event_level:"major",experiement:" ",model_tags:" ",pageurl:window.location.href,user_mode:"logged_in",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"})}else BMS.Misc.modal("skipLinkPopup",!0),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event_type:"page_view",pageurl:window.location.href,tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),user_mode:"logged_in",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",source:"",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),experiment:"",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web",product:"otp_login",pagetype:"merge_profile_skip"}),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_gtmstdevent",eventCategory:"merge_profile",eventAction:"click",eventLabel:" ",event_type:"click",user_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),pagetype:"merge_profile_confirmation",event_action:"no",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:" ",product:"otp_login",event_level:"major",experiement:" ",model_tags:" ",pageurl:window.location.href,user_mode:"logged_in",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnShowlinkPopup",fnParams:arguments,err:e})}},BMS.SignIn.fnSocialWrapper=function(e){try{"FB"==e?(BMS.Misc.fnBusy(!0,BMS.Modal.currentModal),BMS.SignIn.fnFbLogin(),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_gtmstdevent",eventCategory:"existing_profile_validated",eventAction:"click",eventLabel:"",event_type:"click",user_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),pagetype:"merge_profile_validation",login_type:"social_connect_fb",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",product:"otp_login",event_level:"major",experiement:"",model_tags:"",pageurl:window.location.href,user_mode:"guest",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"})):(signInModalRestore(),BMS.Misc.fnBusy(!0,BMS.Modal.currentModal),BMS.SignIn.fnGoogleSignIn(),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_gtmstdevent",eventCategory:"existing_profile_validated",eventAction:"click",eventLabel:"",event_type:"click",user_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),pagetype:"merge_profile_validation",Login_type:"social_connect_g+",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"text",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",product:"otp_login",event_level:"major",experiement:"",model_tags:"",pageurl:window.location.href,user_mode:"guest",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"})),BMS.Storage.set({name:"SINGINLINK",value:"Y",storage:"C"})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnFbWrapper",fnParams:arguments,err:e})}},BMS.SignIn.validateVerifyAcc=function(e){try{if(-1!==$.inArray(e.keyCode,[46,8,9,27,110,190])||65===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||35<=e.keyCode&&e.keyCode<=40)return void $(".social-links div").addClass("disable");(e.shiftKey||e.keyCode<48||57<e.keyCode)&&(e.keyCode<96||105<e.keyCode)&&e.preventDefault();return/^[6789]\d{8}$/.test($("#susProfileLink").val())?void $(".social-links div").removeClass("disable"):(13==e.keyCode&&BMS.SignIn.fnVerifyAcc(),!0)}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.validateVerifyAcc",err:e})}},BMS.SignIn.fnVerifyAcc=function(){try{if(SusoendedmobNo=$("#susProfileLink"),$(".social-links div").hasClass("disable"))return!1;if(BMS.Storage.set({name:"IsSusPendedStatus",value:"N",storage:"S"}),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_gtmstdevent",eventCategory:"mobile_number_updated",eventAction:"click",event_type:"click",eventLabel:"",pagetype:"reverify_mobile_number",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"text",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",product:"otp_login",event_level:"major",experiment:"",model_tags:"",user_mode:"guest",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"}),SusoendedmobNo.val()==BMS.Storage.get({name:"ld",key:"WALLETMOBILENO"}))return void BMS.SignIn.fnCallFBKIT(SusoendedmobNo.val());"N"==BMS.Storage.get({name:"ld",key:"OTPMOBVERIFIED"})&&"A"==BMS.Storage.get({name:"ld",key:"WALLETSTATUS"})?BMS.SignIn.fnSuspendedCreateWalletOtp(SusoendedmobNo.val()):BMS.Misc.fnDoSecureTrans({cmd:"WALLETEXISTS",p1:SusoendedmobNo.val(),blnSupp:!1,fnCC:function(e){IsWalletExt=$.parseJSON(e),"N"==IsWalletExt.wallet?BMS.SignIn.fnCallFBKIT(SusoendedmobNo.val()):BMS.Misc.fnSCusErrDisplay("errDivVerMobile","Another account already exists with this mobile number.","e")},fnEC:function(e){void 0}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnVerifyAcc",fnParams:arguments,err:e})}},BMS.SignIn.fnCallFBKIT=function(t){try{BMS.Misc.fnBusy(!0,BMS.Modal.currentModal),BMS.Misc.fnAjax({url:"/serv/getData",data:{cmd:"APPDETAILS",app:"FBACKIT"},success:function(e){BMS.SignIn.fnFBKit("OTPAPP",t),BMS.Storage.set({name:"IsSusPendedStatus",value:"Y",storage:"S"})},error:function(e){BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),BMS.Misc.fnErr({fnName:"BMS.SignIn.fnRegUser",err:e}),void 0!==window.AccountKit&&(window.AccountKit="undefined"),blnFBAccountKit=!1}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnCallFBKIT",fnParams:param,err:e})}},BMS.SignIn.validateOTPSus=function(e){try{return-1!==$.inArray(e.keyCode,[46,8,9,27,110,190])||65===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||35<=e.keyCode&&e.keyCode<=40?void $(".social-links div").addClass("disable"):((e.shiftKey||e.keyCode<48||57<e.keyCode)&&(e.keyCode<96||105<e.keyCode)&&e.preventDefault(),/^[0-9]{5}$/.test($("#upWalletInput").val())?void $(".social-links div").removeClass("disable"):(13==e.keyCode&&BMS.SignIn.fnSuspendedUpdateMobile(),!0))}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.validateOTPSus",err:e})}},BMS.SignIn.fnSuspendedCreateWalletOtp=function(e){try{setTimeout((function(){BMS.Misc.fnBusy(!0,BMS.Modal.currentModal),BMS.Storage.set({name:"SusNewMobile",value:e,storage:"S"}),BMS.Misc.fnDoSecureTrans({AppC:global.strWltAppCode,cmd:"CREATEWALLETOTP",p1:BMS.Storage.get({name:"ld",key:"MEMBERID",defVal:""}),p2:BMS.Storage.get({name:"ld",key:"LSID",defVal:""}),p3:e,p4:"EDITCUSTOMER",retType:"json",blnSupp:!0,fnCC:function(e){BMS.Misc.modal("updateWallet",!0),$(".social-links div").addClass("disable")},fnEC:function(e){BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),BMS.Misc.fnSCusErrDisplay("errDivVerMobile",e,"e")}})}),2e3)}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnSuspendedCreateWalletOtp",fnParams:param,err:e})}},BMS.SignIn.fnSuspendedUpdateMobile=function(){try{var e=$("#upWalletInput").val();if(/^[0-9]{6}$/.test(e)){var t=BMS.Storage.get({name:"ld",key:"MEMBERID",defVal:""}),n=BMS.Storage.get({name:"ld",key:"LSID",defVal:""}),i=BMS.Storage.get({name:"ld",key:"MEMBEREMAIL",defVal:""}),a=BMS.Storage.get({name:"ld",key:"MOBILE",defVal:""}),o=BMS.Storage.get({name:"SusNewMobile"}),s=BMS.Storage.get({name:"ld",key:"FIRSTNAME",defVal:""}),r=BMS.Storage.get({name:"ld",key:"LASTNAME",defVal:""});BMS.Misc.fnBusy(!0,BMS.Modal.currentModal),BMS.Misc.fnDoSecureTrans({AppC:global.strWltAppCode,cmd:"UPDATEWALLET",p1:t,p2:t,p3:n,p4:i,p5:a,p6:o,p7:s,p8:r,p9:e,blnSupp:!0,fnCC:function(e){BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),BMS.SignIn.fnCallFBKIT(o)},fnEC:function(e){BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),BMS.Misc.fnSCusErrDisplay("errDivUpWalletMobile",e,"e")}})}else BMS.Misc.fnSCusErrDisplay("errDivUpWalletMobile","Please enter a valid otp ","e")}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnSuspendedUpdateMobile",err:e})}},BMS.SignIn.LinkeyeViewer=function(){try{$(".password-field").hasClass("show-password")?($(".password-input").attr("type","text"),$(".password-field").removeClass("show-password")):($(".password-input").attr("type","password"),$(".password-field").addClass("show-password"))}catch(e){BMS.Misc.fnErr({fnName:"LinkeyeViewer",err:e})}},BMS.SignIn.pushLoginTypeGA=function(e){try{BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"tvc_gtmstdevent",eventCategory:"login_clicked",eventAction:"click",eventLabel:"",event_type:"click",pagetype:"login",user_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",product:"otp_login",event_level:"major",experiement:"",model_tags:e,login_type:"bms_login",pageurl:window.location.href,user_mode:"guest",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.pushLoginTypeLotame",err:e})}},BMS.SignIn.fnFbGetLoginStatus=function(){try{FB.getLoginStatus((function(e){"connected"===e.status&&(global.lngFBAT=e.authResponse.accessToken,global.strFBProfileURL=e.authResponse.userID,BMS.SignIn.fnFbGetMemberDetails())}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnFbGetLoginStatus",err:e})}},BMS.SignIn.fnFbLogin=function(){try{navigator.userAgent.match("CriOS")?(BMS.Storage.set({name:"fbLogin",value:"1",storage:"C"}),window.open("https://www.facebook.com/dialog/oauth?client_id="+global.fbAppId+"&redirect_uri="+document.location.href+"&scope="+global.FBPriviledges,"",null)):FB.login((function(e){e.authResponse?(global.lngFBAT=e.authResponse.accessToken,global.strFBProfileURL=e.authResponse.userID,BMS.SignIn.fnFbGetMemberDetails(),BMS.Misc.fnPushEventDataToAnalytics(["WR","KM","WN"],"Sign up",{Mode:"Facebook",Appcode:global.strAppCode})):(BMS.Storage.del({name:"SINGINLINK"}),void 0,BMS.Misc.fnBusy(!1,BMS.Modal.currentModal))}),{scope:global.FBPriviledges,return_scopes:!0})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnFbLogin",err:e})}},BMS.SignIn.fnFbGetMemberDetails=function(){try{FB.api("/me",(function(e){var t="",n="";void 0!==BMS.SignIn.SocialConnect&&"FB"==BMS.SignIn.SocialConnect&&(t="|MEMBEREMAIL="+BMS.Storage.get({name:"ld",key:"MEMBEREMAIL"})+"|LSID="+BMS.Storage.get({name:"ld",key:"LSID"})+"|"),"Y"==BMS.Storage.get({name:"SINGINLINK"})&&(n="|OTPMEMBERID="+BMS.Storage.get({name:"ld",key:"MEMBERID"})+"|OTPLSID="+BMS.Storage.get({name:"ld",key:"LSID"})+"|",t=""),BMS.Misc.fnDoSecureTrans({cmd:"SAVEUSERSOCIALMEDIADETAILS",p1:"FB",p2:"|FBAT="+global.lngFBAT+"|",p3:t,p8:n,blnSupp:!1,fnCC:function(e){BMS.SignIn.fnAfterAuth(e),BMS.Storage.del({name:"SINGINLINK"}),$(".modal .popover._signin-signup-popover-fixed").trigger("signinsignuptracking",["fb"]),"undefined"!=typeof pageName&&"twoStepAuth"==pageName&&BMS.SignIn.fnSuccReset()},fnEC:function(e){"undefined"!=typeof pageName&&"twoStepAuth"==pageName&&BMS.SignIn.fnSuccReset(),BMS.Misc.fnBusy(!1)}})}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnFbGetMemberDetails",err:e})}},$(document).ready((function(){navigator.userAgent.match("CriOS")&&"1"==BMS.Storage.get({name:"fbLogin",storage:"C"})&&(BMS.Misc.fnBusy(!0),setTimeout((function(){BMS.SignIn.fnFbGetLoginStatus(),BMS.Storage.del({name:"fbLogin",storage:"C"})}),2e3))})),window.___gcfg={lang:"en-US",parsetags:"explicit"},BMS.SignIn.fnGoogleSDKinit=function(){try{BMS.Misc.loadScript(document,"script","google-platform",BMS.SignIn.getGoogleSignInSDKUrl(),(function(){gapi.load("auth2",(function(){var e=gapi.auth2.init({client_id:global.plusAppId,scope:global.plusPrivileges});global.auth2=e}))}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnGoogleSDKinit",err:e})}},BMS.SignIn.fnGoogleSignIn=function(){try{global.auth2.signIn().then((function(e){var t={lngGPlusAT:e.getAuthResponse().access_token,imgUrl:""};BMS.Storage.set({name:"PLUSIMAGEURL",value:e.getBasicProfile().getImageUrl(),storage:"C"}),BMS.SignIn.fnGetSocialDetailsFromIS(t)}),(function(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnGoogleSignIn",err:e})}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnGoogleSignIn",err:e})}},BMS.SignIn.fnGPlusSignIn=function(){try{gapi.auth.authorize({client_id:global.plusAppId,scope:global.plusPrivileges,immediate:!1,authuser:-1},(function(e){if(e.status.signed_in){var t=e.access_token;BMS.SignIn.fnGetGPlusUserDetails((function(e){e.lngGPlusAT=t,BMS.SignIn.fnGetSocialDetailsFromIS(e),BMS.Misc.fnPushEventDataToAnalytics(["WR","KM","WN"],"Sign up",{Mode:"Google Plus",Appcode:global.strAppCode})}))}}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnGPlusSignIn",err:e})}},BMS.SignIn.fnGetGPlusUserDetails=function(n){try{gapi.client.load("plus","v1",(function(){gapi.client.plus.people.get({userId:"me",key:""}).execute((function(e){var t={imgUrl:void 0!==e&&void 0!==e.image?e.image.url:""};n(t)}))}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnGetGPlusUserDetails",err:e})}},BMS.SignIn.fnCallToGetGPlusUserDetails=function(i){try{BMS.Misc.fnAjax({url:"https://www.googleapis.com/plus/v1/people/me",data:"access_token="+BMS.Misc.fnGVal({key:"PLUSACCESSTOKEN",data:BMS.Storage.get({name:"ld"})}),type:"GET",success:function(e){""!=e.image.url?i(e):i(null)},error:function(e,t,n){i(null)}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnCallToGetGPlusUserDetails",err:e})}},BMS.SignIn.fnGetSocialDetailsFromIS=function(e){try{var t="",n="";void 0!==BMS.SignIn.SocialConnect&&"PLUS"==BMS.SignIn.SocialConnect&&(t="|MEMBEREMAIL="+BMS.Storage.get({name:"ld",key:"MEMBEREMAIL"})+"|LSID="+BMS.Storage.get({name:"ld",key:"LSID"})+"|"),"Y"==BMS.Storage.get({name:"SINGINLINK"})&&(n="|OTPMEMBERID="+BMS.Storage.get({name:"ld",key:"MEMBERID"})+"|OTPLSID="+BMS.Storage.get({name:"ld",key:"LSID"})+"|",t=""),BMS.Misc.fnDoSecureTrans({cmd:"SAVEUSERSOCIALMEDIADETAILS",p1:"GOOGLELOGIN",p2:"|GOOGLELOGINAT="+e.lngGPlusAT+"|",p3:t,p8:n,blnSupp:!1,fnCC:function(e){BMS.SignIn.fnAfterAuth(e),$(".modal .popover._signin-signup-popover-fixed").trigger("signinsignuptracking",["gplus"]),BMS.Storage.del({name:"SINGINLINK"}),"undefined"!=typeof pageName&&"twoStepAuth"==pageName&&BMS.SignIn.fnSuccReset()},fnEC:function(e){BMS.Misc.fnBusy(!1),BMS.Storage.del({name:"SINGINLINK"}),"undefined"!=typeof pageName&&"twoStepAuth"==pageName&&BMS.SignIn.fnSuccReset()}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnGetSocialDetailsFromIS",err:e})}},BMS.Storage={_defaults:{name:"",key:"",value:"",storage:"L",sess:!0,path:"/",defVal:"",expires:"Thu, 31 Dec 2020 23:59:59 GMT",secure:!1}},BMS.Storage.get=function(t){try{null!=t&&null!=t.name&&""!=t.name?t.name:BMS.Storage._defaults.name;var e=null!=t&&null!=t.defVal&&""!=t.defVal?t.defVal:BMS.Storage._defaults.defVal,n=t.name,i=t.name+"=",a=document.cookie,o=-1,s=-1,r="";if("undefined"!=typeof localStorage&&null!=localStorage.getItem(n))r=localStorage.getItem(n);else if(0<a.length&&-1!=a.indexOf(i)){if(o=a.indexOf(i),o+=i.length,s=-1==(s=a.indexOf(";",o))?a.length:s,r=a.substring(o,s),"le="==$.trim(i)){var l=a.match(/ le=/).index,c=a.substring(l),d=$.trim(c.substring(0,c.indexOf(";")));-1!=d.indexOf("=")&&(r=d.split("=")[1])}}else"undefined"!=typeof sessionStorage&&null!=sessionStorage.getItem(n)&&(r=sessionStorage.getItem(n));return r=decodeURIComponent(r),void 0!==t&&""!=t.key&&void 0!==t.key&&(r=BMS.Misc.fnGVal({key:t.key,data:r,defVal:e})),r}catch(e){BMS.Misc.fnErr({fnName:"BMS.Storage.get",fnParams:t,err:e})}},BMS.Storage.set=function(t){try{var e=null!=t.name&&""!=t.name?t.name:BMS.Storage._defaults.name,n=null!=t.key&&""!=t.key?t.key:BMS.Storage._defaults.key,i=null!=t.value&&""!=t.value?t.value:BMS.Storage._defaults.value,a=null!=t.storage&&""!=t.storage?t.storage:BMS.Storage._defaults.storage,o=null!=t.sess?t.sess:BMS.Storage._defaults.sess,s=null!=t.expires&&""!=t.expires?t.expires:BMS.Storage._defaults.expires,r=null!=t.path&&""!=t.path?t.path:BMS.Storage._defaults.path,l=null!=t.secure?t.secure:BMS.Storage._defaults.secure;if(-1!=$.inArray(e,["userCine","preferredLanguages","le"])&&"dev"!=global.Tier&&(l=!0),a=a.toUpperCase(),""!=n){for(var c,d=BMS.Storage.get({name:e}).split("|"),u=new Array,p=0;p<d.length;p++)""!=d[p]&&(c=d[p].split("="))[0]!=n&&u.push(new Array(c[0],c[1]));var f="";f+="|"+n+"="+i;for(var g=0;g<u.length;g++)f+="|"+u[g][0]+"="+u[g][1];i=f+="|"}i=encodeURIComponent(i),""==a||"L"==a?"undefined"!=typeof localStorage?localStorage.setItem(e,i):document.cookie=escape(e)+"="+i+(o?"":"; expires="+s)+"; path="+r+(l?";secure;":""):"C"==a?document.cookie=escape(e)+"="+i+(o?"":"; expires="+s)+"; path="+r+(l?";secure;":""):"S"==a&&("undefined"!=typeof sessionStorage?sessionStorage.setItem(e,i):document.cookie=escape(e)+"="+i+(o?"":"; expires="+s)+"; path="+r+(l?";secure;":""))}catch(e){BMS.Misc.fnErr({fnName:"BMS.Storage.set",fnParams:t,err:e})}},BMS.Storage.isset=function(t){try{var e=void 0!==t.name&&""!=t.name?t.name:BMS.Storage._defaults.name,n=void 0!==t.key&&""!=t.key?t.key:BMS.Storage._defaults.key;if(""!=BMS.Storage.get({name:e})){if(""!=n){var i=BMS.Storage.get({name:e});return""!=BMS.Misc.fnGVal({key:n,data:i})}return!0}return!1}catch(e){BMS.Misc.fnErr({fnName:"BMS.Storage.isset",fnParams:t,err:e})}},BMS.Storage.del=function(t){try{var e=void 0!==t.name&&""!=t.name?t.name:BMS.Storage._defaults.name,n=void 0!==t.path&&""!=t.path?t.path:BMS.Storage._defaults.path,i=document.cookie;"undefined"!=typeof localStorage&&null!=localStorage.getItem(e)?localStorage.removeItem(e):-1!=i.indexOf(e+"=")?document.cookie=escape(e)+"=; expires=Thu, 01 Jan 2012 00:00:01 GMT; path="+n:"undefined"!=typeof sessionStorage&&null!=sessionStorage.getItem(e)&&sessionStorage.removeItem(e)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Storage.del",fnParams:t,err:e})}},BMS.Storage.filterLDData=function(t){try{var e=["MEMBERID","MEMBEREMAIL","STATUS","LSID","FIRSTNAME","LASTNAME","MOBILE","SEQUENCE","EXPIRY","EMAILSUBSCRIPTION","MOBILESUBSCRIPTION","EMAILVERIFIED","OTPMOBVERIFIED","ACCOUNTLINKED","MARITALSTATUS","PROFILEIMAGEURL","WALLETSTATUS","WALLETLASTNAME","WALLETFIRSTNAME","WALLETEMAILID","WALLETMOBILENO","WALLETAUTOREFUNDMODE","LOYALTYVARIANTID","LOYALTYISSUBSCRIBED","LOYALTYISTARGETTED","ISWALLETELIGIBLE","LASTLOGIN","NAME","ISFCONNECTLOGIN","ISPLUSLOGIN"],n=t.ldvalue.split("|");value="";for(var i=0;i<n.length;i++){var a=n[i].split("=");-1<$.inArray(a[0],e)&&""!=a[0]&&(value+=a[0]+"="+a[1]+"|")}value="|"+value,document.cookie=escape(t.ldname)+"="+encodeURIComponent(value)+(t.ldsess?"":"; expires="+t.ldexpires)+"; path="+t.ldpath+(t.ldsecure?";secure;":"")}catch(e){BMS.Misc.fnErr({fnName:"BMS.Storage.filterLDData",fnParams:t,err:e})}},BMS.Misc.fnAjax=function(t){try{var e=null==t.async||""==t.async||t.async,n=null!=t.beforeSend&&""!=t.beforeSend?t.beforeSend:"",i=null==t.cache||""==t.cache||t.cache,a=null!=t.contentType&&""!=t.contentType?t.contentType:"application/x-www-form-urlencoded; charset=UTF-8",o=null!=t.data&&""!=t.data?t.data:"",s=null!=t.dataType&&""!=t.dataType?t.dataType:"",r=null!=t.error&&""!=t.error&&t.error,l=(null!=t.suppress&&""!=t.suppress&&t.suppress,{"Content-Type":"application/x-www-form-urlencoded","Cache-Control":"no-store"});l=null!=t.headers&&""!=t.headers?$.extend(l,t.headers):l;var c=null!=t.success&&""!=t.success&&t.success,d=null!=t.timeout&&""!=t.timeout?t.timeout:3e5,u=null!=t.type&&""!=t.type?t.type:"GET",p=t.url;$.support.cors=!0,$("#glErrDiv").is(":visible")&&"CANCELTRANS"!=o.c&&$("#glErrDiv").hide(),$.ajax({async:e,beforesend:n,cache:i,contentType:a,data:o,dataType:s,error:function(e,t,n){0!=e.status&&r(e,t,n)},headers:l,success:function(e){c&&c(e)},timeout:d,type:u,url:p})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnAjax1",fnParams:t,err:e})}},BMS.Misc.fnDoTrans=function(t){try{var e=null!=t.AppC&&""!=t.AppC?t.AppC:global.strAppCode,n=null!=t.venCode&&""!=t.venCode?t.venCode:"",i=null!=t.transId&&""!=t.transId?t.transId:0,s=null!=t.cmd&&""!=t.cmd?t.cmd:"",a=null!=t.p1&&""!=t.p1?t.p1:"",o=null!=t.p2&&""!=t.p2?t.p2:"",r=null!=t.p3&&""!=t.p3?t.p3:"",l=null!=t.p4&&""!=t.p4?t.p4:"",c=null!=t.p5&&""!=t.p5?t.p5:"",d=null!=t.p6&&""!=t.p6?t.p6:"",u=null!=t.p7&&""!=t.p7?t.p7:"",p=null!=t.p8&&""!=t.p8?t.p8:"",f=null!=t.p9&&""!=t.p9?t.p9:"",g=null!=t.p10&&""!=t.p10?t.p10:"",h=null!=t.fnCC&&t.fnCC,m=null!=t.fnEC&&t.fnEC,v=null!=t.ccObj&&t.ccObj,S=null!=t.ecObj&&t.ecObj,y=null!=t.blnSupp&&t.blnSupp,M="strCommand: "+s+", strAppCode: "+e+", strVenueCode:"+n+", lngTransId:"+i+", strParam1: "+a+", strParam2: "+o+", strParam3: "+r+", strParam4:"+l+", strParam5:"+c+", strParam6:"+d+", strParam7:"+u+", strParam8:"+p+", strParam9: "+f+", strParam10: "+g+", blnSuppress: "+y;$("#glErrDiv").is(":visible")&&"CANCELTRANS"!=s&&$("#glErrDiv").hide(),"CANCELTRANS"==s&&(o=BMS.Storage.get({name:"secCanTransCookie",storage:"C"}),BMS.Storage.del({name:"secCanTransCookie"})),BMS.Misc.fnAjax({data:{a:e,v:n,t:i,c:s,p1:a,p2:o,p3:r,p4:l,p5:c,p6:d,p7:u,p8:p,p9:f,p10:g},headers:t.headers?t.headers:"",dataType:"xml",error:function(e,t,n){y||(BMS.Misc.fnBusy(!1),BMS.Misc.fnGlobalErr({eMess:"Sorry, There is a problem with the internet connection. Please try after some time.",eCode:e.status,eCmd:M,eRFn:"function: BMS.Misc.fnDoTrans"})),void 0!==m&&"function"==typeof m&&m(n)},success:function(e){for(var t={},n=$(e).find("objExecuteResult").children().length,i=0;i<n;i++){var a=$(e).find("objExecuteResult").children().eq(i);t[a.get(0).nodeName]=a.text()}if("true"==t.blnSuccess){if(h){if("INITTRANS"==s){var o=BMS.Misc.fnGVal({key:"UID",data:unescape(t.strData)});BMS.Storage.set({name:"secCanTransCookie",value:o,storage:"C"})}h(v?t:t.strData)}}else y||(BMS.Misc.fnBusy(!1),BMS.Misc.fnGlobalErr({eMess:t.strException,eCode:t.intExceptionEx,eCmd:M,eRFn:"function: BMS.Misc.fnDoTrans"})),m&&m(S?t:t.strException)},suppress:y,type:"POST",url:"https:"==location.protocol||1==t.secure?"/serv/doSecureTrans.bms":"/serv/doTrans.bms"})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnDoTrans",fnParams:t,err:e})}},BMS.Misc.fnDoSecureTrans=function(t){try{var e=null!=t.AppC&&""!=t.AppC?t.AppC:global.strAppCode,n=null!=t.venCode&&""!=t.venCode?t.venCode:"",i=null!=t.transId&&""!=t.transId?t.transId:0,r=null!=t.cmd&&""!=t.cmd?t.cmd:"",a=null!=t.p1&&""!=t.p1?t.p1:"",o=null!=t.p2&&""!=t.p2?t.p2:"",s=null!=t.p3&&""!=t.p3?t.p3:"",l=null!=t.p4&&""!=t.p4?t.p4:"",c=null!=t.p5&&""!=t.p5?t.p5:"",d=null!=t.p6&&""!=t.p6?t.p6:"",u=null!=t.p7&&""!=t.p7?t.p7:"",p=null!=t.p8&&""!=t.p8?t.p8:"",f=null!=t.p9&&""!=t.p9?t.p9:"",g=null!=t.p10&&""!=t.p10?t.p10:"",h=(null!=t.type&&""!=t.type&&t.type,null!=t.fnCC&&t.fnCC),m=null!=t.fnEC&&t.fnEC,v=null!=t.ccObj&&t.ccObj,S=null!=t.ecObj&&t.ecObj,y=null!=t.blnSupp&&t.blnSupp,M="strCommand: "+r+", strAppCode: "+e+", strVenueCode:"+n+", lngTransId:"+i+", strParam1:"+a+", strParam2: "+o+", strParam3: "+s+", strParam4:"+l+", strParam5:"+c+", strParam6:"+d+", strParam7:"+u+", strParam8:"+p+", strParam9: "+f+", strParam10: "+g+", blnSuppress: "+y,b="https://"+location.host;"dev"==global.Tier&&(b=location.protocol+"//"+location.host),"CANCELTRANS"==r&&(o=BMS.Storage.get({name:"secCanTransCookie",storage:"C"}),BMS.Storage.del({name:"secCanTransCookie"}));var w="a="+encodeURIComponent(e)+"&v="+encodeURIComponent(n)+"&t="+encodeURIComponent(i)+"&c="+encodeURIComponent(r)+"&p1="+encodeURIComponent(a)+"&p2="+encodeURIComponent(o)+"&p3="+encodeURIComponent(s)+"&p4="+encodeURIComponent(l)+"&p5="+encodeURIComponent(c)+"&p6="+encodeURIComponent(d)+"&p7="+encodeURIComponent(u)+"&p8="+encodeURIComponent(p)+"&p9="+encodeURIComponent(f)+"&p10="+encodeURIComponent(g),B=b+"/serv/doSecureTrans.bms";if(BMS.Misc.fnBrowsVer()<8)B=B+"?"+w,fnData=function(e){var t=$.parseXML(e.response),n=$(t).find("strData").text();if("true"==$(t).find("blnSuccess").text()){if(h){if("INITTRANS"==r){var i=BMS.Misc.fnGVal({key:"UID",data:unescape(n.strData)});BMS.Storage.set({name:"secCanTransCookie",value:i,storage:"C"})}h(n)}}else{if(!y){$(t).find("strException").text(),$(t).find("intExceptionEx").text();BMS.Misc.fnBusy(!1),BMS.Misc.fnGlobalErr({eMess:n.strException,eCode:n.intExceptionEx,eCmd:M,eRFn:"function: BMS.Misc.fnDoSecureTrans"})}m&&m(S?n:$(t).find("strException").text())}},$.getScript(B+"&type=jsonp&callback=fnData");else{var C=$("#xd_form");function _(e){return e=(e=e.toString().replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")).toString().replace(/(onload|onerror|onclick|onhover|onmouse)/gi,"")}0==C.length&&(C=$("<form style='display:none;' id='xd_form' action='"+B+"?type=iframe#"+encodeURIComponent(document.location.href)+"' method='POST' enctype='multipart/form-data' target='xd_frame'></form>"),$("body").append(C)),C.html("");var k="<input type='hidden' name='a' value='"+_(e)+"' />";k+="<input type='hidden' name='v' value='"+_(n)+"' />",k+="<input type='hidden' name='t' value='"+_(i)+"' />",k+="<input type='hidden' name='c' value='"+_(r)+"' />",k+="<input type='hidden' name='p1' value='"+_(a)+"' />",k+="<input type='hidden' name='p2' value='"+_(o)+"' />",k+="<input type='hidden' name='p3' value='"+_(s)+"' />",k+="<input type='hidden' name='p4' value='"+_(l)+"' />",k+="<input type='hidden' name='p5' value='"+_(c)+"' />",k+="<input type='hidden' name='p6' value='"+_(d)+"' />",k+="<input type='hidden' name='p7' value='"+_(u)+"' />",k+="<input type='hidden' name='p8' value='"+_(p)+"' />",k+="<input type='hidden' name='p9' value='"+_(f)+"' />",k+="<input type='hidden' name='p10' value='"+_(g)+"' />",C.html(k);var E=$("#xd_frame");0==E.length&&(E=$('<iframe id="xd_frame" name="xd_frame" style="display:none;"></iframe>'),$("body").append(E)),C.submit(),XD.receiveMessage((function(e){for(var t=$.parseXML($.parseJSON(e.data).response),n={},i=$(t).find("objExecuteResult").children().length,a=0;a<i;a++){var o=$(t).find("objExecuteResult").children().eq(a);n[o.get(0).nodeName]=o.text()}if("true"==n.blnSuccess){if(h){if("INITTRANS"==r){var s=BMS.Misc.fnGVal({key:"UID",data:unescape(n.strData)});BMS.Storage.set({name:"secCanTransCookie",value:s,storage:"C"})}h(v?n:n.strData)}}else{if(!y){n.strException,n.intExceptionEx;BMS.Misc.fnBusy(!1),BMS.Misc.fnGlobalErr({eMess:n.strException,eCode:n.intExceptionEx,eCmd:M,eRFn:"function: BMS.Misc.fnDoSecureTrans"})}m&&m(S?n:n.strException)}}),b)}}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnDoSecureTrans",fnParams:t,err:e})}},BMS.Misc.fnWsData=function(i){try{var e=null!=i.AppC&&""!=i.AppC?i.AppC:global.strAppCode,t=null!=i.venCode&&""!=i.venCode?i.venCode:"",n=null!=i.transId&&""!=i.transId?i.transId:0,a=null!=i.cmd&&""!=i.cmd?i.cmd:"",o=null!=i.eventType&&""!=i.eventType?i.eventType:"",s=null!=i.evtCode&&""!=i.evtCode?i.evtCode:"",r=null!=i.srCode&&""!=i.srCode?i.srCode:"",l=null!=i.sessDet&&""!=i.sessDet?i.sessDet:"",c=null!=i.sessId&&""!=i.sessId?i.sessId:"",d=null!=i.email&&""!=i.email?i.email:"",u=null!=i.lsid&&""!=i.lsid?i.lsid:"",p=null!=i.compCode&&""!=i.compCode?i.compCode:"",f=null!=i.producer&&""!=i.producer?i.producer:"",g=null!=i.data&&""!=i.data?i.data:"",h=null!=i.retType&&""!=i.retType?i.retType:"js",m=!(null==i.fnCC||!i.fnCC)&&i.fnCC,v=!(null==i.fnEC||!i.fnEC)&&i.fnEC,S=null!=i.blnSupp&&i.blnSupp,y="strCommand: "+a+", strAppCode: "+e+", strVenueCode:"+t+", lngTransId"+n+", strEvent"+o+", strEventCodes: "+s+", strSRCode: "+r+", strSessDet:"+l+", lngSessId:"+c+", strEmail:"+d+", strLSID:"+u+", strCompCode:"+p+", strProducer: "+f+", strData: "+g+", strRetType: "+h;$("#glErrDiv").is(":visible")&&$("#glErrDiv").hide(),BMS.Misc.fnAjax({data:{strApp:e,strVC:t,lngTrans:n,strCmd:a,strET:o,strEC:s,strSRC:r,strSD:l,strSID:c,strLE:d,strLSID:u,strComp:p,strProducer:f,strData:unescape(g),strCase:h},headers:i.headers?i.headers:"",dataType:"xml",error:function(e,t,n){BMS.Misc.fnErr({fnName:"wsData",fnParams:i})},success:function(e){var t=escape($(e).find("json"==h?"strGetDataForJSONResult":"strGetDataForJavaScriptResult").eq(0).text());if(""!=t)m&&m(t);else if(!S)if(v)v(t);else{BMS.Misc.fnBusy(!1);e.split("-");BMS.Misc.fnGlobalErr({eMess:"Sorry, there seems to be a connectivity problem with the cinema. Please try after some time.",eCmd:y,eRFn:"function: BMS.Misc.fnWsData"})}},type:"post",url:"/serv/wsData.bms"})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnWsData",fnParams:i,err:e})}},BMS.Misc.fnWsSecureTrans=function(t){try{var e=null!=t.AppC&&""!=t.AppC?t.AppC:global.strAppCode,n=null!=t.venCode&&""!=t.venCode?t.venCode:"",i=null!=t.transId&&""!=t.transId?t.transId:0,a=null!=t.cmd&&""!=t.cmd?t.cmd:"",o=null!=t.p1&&""!=t.p1?t.p1:"",s=null!=t.p2&&""!=t.p2?t.p2:"",r=null!=t.p3&&""!=t.p3?t.p3:"",l=null!=t.p4&&""!=t.p4?t.p4:"",c=null!=t.p5&&""!=t.p5?t.p5:"",d=null!=t.p6&&""!=t.p6?t.p6:"",u=null!=t.p7&&""!=t.p7?t.p7:"",p=null!=t.p8&&""!=t.p8?t.p8:"",f=null!=t.p9&&""!=t.p9?t.p9:"",g=null!=t.p10&&""!=t.p10?t.p10:"",h=null!=t.fnCC&&t.fnCC,m=null!=t.fnEC&&t.fnEC,v=(null!=t.ccObj&&t.ccObj,null!=t.ecObj&&t.ecObj,null!=t.blnSupp&&t.blnSupp),S="strCommand: "+a+", lngTransId:"+i+", strParam1: "+o+", strParam2: "+s+", strParam3: "+r+", strParam4:"+l+", strParam5:"+c+", strParam6:"+d+", strParam7:"+u+", strParam8:"+p+", strParam9: "+f+", strParam10: "+g+", blnSuppress: "+v;BMS.Misc.fnAjax({data:{a:e,v:n,t:i,c:a,p1:o,p2:s,p3:r,p4:l,p5:c,p6:d,p7:u,p8:p,p9:f,p10:g},dataType:"xml",error:function(e,t,n){v||(BMS.Misc.fnBusy(!1),BMS.Misc.fnGlobalErr({eMess:"Sorry, There is a problem with the internet connection. Please try after some time.",eCode:e.status,eCmd:S,eRFn:"function: BMS.Misc.fnDoTrans"})),void 0!==m&&"function"==typeof m&&m(n)},success:function(e){for(var t={},n=$(e).find("objExecuteResult").children().length,i=0;i<n;i++){var a=$(e).find("objExecuteResult").children().eq(i);t[a.get(0).nodeName]=a.text()}"true"==t.blnSuccess?h(t):m&&m(t)},suppress:v,type:"POST",url:"/serv/wsSecureTrans.bms"})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnWsSecureTrans",fnParams:t,err:e})}},BMS.Misc.fnDoBooking=function(t,e){try{var n=null!=e.fnCC&&e.fnCC,i=null!=e.fnEC&&e.fnEC,a=(null!=t.blnSupp&&t.blnSupp,location.origin+"/serv/doBooking.bms");BMS.Misc.fnAjax({data:{params:t},dataType:"json",type:"post",url:a,success:function(e){void 0!==e.message&&i?i():n?n(e):BMS.Misc.fnGlobalErr({})},error:function(e,t,n){i()}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnDoBooking",fnParams:t,err:e})}},BMS.Misc.fnGVal=function(e){try{for(var t=e.key,n=e.data,i=null!=e.splitA&&""!=e.splitA?e.splitA:"|",a=null!=e.splitB&&""!=e.splitB?e.splitB:"=",o=null!=e.defVal&&""!=e.defVal?e.defVal:"",s=n.split(i),r="",l=0;l<s.length;l++){var c=s[l].split(a);if(c[0].toUpperCase()==t.toUpperCase()){r=c[1];break}}return""!=r?r:o}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnGVal",fnParams:arguments,err:e})}},BMS.Misc.fnGPipeDelimitedString=function(t){try{var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n+"="+t[n]);return e=0==e.length?"":"|"+e.join("|")+"|"}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnGPipeDelimitedString",fnParams:t,err:e})}},BMS.Misc.fnUrlName=function(t){try{return t=(t=(t=t.replace(/[^a-zA-Z 0-9]+/g,"")).replace(new RegExp(" ","gi"),"-")).replace(/-+/gi,"-")}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnUrlName",fnParams:t,err:e})}},BMS.Misc.fnGATracker=function(e){try{var t=location.pathname.replace(/\//g,""),n=(""==t?"home":t)+(""!=e.location?"-"+e.location:"")+(""!=e.action?"-"+e.action:"");"undefined"!=typeof ga&&ga("send","pageview",n),"undefined"!=typeof wzrk_pushSiteEvent&&wzrk_pushSiteEvent(n)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnGATracker",fnParams:arguments,err:e})}},BMS.Misc.fnBrowsVer=function(){try{if(rv=-1,"Microsoft Internet Explorer"==navigator.appName){var e=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(e)&&(rv=parseFloat(RegExp.$1))}else rv=999;return rv}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnBrowsVer",err:e})}},BMS.Misc.fnCapitalName=function(e){try{for(var t=$.trim(e).split(" "),n="",i=0;i<t.length;i++)""!=t[i]&&(n+=t[i].substr(0,1).toUpperCase()+t[i].substr(1,t[i].length)+" ");return n}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnCapitalName",err:e})}},BMS.Misc.fnGetUserImage=function(e,i){try{var a,o=e.SOCIALID;if(a=global.strContentUrl+"/webin/movies/superstar/profile_avatar.png",BMS.Storage.isset({name:"ld"})&&""!=BMS.Storage.get({name:"PROFILEIMAGEURL"})){var t=BMS.Misc.fnGetCloudiaryURL(BMS.Storage.get({name:"PROFILEIMAGEURL"}));i(t.url,t.canDelete)}else BMS.Misc.fnDoSecureTrans({AppC:global.strAppCode,cmd:"GETPROFILE",p1:"GETPROFILE",p2:BMS.Storage.get({name:"ld",key:"MEMBERID"}),p3:BMS.Storage.get({name:"ld",key:"LSID"}),blnSupp:!0,fnCC:function(e){var t=BMS.Misc.fnGVal({key:"PROFILEIMAGEURL",data:e}),n=BMS.Misc.fnGetCloudiaryURL(t);""!==t?(BMS.Storage.set({name:"PROFILEIMAGEURL",value:t,storage:"C"}),i(n.url,n.canDelete)):"FB"==o?BMS.Misc.getFBProfileImage(i):"PLUS"==o?BMS.Misc.getPlusProfileImage(i):i(a)},fnEC:function(){i(a)}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnGetUserImage",err:e})}},BMS.Misc.getFBProfileImage=function(e){try{var t="https://graph.facebook.com/"+BMS.Misc.fnGVal({key:"FBID",data:BMS.Storage.get({name:"ld"})})+"/picture?width=100&height=100";e&&e(t)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.getFBProfileImage",err:e})}},BMS.Misc.getPlusProfileImage=function(e){try{var t=global.strContentUrl+"/webin/movies/superstar/profile_avatar.png";""==BMS.Storage.isset({name:"PLUSIMAGEURL"})?e(t):e(BMS.Storage.get({name:"PLUSIMAGEURL"}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.getPlusProfileImage",err:e})}},BMS.Misc.fnGetCloudiaryURL=function(e){try{return""==e?{url:"//in.bmscdn.com/webin/movies/superstar/profile_avatar.png",canDelete:!1}:{url:("in.bookmyshow.com"==location.hostname?"https://res.cloudinary.com/bookmyshow/image/upload/":(location.hostname,"https://res.cloudinary.com/sit-bookmyshow/image/upload/"))+e,canDelete:!0}}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnGetCloudiaryURL",err:e})}},BMS.Misc.fnGetSocialKeys=function(){try{if(""!==BMS.Storage.get({name:"APPDETAILS_ALL",storage:"C"})){var e=$.parseJSON(BMS.Storage.get({name:"APPDETAILS_ALL",storage:"C"}));return global.fbAppId=BMS.Misc.fnGVal({key:"FB_APPID",data:e.FB}),global.FBPriviledges=BMS.Misc.fnGVal({key:"FB_PRIVILEGES",data:e.FB}),global.plusAppId=BMS.Misc.fnGVal({key:"GOOGLELOGIN_CLIENTID",data:e.PLUS}),global.plusPrivileges=BMS.Misc.fnGVal({key:"GOOGLELOGIN_PRIVILEGES",data:e.PLUS}).split("&nbsp;").join(" "),void("undefined"!=typeof FB?FB.init({appId:global.fbAppId,status:!1,xfbml:!0,version:"v2.9"}):$.getScript(socialJS,(function(){FB.init({appId:global.fbAppId,status:!1,xfbml:!0,version:"v2.9"})})))}BMS.Misc.fnAjax({url:global.getDataUrl,data:{cmd:"APPDETAILS",app:"ALL"},type:"GET",dataType:"json",success:function(e){BMS.Storage.set({name:"APPDETAILS_ALL",value:JSON.stringify(e),storage:"C",sess:!1,expires:new Date((new Date).getTime()+9e5).toGMTString()}),global.fbAppId=BMS.Misc.fnGVal({key:"FB_APPID",data:e.FB}),global.FBPriviledges=BMS.Misc.fnGVal({key:"FB_PRIVILEGES",data:e.FB}),global.plusAppId=BMS.Misc.fnGVal({key:"GOOGLELOGIN_CLIENTID",data:e.PLUS}),global.plusPrivileges=BMS.Misc.fnGVal({key:"GOOGLELOGIN_PRIVILEGES",data:e.PLUS}).split("&nbsp;").join(" "),"undefined"!=typeof FB?FB.init({appId:global.fbAppId,status:!1,xfbml:!0,version:"v2.9"}):$.getScript(socialJS,(function(){FB.init({appId:global.fbAppId,status:!1,xfbml:!0,version:"v2.9"})}))},error:function(e){}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnGetSocialKeys",err:e})}},BMS.Misc.modal=function(t,n){try{$(document).scrollTop(),$(".modal .__overlay"),$(".main-body-wrapper"),$(".select-overlay");n?(BMS.Modal.fnShowModal(t),"sessionTime"==t&&"undefined"!=typeof pay&&void 0!==pay.objTransOSData.SessionOrder&&0!=pay.objTransOSData.SessionOrder.length&&BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"timed_out_payment_8",venue_id:pay.objTransOSData.SessionOrder[0].Venue_strCode,venue_name:pay.objTransOSData.SessionOrder[0].Venue_strName})):BMS.Modal.fnHideModal()}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.modal",fnParams:t+" "+n,err:e})}},BMS.Misc.fnShowSuccessModal=function(t,n){try{$("#popover-rating-msg").html(n),BMS.Modal.fnShowModal(t),setTimeout((function(){BMS.Modal.fnHideModal()}),2500)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnShowSuccessModal",fnParams:t+""+n,err:e})}},BMS.Misc.fnBtnProcessing=function(t,n){try{n?$("#"+t).addClass("_processing"):$("#"+t).removeClass("_processing")}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnBtnProcessing",fnParams:t+" "+n,err:e})}},BMS.Misc.fnBtnLoading=function(t,n,e){try{n?(strloadHtml="<div class='loading-div'>\t\t\t\t\t\t\t<h2 class='dot one'></h2>\t\t\t\t\t\t\t<h2 class='dot two'></h2>\t\t\t\t\t\t\t<h2 class='dot three'></h2>\t\t\t\t\t\t\t</div>",$("#"+t+" .loading").text(""),$("#"+t).append(strloadHtml),$("#"+t).addClass("loading-state")):($(".loading-div").remove(),$("#"+t+" .loading").text(e),$("#"+t).removeClass("loading-state"))}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnBtnLoading",fnParams:t+" "+n,err:e})}},BMS.Misc.fnDoFloat=function(){try{if(void 0===BMS.Modal.currentModal||null==BMS.Modal.currentModal)return void clearTimeout(BMS.Misc.fnDoFloat.objTimer);if(!global.blnIsTouchScreen){var e=parseInt(BMS.Modal.currentModal.css("padding-top").replace("px",""))+parseInt(BMS.Modal.currentModal.css("margin-top").replace("px",""))+parseInt(BMS.Modal.currentModal.css("border-top-width").replace("px","")),t=parseInt(BMS.Modal.currentModal.css("padding-left").replace("px",""))+parseInt(BMS.Modal.currentModal.css("margin-left").replace("px",""))+parseInt(BMS.Modal.currentModal.css("border-left-width").replace("px","")),n={top:($(window).height()-BMS.Modal.currentModal.height())/2-e,left:($(window).width()-BMS.Modal.currentModal.width())/2-t};return BMS.Modal.currentModal.css({top:n.top}),clearTimeout(BMS.Misc.fnDoFloat.objTimer),BMS.Misc.fnDoFloat.objTimer=setTimeout((function(){}),5e4),BMS.Modal.currentModal}var i=BMS.Modal.currentModal.height(),a=$(window).height(),o=0;o=i<a?parseInt((a-i)/2)+window.pageYOffset:10+window.pageYOffset,BMS.Modal.currentModal.css({top:o})}catch(e){void 0}},BMS.Misc.fnGlobalErr=function(t){try{var e=null!=t.eMess&&""!=t.eMess?t.eMess:"Whoa there! Something went wrong with our script. Please refresh the page and try again",n=null!=t.eCode&&""!=t.eCode?t.eCode:"GEN";null!=t.eCmd&&""!=t.eCmd&&t.eCmd,null!=t.eRFn&&""!=t.eRFn&&t.eRFn,null!=t.blnSucc&&""!=t.blnSucc&&t.blnSucc;"-21059"==n&&(blnActiveTrans="True"),""!=n?$("#globalErrMsg").html(e).show():$("#globalErrMsg").html(t).hide(),$("#dActualErrorMsg").html(JSON.stringify(t)),BMS.Misc.modal("error-div",!0)}catch(e){BMS.Misc.fnDispErr({fnName:"BMS.Misc.fnGlobalErr",fnParams:t,err:e})}},BMS.Misc.fnGlobalSportsErr=function(t){try{var e=null!=t.eMess&&""!=t.eMess?t.eMess:"Whoa there! Something went wrong with our script. Please refresh the page and try again",n=null!=t.eCode&&""!=t.eCode?t.eCode:"GEN";null!=t.eCmd&&""!=t.eCmd&&t.eCmd,null!=t.eRFn&&""!=t.eRFn&&t.eRFn,null!=t.blnSucc&&""!=t.blnSucc&&t.blnSucc;""!=n?$("#globalSportsErrMsg").html(e).show():$("#globalSportsErrMsg").html(t).hide(),$("#dActualSportsErrorMsg").html(JSON.stringify(t)),BMS.Misc.modal("error-sports-div",!0)}catch(e){BMS.Misc.fnDispErr({fnName:"BMS.Misc.fnGlobalSportsErr",fnParams:t,err:e})}},BMS.Misc.fnDispErr=function(e){return void 0,!1},BMS.Misc.fnErr=function(e){var t=null==e.supp||e.supp;null!=e.fnParams&&""!=e.fnParams&&e.fnParams;void 0,$("#globalErrMsg").html("Error : "+e.fnName+" Error is "+e.err),t||BMS.Modal.currentModal||BMS.Misc.modal("error-div",!0)},BMS.Misc.fnSCusErrDisplay=function(t,n,i){try{$("#"+t).clearQueue();var e="";"e"==i?(e+='<span class="__text">'+n+"</span>",$("#"+t).removeClass("_success").addClass("_error").html(e).show()):"w"==i?(e+='<span class="__icon"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">;<use xlink:href="/icons/common-icons.svg#icon-warning"></use></svg></span>',e+='<span class="__text">'+n+"</span>",$("#"+t).removeClass("_error").addClass("_warning").html(e).animate({height:"toggle",opacity:"show"},{queue:!1},"slow").delay(5e3).animate({height:"toggle",opacity:"hide"},"fast",(function(e){$(this).hide()}))):"w-nt"==i?(e+='<span class="__icon"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">;<use xlink:href="/icons/common-icons.svg#icon-warning"></use></svg></span>',e+='<span class="__text">'+n+"</span>",$("#"+t).removeClass("_error").addClass("_warning").html(e).show()):"i"==i?(e+='<span class="__icon"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">;<use xlink:href="/icons/common-icons.svg#icon-info"></use></svg></span>',e+='<span class="__text">'+n+"</span>",$("#"+t).removeClass("_error").addClass("_info").html(e).animate({height:"toggle",opacity:"show"},{queue:!1},"slow").delay(5e3).animate({height:"toggle",opacity:"hide"},"fast",(function(e){$(this).hide()}))):"s"==i&&(e+='<span class="__icon"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">;<use xlink:href="/icons/common-icons.svg#icon-success"></use></svg></span>',e+='<span class="__text">'+n+"</span>",$("#"+t).removeClass("_error").addClass("_success").html(e).show())}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnSCusErrDisplay",fnParams:t+", "+n+", "+i,err:e})}},BMS.Misc.fnChangeUrl=function(t){try{var e=void 0!==t.URL?t.URL:"",n=void 0!==t.event?t.event:"",i=void 0!==t.state?t.state:null;window.history.pushState(i,null,e),""!=n&&n.preventDefault()}catch(e){BMS.Misc.fnErr({fnName:"misc.js - BMS.Misc.fnChangeUrl",fnParams:t,err:e})}},BMS.Misc.fnBusy=function(e,t,n){try{if(e)if(t){var i='<div class="qb-loader-wrapper">';i+=n||'<div class="qb-loader">\t\t\t\t\t<span class="reel __roll1">\t\t\t\t\t\t<span class="mini-circle"></span>\t\t\t\t\t\t<span class="mini-circle __center"></span>\t\t\t\t\t\t<span class="mini-circle __left"></span>\t\t\t\t\t\t<span class="mini-circle __right"></span>\t\t\t\t\t\t<span class="mini-circle __bottom"></span>\t\t\t\t\t</span></div>',i+="</div>",t.addClass("_add-movie-spinner"),setTimeout((function(){t.prepend(i)}),200)}else handlePopups.freezeDocument(),$("#dBusy").show(),$(".__busy-div-overlay").show();else if(t){var a=t.find(".qb-loader-wrapper");a.addClass("_fade-out"),setTimeout((function(){a.remove(),t.removeClass("_add-movie-spinner")}),300)}else handlePopups.releaseDocument(),$("#dBusy").hide(),$(".__busy-div-overlay").hide()}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnBusy",err:e})}};var adsArr=[];function pushDatatoClickStream(e){try{if("undefined"!=typeof Paho&&""!=BMS.Storage.get({name:"clkstream",storage:"C"})&&"Y"==BMS.Storage.get({name:"clkstream",storage:"C"})){webLaunch={};var t=1==(new Date).getDate().toString().length?"0"+(new Date).getDate():(new Date).getDate(),n=1==((new Date).getMonth()+1).toString().length?"0"+((new Date).getMonth()+1):(new Date).getMonth()+1,i=(new Date).getFullYear(),a=1==(new Date).getHours().toString().length?"0"+(new Date).getHours():(new Date).getHours(),o=1==(new Date).getMinutes().toString().length?"0"+(new Date).getMinutes():(new Date).getMinutes(),s=1==(new Date).getSeconds().toString().length?"0"+(new Date).getSeconds():(new Date).getSeconds();""!=BMS.Storage.get({name:"weblaunch",storage:"C"})&&(webLaunch=[{ct_id:BMS.Storage.get({name:"WZRK_G"}),u_email:BMS.Storage.get({name:"le"}),u_mobile:""!=BMS.Storage.get({name:"ld"})?BMS.Misc.fnGVal({key:"MOBILE",data:BMS.Storage.get({name:"ld"})}):"",r_name:""!=BMS.Storage.get({name:"Rgn"})?BMS.Storage.get({name:"Rgn"}).split("|")[2].split("=")[1]:"",dt:i+"-"+n+"-"+t,s_id:BMS.Storage.get({name:"mqttsid"}),lat:"19.1126326493646",lng:"72.8418818412066",data_src:"ga",r_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Storage.get({name:"Rgn"}).split("|")[1].split("=")[1]:"",b_id:BMS.Storage.get({name:"bmsId",storage:"C"}),ga_id:"704911358.1495169611",tm:a+":"+o+":"+s,is_web_launch:"Y",ua:"undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent:"",b_ref:void 0!==document.referrer?document.referer:"",b_url:window.location.href,cs_ld:""!=BMS.Storage.get({name:"ld",storage:"C"})?BMS.Storage.get({name:"ld",storage:"C"}):""}],BMS.Storage.del({name:"weblaunch",storage:"C"}),client=new Paho.MQTT.Client("clickstream-in.bookmyshow.com",8083,"myclientid_"+parseInt(100*Math.random(),10)),client.onConnectionLost=onConnectionLost,client.onMessageArrived=onMessageArrived,client.connect({onSuccess:onWebLaunchConnect,useSSL:!0})),clickStreamData={},clickStreamData.data=[e],e.b_id=BMS.Storage.get({name:"bmsId",storage:"C"}),e.s_id=BMS.Storage.get({name:"mqttsid",storage:"C"}),e.tm=a+":"+o+":"+s,e.dt=i+"-"+n+"-"+t,e.data_src="ga",e.is_web_launch="N","undefined"==typeof client1||null==client1?(client1=new Paho.MQTT.Client("clickstream-in.bookmyshow.com",8083,"myclientid_"+parseInt(100*Math.random(),10)),client1.onConnectionLost=onConnectionLost,client1.onMessageArrived=onMessageArrived,client1.connect({onSuccess:onConnect,useSSL:!0})):client1.isConnected()?onConnect():client1.connect({onSuccess:onConnect,useSSL:!0})}}catch(e){void 0}}function onWebLaunchConnect(){client.subscribe("clickstream/web"),message=new Paho.MQTT.Message(JSON.stringify(webLaunch)),message.destinationName="clickstream/web",client.send(message)}function onConnect(){client1.subscribe("clickstream/web"),message=new Paho.MQTT.Message(JSON.stringify(clickStreamData.data)),message.destinationName="clickstream/web",client1.send(message)}function onConnectionLost(e){e.errorCode}function onMessageArrived(e){}BMS.Misc.initializeAd=function(e,t,n){try{"undefined"!=typeof googletag&&void 0===adsArr[n]&&googletag.cmd.push((function(){adsArr[n]=googletag.defineSlot(e,t,n).addService(googletag.pubads()),googletag.pubads().collapseEmptyDivs(!0),googletag.enableServices()}))}catch(e){BMS.Misc.fnErr({fnName:"initializeAd",err:e})}},BMS.Misc.refreshAd=function(e){try{"undefined"!=typeof googletag&&void 0!==e&&googletag.cmd.push((function(){googletag.pubads().refresh([e])}))}catch(e){BMS.Misc.fnErr({fnName:"refreshAd",err:e})}},BMS.Misc.fnCover=function(e){try{void 0}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnCover",err:e})}},BMS.Misc.fnGoTo=function(e){try{setTimeout("window.location.href='"+e+"'",0)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnGoTo",fnParams:arguments,err:e})}},BMS.Misc.IsValidDate=function(t,n,i){try{var e=new Date(n+"/"+t+"/"+i);return e.getDate()==t&&(e.getMonth()==n-1&&e.getFullYear()==i)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.IsValidDate",fnParams:t+" "+n+" "+i,err:e})}},BMS.Misc.fnGQS=function(e,t){try{t=null!=t?t:"";for(var n=window.location.search.substring(1).split("&"),i=0;i<n.length;i++){var a=n[i].split("=");if(a[0]==e)return a[1]}return t}catch(e){BMS.Misc.fnErr({fnName:"misc.js - BMS.Misc.fnGQS",fnParams:arguments,err:e})}},BMS.Misc.fnPushEventDataToAnalytics=function(e,t,n,i){try{var a=$.extend(!0,{},n),o=($.extend(!0,{},n),$.extend(!0,{},i));$.extend(!0,{},n);-1!=$.inArray("WR",e)&&"undefined"!=typeof clevertap&&void 0!==clevertap.event&&clevertap.event.push(t,a),-1==$.inArray("GA",e)&&-1==$.inArray("GTM",e)||("undefined"!=typeof dataLayer&&dataLayer.push(o),"undefined"!=typeof Paho&&""==BMS.Storage.get({name:"clkstream",storage:"C"})&&BMS.Misc.fnAjax({url:global.getDataUrl,data:{cmd:"SENDCLICKSTREAM"},type:"GET",dataType:"json",success:function(e){BMS.Storage.set({name:"clkstream",value:e.flag,storage:"C"})},error:function(e){}})),-1!=$.inArray("CC",e)&&void 0}catch(e){BMS.Misc.fnErr({fnName:"misc.js - BMS.Misc.fnPushEventDataToAnalytics",fnParams:arguments,err:e})}},BMS.Misc.fnPushNotificationsFromClevertap=function(e,t,n,i,a){try{e=e||"Get Personalized Updates",t=t||"Get notified when we find something interesting that you'll love!",n=n||"OK",i=i||"Not Now",a=a||"#c02c3a","undefined"!=typeof clevertap&&void 0!==clevertap.notifications&&clevertap.notifications.push(e,t,n,i,a)}catch(e){void 0}},Array.prototype.indexOf||(Array.prototype.indexOf=function(e){return $.inArray(e,this)});var handlePopups={scrollPos:null,initialScrollPos:null,freezeDocument:function(e){this.scrollPos=$(document).scrollTop(),this.scrollPos<=0?this.initialScrollPos=Math.abs(parseInt($("body").css("margin-top"))):this.initialScrollPos=this.scrollPos,e&&($showCaseCarousel=$("#showcase-primary .showcase-carousel"),$showCaseCarousel.hasClass("slick-initialized")&&$showCaseCarousel.slick("slickPause"),pausePrimaryShowcase=!0),$("body").css("margin-top",-this.initialScrollPos),$("body").addClass("_fixed")},releaseDocument:function(){$("body").removeClass("_fixed"),$("body").css("margin-top",0),$(document).scrollTop(this.initialScrollPos),$("#showcase-primary .showcase-carousel").slick("slickPlay")}};BMS.Misc.fnPopup=function(e){try{var t=e.url,n=(null!=e.modal&&""!=e.modal&&e.modal,null!=e.height&&""!=e.height?e.height:552),i="width="+(null!=e.width&&""!=e.width?e.width:800)+"px, height="+n+"px, center=yes, status=no, toolbar=no, location=no, menubar=no, scrollbars=yes, resizable=no, position=absolute, left= 200px; top=135px;";return window.open(t,"_blank",i)}catch(e){BMS.Misc.fnErr({fnName:"misc.js - BMS.Misc.fnPopup",fnParams:arguments,err:e})}},BMS.Misc.fnSvgAsset=function(e){try{var t=e.split("/"),n=t[2],i="";return global.svgManifest&&global.svgManifest.hasOwnProperty(n)&&(i="/"+t[1]+"/"+global.svgManifest[n]),""==i?e:i}catch(e){BMS.Misc.fnErr({fnName:"misc.js - BMS.Misc.fnSvgAsset",fnParams:arguments,err:e})}},BMS.Misc.Router=(function(){var o={},s={},r=!0,l="";return window.addEventListener("hashchange",(function(e){if(r){var t,n,i=(t=void 0!==e.newURL?e.newURL.split("#"):window.location.hash.split("#"))[1];void 0!==i&&(i=i.substr(1));var a=(n=void 0!==e.oldURL?e.oldURL.split("#"):l.split("#"))[1];void 0!==a&&(a=a.substr(1)),n.length<t.length?o.hasOwnProperty(i)&&o[i].forEach((function(e){e.callback.call()})):n.length===t.length?(s.hasOwnProperty(a)&&s[a].forEach((function(e){e.callback.call()})),o.hasOwnProperty(i)&&o[i].forEach((function(e){e.callback.call()}))):s.hasOwnProperty(a)&&s[a].forEach((function(e){e.callback.call()})),l=window.location.hash}else r=!0})),{registerRoute:function(e,t,n,i){n&&"function"==typeof n&&(o.hasOwnProperty(e)||(o[e]=[]),o[e].push({key:t,callback:n})),i&&"function"==typeof i&&(s.hasOwnProperty(e)||(s[e]=[]),s[e].push({key:t,callback:i}))},unregisterRoute:function(e,n){if(!$.isEmptyObject(o)&&o.hasOwnProperty(e)){var i=null;o[e].forEach((function(e,t){if(e.key===n)return i=t,!1})),null!==i&&o[e].splice(i,1)}if(!$.isEmptyObject(s)&&s.hasOwnProperty(e)){var a=null;s[e].forEach((function(e,t){if(e.key===n)return a=t,!1})),null!==a&&s[e].splice(a,1)}},triggerRoute:function(e,t){void 0===t&&(t=!0),!1==(r=!!t)&&setTimeout((function(){r=!0}),100),""===e||null==e?window.history.back():window.location.hash="!"+e}}})(),BMS.Misc.fnToMoneyFormat=function(t){try{t+="",x=t.split("."),x1=x[0],x2=1<x.length?"."+x[1]:"";for(var e=/(\d+)(\d{3})/,n=0,i=String(x1).length,a=parseInt(i/2-1);e.test(x1)&&(0<n?x1=x1.replace(e,"$1,$2"):(x1=x1.replace(e,"$1,$2"),e=/(\d+)(\d{2})/),n++,0!=--a););return x1+x2}catch(e){return t}},BMS.Misc.fnIsUserSuperStar=function(){return BMS.Storage.get({name:"ld",key:"LOYALTYISSUBSCRIBED"})||"N"},BMS.Misc.fnIsUserTargetted=function(){return BMS.Storage.get({name:"ld",key:"LOYALTYISTARGETTED"})||"N"},$(document).ready((function(){if($(window).resize((function(){BMS.Modal.currentModal&&BMS.Misc.fnDoFloat()})),$("#app-install-wrap .__cancel-icon").click((function(){$("#app-install-wrap").slideUp(300),BMS.Storage.set({name:"appInstallWrapper",value:"set",storage:"C",sess:!0})})),0<$(".social-share-links").length){$("[data-share-button]").click((function(){var e=$(".social-share-links");e.is(":visible")?e.slideUp():e.slideDown()}));var e=!1;"undefined"!=typeof isTouchScreen?e=isTouchScreen:void 0!==global.blnIsTouchScreen&&(e=global.blnIsTouchScreen),e?$(".social-share-links").socialSharer({buttons:["facebook","twitter","whatsapp"],config:{showCount:!1}}):$(".social-share-links").socialSharer({buttons:["facebook","twitter"],config:{showCount:!1}})}$("[data-hidden-html-target]").each((function(){var e=$(this),t=e.attr("id"),n=e.attr("data-hidden-html-target"),i=$("#"+t).html();$(n).html($(n).html()+i),$("#"+t).remove()}))})),BMS.Misc.fnSendGAandRedirect=function(e,t){BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},e),BMS.Misc.fnGoTo(t)},BMS.Misc.fnTriggerQuickbook=function(){try{""!=window.location.hash&&window.history.pushState("",window.document.title,window.location.pathname),BMS.Misc.Router.triggerRoute("quickbook",!0),$("#quickbook-wrapper").fadeIn()}catch(e){void 0}},BMS.Misc.fnGetLang=function(e){try{switch(e){case"eng":strLan="English";break;case"hin":strLan="Hindi";break;case"mar":strLan="Marathi";break;case"guj":strLan="Gujarati";break;case"tam":strLan="Tamil";break;case"tel":strLan="Telugu";break;case"kan":strLan="Kannada";break;case"mal":strLan="Malayalam";break;case"pun":strLan="Punjabi";break;default:strLan=""}return strLan}catch(e){void 0}},BMS.Misc.fnGetEventProductType=function(e){try{if(null==e)return"";var t="";switch(e){case"MT":t="movies";break;case"CT":case"ET":t="events";break;case"PL":t="plays";break;case"SP":t="sports";break;default:t="movies"}return t}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnGetEventProductType",fnParams:"",err:e})}},BMS.Misc.fnGetPriceRange=function(t){try{var e=_.find([{min:0,max:500},{min:501,max:1e3},{min:1001,max:1500},{min:1501,max:2e3},{min:2001,max:4e3},{min:4001,max:1e4}],(function(e){if(t>=e.min&&t<=e.max)return e}));return e=void 0===e?"10000+":e.min+"-"+e.max}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnGetPriceRange",err:e})}},BMS.Misc.fnCallOtpApi=function(t,e){try{var n=null!=e.fnCC&&e.fnCC,i=null!=e.fnEC&&e.fnEC,a=(null!=t.blnSupp&&t.blnSupp,location.origin+"/serv/otpLogin.bms");BMS.Misc.fnAjax({data:{params:t},dataType:"json",type:"post",url:a,success:function(e){void 0!==e.statusCode&&200==e.statusCode?n(e):void 0===e.statusCode||""==e.statusCode?i(e={statusCode:"api-down",message:"Something not right here. Please try again after a while."}):i(e)},error:function(e,t,n){response={statusCode:"api-down",message:"Something not right here. Please try again after a while."},i(response)}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnCallOtpApi",fnParams:t,err:e})}},BMS.Misc.loadScript=function(e,t,n,i,a){try{if(e.getElementById(n))return;var o=e.getElementsByTagName(t)[0],s=e.createElement(t);s.id=n,s.src=i,o.parentNode.insertBefore(s,o),s.onload=a}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.loadScript",err:e})}},(function(r){r.fn.modal=function(){BMS.Modal.currentModal=null;var n=r(".modal .__overlay"),i=r(".main-body-wrapper"),a=(r(".modal .popover"),"_animateTop"),o="_make-blur",s=r(".select-overlay");r("[data-modal]").tap((function(){var e=r(this).attr("data-modal");BMS.Modal.fnShowModal(e)})),r(".__dismiss").tap((function(){BMS.Modal.fnHideModal()})),n.tap((function(){r.inArray(r(BMS.Modal.currentModal).attr("id")),-1<["qty-sel","lottery-form","oneClickWalletPop","coupon-confirmation","skipLinkPopup","linkSigninPopup","superstarSigninPopup"]&&BMS.Modal.fnHideModal()})),BMS.Modal.fnShowModal=function(e){r(document).scrollTop();if(null!=BMS.Modal.currentModal&&(BMS.Modal.storedModal=BMS.Modal.currentModal,BMS.Modal.currentModal.removeClass(a),BMS.Modal.currentModal.hide(),--handlePopups.activeModals),s.is(":visible")&&s.click(),"signinPopup"==e&&(BMS.SignIn.fnGoogleSDKinit(),r("#iPwd").prop("type","password"),""!=r("#dSignInErrorEmail").text()&&r("#dSignInErrorEmail").text("").hide(),""!=r("#dSignInErrorPassword").text()&&r("#dSignInErrorPassword").text("").hide(),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event_type:"page_view",pageurl:window.location.href,tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),user_mode:"guest",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",source:"",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),experiment:"",product:"otp_login",pagetype:"login",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"})),"signupPopup"==e&&(BMS.SignIn.fnGoogleSDKinit(),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event_type:"page_view",pageurl:window.location.href,tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),user_mode:"guest",region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",source:"",bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"mqttsid"}),experiment:"",product:"otp_login",pagetype:"signup",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:"web"})),BMS.Modal.currentModal=r("#"+e),n.css("opacity",0).show(),n.transition({opacity:1},200).show(),i.addClass(o),handlePopups.freezeDocument(!0),BMS.Misc.fnDoFloat(),setTimeout("BMS.Misc.fnDoFloat()",50),"dRatConf"!=e&&"signupPopup"!=e&&"rblCallout"!=e&&r(BMS.Modal.currentModal).find("input").val(""),BMS.Modal.currentModal.show(),"locationPopup"==e&&global.blnIsTouchScreen){var t=r(window).height()-(r(".location-header","#locationPopup").outerHeight()+20);r(".location-container","#locationPopup").css({"max-height":t}),BMS.Misc.fnDoFloat()}$focusElem=r(BMS.Modal.currentModal).find("input[type=text],input[type=email],input[type=number],textarea,select").filter(":visible:first"),""!=$focusElem&&setTimeout((function(){"signinPopup"==e&&global.blnIsTouchScreen||"locationPopup"==e&&global.blnIsTouchScreen||$focusElem.focus()}),200)},BMS.Modal.fnHideModal=function(){var e=window.location.href.split("/")[4];"plays"!=e&&"plays_v1"!=e||(r(".stars").find("use").css({fill:"#e0e0e0"}),r(".rate-o-meter").text("0.0"));var t=BMS.Storage.get({name:"lngTransId"});if(!_.isEmpty(r(".js-merc-link").attr("data-merc")))if(_.isEmpty(t))r(".js-merc-link").attr("data-merc",!1),void 0!==BMS.Modal.currentModal&&null!=BMS.Modal.currentModal&&(BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),BMS.Modal.currentModal.hide(),handlePopups.releaseDocument(),i.removeClass(o),BMS.Modal.currentModal.removeClass(a),BMS.Modal.currentModal=null);else{if(!confirm("Closing the Merchandise Store will cancel the transaction, Do you wish to proceed?"))return;Checkout.cancelMerchandiseTransaction(),BMS.Storage.del({name:"lngTransId"}),r(".js-merc-link").attr("data-merc",!1),n.transition({opacity:0},200).hide(),void 0!==BMS.Modal.currentModal&&null!=BMS.Modal.currentModal&&(BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),BMS.Modal.currentModal.hide(),handlePopups.releaseDocument(),i.removeClass(o),BMS.Modal.currentModal.removeClass(a),BMS.Modal.currentModal=null,location.reload())}n.transition({opacity:1},200).hide(),void 0!==BMS.Modal.currentModal&&null!=BMS.Modal.currentModal&&(BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),BMS.Modal.currentModal.hide(),handlePopups.releaseDocument(),i.removeClass(o),BMS.Modal.currentModal.removeClass(a),BMS.Modal.currentModal=null,r("html").removeClass("no-scroll"))}}})(jQuery),$(document).ready((function(){$("body").modal()})),BMS.Validate.address=function(t){try{if(t&&t.length<5)return!1;return/^[a-zA-Z0-9 \\\/;:.,-]+$/g.test(t)}catch(e){BMS.Misc.fnErr({fnName:"fnVal.address",fnParams:t,err:e})}},BMS.Validate.chkName=function(t){try{return t=$.trim(t),pattern=/^([a-zA-Z\s]+)$/,!(-1<t.indexOf("`"))&&pattern.test(t)}catch(e){BMS.Misc.fnErr({fnName:"fnVal.name",fnParams:t,err:e})}},BMS.Validate.email=function(t){try{return!(-1<t.indexOf(","))&&/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i.test(t)}catch(e){BMS.Misc.fnErr({fnName:"fnVal.email",fnParams:t,err:e})}},BMS.Validate.date=function(e,t){try{if("string"==typeof t&&"u"===t.charAt(0).toLowerCase()){var n=parseInt(t.slice(1));if(isNaN(n))return!1;var i=new Date(e);if(1<i.getFullYear()/1e4)return!1;i=i.getTime();var a=new Date("01-09-2017");a=a.getTime();return n>=Math.round((a-i)/31536e6)}return!0}catch(e){BMS.Misc.fnErr({fnName:"fnVal.date",fnParams:strEmail,err:e})}},BMS.Validate.mob=function(t){try{return/^[^0]\d{9}$/.test(t)}catch(e){BMS.Misc.fnErr({fnName:"fnVal.mob",fnParams:t,err:e})}},BMS.Validate.pancard=function(t){try{return/^([a-zA-Z]{5})(\d{4})([a-zA-Z]{1})$/.test(t)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Validate.pancard",fnParams:t,err:e})}},BMS.Validate.ifsc=function(t){try{return/^[a-zA-Z0-9]+$/.test(t)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Validate.ifsc",fnParams:t,err:e})}},BMS.Validate.number=function(t){try{return/^\d+$/.test(t)}catch(e){BMS.Misc.fnErr({fnName:"fnVal.address",fnParams:t,err:e})}},BMS.Validate.rblpancard=function(t){try{return/^([a-zA-Z]{3})([P,p]{1})([a-zA-Z]{1})(\d{4})([a-zA-Z]{1})$/.test(t)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Validate.pancard",fnParams:t,err:e})}},BMS.Validate.pincode=function(t){try{return/^[0-9]{6}$/.test(t)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Validate.pincode",fnParams:t,err:e})}},BMS.Validate.otp=function(t){try{if(t&&t.length<6)return!1;return/^\d+$/.test(t)}catch(e){BMS.Misc.fnErr({fnName:"fnVal.otp",fnParams:t,err:e})}},BMS.Validate.intlNum=function(t){try{return/^[\s()+-]*([0-9][\s()+-]*){6,20}$/.test(t)}catch(e){BMS.Misc.fnErr({fnName:"fnVal.intlNum",fnParams:t,err:e})}};var primaryShowcase=$("#showcase-primary .showcase-carousel"),pausePrimaryShowcase=!1,handlePopups={scrollPos:null,initialScrollPos:null,activeModals:0,escKeyHandler:function(e){27!=e.keyCode&&27!=e.which||(null!==BMS.Modal.currentModal?BMS.Modal.fnHideModal():$(".select-overlay").click())},freezeDocument:function(e){try{if(e=$.extend({},e),this.activeModals++,1<this.activeModals)return!1;$(document).bind("keyup",this.escKeyHandler),this.scrollPos=$(document).scrollTop(),this.scrollPos<=0?this.initialScrollPos=Math.abs(parseInt($("body").css("margin-top"))):this.initialScrollPos=this.scrollPos,primaryShowcase&&primaryShowcase.length&&primaryShowcase.hasClass("slick-initialized")&&primaryShowcase.slick("slickPause"),pausePrimaryShowcase=!0,global.blnIsTouchScreen&&!e.popover||($("body").css("margin-top",-this.initialScrollPos),$("body").addClass("_fixed"),primaryShowcase&&primaryShowcase.length&&primaryShowcase.hasClass("slick-initialized")&&primaryShowcase.slick("slickPause"))}catch(e){BMS.Misc.fnErr({fnName:"handlePopups.freezeDocument",err:e})}},releaseDocument:function(e){try{this.activeModals--,this.activeModals<1&&($("body").hasClass("_fixed")&&($("body").removeClass("_fixed"),$("body").css("margin-top",0),$(document).scrollTop(this.initialScrollPos)),primaryShowcase&&primaryShowcase.length&&primaryShowcase.hasClass("slick-initialized")&&primaryShowcase.slick("slickPlay"),$(document).unbind("keyup",this.escKeyHandler),this.activeModals=0)}catch(e){BMS.Misc.fnErr({fnName:"handlePopups.releaseDocument",err:e})}}},onPrimaryShowcaseInit=function(e,t){pausePrimaryShowcase&&$("#showcase-primary .showcase-carousel").slick("slickPause")},initCarousel={banner:function(){$("#showcase-primary .showcase-carousel").on("init",(function(e,t){_.delay(onPrimaryShowcaseInit,500,e,t)})),$("#showcase-primary .showcase-carousel").slick({centerMode:!0,slidesToShow:1,arrows:!0,dots:!0,speed:1e3,autoplay:!0,pauseOnHover:!0,adaptiveHeight:!1,variableWidth:!0})},handpick:function(){$("#handpick-carousel .showcase-carousel")[0]&&$("#handpick-carousel .showcase-carousel").slick({centerMode:!0,slidesToShow:1,arrows:!0,dots:!1,speed:1e3,autoplay:!1,pauseOnHover:!1,adaptiveHeight:!1,variableWidth:!0})}};if(global.blnIsTouchScreen)var initializeWOW=function(){window.wow=new WOW({boxClass:"wow",animateClass:"touch_animated",offset:-50,live:!0,lazyLoad:!0,lazyLoadOffset:-100}),wow.init()};else var initializeWOW=function(){window.wow=new WOW({boxClass:"wow",animateClass:"animated",offset:-50,live:!0,lazyLoad:!0,lazyLoadOffset:-100}),wow.init()};var triggerWOWScroll=function(){window.stopWowLoad=!1,setTimeout((function(){"undefined"!=typeof wow&&(wow.scrolled=!0,wow.scrollCallback())}),5)},bannerInit=function(){if($("#showcase-primary .showcase-carousel").find(".showcase-card").eq(0).find("img")[0]){window.stopWowLoad=!0,$(".bannerLoadCover").remove(),$("#showcase-primary .showcase-carousel").removeClass("_none"),$("#showcase-primary").find(".banner-container").length<2&&$("#showcase-primary").find(".banner-container").eq(0).clone().appendTo($("#showcase-primary").find(".showcase-carousel")),$("#showcase-primary .showcase-carousel").on("init",(function(){i($(this))})),$("#showcase-primary .showcase-carousel").slick({centerMode:!0,slidesToShow:1,arrows:!0,dots:!0,speed:1e3,autoplay:!0,pauseOnHover:!0,adaptiveHeight:!1,variableWidth:!0});var e=new Date,t=e.getMonth()+1,n=e.getDate();e.getFullYear();$("#showcase-primary .showcase-carousel").on("afterChange",(function(){i($(this))})),triggerWOWScroll()}function i(e){var t=(function(e){if(!_.isUndefined(e)&&!_.isEmpty(e))return e.find(".slick-current").find("img").attr("src")})(e);if(!_.isUndefined(t)&&t.length){t=t.toLowerCase();var n=$(".dilwale-countdown"),i=new Date,a=i.getMonth()+1,o=i.getDate(),s=i.getFullYear()+"/"+a+"/"+o,r=[];"2016/11/18"!=s&&"2016/11/19"!=s||(r=["pets-web","tum_bin"]),!window.netflixShowCaseItemLoaded&&-1<t.indexOf("netflix")&&"undefined"!=typeof fnTrackNetflixShowcaseItem&&(-1<t.indexOf("netflix_dd")?fnTrackNetflixShowcaseItem("DD","view"):-1<t.indexOf("netflix_hoc")&&fnTrackNetflixShowcaseItem("HOC","view"),window.netflixShowCaseItemLoaded=!0);for(var l=!1,c=0;c<r.length;c++)-1<t.indexOf(r[c].toLowerCase())&&(l=!0);l&&n.length?n.removeClass("_active"):"true"==n.attr("data-checkQBFixed")?n.addClass("_active"):n.removeClass("_active")}}},isOverlayInitialized=!1,showcaseOverlay={isDismissed:!1,init:function(e){if(1!=isOverlayInitialized){isOverlayInitialized=!0;var t=$("#showcase-primary .showcase-overlay").find(".overlay-card").eq(0).find("img");if(t[0]){window.stopWowLoad=!0,$(".home-wrapper").one("click",(function(){showcaseOverlay.dismiss()})),$(".__dismiss","#showcase-primary").removeClass("_none").one("click",(function(){showcaseOverlay.dismiss(),window.location.hash=""})),$("#showcase-primary .showcase-overlay").find(".__bg").css({"background-image":"url("+t.attr("src")+")"}),$(".bannerLoadCover").remove(),triggerWOWScroll();var n=$(".overlay-card","#showcase-primary");n.hasClass("_video")&&n.find(".__play").one("click",(function(){setTimeout((function(){showcaseOverlay.dismiss()}),100)})),setTimeout((function(){showcaseOverlay.dismiss()}),1e4);var i=$("#showcase-primary .showcase-carousel").find("img").eq(0);i.attr("src",i.data("lazy")).removeAttr("data-lazy")}else e()}},dismiss:function(){this.isDismissed||(this.isDismissed=!0,$("#showcase-primary .showcase-overlay").addClass("puff-reverse"),$(".top-banner-wrapper").removeClass("_overlay"),setTimeout((function(){BMS.Storage.isset({name:"Rgn"})&&$("body").removeClass("_fixed"),global.blnIsTouchScreen||$("#quickbook-wrapper").removeClass("_curtain"),$(".home-wrapper").transition({opacity:1},300),$("#navbar").removeClass("none")}),305),bannerInit())}};function firstLoad(){void 0,showcaseOverlay.init((function(){bannerInit()}))}"undefined"!=typeof WOW&&initializeWOW(),"undefined"!=typeof showCaseHandler&&showCaseHandler.registerCallback({key:"firstLoad",callback:firstLoad}),$(document).ready((function(){$("#mob-toggle-menu ul");$(".navbar-toggle").on("click",(function(){})),isOverlayInitialized||window.isReactShowcase||showcaseOverlay.init((function(){bannerInit()})),"undefined"!=typeof WOW&&void 0===window.wow&&initializeWOW(),global.blnIsTouchScreen&&$("body").addClass("_touch");var n=$(".primary"),i=$(".secondary"),a=window.pageYOffset,o=(i.height(),$("#quickbook-wrapper")),s=0,r=!1,l=!1;o.length&&1!==o.data("always-fixed")&&(s=o.find(".search-container").offset().top-o.find(".search-box-container").height()-51);var c=null;$(document);global.blnIsTouchScreen||$(window).on("scroll",(function(e){if($("#quickbook-wrapper").hasClass("_fixed")?($(".dilwale-countdown").removeClass("_active"),$(".dilwale-countdown").attr("data-checkQBFixed","false")):($(".dilwale-countdown").addClass("_active"),$(".dilwale-countdown").attr("data-checkQBFixed","true")),!BMS.ddOpen){var t=window.pageYOffset;c&&a+30<t&&clearTimeout(c),0!==s&&(window.pageYOffset>=s?r||(r=!0,o.addClass("_fixed")):r&&(r=!1,o.removeClass("_fixed"))),s<t?a+30<t?c=setTimeout((function(){l||(n.addClass("scroll-animation"),l=!0,i.addClass("scroll-animation"),o.addClass("_fixed _primary-hidden _animated"))}),200):t<a-40&&(c=setTimeout((function(){l&&(n.removeClass("scroll-animation"),l=!1,i.removeClass("scroll-animation"),c=null,o.removeClass("_primary-hidden"))}),300)):t<a&&(c&&clearTimeout(c),c=setTimeout((function(){n.removeClass("scroll-animation"),l=!1,i.removeClass("scroll-animation"),c=null,0==s?o.removeClass("_primary-hidden"):o.removeClass("_primary-hidden _fixed _animated")}),200)),a=t}})),"home"!=pageName&&initCarousel.handpick(),$(".universal-search-toggle").click((function(){$("#search-keywords").val("").focus(),$(this).is(":checked")?$(".__right").transition({opacity:0}):$(".__right").transition({opacity:1})})),$("#showcase-primary .showcase-carousel").on("mouseenter",'.banner-container[aria-hidden="false"]',(function(){$("#showcase-primary .showcase-carousel").slick("slickPause")})),$("#showcase-primary .showcase-carousel").on("mouseleave",'.banner-container[aria-hidden="false"]',(function(){$("#showcase-primary .showcase-carousel").slick("slickPlay")})),$(".play-trailer > svg").on("mouseenter",(function(){$(this).closest(".showcase-card").find(".__hover-overlay").addClass("scale-up")})),$(".play-trailer > svg").on("mouseleave",(function(){$(this).closest(".showcase-card").find(".__hover-overlay").removeClass("scale-up")})),$(".play-trailer > svg").click((function(){$(window).height(),$(window).width();var e=$(this);$(".main").css({"-webkit-filter":"blur(10px)"}),$(".popup-overlay").append(e.parent(".play-trailer").siblings(".__bg").data("url")).fadeIn(),$(".popup-overlay").css({background:"rgba(0, 0, 0, 0.7)"}),$(".popup-overlay iframe").css({position:"absolute",left:0,right:0,margin:"auto",top:0,bottom:0})})),$(".popup-overlay").click((function(){$(".main").css({"-webkit-filter":"blur(0px)"}),$(".popup-overlay iframe").remove(),$(this).hide()})),$(".select-overlay").click((function(){BMS.Header.fnHideSelectOverlay()})),$(".__dismiss",".mobile-menu").click((function(){BMS.Header.fnHideSelectOverlay()})),$(".dd-tab-list").on("mouseenter",".tab-toggle",(function(){var e,t=$(this).closest(".dd-tab");t.find(".dd-tab-list").find(".tab-toggle._active").removeClass("_active"),t.find(".dd-tab-content").find(".tab-content._active").removeClass("_active"),$(this).addClass("_active"),e=$(this).attr("data-toggle"),$(this).closest(".dd-tab").find("#"+e).addClass("_active"),wow&&setTimeout((function(){wow.scrolled=!0,wow.scrollHandler()}),100)})),$("#loyaltyHeaderLogo").click((function(e){e.preventDefault();var t="Y"==BMS.Storage.get({name:"ld",key:"LOYALTYISTARGETTED"}),n="Y"==BMS.Storage.get({name:"ld",key:"LOYALTYISSUBSCRIBED"}),i={event:"MyProfileSSLogoClick_common_page_11",pagesection:"undefined"!=typeof pageName?pageName:"",pagetype:"superstar",app_code:"web"};if(BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},i),t&&!n){var a={event:"SSOnboardinglanding_subscriptions_loyaltyrewards_1",Onboard_options:"ss_onboarding",pagetype:"superstar",pagesection:"ss_onboarding",app_code:"web"};BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},a);BMS.Misc.fnSendGAandRedirect({event:"SSLogolandingjourney_common_page_12",landing_options:"dashboard",pagesection:"ss_dashboard",pagetype:"superstar",source:"myprofile_logo",app_code:"web"},"/subscriptions/loyalty-rewards")}else{a={event:"SSLogolandingjourney_common_page_12",landing_options:"dashboard",pagesection:"ss_dashboard",pagetype:"superstar",source:"myprofile_logo",app_code:"web"};BMS.Misc.fnSendGAandRedirect(a,"/loyalty-program/superstar-user/dashboard")}}));var t=function(){try{var e=(new Date).getHours();return 0<=e&&e<12?"Monring":12<=e&&e<17?"Afternoon":17<=e&&e<21?"Evening":"Night"}catch(e){void 0}},d=function(){try{return BMS.Storage.get({name:"ld",key:"MEMBERID",storage:"C"})?"Logged IN":"Guest Mode"}catch(e){void 0}},u=function(){try{return visitorId=0<ga.getAll().length?ga.getAll()[0].get("clientId"):""}catch(e){void 0}},p=function(){try{return"undefined"!=typeof byWhat?"ET"==byWhat?"buytickets-movies":"buytickets-cinema":pageName}catch(e){void 0}};$("a.nav-link, a.right-nav-link").on("click",(function(){$this=$(this),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"nav_left_common_page_1",session_daypart:t(),domain:"bms_web",visitor_id:u(),user_mode:d(),pagetype:p(),product_type:$this.text().toUpperCase()})})),$("[data-nav-menu]").on("click",(function(){$this=$(this),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"nav_left_common_page_1",session_daypart:t(),domain:"bms_web",visitor_id:u(),user_mode:d(),pagetype:p(),product_type:$this.attr("data-nav-menu")})})),$(".navbar-toggle").on("tap",(function(e){BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"nav_left_common_page_1",session_daypart:t(),domain:"bms_web",visitor_id:u(),user_mode:d(),pagetype:p(),product_type:"Mobile Naigation"})})),$("#preSignIn").on("tap",(function(){void 0,BMS.SignIn.fireLoginView(),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"nav_left_common_page_1",session_daypart:t(),domain:"bms_web",visitor_id:u(),user_mode:d(),pagetype:p(),product_type:"SIGN IN"})})),$(".wallet-header .wallet-link, .wallet-header .__wallet-header-btn a").off(".walletClick").on("tap.walletClick",BMS.Header.fnPushWalletClickToAnalytics),$(".notification-strip").click(BMS.Notifications.fnCalculateNotificationWrapperHeight)})),BMS.Header.fnGetWalletBalance=function(){try{if("A"==BMS.Storage.get({name:"ld",key:"WALLETSTATUS",storage:"C"}))if(window.walBalance)BMS.Header.fnGetWalletBalanceSuccess();else{var e=BMS.Storage.get({name:"ld",key:"MEMBERID",storage:"C"}),t=BMS.Storage.get({name:"ld",key:"LSID",storage:"C"});BMS.Header.fnShowHideWalletBalance(!1),BMS.Misc.fnWsData({AppC:global.strAppCode,transId:0,cmd:"GETWALLETBALANCE",retType:"json",lsid:t,data:escape("|WALLETID="+e+"|MEMBERID="+e+"|LSID="+t+"|")+"GETWALLETDETAILS=Y|",fnCC:BMS.Header.fnGetWalletBalanceSuccess,supp:!0,fnEC:BMS.Header.fnGetWalletBalanceError}),global.SignOutCallBack.push((function(){BMS.Header.fnShowHideWalletBalance(!0,"",!1),window.walBalance&&(window.walBalance=null)}))}else BMS.Header.fnShowHideWalletBalance(!0,"",!1)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Header.fnGetWalletBalance",fnParams:arguments,err:e})}},BMS.Header.fnGetWalletBalanceSuccess=function(e){var t=e?$.parseJSON(unescape(e)):{},n=e&&t.BookMyShow&&t.BookMyShow.TotalBalance?parseFloat(t.BookMyShow.TotalBalance).toFixed(2):window.walBalance;e&&(window.walBalance=n),BMS.Header.fnShowHideWalletBalance(!0,n?global.strCurrencyCode+" "+n:"",!0)},BMS.Header.fnGetWalletBalanceError=function(e){BMS.Header.fnShowHideWalletBalance(!0,"",!1)},BMS.Header.fnShowHideWalletBalance=function(e,t,n){var i=$(".wallet-header .__wallet-header-btn a");if(e){if($(".wallet-header .__wallet-reel .mini").removeClass("__start-anim"),$(".wallet-header .__wallet-reel").hide(),t&&n){$(".wallet-header .__wallet-balance").html(t).show();t.split("Rs.")}else n||($(".wallet-header .__wallet-balance").html("").hide(),$(".wallet-header .__wallet-header-btn").show());i.text(i.data("wallet-activate"))}else $(".wallet-header .__wallet-reel .mini").addClass("__start-anim"),$(".wallet-header .__wallet-reel").show(),$(".wallet-header .__wallet-balance").html("").hide(),$(".wallet-header .__wallet-header-btn").hide();"C"!=BMS.Storage.get({name:"ld",key:"WALLETSTATUS"})&&"B"!=BMS.Storage.get({name:"ld",key:"WALLETSTATUS"})||$(".wallet-header").hide()},BMS.Header.fnPushWalletClickToAnalytics=function(e){e.stopPropagation();var t=$(".__wallet-balance").text(),n=pageName||location.pathname,i=t?t.split("Rs.")[1]:null;"buytickets"===pageName&&(n="ET"==byWhat?"buytickets-movies":"buytickets-cinema"),i=i?i.trim():"",BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"profilewalletclick_common_page_9",pagetype:n,wallet_label:$(this).text().trim(),user_wallet_balance:i})},BMS.Header.fnHeaderDD=function(e,t){try{if("toggle"==t){var n,i=$(e).attr("id"),a="";if($("[data-role=dHeaderDD]").each((function(){$(this).is(":visible")&&(a=$(this).attr("data-id"))})),$("[data-role=dHeaderDD]").hide(),""!=a&&i!=a&&handlePopups.releaseDocument({popover:!0}),i==a)"dTopRgnDD"==i?$("#"+i).removeClass("_active"):"dNotifDD"==i&&$(".notification-dropdown-wrapper").hide(),BMS.Header.fnHideSelectOverlay(),$("#quickbook-wrapper").removeClass("_inactive"),$("[data-id='"+i+"']").hide();else if($(".notification-dropdown-wrapper").hide(),$(".select-overlay").show(),$("#quickbook-wrapper").addClass("_inactive"),handlePopups.freezeDocument({popover:!0}),$("[data-id='"+i+"']").show(),"dTopRgnDD"==i)$("#"+i).addClass("_active");else if("dNotifDD"==i){function o(){$(".textAreaContent","#notification").readmore({moreLink:'<a class="read-more" href="#" ><span class="see_more_dots">...</span> See More</a>',lessLink:'<a class="show_less" href="#" >See Less</a>',collapsedHeight:75})}$(".notification-dropdown-wrapper").show(),void 0===$(".textAreaContent","#notification").readmore&&"undefined"!=typeof notifReadMoreUrl?$.getScript(notifReadMoreUrl,(function(){o()})):"undefined"!=typeof notifReadMoreUrl&&o()}if("dTopRgnDD"==i)if(global.blnIsTouchScreen)(n=$(window).height()-$(".primary",".mobile-menu").height())&&$(".location-search-container").css({"max-height":n});else $("[data-id='"+i+"'] #inp_RegionSearch_top").focus();if("preLogin"==i&&$("#myProfile").css({transition:"all 0.5s ease",right:"0"}),"postSignIn"==i&&$("#myProfile").css({transition:"all 0.5s ease",right:"0"}),"dNotifDD"==i)if(global.blnIsTouchScreen)(n=$(window).height()-$(".primary",".mobile-menu").height())&&$("#notification").css({"max-height":n})}BMS.SignIn.fnCalculateMenuItemsHeight()}catch(e){BMS.Misc.fnErr({fnName:"BMS.Header.fnHeaderDD",err:e})}},window.loop=0,BMS.Header.fnHideSelectOverlay=function(){try{window.loop++,$("[data-role=dHeaderDD]").hide(),$("#quickbook-wrapper").removeClass("_inactive"),$("#dTopRgnDD").removeClass("_active"),$(".notification-dropdown-wrapper").hide(),$("#myProfile").removeAttr("style"),handlePopups.releaseDocument(),$(".select-overlay").hide()}catch(e){BMS.Misc.fnErr({fnName:"BMS.Header.fnHideSelectOverlay",err:e})}},BMS.Header.fnChangeLang=function(e){var t=BMS.Storage.get({name:"lang",storage:"C"}),n=e.attr("data-val"),i=$("li[data-val ='"+t+"']").attr("data-name"),a=e.attr("data-name");i!=a&&(""==n||"eng"==n?BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"multilingual_lswitch_back",current_language:null!=i?i:"English",switchedback_language:a,appcode:global.strAppCode}):BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"multilingual_lang_change",previous_language:null!=i?i:"English",current_language:a,appcode:global.strAppCode})),BMS.Analytics.pushLanguageSelectionLotame(a),BMS.Storage.set({name:"lang",value:n,storage:"C",sess:!1}),BMS.Misc.fnBusy(!0),location.reload(!0)},BMS.Header.switchLangDropDown=function(){$("#dLangWrap .downChevron, #dLangWrapMob .downChevron").toggleClass("rotate"),$(".select-overlay").show(),$("#dLangWrap .optWrapper, #dLangWrapMob .optWrapper").toggleClass("open")},BMS.Header.fnShowLanguage=function(){global.blnIsTouchScreen?($("#dLangWrap").hide(),$("#dLangWrapMob").show()):$("#dLangWrap").show(),$("#dLangWrap .optWrapper li, #dLangWrapMob .optWrapper li").on("click",(function(){BMS.Header.fnChangeLang($(this)),$(".lang-select a").html($(this).text()),$("#dLangWrap .optWrapper, #dLangWrapMob .optWrapper li").removeClass("open")}));var e=BMS.Storage.get({name:"lang",storage:"C"});if(""==e)$(".lang-select a").html("English");else{$check=$("li[data-val ='"+e+"']");var t=$check.text().trim();$(".lang-select a").html(t),$("#preSignIn").text("Sign In")}};var socketReciever=null;$(document).ready((function(){if(""!=BMS.Storage.get({name:"Rgn",storage:"C"})&&"|Code=ALL|"!=BMS.Storage.get({name:"Rgn",storage:"C"})){1==BMS.Misc.fnGQS("multilingual")&&(BMS.Header.fnShowLanguage(),setTimeout((function(){$("li[data-val = eng]").show()}),200));var e=BMS.Storage.get({name:"lang",storage:"C"})||"eng";$(".navbar-toggle, #main-body-wrapper-overlay, .mob-brand").on("tap",(function(e){BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"nav_SPL_page_2"}),e.stopPropagation(),e.preventDefault(),toggleMobileNavigation($(this).data("navigationis"))})),BMS.Header.fnShowLanguage(),$("#dLangWrapMob ul").find("li").removeClass("selected"),$("#dLangWrapMob ul").find("li").each((function(){e==$(this).attr("data-val")&&($("#navbar").removeClass("less-space"),"tam"!=$(this).attr("data-val")&&"mal"!=$(this).attr("data-val")&&"tel"!=$(this).attr("data-val")&&"kan"!=$(this).attr("data-val")||$("#navbar").addClass("less-space"),$(this).addClass("selected"),"in.bookmyshow.com"==location.host?"eng"==$(".options li.selected").attr("data-val")&&($(".card-details").addClass("lang-eng"),$(".trending-searches .widget-content p").addClass("lang-eng")):($(".card-details").addClass("lang-eng"),$(".trending-searches .widget-content p").addClass("lang-eng")))}))}}));var _scrollPos=0;function fnCheckLoyaltyStatus(){if(BMS.Storage.isset({name:"ld"})){var e="Y"==BMS.Storage.get({name:"ld",key:"LOYALTYISTARGETTED"}),t="Y"==BMS.Storage.get({name:"ld",key:"LOYALTYISSUBSCRIBED"}),n=$("#loyaltyHeaderLogo, #loyaltyFooterLogo"),i=$("#loyaltyFooterSeparator");if(e||t?(n.show(),i.show()):(n.hide(),i.hide()),e||t){BMS.Storage.get({name:"ld",key:"LOYALTYVARIANTID"}),BMS.Storage.get({name:"ld",key:"MEMBEREMAIL"});n.find("a").attr("href","/subscriptions/loyalty-rewards"),"undefined"!=typeof pageName&&"home"==pageName&&window.loadVariantsData&&window.loadVariantsData(loyaltyBannerApi)}else n.find("a").attr("href","/loyalty-program/superstar-user/dashboard")}else{n=$("#loyaltyHeaderLogo, #loyaltyFooterLogo"),i=$("#loyaltyFooterSeparator");n.hide(),i.hide(),"undefined"!=typeof pageName&&"home"===pageName&&removeLoyaltyBanner()}}function loyaltyBannerApi(e){try{if(0===$("#loyaltyId").length&&loyalty&&loyalty.fnIsTargetted()&&(primaryShowcase.slick("unslick"),e.message&&"success"===e.message.toLowerCase()&&window.generateLoyaltyBanner&&generateLoyaltyBanner(e)),loyalty&&loyalty.fnIsSubscribed()&&window.initBadges&&e.data){var t=e.data.ssEventsDetails;t&&0<t.length&&window.initBadges(t)}}catch(e){BMS.Misc.fnErr({fnName:"loyaltyBannerApi",err:e})}}function removeLoyaltyBanner(){primaryShowcase&&primaryShowcase.length&&primaryShowcase.hasClass("slick-initialized")&&(primaryShowcase.slick("unslick"),primaryShowcase.find(".banner-container").each((function(){"/subscriptions/loyalty-rewards"==$(this).find("a").attr("href")&&$(this).remove()})),bannerInit())}function generateLoyaltyBanner(e){var t=e.data.imageUrl,n="";n+='<div id="loyaltyId" class="banner-container slick-current slick-active slick-center" style="" aria-hidden="false">\t\t\t\t\t\t    <div class="showcase-card is-loading">\t\t\t\t\t\t        <a href="/subscriptions/loyalty-rewards"target="_self"><img src="'+t+'" onload="" data-lazy="'+t+'" alt="" class="__bg"></a>\t\t\t\t\t\t        <div class="__overlay"></div>\t\t\t\t\t\t    </div>\t\t\t\t\t\t</div>',primaryShowcase.prepend(n),bannerInit()}function showLoyaltyLeadIn(){try{var e="Y"==BMS.Storage.get({name:"ld",key:"LOYALTYISTARGETTED"}),t="Y"==BMS.Storage.get({name:"ld",key:"LOYALTYISSUBSCRIBED"}),n=$("#loyaltyHeaderLogo, #loyaltyFooterLogo, #loyaltyFooterSeparator")||"";if(""==n)return!1;e||t?n.show():n.hide(),(e||t)&&pageName&&"home"==pageName&&window.loadVariantsData&&window.loadVariantsData(loyaltyBannerApi)}catch(e){void 0}}function toggleMobileNavigation(e){"active"==e?($("body").removeClass("transform-body"),setTimeout((function(){$(".navbar-toggle, #main-body-wrapper-overlay, .mob-brand").data("navigationis","inactive"),$("body").removeClass("open-mobile-menu"),$(".main-body-wrapper").css({marginTop:0}),window.scrollTo(0,-_scrollPos)}),300)):"inactive"==e&&(_scrollPos=-window.pageYOffset,$(".navbar-toggle, #main-body-wrapper-overlay, .mob-brand").data("navigationis","active"),$("body").addClass("open-mobile-menu"),$("body").addClass("transform-body"),$(".main-body-wrapper").css({marginTop:_scrollPos}))}var loyalty={isTargetted:BMS.Storage.get({name:"ld",key:"LOYALTYISTARGETTED",storage:"C"}),isSubscribed:BMS.Storage.get({name:"ld",key:"LOYALTYISSUBSCRIBED",storage:"C"}),config:{LOGO_COOKIE:"loyaltyLogoBadges",PROFILE_COOKIE:"loyaltyProfileBadges",DASHBOARD_EVENTS_COOKIE:"loyaltyDashboardBadges",EVENTS_DATA:"loyaltyBadges",DASHBOARD_PREMIERE_EVENTS_COOKIE:"loyaltyPremiereBadges"},fnLoyaltyRedirection:function(){try{BMS.Storage.isset({name:"ld"})?"Y"===this.isTargetted&&"Y"!==this.isSubscribed?BMS.Misc.fnGoTo("/subscriptions/loyalty-rewards"):"Y"!==this.isTargetted&&"Y"!==this.isSubscribed?BMS.Misc.fnGoTo("/"):"Y"==this.isSubscribed&&(siteGlobal.memberSuperstar=!0):BMS.Misc.fnGoTo("/secure/user-login?u="+location.pathname)}catch(e){void 0}},fnIsTargetted:function(){try{return!(!BMS.Storage.isset({name:"ld"})||"Y"!==this.isTargetted||"N"!==this.isSubscribed)}catch(e){BMS.Misc.fnErr({fnName:"loyalty.fnIsTargetted",err:e})}},fnIsSubscribed:function(){try{return!(!BMS.Storage.isset({name:"ld"})||"Y"!==this.isTargetted||"Y"!==this.isSubscribed)}catch(e){BMS.Misc.fnErr({fnName:"loyalty.fnIsSubscribed",err:e})}}},recaptcha1;$(document).click((function(e){$("#dLangWrapMob").is(e.target)||0!==$("#dLangWrapMob").has(e.target).length||$("#dLangWrapMob .optWrapper").removeClass("open").addClass("close")})),ContentReport={init:function(){"undefined"==typeof blnReCaptchaScriptLoaded&&(void 0,$.ajax({async:!0,url:"//www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit",dataType:"script"})),$("#categorySelectfooter").SumoSelect({csvDispCount:5,placeholder:"--Select one category--"}),$("#report-abuse-footer").on("click","#btnSubmitfooter",this.fnReportSubmit),BMS.Storage.isset({name:"ld"})&&$("#iemailfooter").attr("value",BMS.Misc.fnGVal({key:"MEMBEREMAIL",data:BMS.Storage.get({name:"ld"})})),$(".error-popup-message").on("click","#reportScreenfail",this.fnClearReport),$(".success-message").on("click","#reportScreensuc",this.fnClearReport),$(".__report-content-close").on("click",this.reportPopupClose),$("#categorySelectfooter").on("change",this.categoryChangeListener),$("#fnamefooter").change(this.nameChangeListener),$("#lnamefooter").change(this.lnameChangeListener),$("#iassociationfooter").change(this.associationChangeListener),$("#iemailfooter").change(this.emailChangeListener),$("#iphonenumberfooter").change(this.phoneChangeListener),$("#ipr-housefooter").change(this.prChangeListener),$("#sm-description").change(this.descriptionChangeListener),blnReCaptchaScriptLoaded=!0},categoryChangeListener:function(e){"null"!=$(this).val()&&$(".input-container.category").removeClass("_error")},nameChangeListener:function(e){0<$(this).val().length&&$(".input-container.fname").removeClass("_error")},lnameChangeListener:function(e){0<$(this).val().length&&$(".input-container.lname").removeClass("_error")},associationChangeListener:function(e){0<$(this).val().length&&$(".input-container.association").removeClass("_error")},emailChangeListener:function(e){var t=$(this).val();BMS.Validate.email(t)&&$(".input-container.email").removeClass("_error")},phoneChangeListener:function(e){$(this).val().match(/^\d{10}$/)&&$(".input-container.phno").removeClass("_error")},prChangeListener:function(e){0<$(this).val().length&&$(".input-container.pr-house").removeClass("_error")},descriptionChangeListener:function(e){0<$(this).val().length&&$(".input-container.mv-social-links").removeClass("_error")},reportPopupClose:function(e){$("body").removeClass("_fixed"),BMS.Modal.fnHideModal(),ContentReport.fnClearReport()},reportButtonClickListener:function(){ContentReport.init(),BMS.Modal.fnShowModal("report-abuse-footer",!0),$("body").removeClass("_fixed"),$("body").css("margin-top","0"),grecaptcha.render("recaptcha1",{sitekey:"6LcDIycTAAAAAJuYsBa4m4DcRopeXcQVOiWpDd3p"}),ContentReport.resetInputValue(),ContentReport.fnClearReport(),BMS.Storage.isset({name:"ld"})&&(void 0,$("#iemailfooter").val(BMS.Misc.fnGVal({key:"MEMBEREMAIL",data:BMS.Storage.get({name:"ld"})})))},fnClearReport:function(){$(".report-form").removeClass("_hide"),$(".policy-container").css("display","block"),$(".success-message").addClass("_hide"),$(".error-popup-message").addClass("_hide"),$(".input-container").removeClass("_error")},fnReportSubmit:function(){var e=$("#iemailfooter"),t=$("#categorySelectfooter"),n=$("#idetailsfooter"),i=$("#fnamefooter"),a=$("#lnamefooter"),o=$("#iassociationfooter"),s=$("#iphonenumberfooter"),r=$("#ipr-housefooter"),l=$("#sm-description"),c=$("#report-tnc"),d=$("#sm-linksfooter");captcha=$("#recaptcha1").find("textarea").val();captcha.length;if(null==t.val())return t.focus(),$(".input-container.category").addClass("_error"),!1;if(!BMS.Validate.chkName(i.val()))return i.focus(),$(".input-container.fname").addClass("_error"),!1;if(!BMS.Validate.chkName(a.val()))return a.focus(),$(".input-container.lname").addClass("_error"),!1;if(!BMS.Validate.chkName(o.val()))return o.focus(),$(".input-container.association").addClass("_error"),!1;if(!BMS.Validate.email(e.val()))return e.focus(),$(".input-container.email").addClass("_error"),!1;if(!s.val().match(/^\d{10}$/))return s.focus(),$(".input-container.phno").addClass("_error"),!1;if(0==r.val().length)return r.focus(),$(".input-container.pr-house").addClass("_error"),!1;if(0==l.val().length)return l.focus(),$(".input-container.mv-social-links").addClass("_error"),!1;if(!$(c).is(":checked"))return $(".report-abuse-terms").css("background-color","#f2dede"),!1;if(0==captcha.length)return $(".input-container.captcha-container").addClass("_error"),!1;var u={txtName:""!=i.val()?i.val():"",txtLname:""!=a.val()?a.val():"",txtAssociation:""!=o.val()?o.val():"",txtPhoneNo:""!=s.val()?s.val():"",txtPRHouse:""!=r.val()?r.val():"",txtSocialLinks:""!=d.val()?d.val():"",txtEmail:""!=e.val()?e.val():"",txtCategory:""!=t.val()?t.val():"",txtCategoryString:""!=$("#categorySelectfooter option:selected").text()?$("#categorySelectfooter option:selected").text():"",txtDetails:""!=n.val()?n.val():"",txtDescription:""!=l.val()?l.val():"",txtCaptcha:""!=captcha?captcha:"",txtPageUrl:window.location.href};ContentReport.submitForm(u,(function(e,t){"invalid_captcha"==e?($("#iCaptcha").attr("src",""),$("#iCaptcha").attr("src","/captcha/captcha2?"+(new Date).getTime()).one("load",(function(){$(".input-container.captcha-container").addClass("_error"),captcha.val("")}))):("error"!=e&&_.isEmpty(e)?($(".report-form").addClass("_hide"),$(".report-abuse-terms").css("display","none"),$(".policy-container").css("display","none"),$(".error-popup-message").addClass("_hide"),$(".success-message").removeClass("_hide")):($(".input-container").removeClass("_error"),$(".report-form").addClass("_hide"),$(".report-abuse-terms").css("display","none"),$(".policy-container").css("display","none"),$(".success-message").addClass("_hide"),$(".error-popup-message").removeClass("_hide")),ContentReport.resetInputValue())}))},resetInputValue:function(){$("#categorySelectfooter").val("null"),$("#categorySelectfooter")[0].sumo.reload(),$("#idetailsfooter").val(""),BMS.Storage.isset({name:"ld"})?(void 0,$("#iemailfooter").val(BMS.Misc.fnGVal({key:"MEMBEREMAIL",data:BMS.Storage.get({name:"ld"})}))):$("#iemailfooter").val(""),$("#captcha").val(""),$("#fnamefooter").val(""),$("#iassociationfooter").val(""),$("#iphonenumberfooter").val(""),$("#ipr-housefooter").val(""),$("#sm-linksfooter").val(""),$("#iCaptcha").attr("src",""),$("#iCaptcha").attr("src","/captcha/captcha2?"+(new Date).getTime()),$(".input-container").find("input").removeClass("_error"),$(".input-container").removeClass("_error")},submitForm:function(e,i){try{var t=("undefined"!==e.txtName&&e.txtName,e.txtName),n=("undefined"!==e.txtLname&&e.txtLname,e.txtLname),a=("undefined"!==e.txtAssociation&&e.txtAssociation,e.txtAssociation),o=("undefined"!==e.txtPhoneNo&&e.txtPhoneNo,e.txtPhoneNo),s=("undefined"!==e.txtPRHouse&&e.txtPRHouse,e.txtPRHouse),r=("undefined"!==e.txtSocialLinks&&e.txtSocialLinks,e.txtSocialLinks),l=("undefined"!==e.categorySelect&&e.categorySelect,e.categorySelect),c=("undefined"!==e.txtDetails&&e.txtDetails,e.txtDetails),d=("undefined"!==e.txtEmail&&e.txtEmail,e.txtEmail),u=("undefined"!==e.txtPageUrl&&e.txtPageUrl,e.txtPageUrl),p=("undefined"!==e.txtCategoryString&&e.txtCategoryString,e.txtCategoryString),f=("undefined"!==e.txtDescription&&e.txtDescription,e.txtDescription),g=("undefined"!==e.txtCaptcha&&e.txtCaptcha,e.txtCaptcha);void 0,BMS.Misc.fnAjax({url:global.getDataUrl+"?cmd=REPORTCONTENT",data:{txtName:t,txtLname:n,txtAssociation:a,txtPhoneNo:o,txtPRHouse:s,txtSocialLinks:r,txtEmail:d,categorySelect:l,categorySelectString:p,txtDetails:c,txtDescription:f,resptext:g,pageUrl:u},type:"POST",success:function(e){void 0,"success"==e?i(null,e):i("invalid_captcha"==e?"invalid_captcha":"error",null)},error:function(e,t,n){i(n,null)}})}catch(e){BMS.Misc.fnErr({fnName:"ContentReport.submitForm",err:e})}}};var onloadCallback=function(){recaptcha1=grecaptcha.render("recaptcha1",{sitekey:"6LcDIycTAAAAAJuYsBa4m4DcRopeXcQVOiWpDd3p",theme:"light"})};function fnBookNow(e,s,r,l,c,d,u,p){BMS.Misc.fnBusy(!0),byWhat="ET";var f={},g={},h={},m=[],v=[],S=[];sessions=[];var t={seatlayoutjs:evtName="",seatlayouthtml:""};t.seatlayoutjs=$.getScript(getSeatScript,(function(e,t,n){})),t.seatlayouthtml=$.ajax({type:"GET",url:"/serv/getData.bms",data:{cmd:"SEATHTML"}}),$.when(t.seatlayoutjs,t.seatlayouthtml).then((function(e,t){for(var n in blnCallSeatHtml||($("body").append(t[0]),blnCallSeatHtml=!0),SeatData)if(strVenName=SeatData[n].VenueName,l==SeatData[n].EventCode){for(var i in SeatData[n].Dates)for(var a in SeatData[n].Dates[i])i==d&&void 0!==SeatData[n].Dates[i][a].SessionId&&(h[SeatData[n].Dates[i][a].SessionId]={id:SeatData[n].Dates[i][a].SessionId,time:SeatData[n].Dates[i][a].DisplayShowTime,dateTime:SeatData[n].Dates[i][a].DisplayShowDate,isAvailable:"Y",isAtmosEnabled:!1},S.push(h[SeatData[n].Dates[i][a].SessionId]));sessions.push(S),eventTitle=SeatData[n].EventTitle,1<eventTitle.indexOf("(U/A)")?evtName=eventTitle.replace("(U/A)",""):-1!=eventTitle.indexOf("(U)")?evtName=eventTitle.replace("(U)",""):-1!=eventTitle.indexOf("(A)")?evtName=eventTitle.replace("(A)",""):evtName=eventTitle,evtName=evtName.trim(),blnRecoVistaCine="Y"==SeatData[n].IsFullLayout,f[SeatData[n].EventCode]={title:evtName,dimension:"",eventCode:SeatData[n].EventCode,language:SeatData[n].EventLang,isAtmosEnabled:SeatData[n].IsAtmosEnabled,censor:SeatData[n].EventCensor},g[s]={code:s,eventCode:l,name:SeatData[n].VenueName,appType:SeatData[n].VenueApp,isFullSeatLayout:blnRecoVistaCine,message:{type:SeatData[n].MessageType,title:SeatData[n].MessageTitle,body:SeatData[n].Message},sessions:S},m.push(f[SeatData[n].EventCode]),v.push(g[s])}var o={selected:{time:c,date:u,ssid:r,venueCode:s},event:m,venue:v};BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"Clicked recommendation",{ProductID:l,"Event Type":"MT","Event Name":evtName,"Venue Name":strVenName,"Event Day":u,"Show time":c,"Event Date":u,Appcode:global.strAppCode}),"Y"==p?(BMS.Misc.fnBusy(!1),fnPopupSelSh("",s,r,l,c,o)):(BMS.Misc.fnBusy(!1),fnSelSh("",s,r,l,c,o));try{BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"Selected showtime",{ProductID:l,"Event Type":"MT","Event Name":evtName,"Venue Name":strVenName,"Venue group":s,Genre:"",Language:"","Is Logged in":""!=BMS.Storage.get({name:"ld"})?"Yes":"No",Appcode:global.strAppCode,Page:"home",Showtime:c})}catch(e){}}))}if(function(i){var a={sanitize:{date:function(e){return new Date(e.substr(0,4)+" "+e.substr(4,2)+" "+e.substr(6,2)+" "+e.substr(8,2)+":"+e.substr(10,2))},time:function(e){var t=e.getHours(),n=e.getMinutes(),i=!1;return 12<t?(t-=12,i=!0):12===t?i=!0:0===t&&(t=12),n<10&&(n="0"+n),t+":"+n+" "+(i=i?"pm":"am")},boolean:function(n){return"string"==typeof n?"Y"==n?n=!0:"N"==n?n=!1:n:("object"!=typeof n&&"array"!=typeof n||_.each(n,(function(e,t){n[t]=a.sanitize.boolean(e)})),n)}},venueName:function(e){return e.replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"").replace(/\s/g,"-").toLowerCase()+"/cinema"},lpad:function(e,t,n){for(;e.length<n;)e=t+e;return e},render:function(e,s,t){e=e.split("\n").join("");var n,i,a,o,r,l,c=/([$\^\\\/()|?+*\[\]{}.\-])/g;return t=t||{},o=(l="{{}}").length,r=Math.ceil(o/2),i=l.substr(0,r).replace(c,"\\$1"),a=l.substr(r,o).replace(c,"\\$1")||i,n=new RegExp(i+"[^"+i+a+"]+"+a,"g"),e.replace(n,(function(e){var t,n=e.slice(r,-r),i=n.split("."),a=0,o=i.length;if(n in s)t=s[n];else for(t=s;a<o;a++){if(!(i[a]in t))return e;t=t[i[a]]}return t}))},difference:function(e){for(var t=[],n=e.length-1,i=0;i<e.length-1;i++)if(i!=n)return parseInt(e[i])>parseInt(e[i+1])?t.push(parseInt(e[i])-parseInt(e[i+1])):t.push(parseInt(e[i+1])-parseInt(e[i]))},getLatLongDistance:function(e,t){var n=e.lat,i=t.lat,a=e.lng,o=t.lng,s=function(e){return e*(Math.PI/180)},r=s(i-n),l=s(o-a),c=Math.sin(r/2)*Math.sin(r/2)+Math.cos(s(n))*Math.cos(s(i))*Math.sin(l/2)*Math.sin(l/2);return(6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))).toFixed(2)},between:function(e,t){var n=Math.min.apply(Math,[e,t]),i=Math.max.apply(Math,[e,t]);return n<this&&this<i},getCatAvailability:function(e){(e=parseInt(e))<0&&(e=0);for(var t=0;t<availSeatRange.length;t++){if(void 0,n=availSeatRange[t].range.split("-"),e>=parseInt(n[0])&&e<=parseInt(n[1]))return availSeatRange[t]}var n},generateTooltip:function(){$tooltipObjects=i("[data-tooltip]"),$tooltipObjects.each((function(e,t){var n=(t=i(t)).attr("data-tooltip");t.append('<div class="__toolBlock">                               <span class="__tooltip">'+n+'</span>                               <span class="__arrow"></span>                             </div>')}))},getIn:function(e,t){if(Array.isArray(t)||void 0,null!=e){for(var n=e,i=0;i<t.length;i++){var a=t[i];if(void 0===(n=null!=n?n[a]:void 0))return n}return n}}};BMS.Misc=BMS.Misc||{},BMS.Misc.Helpers=a}(jQuery),BMS.Region.fnPgLd=function(){try{"undefined"!=typeof pageName&&-1!=global.notReqRgnArr.indexOf(pageName)?BMS.Region.fnChkRgn(!1):BMS.Region.fnChkRgn(!0),$("#locationPopup .__icon-back").on("click",(function(){$("#spnRgnHeadTxt").removeClass("applyMarginLeft"),$("#spnRgnHeadTxt").addClass("removeMarginLeft"),$("#spnRgnHeadTxt").html("PICK YOUR STATE"),$("#div_States").fadeIn(),$(".city-list").fadeOut(),$(this).fadeOut()})),$("#inp_RegionSearch").on("blur",(function(){$("[data-id=inp_RegionSearch]").hide()})),$("#inp_RegionSearch_top").on("blur",(function(){$("[data-id=inp_RegionSearch_top]").hide()}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.Region.fnPgLd",err:e})}},BMS.Region.fnChkRgn=function(e){try{if(0!=$("#locationPopup").length){if(!e)return;var t=BMS.Storage.get({name:"Rgn",key:"Code"}),n=BMS.Storage.get({name:"Rgn",key:"text"});if(""==t||"ALL"==t)$("#spnSelectedRegion").removeClass("__region"),$("#spnSelectedRegion").html("SELECT A REGION"),BMS.Region.fnChkRegRequired((function(e){e?($("#dTopRgnDD").click(),$("#quickbook-wrapper").addClass("_inactive"),$(".select-overlay").unbind("click"),$("[data-group=top-nav]").removeAttr("onclick")):($("#dTopRgnDD").click(),$("#quickbook-wrapper").addClass("_inactive"))}));else{var i=BMS.Storage.get({name:"Rgn",key:"text"}),a=BMS.Storage.get({name:"Rgn",key:"subregionDetails"}),o=""!=a?JSON.parse(a):"";$("#spnSelectedRegion").addClass("__region"),10<=n.length&&$("#spnSelectedRegion").addClass("region-ellipsis"),o?$("#spnSelectedRegion").html(o.SubRegionName):"NCR"===t?($("#spnSelectedRegion").html("NCR"),$("#spnSelectedRegion").removeClass("region-ellipsis")):$("#spnSelectedRegion").html(i)}}}catch(e){BMS.Misc.fnErr({fnName:"BMS.Region.fnChkRgn",err:e})}},BMS.Region.fnChkRegRequired=function(e){try{e(!0)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Region.fnChkRegRequired",err:e})}},BMS.Region.fnRegionFilter=function(e){try{for(var t=e.which?e.which:e.keyCode,n=[8,13,46,37,38,39,40,9],i=65;i<=90;i++)n.push(i);for(i=97;i<=122;i++)n.push(i);if($.inArray(t,n)<0)return!1;$("#uRgnLst_top > li.active");if(38==t){var a=$("[data-id=inp_RegionSearch_top] ul").children().first(),o=$("[data-id=inp_RegionSearch_top] ul .active").prev(),s=$(o).find("a").text();return void(o!=a?($(o).next().removeClass("active"),$(o).addClass("active"),$("#inp_RegionSearch_top").val(s)):$("#inp_RegionSearch_top").val($(a).find("a").text()))}if(40==t){var r=$("[data-id=inp_RegionSearch_top] ul").children().last();o=$("[data-id=inp_RegionSearch_top] ul .active").next(),s=$(o).find("a").text();return void(o!=r?($(o).prev().removeClass("active"),$(o).addClass("active"),$("#inp_RegionSearch_top").val(s)):$("#inp_RegionSearch_top").val($(r).find("a").text()))}if(37==t||39==t)return;var l=e.target.value,c=e.target.id;if(""==l)return void $("#div_RegResponse").hide();var d=new RegExp("\\b"+l.toUpperCase()+"\\w*\\b","gi"),u=["Mumbai","Mumbai : Western","Mumbai : South Central","Navi Mumbai","Kalyan","Ulhasnagar","Delhi","Faridabad","Ghaziabad","Gurgaon","Noida","National Capital Region (NCR)"],p=new Array;$.each(regionlst,(function(e,t){$.each(t,(function(e,t){(d=new RegExp("\\b"+l.toUpperCase()+"\\w*\\b","gi")).test(t.alias.toUpperCase())&&-1==$.inArray(t.alias,u)&&p.push(new Array(t.code,t.alias))}))}));for(var f=0;f<regionalias.length;f++){for(var g=!1,h=0;h<regionalias[f].Alias.length;h++)if(d.test(regionalias[f].Alias[h].toUpperCase())){g=!0;break}g&&p.push(new Array(regionalias[f].code,regionalias[f].name))}(d.test("BOMBAY")||d.test("MUMBAI")||d.test("MUMBAI WESTERN")||d.test("Mumbai South Central")||d.test("NAVI MUMBAI")||d.test("KALYAN")||d.test("ULHASNAGAR"))&&p.push(new Array("MUMBAI","Mumbai")),(d.test("NATIONAL CAPITAL REGION")||d.test("NCR")||d.test("DELHI")||d.test("FARIDABAD")||d.test("GHAZIABAD")||d.test("GURGAON")||d.test("NOIDA"))&&p.push(new Array("NCR","National Capital Region (NCR)"));for(var m=[],v="",S=(h=0,0);S<p.length;S++)-1==$.inArray(p[S][1],m)&&h<6&&(v+=""==v?'<li class="active" data-pos="1" style="width: 100%;" id="'+p[S][0]+'"><a href="javascript:BMS.Region.fnSTopReg(\''+p[S][0]+"','"+p[S][1]+"');\">"+p[S][1]+"</a></li>":'<li style="width: 100%;" id="'+p[S][0]+'"><a href="javascript:BMS.Region.fnSTopReg(\''+p[S][0]+"','"+p[S][1]+"');\">"+p[S][1]+"</a></li>",h++),m.push(p[S][1]);return""!=v?($("[data-id="+c+"] ul").html(v),$("[data-id="+c+"]").show()):$("[data-id="+c+"]").hide(),""==l&&$("[data-id="+c+"]").hide(),!0}catch(e){BMS.Misc.fnErr({fnName:"BMS.Region.fnRegionFilter",err:e})}},BMS.Region.fnSwStates=function(t){try{var n="",i="";if($("#div_States").children().each((function(){$(this).removeClass("_active")})),""==t.trim())$.each(statelist,(function(e,t){n+='<div class="location-pills" onClick="BMS.Region.fnSwStates(\''+t.alias.trim()+'\')" data-name="'+BMS.Misc.fnUrlName(t.alias.trim()).toLowerCase()+'">',n+='<span class="location-icon"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">  <use xlink:href="/icons/regions-icons.svg#icon-'+BMS.Misc.fnUrlName(t.alias.trim()).toLowerCase()+'"></use> </svg></span>',n+='<div class="location-name">'+t.name.toUpperCase()+"</div>",n+="</div>",0})),$("#div_States").html(n),$(".city-list").hide(),$("#locationPopup .__icon-back").fadeOut(),$("#div_States").show(),$("#spnRgnHeadTxt").html("PICK YOUR STATE"),BMS.Misc.modal("locationPopup",!0);else{var e='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">  <use xlink:href="/icons/regions-icons.svg#icon-'+BMS.Misc.fnUrlName(t.trim()).toLowerCase()+'"></use> </svg>',a=_.filter(statelist,(function(e){return e.alias===t}))[0].name,o="";o+='<img src="'+global.strContentUrl+"/webin/common/region-banners/"+BMS.Misc.fnUrlName(t.trim()).toLowerCase()+'.jpg" alt="">',o+='<div class="overlay">',o+='<span class="location-icon"></span>',o+='<div class="location-name">'+a.trim()+"</div>",o+="</div>";var s=""!=t?t:Object.keys(regionlst)[0];i="";regionlst.hasOwnProperty(s)&&($.each(regionlst,(function(e,t){if(e==s){for(var n=0;n<t.length;n++)n%6==0&&(i+='<div class="__list-col">'),i+='<p id="'+t[n].code+'" onclick="BMS.Region.fnSetRegion(\''+s+"', '"+t[n].code+'\')" data-name="'+t[n].alias+'"> - '+t[n].name+"</p>",n%6==5&&(i+="</div>");i+="</div>"}})),$("#spnRgnHeadTxt").html("PICK YOUR CITY"),$("#spnRgnHeadTxt").removeClass("removeMarginLeft"),$("#spnRgnHeadTxt").addClass("applyMarginLeft"),$(".city-list .__city-banner").html(o),$(".city-list .location-icon").html(e),$("#div_CityName").html(i),$("#div_States").fadeOut(),$(".city-list").fadeIn(),$("#locationPopup .__icon-back").fadeIn())}}catch(e){BMS.Misc.fnErr({fnName:"BMS.Region.fnSwStates",err:e})}},BMS.Region.fnSetRegion=function(e,t){try{var n;BMS.Misc.fnBusy(!0);var i=void 0!==$("#"+t).attr("data-subreg")&&"Y"==$("#"+t).attr("data-subreg");n="Maharashtra"==e&&i?"Mumbai":"NCR"==e&&i?"National Capital Region (NCR)":$("#"+t).attr("data-name"),global.tmpCk=BMS.Region.fnGRgn(),global.ck=t,$("#spnSelectedRegion").html(n),BMS.Region.fnSetSubRgnCookie(n,t),"undefined"!=typeof blnIsRegionRouting&&1==blnIsRegionRouting?BMS.Region.fnUpdateUrl(n,!0):BMS.Region.fnUpdateUrl(n,!1)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Region.fnSetRegion",err:e})}},BMS.Region.fnSTopReg=function(e,t){try{BMS.Misc.fnBusy(!0),global.tmpCk=BMS.Region.fnGRgn(),global.ck=e,$("#spnSelectedRegion").html(t),BMS.Region.fnSetSubRgnCookie(t,e),"undefined"!=typeof blnIsRegionRouting&&1==blnIsRegionRouting?BMS.Region.fnUpdateUrl(t,!0):BMS.Region.fnUpdateUrl(t,!1),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"citypopup_home_18"}),BMS.Analytics.pushWebLaunchEventClickStream()}catch(e){BMS.Misc.fnErr({fnName:"BMS.Region.fnSTopReg",err:e})}},BMS.Region.fnOtherRegionCallBack=function(){try{global.tmpCk;var e=global.ck;fnUpdateUrl(e),BMS.Misc.fnBusy(!1)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Region.fnOtherRegionCallBack",err:e})}},BMS.Region.fnUpdateUrl=function(e,t){if(!0===t){var n=location.pathname,i="/";i+=BMS.Misc.fnUrlName(e).toLowerCase(),i+=("/"+n.split("/").splice(2,n.split("/").length).join("/")).replace(/\/$/,""),i+=location.search,i+=location.hash,window.location.href=i}else"undefined"!=typeof pageName&&"404"==pageName?location.href="/":window.location.reload()},BMS.Region.fnRedirectToRegionPage=function(){try{if("undefined"!=typeof blnIsRegionRouting&&1==blnIsRegionRouting){var e=location.pathname,t="/";t+=BMS.Misc.fnUrlName(BMS.Storage.get({name:"Rgn",key:"text"})).toLowerCase(),t+=("/"+e.split("/").splice(2,e.split("/").length).join("/")).replace(/\/$/,""),t+=location.search,t+=location.hash,BMS.Region.fnSendRegionData((function(){location.href=t}))}else BMS.Region.fnSendRegionData((function(){BMS.Misc.fnBusy(!1)}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnErr",err:e})}},BMS.Region.fnSendRegionData=function(t){try{var e=BMS.Storage.get({name:"Rgn"}),n=BMS.Storage.get({name:"ld"});if(""!==n){var i=BMS.Misc.fnGVal({data:e,key:"Code"}),a=BMS.Misc.fnGVal({data:n,key:"MEMBERID"}),o=BMS.Misc.fnGVal({data:n,key:"LSID"});BMS.Misc.fnDoSecureTrans({cmd:"SETPROFILE",p1:"SETPROFILE",p2:a,p3:o,p10:"|REGIONCODE="+i+"|",fnCC:function(e){t()},fnEC:function(e){t()},blnSupp:!0})}else t()}catch(e){BMS.Misc.fnErr({fnName:"BMS.Region.fnSendRegionData",err:e})}},BMS.Region.fnHideRegSel=function(){try{$("#locationPopup").is(":visible")?BMS.Misc.modal("locationPopup",!1):$("[data-id=dTopRgnDD]").is(":visible")&&BMS.Header.fnHideSelectOverlay(),$(".select-overlay").click((function(){BMS.Header.fnHideSelectOverlay()}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.Region.fnHideRegSel",err:e})}},BMS.Region.fnGRgn=function(){try{return BMS.Storage.get({name:"Rgn",key:"Code"})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Region.fnGRgn",err:e})}},BMS.Region.fnSetSubRgnCookie=function(n,e){try{var i=!1;if(BMS.Storage.set({name:"Rgn",value:"",storage:"C",sess:!1}),void 0!==global.arrBreakRgn&&$.each(global.arrBreakRgn,(function(e,t){void 0!==subregionlist[t]&&$.each(subregionlist[t],(function(e,t){if(i=BMS.Misc.fnUrlName(t.SubRegionName.trim().toLowerCase())==BMS.Misc.fnUrlName(n.trim().toLowerCase()))return BMS.Storage.set({name:"Rgn",key:"subregionDetails",value:JSON.stringify(t),storage:"C",sess:!1}),BMS.Storage.set({name:"Rgn",key:"text",value:t.SubRegionName.trim(),storage:"C",sess:!1}),BMS.Storage.set({name:"Rgn",key:"Code",value:t.RegionCode.trim(),storage:"C",sess:!1}),$("#spnSelectedRegion").html(t.SubRegionName.trim()),!1}))})),i)return!1;BMS.Storage.set({name:"Rgn",key:"text",value:n,storage:"C",sess:!1}),BMS.Storage.set({name:"Rgn",key:"Code",value:e,storage:"C",sess:!1})}catch(e){void 0}},$(document).ready((function(){""==BMS.Storage.get({name:"Rgn",storage:"C"})&&""!=strSelRegionCode&&""!=strSelRegionName&&BMS.Storage.set({name:"Rgn",value:"|Code="+strSelRegionCode+"|text="+strSelRegionName+"|",storage:"C",sess:!1}),BMS.Region.fnPgLd();try{void 0!==global.arrBreakRgn&&$.each(global.arrBreakRgn,(function(e,t){void 0!==subregionlist[t]&&$.each(subregionlist[t],(function(e,n){var t=regionlst[n.RegionCode]||regionlst[n.RegionName],i=!1;$.each(t,(function(e,t){n.SubRegionCode!=t.code||(i=!0)})),void 0!==t&&!1===i&&t.push({code:n.SubRegionCode.trim(),name:n.SubRegionName.trim(),alias:n.SubRegionName.trim(),IsCollectionActive:"Y"}),$.each(statelist,(function(e,t){(t.name.toLowerCase()==n.RegionCode.toLowerCase()||t.name.toLowerCase()==n.RegionName.toLowerCase())&&-1===$.inArray(n.SubRegionCode,statelist[e].regions)&&statelist[e].regions.push(n.SubRegionCode)}))}))}))}catch(e){void 0}})),BMS.Notifications.notifCount=0,BMS.Notifications.counter=0,BMS.Notifications.clearAllImage=function(){try{"<span>",'<a href="javascript:;" onclick="$(\'[data-id=dNotifDD]\').hide();">','<span class="head-notification">Back</span>',"</a>","</span>","</div>",'<span class="__icon notification-icon"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns: xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><use xlink: href="/icons/common-icons.svg#icon-no-notification"></use></svg ></span ><h4>Nothing that rings a bell</h4>',$("#notification-count").html("").removeClass("__alerts-bubble"),$("#notification").html('<div class="notification-head"><span><a href="javascript:;" onclick="$(\'[data-id=dNotifDD]\').hide();"><span class="head-notification">Back</span></a></span></div><span class="__icon notification-icon"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns: xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><use xlink: href="/icons/common-icons.svg#icon-no-notification"></use></svg ></span ><h4>Nothing that rings a bell</h4>')}catch(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.clearAll",err:e})}},BMS.Notifications.dateCalc=function(e){try{date1=new Date;var t=date1.getTime()-new Date(e).getTime(),n=Math.round(t/864e5),i=Math.round(t/6e4),a=Math.round(t/36e5);return 0<n?n+"d ago":0<a?a+"hr ago":0<i?i+"min ago":"Now"}catch(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.dateCalc",err:e})}},BMS.Notifications.countTab=function(){var e=document.title;if(e.match(/\(\d{1,3}\)/)){var t=e.indexOf(")");return e.substring(t+1,e.length)}return e},BMS.Notifications.clearAll=function(){try{var n=BMS.Storage.isset({name:"ld",key:"MEMBERID",storage:"C"});BMS.Misc.fnAjax({url:"/serv/getData",type:"GET",dataType:"JSON",data:{cmd:"CLEARALLNOTIF",clearAll:!0},success:function(e){if(n){var t=BMS.Notifications.countTab();document.title=t}BMS.Notifications.clearAllImage()},error:function(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.clearAll",err:e})}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.clearAll",err:e})}return!1},BMS.Notifications.notifCountDecreaser=function(i,e){try{var n=BMS.Storage.isset({name:"ld",key:"MEMBERID",storage:"C"});if($(i).attr("dAnalyData").split(","),$(i).hasClass("readNotif")||0==n){r=(r=$(i).attr("notifId")).split("-");var a=$("#"+r[0]).attr("href"),o=$("#"+r[0]).attr("target"),s=$(e.target);e.preventDefault(),void 0!==a&&void 0!==o&&(s.hasClass("read-more")||s.hasClass("show_less")||window.open(a,o))}else{var r=$(i).attr("notifId");$(i).attr("dAnalyData").split(",");a=(s=$(e.target)).data("href"),o=s.data("target");memberIdNotification=BMS.Storage.get({name:"ld",key:"MEMBERID",storage:"C"}),void 0!==r&&(r=r.split("-"),void 0===a&&(a=$("#"+r[0]).data("href")),void 0===o&&(o=$("#"+r[0]).data("target")),$("#"+r[0]+"_"+r[1]).attr("data-viewed","true"),BMS.Misc.fnAjax({url:"/serv/getData",type:"GET",dataType:"JSON",data:{cmd:"VIEWEDNOTIFICATN",msgId:r[0],flag:r[1]},success:function(e){if(e.error)BMS.Misc.fnErr({fnName:"BMS.Notifications.notifCountDecreaser.fnAjax.error",err:e.error});else{if(--BMS.Notifications.notifCount,$(i).removeClass("_unread"),$(i).removeClass("cursorhandPTA"),$(i).addClass("readNotif"),BMS.Notifications.notifCount<=0){if($("#notification-count").html("").removeClass("__alerts-bubble"),n){var t=BMS.Notifications.countTab();document.title=t}}else if($("#notification-count").html(BMS.Notifications.notifCount),n){t=BMS.Notifications.countTab();document.title="("+BMS.Notifications.notifCount+") "+t}$("#"+r[0]).addClass("cursorhandPTA")}void 0===a&&void 0===o?i.onclick=null:($(i).addClass("cursorhandPTA"),i.onclick=function(e){var t=$(e.target),n=$(i).attr("dAnalyData");n=n.split(","),t.hasClass("read-more")||t.hasClass("show_less")||window.open(a,o)},s.hasClass("read-more")||s.hasClass("show_less")||window.open(a,o))},error:function(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.notifCountDecreaser.fnAjax.error",err:e})}}))}}catch(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.notifCountDecreaser",err:e})}},BMS.Notifications.softDelete=function(e,t){try{t.stopPropagation?t.stopPropagation():t.cancelBubble=!0;var n=$(e).attr("id"),i=$("#"+n).parents(".notification-card").attr("notifId").split("-");function a(){if($("#"+n).parents(".notification-card").hasClass("_unread")){if(--BMS.Notifications.notifCount,o){var e=BMS.Notifications.countTab();document.title="("+BMS.Notifications.notifCount+") "+e}$("#notification-count").html(BMS.Notifications.notifCount),$("#"+n).parents(".notification-card").slideUp(),--BMS.Notifications.counter}else $("#"+n).parents(".notification-card").slideUp(),$("#notification-count").html(BMS.Notifications.notifCount),--BMS.Notifications.counter;if(BMS.Notifications.notifCount<=0&&($("#notification-count").html("").removeClass("__alerts-bubble"),o)){e=BMS.Notifications.countTab();document.title=e}if(BMS.Notifications.counter<=0){if(o){e=BMS.Notifications.countTab();document.title=e}BMS.Notifications.clearAllImage()}}msgID=i[0],msgFlag=i[1];var o=BMS.Storage.isset({name:"ld",key:"MEMBERID",storage:"C"});o?BMS.Misc.fnAjax({url:"/serv/getData",type:"GET",dataType:"JSON",data:{cmd:"CLEARALLNOTIF",msgID:msgID,flag:msgFlag},success:function(e){a()},error:function(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.clearAll",err:e})}}):a()}catch(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.clearAll",err:e})}return!1},BMS.Notifications.generateHTML=function(e,t){try{var n,i="",a="",o=BMS.Storage.isset({name:"ld",key:"MEMBERID",storage:"C"});for(var s in i+='<div class="notification-dropdown nav-tip notification-body" style="display:block;">',e){BMS.Notifications.counter++,n="";var r=[e[s].id,e[s].msgTpl,e[s].campaign];if(0==e[s].viewed&&++BMS.Notifications.notifCount,n='onclick = "BMS.Notifications.notifCountDecreaser(this,event);"',e.hasOwnProperty(s)){var l=e[s].viewed,c="",d="https:"+global.strContentUrl+"/notifications/default-bell.png";""!=e[s].imgURL&&e[s].imgURL,e[s].imgURL;for(var u in e[s].cta)"object"==typeof e[s].cta[u]&&void 0!==e[s].cta[u].text&&(0==e[s].viewed&&1==o?c+='<div class="book-btn"><a id="'+e[s].id+'" data-href="'+e[s].cta[u].link+'" data-target="'+e[s].cta[u].target+'">'+e[s].cta[u].text+"</a></div>":c+='<div class="book-btn"><a id="'+e[s].id+'" href="'+e[s].cta[u].link+'" target="'+e[s].cta[u].target+'">'+e[s].cta[u].text+"</a></div>");var p=BMS.Notifications.dateCalc(e[s].stamp),f=e[s].msgType,g=(a=l?"readNotif cursorhandPTA":"_unread cursorhandPTA",e[s].bannerURL?e[s].bannerURL:""),h="";""!==g&&(h='<div class="card-img">',h+='<img src="" data-src="'+g+'"/>',h+="</div>"),"PT_CTA"==e[s].msgTpl&&void 0!==e[s].data.type&&"ticket"==e[s].data.type?(i+='<div class="notification-card movie-ticket '+a+'" notifId="'+e[s].id+"-"+f+'" dAnalyData="'+r+'" '+n+' id="'+e[s].id+"_"+f+'" data-viewed="'+e[s].viewed+'">',i+='<div class="__head">Tickets Booked!',i+="</div >",i+='<div class="card-wrapper movie-crd">',i+='<span class="durtion">'+p+"</span>",i+='<span id="'+e[s].id+'-s" class="__dismiss" onclick="return BMS.Notifications.softDelete(this,event);">',i+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns: xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">',i+='<use xlink: href="/icons/common-icons.svg#icon-cancel"></use>',i+="</svg >",i+="</span >",i+="<p>",i+="<span>"+e[s].longTxt+"</span>",i+="</p>",i+='<div class="button-section">',i+=c):(i+='<div class="notification-card event-ticket '+a+'" notifId="'+e[s].id+"-"+f+'" dAnalyData="'+r+'" '+n+' id="'+e[s].id+"_"+f+'" data-viewed="'+e[s].viewed+'">',i+='<div class="card-wrapper event-crd">',i+=h,i+='<div class="card-content">',i+='<span class="durtion">'+p+"</span>",i+='<span id="'+e[s].id+'-s" class="__dismiss" onclick="return BMS.Notifications.softDelete(this,event);">',i+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns: xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">',i+='<use xlink: href="/icons/common-icons.svg#icon-cancel"></use>',i+="</svg >",i+="</span >",i+="<h4>"+e[s].shortTxt+"</h4>",i+="<p>"+e[s].longTxt+"</p>",i+='<div class="button-section">',i+=c,i+="</div>"),i+="</div>",i+="</div>",i+="</div>"}}if(i+="</div>",BMS.Notifications.notifCount<=0&&($("#notification-count").html("").removeClass("__alerts-bubble"),o)){var m=BMS.Notifications.countTab();document.title=m}return i}catch(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.generateHTML",err:e})}},BMS.Notifications.getData=function(){try{BMS.Notifications.notifCount=0,BMS.Notifications.counter=0,$("#notification").html('<div class="notification-loader">Loading...</div>'),$("#profile-notification-badge,#notification-count").hide(),BMS.Misc.fnAjax({url:"/serv/getData",type:"GET",data:{cmd:"GETNOTIF",v:Math.random()},success:function(e){if(null==e||e.errors||e.error||"error"==e.status)BMS.Notifications.clearAllImage();else{var t=BMS.Storage.isset({name:"ld",key:"MEMBERID",storage:"C"}),n='<div class="notification-head">';if(n+="<span>",n+='<a href="javascript:;" onclick="$(\'[data-id=dNotifDD]\').hide();">',n+='<span class="head-notification">Back</span>',n+="</a>",n+="</span>",n+='<span class="clearall">',n+='<a href="javascript:;" onclick="BMS.Notifications.clearAll();">',n+='<span class="">Clear all</span>',n+="</a>",n+="</span>",n+="</div>",n+=BMS.Notifications.generateHTML(e,"A"),n+="</div>",$("#notification").html(n),$("._softDel").hide(),0==Object.keys(e).length)BMS.Notifications.clearAllImage();else if(0<BMS.Notifications.notifCount){if($("#notification-count").html(BMS.Notifications.notifCount),$("#profile-notification-badge,#notification-count").show(),t){var i=BMS.Notifications.countTab();document.title="("+BMS.Notifications.notifCount+") "+i}else{i=BMS.Notifications.countTab();document.title=i}$("#notification-count").hasClass("__alerts-bubble")||$("#notification-count").addClass("__alerts-bubble")}BMS.Notifications.fnCalculateNotificationWrapperHeight()}},error:function(e){BMS.Notifications.clearAllImage()}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.getData",err:e})}},BMS.Notifications.fnPushNotificationBellClick=function(){try{$("#memberNotification").on("click",(function(){var e=$(this);if("1"===e.attr("isClose")){var t=$.extend({},BMS.Notifications.fnGetCommonParams(),{eventAction:"clicked_bell"});BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},t),e.attr("isClose",-1)}else e.attr("isClose",1)}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.fnPushNotificationBellClick",err:e})}},BMS.Notifications.fnBindPushNotificationButtonClick=function(){try{$(".notification-dropdown-wrapper").on("click",".card-wrapper",(function(){var e=$.extend({},BMS.Notifications.fnGetCommonParams(),{eventAction:"clicked_notification"});BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},e)}))}catch(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.fnBindPushNotificationButtonClick",err:e})}},BMS.Notifications.fnGetCommonParams=function(){try{return{event:"tvc_gtmstdevent",eventCategory:"inbox",eventLabel:"",user_language:""!=BMS.Storage.get({name:"lang"})?BMS.Misc.fnGetLang(BMS.Storage.get({name:"lang"})):"English",app_code:global.strAppCode,user_mode:BMS.Storage.isset({name:"ld"})?"logged_in":"guest",tvc_userid:BMS.Storage.get({name:"ld",key:"MEMBERID"}),page_url:window.location.href,bms_id:BMS.Storage.get({name:"bmsId"}),session_id:BMS.Storage.get({name:"sessionId"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",product:"inbox"}}catch(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.fnGetCommonParams",err:e})}},BMS.Notifications.fnCalculateNotificationWrapperHeight=function(){try{var e=$(".profile-sidebar-wrapper").height();$(".notification-dropdown-wrapper").css({height:"calc(100% - "+e+"px)",top:e+"px"}),$(".notification-body").attr("style","height: calc(100vh - 62px - "+e+"px);")}catch(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.fnCalculateNotificationWrapperHeight",err:e})}},$((function(){if(0==$("#notification").length)return!1;if($("#memberNotification").click((function(){$.each($(".notification-card img"),(function(){if($(this).attr("data-src")){var e=$(this).data("src");$(this).attr("src",e),$(this).removeAttr("data-src")}}))})),$("#notification-count").html("").removeClass("__alerts-bubble"),""!=BMS.Storage.get({name:"Rgn",key:"Code",storage:"C"})){var e=BMS.Storage.get({name:"ld",key:"MEMBERID",storage:"C"});""!=BMS.Storage.get({name:"ld",key:"LSID",storage:"C"})&&""!=e?BMS.Notifications.getData():""==e?BMS.Notifications.getData():BMS.Notifications.clearAllImage()}global.SignInCallBack.push((function(){$("#notification-count").html("").removeClass("__alerts-bubble"),$(".notification-dropdown-wrapper").hide()})),BMS.SignIn.fnRegister("notification-getData",BMS.Notifications.getData),global.SignOutCallBack.push((function(){$("#notification-count").html("").removeClass("__alerts-bubble"),$(".notification-dropdown-wrapper").hide(),BMS.Notifications.getData();var e=BMS.Notifications.countTab();document.title=e})),$(".icon-notification").click((function(){0!=$(".notification-head").length&&BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"InboxVirtualpage_home_17",pageurl:window.location.href})})),$("#memberNotification").attr("isClose",1),BMS.Notifications.fnPushNotificationBellClick(),BMS.Notifications.fnBindPushNotificationButtonClick()})),window.stopWowLoad=!1,function(){var i,t,n,l,a,o=function(e,t){return function(){return e.apply(t,arguments)}},s=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};t=(function(){function e(){}return e.prototype.extend=function(e,t){var n,i;for(n in t)i=t[n],null==e[n]&&(e[n]=i);return e},e.prototype.isMobile=function(e){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)},e.prototype.createEvent=function(e,t,n,i){var a;return null==t&&(t=!1),null==n&&(n=!1),null==i&&(i=null),null!=document.createEvent?(a=document.createEvent("CustomEvent")).initCustomEvent(e,t,n,i):null!=document.createEventObject?(a=document.createEventObject()).eventType=e:a.eventName=e,a},e.prototype.emitEvent=function(e,t){return null!=e.dispatchEvent?e.dispatchEvent(t):t in(null!=e)?e[t]():"on"+t in(null!=e)?e["on"+t]():void 0},e.prototype.addEvent=function(e,t,n){return null!=e.addEventListener?e.addEventListener(t,n,!1):null!=e.attachEvent?e.attachEvent("on"+t,n):e[t]=n},e.prototype.removeEvent=function(e,t,n){return null!=e.removeEventListener?e.removeEventListener(t,n,!1):null!=e.detachEvent?e.detachEvent("on"+t,n):delete e[t]},e.prototype.innerHeight=function(){return"innerHeight"in window?window.innerHeight:document.documentElement.clientHeight},e})(),n=this.WeakMap||this.MozWeakMap||(n=(function(){function e(){this.keys=[],this.values=[]}return e.prototype.get=function(e){var t,n,i,a;for(t=n=0,i=(a=this.keys).length;n<i;t=++n)if(a[t]===e)return this.values[t]},e.prototype.set=function(e,t){var n,i,a,o;for(n=i=0,a=(o=this.keys).length;i<a;n=++i)if(o[n]===e)return void(this.values[n]=t);return this.keys.push(e),this.values.push(t)},e})()),i=this.MutationObserver||this.WebkitMutationObserver||this.MozMutationObserver||(i=(function(){function e(){"undefined"!=typeof console&&null!==console&&void 0,"undefined"!=typeof console&&null!==console&&void 0}return e.notSupported=!0,e.prototype.observe=function(){},e})()),l=this.getComputedStyle||function(n,e){return this.getPropertyValue=function(e){var t;return"float"===e&&(e="styleFloat"),a.test(e)&&e.replace(a,(function(e,t){return t.toUpperCase()})),(null!=(t=n.currentStyle)?t[e]:void 0)||null},this},a=/(\-([a-z]){1})/g,this.WOW=(function(){function e(e){null==e&&(e={}),this.scrollCallback=o(this.scrollCallback,this),this.scrollHandler=o(this.scrollHandler,this),this.resetAnimation=o(this.resetAnimation,this),this.start=o(this.start,this),this.scrolled=!0,this.config=this.util().extend(e,this.defaults),this.animationNameCache=new n,this.wowEvent=this.util().createEvent(this.config.boxClass)}return e.prototype.defaults={boxClass:"wow",animateClass:"animated",offset:0,mobile:!1,live:!0,lazyLoad:!0,lazyLaodOffset:-100,callback:null},e.prototype.init=function(){var e;return this.element=window.document.documentElement,"interactive"===(e=document.readyState)||"complete"===e?this.start():this.util().addEvent(document,"DOMContentLoaded",this.start),this.finished=[]},e.prototype.start=function(){var a,e,t,n,s;if(this.stopped=!1,this.boxes=function(){var e,t,n,i;for(i=[],e=0,t=(n=this.element.querySelectorAll("."+this.config.boxClass)).length;e<t;e++)a=n[e],i.push(a);return i}.call(this),this.all=function(){var e,t,n,i;for(i=[],e=0,t=(n=this.boxes).length;e<t;e++)a=n[e],i.push(a);return i}.call(this),this.boxes.length)if(this.disabled())this.resetStyle();else for(n=this.boxes,this.mobile()&&this.resetStyle(),e=0,t=n.length;e<t;e++)a=n[e],this.mobile()||this.applyStyle(a,!0),this.isClosetoViewport(a)&&!stopWowLoad&&this.lazyLoad(a);if(this.disabled()||(this.util().addEvent(window,"scroll",this.scrollHandler),this.util().addEvent(window,"resize",this.scrollHandler),this.interval=setInterval(this.scrollCallback,50)),this.config.live)return new i((s=this,function(e){var t,n,a,o,i;for(i=[],t=0,n=e.length;t<n;t++)o=e[t],i.push(function(){var e,t,n,i;for(i=[],e=0,t=(n=o.addedNodes||[]).length;e<t;e++)a=n[e],i.push(this.doSync(a));return i}.call(s));return i})).observe(document.body,{childList:!0,subtree:!0})},e.prototype.stop=function(){if(this.stopped=!0,this.util().removeEvent(window,"scroll",this.scrollHandler),this.util().removeEvent(window,"resize",this.scrollHandler),null!=this.interval)return clearInterval(this.interval)},e.prototype.sync=function(e){if(i.notSupported)return this.doSync(this.element)},e.prototype.doSync=function(e){var t,n,i,a,o;if(null==e&&(e=this.element),1===e.nodeType){for(o=[],n=0,i=(a=(e=e.parentNode||e).querySelectorAll("."+this.config.boxClass)).length;n<i;n++)t=a[n],s.call(this.all,t)<0?(this.boxes.push(t),this.all.push(t),this.stopped||this.disabled()||this.mobile()?this.resetStyle():this.applyStyle(t,!0),o.push(this.scrolled=!0)):o.push(void 0);return o}},e.prototype.lazyLoad=function(e){var t,n,i,a;if(a=global.blnIsTouchScreen?"data-mobile":"data-src",(i=e.querySelectorAll("img["+a+"]"))&&this.config.lazyLoad)for(var o=0;o<i.length;o++)if(""!=(t=(n=i[o]).getAttribute(a))){var s=$(n);s.parent().find(".img-placeholder").hide(),n.setAttribute("src",t),s.one("error",(function(e){var t=$(this).attr("data-error");this.setAttribute("src",t)})),s.one("load",(function(){$(this).parents(".is-loading").removeClass("is-loading")}))}},e.prototype.show=function(e){return this.applyStyle(e),e.className=e.className+" "+this.config.animateClass,null!=this.config.callback&&this.config.callback(e),this.util().emitEvent(e,this.wowEvent),this.util().addEvent(e,"animationend",this.resetAnimation),this.util().addEvent(e,"oanimationend",this.resetAnimation),this.util().addEvent(e,"webkitAnimationEnd",this.resetAnimation),this.util().addEvent(e,"MSAnimationEnd",this.resetAnimation),e},e.prototype.applyStyle=function(e,t){var n,i,a,o;return i=e.getAttribute("data-wow-duration"),n=e.getAttribute("data-wow-delay"),a=e.getAttribute("data-wow-iteration"),this.animate((o=this,function(){return o.customStyle(e,t,i,n,a)}))},e.prototype.animate="requestAnimationFrame"in window?function(e){return window.requestAnimationFrame(e)}:function(e){return e()},e.prototype.resetStyle=function(){var e,t,n,i,a;for(a=[],t=0,n=(i=this.boxes).length;t<n;t++)e=i[t],a.push(e.style.visibility="visible");return a},e.prototype.resetAnimation=function(e){var t;if(0<=e.type.toLowerCase().indexOf("animationend"))return(t=e.target||e.srcElement).className=t.className.replace(this.config.animateClass,"").trim()},e.prototype.customStyle=function(e,t,n,i,a){return t&&this.cacheAnimationName(e),e.style.visibility=t?"hidden":"visible",n&&this.vendorSet(e.style,{animationDuration:n}),i&&this.vendorSet(e.style,{animationDelay:i}),a&&this.vendorSet(e.style,{animationIterationCount:a}),this.vendorSet(e.style,{animationName:t?"none":this.cachedAnimationName(e)}),e},e.prototype.vendors=["moz","webkit"],e.prototype.vendorSet=function(a,e){var o,t,s,r;for(o in t=[],e)s=e[o],a[""+o]=s,t.push(function(){var e,t,n,i;for(i=[],e=0,t=(n=this.vendors).length;e<t;e++)r=n[e],i.push(a[""+r+o.charAt(0).toUpperCase()+o.substr(1)]=s);return i}.call(this));return t},e.prototype.vendorCSS=function(e,t){var n,i,a,o,s,r;for(o=(s=l(e)).getPropertyCSSValue(t),n=0,i=(a=this.vendors).length;n<i;n++)r=a[n],o=o||s.getPropertyCSSValue("-"+r+"-"+t);return o},e.prototype.animationName=function(t){var n;try{n=this.vendorCSS(t,"animation-name").cssText}catch(e){n=l(t).getPropertyValue("animation-name")}return"none"===n?"":n},e.prototype.cacheAnimationName=function(e){return this.animationNameCache.set(e,this.animationName(e))},e.prototype.cachedAnimationName=function(e){return this.animationNameCache.get(e)},e.prototype.scrollHandler=function(){return this.scrolled=!0},e.prototype.scrollCallback=function(){var a;if(this.scrolled&&(this.scrolled=!1,this.boxes=function(){var e,t,n,i;for(i=[],e=0,t=(n=this.boxes).length;e<t;e++)(a=n[e])&&(this.isClosetoViewport(a)&&!stopWowLoad&&this.lazyLoad(a),this.isVisible(a)&&this.isClosetoViewport(a)&&(this.show(a),!stopWowLoad)||i.push(a));return i}.call(this),!this.boxes.length&&!this.config.live))return this.stop()},e.prototype.offsetTop=function(e){for(var t;void 0===e.offsetTop;)e=e.parentNode;for(t=e.offsetTop;e=e.offsetParent;)t+=e.offsetTop;return t},e.prototype.isPositionFixed=function(e){var t;for(t=l(e).position;e.parentNode&&"body"!==e.parentNode.localName&&"fixed"!==t&&"fixed"!==(t=l(e).position);)e=e.parentNode;return"fixed"===t},e.prototype.isVisible=function(e){var t,n,i,a,o,s=window.pageYOffset,r=$(e);if(-1<e.className.indexOf("fixed-card")){var l=r.parents(".fixed-wrapper");if(!l.is(":visible"))return!1;s=l.scrollTop()}return n=e.getAttribute("data-wow-offset")||this.config.offset,a=(o=s)+Math.min(this.element.clientHeight,this.util().innerHeight())-n,t=(i=this.offsetTop(e))+e.clientHeight,i<=a&&o<=t},e.prototype.isClosetoViewport=function(e){var t,n,i,a,o,s=window.pageYOffset,r=$(e);if(-1<e.className.indexOf("fixed-card")){var l=r.parents(".fixed-wrapper");if(!l.is(":visible"))return!1;s=l.scrollTop()}return n=parseInt(this.config.lazyLoadOffset),a=(o=s)+Math.min(this.element.clientHeight,this.util().innerHeight())-n,i=this.offsetTop(e),0!=e.clientHeight&&(t=i+e.clientHeight,i<=a&&o<=t)},e.prototype.util=function(){return null!=this._util?this._util:this._util=new t},e.prototype.disabled=function(){return!1},e.prototype.mobile=function(){return this.util().isMobile(navigator.userAgent)},e})()}.call(this),(function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(e.jQuery)})(this,(function(u){u.transit={version:"0.9.12",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var o=document.createElement("div"),p={};function e(e){if(e in o.style)return e;for(var t=["Moz","Webkit","O","ms"],n=e.charAt(0).toUpperCase()+e.substr(1),i=0;i<t.length;++i){var a=t[i]+n;if(a in o.style)return a}}var i=-1<navigator.userAgent.toLowerCase().indexOf("chrome");p.transition=e("transition"),p.transitionDelay=e("transitionDelay"),p.transform=e("transform"),p.transformOrigin=e("transformOrigin"),p.filter=e("Filter"),p.transform3d=(o.style[p.transform]="",o.style[p.transform]="rotateY(90deg)",""!==o.style[p.transform]);var f=p.transitionEnd={transition:"transitionend",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"}[p.transition]||null;for(var t in p)p.hasOwnProperty(t)&&void 0===u.support[t]&&(u.support[t]=p[t]);function a(e){return"string"==typeof e&&this.parse(e),this}function g(e,t,n){!0===t?e.queue(n):t?e.queue(t,n):e.each((function(){n.call(this)}))}function h(e,t,n,i){var a,o,s=(a=e,o=[],u.each(a,(function(e){e=u.camelCase(e),e=c(e=u.transit.propertyMap[e]||u.cssProps[e]||e),p[e]&&(e=c(p[e])),-1===u.inArray(e,o)&&o.push(e)})),o);u.cssEase[n]&&(n=u.cssEase[n]);var r=m(t)+" "+n;0<parseInt(i,10)&&(r+=" "+m(i));var l=[];return u.each(s,(function(e,t){l.push(t+" "+r)})),l.join(", ")}function n(i,e){e||(u.cssNumber[i]=!0),u.transit.propertyMap[i]=p.transform,u.cssHooks[i]={get:function(e){return u(e).css("transit:transform").get(i)},set:function(e,t){var n=u(e).css("transit:transform");n.setFromString(i,t),u(e).css({"transit:transform":n})}}}function c(e){return e.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}))}function s(e,t){return"string"!=typeof e||e.match(/^[\-0-9\.]+$/)?""+e+t:e}function m(e){var t=e;return"string"!=typeof t||t.match(/^[\-0-9\.]+/)||(t=u.fx.speeds[t]||u.fx.speeds._default),s(t,"ms")}return o=null,u.cssEase={_default:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeInCubic:"cubic-bezier(.550,.055,.675,.190)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},u.cssHooks["transit:transform"]={get:function(e){return u(e).data("transform")||new a},set:function(e,t){var n=t;n instanceof a||(n=new a(n)),"WebkitTransform"!==p.transform||i?e.style[p.transform]=n.toString():e.style[p.transform]=n.toString(!0),u(e).data("transform",n)}},u.cssHooks.transform={set:u.cssHooks["transit:transform"].set},u.cssHooks.filter={get:function(e){return e.style[p.filter]},set:function(e,t){e.style[p.filter]=t}},u.fn.jquery<"1.8"&&(u.cssHooks.transformOrigin={get:function(e){return e.style[p.transformOrigin]},set:function(e,t){e.style[p.transformOrigin]=t}},u.cssHooks.transition={get:function(e){return e.style[p.transition]},set:function(e,t){e.style[p.transition]=t}}),n("scale"),n("scaleX"),n("scaleY"),n("translate"),n("rotate"),n("rotateX"),n("rotateY"),n("rotate3d"),n("perspective"),n("skewX"),n("skewY"),n("x",!0),n("y",!0),a.prototype={setFromString:function(e,t){var n="string"==typeof t?t.split(","):t.constructor===Array?t:[t];n.unshift(e),a.prototype.set.apply(this,n)},set:function(e){var t=Array.prototype.slice.apply(arguments,[1]);this.setter[e]?this.setter[e].apply(this,t):this[e]=t.join(",")},get:function(e){return this.getter[e]?this.getter[e].apply(this):this[e]||0},setter:{rotate:function(e){this.rotate=s(e,"deg")},rotateX:function(e){this.rotateX=s(e,"deg")},rotateY:function(e){this.rotateY=s(e,"deg")},scale:function(e,t){void 0===t&&(t=e),this.scale=e+","+t},skewX:function(e){this.skewX=s(e,"deg")},skewY:function(e){this.skewY=s(e,"deg")},perspective:function(e){this.perspective=s(e,"px")},x:function(e){this.set("translate",e,null)},y:function(e){this.set("translate",null,e)},translate:function(e,t){void 0===this._translateX&&(this._translateX=0),void 0===this._translateY&&(this._translateY=0),null!=e&&(this._translateX=s(e,"px")),null!=t&&(this._translateY=s(t,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var e=(this.scale||"1,1").split(",");return e[0]&&(e[0]=parseFloat(e[0])),e[1]&&(e[1]=parseFloat(e[1])),e[0]===e[1]?e[0]:e},rotate3d:function(){for(var e=(this.rotate3d||"0,0,0,0deg").split(","),t=0;t<=3;++t)e[t]&&(e[t]=parseFloat(e[t]));return e[3]&&(e[3]=s(e[3],"deg")),e}},parse:function(e){var i=this;e.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,(function(e,t,n){i.setFromString(t,n)}))},toString:function(e){var t=[];for(var n in this)if(this.hasOwnProperty(n)){if(!p.transform3d&&("rotateX"===n||"rotateY"===n||"perspective"===n||"transformOrigin"===n))continue;"_"!==n[0]&&(e&&"scale"===n?t.push(n+"3d("+this[n]+",1)"):e&&"translate"===n?t.push(n+"3d("+this[n]+",0)"):t.push(n+"("+this[n]+")"))}return t.join(" ")}},u.fn.transition=u.fn.transit=function(e,t,n,a){var o=this,i=0,s=!0,r=u.extend(!0,{},e);"function"==typeof t&&(a=t,t=void 0),"object"==typeof t&&(n=t.easing,i=t.delay||0,s=void 0===t.queue||t.queue,a=t.complete,t=t.duration),"function"==typeof n&&(a=n,n=void 0),void 0!==r.easing&&(n=r.easing,delete r.easing),void 0!==r.duration&&(t=r.duration,delete r.duration),void 0!==r.complete&&(a=r.complete,delete r.complete),void 0!==r.queue&&(s=r.queue,delete r.queue),void 0!==r.delay&&(i=r.delay,delete r.delay),void 0===t&&(t=u.fx.speeds._default),void 0===n&&(n=u.cssEase._default),t=m(t);var l=h(r,t,n,i),c=u.transit.enabled&&p.transition?parseInt(t,10)+parseInt(i,10):0;if(0===c){return g(o,s,(function(e){o.css(r),a&&a.apply(o),e&&e()})),o}var d={};return g(o,s,(function(e){var t,n,i;this.offsetWidth,t=e,n=!1,i=function(){n&&o.unbind(f,i),0<c&&o.each((function(){this.style[p.transition]=d[this]||null})),"function"==typeof a&&a.apply(o),"function"==typeof t&&t()},0<c&&f&&u.transit.useTransitionEnd?(n=!0,o.bind(f,i)):window.setTimeout(i,c),o.each((function(){0<c&&(this.style[p.transition]=l),u(this).css(r)}))})),this},u.transit.getTransitionValue=h,u})),(function(a){a.fn.tabs=function(e){var t,n,i=a(this);i.find(".tab-toggle").on("click",(function(e){t=a(this).attr("data-toggle"),n=i.find("#"+t),i.find(".tab-content._active").removeClass("_active"),i.find(".tab-toggle._active").removeClass("_active"),n.addClass("_active"),n.find(".dd-cards"),a(this).addClass("_active")}))}})(jQuery),(function(){var a={mailcheck:{threshold:5,defaultDomains:["gmail.com","yahoo.com","yahoo.co.in","hotmail.com","in.com","sify.com","rediffmail.com","ymail.com","yahoo.in","rediff.com","rocketmail.com","live.com","live.in","google.com","indiatimes.com","mail.com","bookmyshow.com","bigtree.in","ovi.com","aol.com","aol.in","indiya.com","vsnl.net","india.com","eth.net","talktalk.com","airtelmail.in","inbox.com","hotmail.co.uk","yahoomail.co.in","msn.com","satyam.com","live.co.uk","yahoo.com.au","hotmail.ca","cooltoad.com","zmail.com","sifymail.com","facebook.com","rediffmail.co.in","gmail.co.in","bsnl.co.in","hotmail.in","boxbe.com","webdunia.com","mail.yahoo.co.in","outlook.in","outlook.com","rediffmail.in","comcast.net","yahoo.co.uk","yahoo.ca","btinternet.com","zoho.com","me.com","mac.com","live.com","googlemail.com","verizon.net","sbcglobal.net","att.net","gmx.com"],defaultTopLevelDomains:["co.uk","co.in","com","net","org","info","edu","gov","mil","in","ca","com.au"],run:function(e){e.domains=e.domains||a.mailcheck.defaultDomains,e.topLevelDomains=e.topLevelDomains||a.mailcheck.defaultTopLevelDomains,e.distanceFunction=e.distanceFunction||a.sift3Distance;var t=a.mailcheck.suggest(encodeURI(e.email),e.domains,e.topLevelDomains,e.distanceFunction);t?e.suggested&&e.suggested(t):e.empty&&e.empty()},suggest:function(e,t,n,i){e=e.toLowerCase();var a=this.splitEmail(e),o=this.findClosestDomain(a.domain,t,i);if(o){if(o!=a.domain)return{address:a.address,domain:o,full:a.address+"@"+o}}else{var s=this.findClosestDomain(a.topLevelDomain,n);if(a.domain&&s&&s!=a.topLevelDomain){var r=a.domain;return o=r.substring(0,r.lastIndexOf(a.topLevelDomain))+s,{address:a.address,domain:o,full:a.address+"@"+o}}}return!1},findClosestDomain:function(e,t,n){var i,a=99,o=null;if(!e||!t)return!1;n||(n=this.sift3Distance);for(var s=0;s<t.length;s++){if(e===t[s])return e;(i=n(e,t[s]))<a&&(a=i,o=t[s])}return a<=this.threshold&&null!==o&&o},sift3Distance:function(e,t){if(null==e||0===e.length)return null==t||0===t.length?0:t.length;if(null==t||0===t.length)return e.length;for(var n=0,i=0,a=0,o=0;n+i<e.length&&n+a<t.length;){if(e.charAt(n+i)==t.charAt(n+a))o++;else for(var s=a=i=0;s<5;s++){if(n+s<e.length&&e.charAt(n+s)==t.charAt(n)){i=s;break}if(n+s<t.length&&e.charAt(n)==t.charAt(n+s)){a=s;break}}n++}return(e.length+t.length)/2-o},splitEmail:function(e){var t=e.split("@");if(t.length<2)return!1;for(var n=0;n<t.length;n++)if(""===t[n])return!1;var i=t.pop(),a=i.split("."),o="";if(0==a.length)return!1;if(1==a.length)o=a[0];else{for(n=1;n<a.length;n++)o+=a[n]+".";2<=a.length&&(o=o.substring(0,o.length-1))}return{topLevelDomain:o,domain:i,address:t.join("@")}}}};"undefined"!=typeof module&&module.exports&&(module.exports=a.mailcheck),"undefined"!=typeof window&&window.jQuery&&(jQuery.fn.mailcheck=function(e){var t=this;if(e.suggested){var n=e.suggested;e.suggested=function(e){n(t,e)}}if(e.empty){var i=e.empty;e.empty=function(){i.call(null,t)}}e.email=this.val(),a.mailcheck.run(e)})})(),(function(r){r.fn.setAltText=function(s){var e=r(this);return-1<window.navigator.userAgent.indexOf("MSIE ")?e:e.each((function(e,t){var n=(t=r(t)).attr("placeholder")||"",i=null!=n?n:s&&s.text&&""!=s.text?s.text:"Enter text",a=s&&s.blurcolor?s.blurcolor:"#7F7F7F",o=s&&s.focuscolor?s.focuscolor:t.css("color");t.bind({blur:function(){t.val()==i||""==t.val()?t.val(i).css("color",a):t.css("color",o)},focus:function(){t.val()==i&&t.val("").css("color",o)}}),t.is(":focus")||t.val(i).css("color",a)}))}})(jQuery),(function(e){e.fn.doEnter=function(t){return e(this).unbind("keypress"),e(this).bind("keypress",(function(e){13==(e.keyCode||e.which)&&t&&t.callback&&(t.argument?t.callback(t.argument):t.callback())}))}})(jQuery),(function(e,t){"function"==typeof define&&define.amd?define([],(function(){return e.svg4everybody=t()})):"object"==typeof module&&module.exports?module.exports=t():e.svg4everybody=t()})(this,(function(){function m(e,t,n){if(n){var i=document.createDocumentFragment(),a=!t.hasAttribute("viewBox")&&n.getAttribute("viewBox");a&&t.setAttribute("viewBox",a);for(var o=n.cloneNode(!0);o.childNodes.length;)i.appendChild(o.firstChild);e.appendChild(i)}}function v(i){i.onreadystatechange=function(){if(4===i.readyState){var n=i._cachedDocument;n||((n=i._cachedDocument=document.implementation.createHTMLDocument("")).body.innerHTML=i.responseText,i._cachedTarget={}),i._embeds.splice(0).map((function(e){var t=i._cachedTarget[e.id];t||(t=i._cachedTarget[e.id]=n.getElementById(e.id)),m(e.parent,e.svg,t)}))}},i.onreadystatechange()}function S(e){for(var t=e;"svg"!==t.nodeName.toLowerCase()&&(t=t.parentNode););return t}return function(e){var d,u=Object(e),t=window.top!==window.self;d="polyfill"in u?u.polyfill:/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/.test(navigator.userAgent)||(navigator.userAgent.match(/\bEdge\/12\.(\d+)\b/)||[])[1]<10547||(navigator.userAgent.match(/\bAppleWebKit\/(\d+)\b/)||[])[1]<537||/\bEdge\/.(\d+)\b/.test(navigator.userAgent)&&t;var p={},f=window.requestAnimationFrame||setTimeout,g=document.getElementsByTagName("use"),h=0;d&&(function e(){for(var t=0;t<g.length;){var n=g[t],i=n.parentNode,a=S(i);if(a){var o=n.getAttribute("xlink:href")||n.getAttribute("href");if(d)if(!u.validate||u.validate(o,a,n)){i.removeChild(n);var s=o.split("#"),r=s.shift(),l=s.join("#");if(r.length){var c=p[r];c||((c=p[r]=new XMLHttpRequest).open("GET",r),c.send(),c._embeds=[]),c._embeds.push({parent:i,svg:a,id:l}),v(c)}else m(i,document.getElementById(l))}else++t,++h}else++t}0<g.length-h&&f(e,67)})()}})),function(){function e(r){return function(e,t,n,i){t=y(t,i,4);var a=!k(e)&&S.keys(e),o=(a||e).length,s=0<r?0:o-1;return arguments.length<3&&(n=e[a?a[s]:s],s+=r),(function(e,t,n,i,a,o){for(;0<=a&&a<o;a+=r){var s=i?i[a]:a;n=t(n,e[s],s,e)}return n})(e,t,n,a,s,o)}}function t(o){return function(e,t,n){t=M(t,n);for(var i=_(e),a=0<o?0:i-1;0<=a&&a<i;a+=o)if(t(e[a],a,e))return a;return-1}}function n(o,s,r){return function(e,t,n){var i=0,a=_(e);if("number"==typeof n)0<o?i=0<=n?n:Math.max(n+a,i):a=0<=n?Math.min(n+1,a):n+a+1;else if(r&&n&&a)return e[n=r(e,t)]===t?n:-1;if(t!=t)return 0<=(n=s(d.call(e,i,a),S.isNaN))?n+i:-1;for(n=0<o?i:a-1;0<=n&&n<a;n+=o)if(e[n]===t)return n;return-1}}function i(e,t){var n=$.length,i=e.constructor,a=S.isFunction(i)&&i.prototype||r,o="constructor";for(S.has(e,o)&&!S.contains(t,o)&&t.push(o);n--;)(o=$[n])in e&&e[o]!==a[o]&&!S.contains(t,o)&&t.push(o)}var a=this,o=a._,s=Array.prototype,r=Object.prototype,l=Function.prototype,c=s.push,d=s.slice,u=r.toString,p=r.hasOwnProperty,f=Array.isArray,g=Object.keys,h=l.bind,m=Object.create,v=function(){},S=function(e){return e instanceof S?e:this instanceof S?void(this._wrapped=e):new S(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=S),exports._=S):a._=S,S.VERSION="1.8.3";var y=function(a,o,e){if(void 0===o)return a;switch(null==e?3:e){case 1:return function(e){return a.call(o,e)};case 2:return function(e,t){return a.call(o,e,t)};case 3:return function(e,t,n){return a.call(o,e,t,n)};case 4:return function(e,t,n,i){return a.call(o,e,t,n,i)}}return function(){return a.apply(o,arguments)}},M=function(e,t,n){return null==e?S.identity:S.isFunction(e)?y(e,t,n):S.isObject(e)?S.matcher(e):S.property(e)};S.iteratee=function(e,t){return M(e,t,1/0)};var b=function(l,c){return function(e){var t=arguments.length;if(t<2||null==e)return e;for(var n=1;n<t;n++)for(var i=arguments[n],a=l(i),o=a.length,s=0;s<o;s++){var r=a[s];c&&void 0!==e[r]||(e[r]=i[r])}return e}},w=function(e){if(!S.isObject(e))return{};if(m)return m(e);v.prototype=e;var t=new v;return v.prototype=null,t},B=function(t){return function(e){return null==e?void 0:e[t]}},C=Math.pow(2,53)-1,_=B("length"),k=function(e){var t=_(e);return"number"==typeof t&&0<=t&&t<=C};S.each=S.forEach=function(e,t,n){var i,a;if(t=y(t,n),k(e))for(i=0,a=e.length;i<a;i++)t(e[i],i,e);else{var o=S.keys(e);for(i=0,a=o.length;i<a;i++)t(e[o[i]],o[i],e)}return e},S.map=S.collect=function(e,t,n){t=M(t,n);for(var i=!k(e)&&S.keys(e),a=(i||e).length,o=Array(a),s=0;s<a;s++){var r=i?i[s]:s;o[s]=t(e[r],r,e)}return o},S.reduce=S.foldl=S.inject=e(1),S.reduceRight=S.foldr=e(-1),S.find=S.detect=function(e,t,n){var i;return void 0!==(i=k(e)?S.findIndex(e,t,n):S.findKey(e,t,n))&&-1!==i?e[i]:void 0},S.filter=S.select=function(e,i,t){var a=[];return i=M(i,t),S.each(e,(function(e,t,n){i(e,t,n)&&a.push(e)})),a},S.reject=function(e,t,n){return S.filter(e,S.negate(M(t)),n)},S.every=S.all=function(e,t,n){t=M(t,n);for(var i=!k(e)&&S.keys(e),a=(i||e).length,o=0;o<a;o++){var s=i?i[o]:o;if(!t(e[s],s,e))return!1}return!0},S.some=S.any=function(e,t,n){t=M(t,n);for(var i=!k(e)&&S.keys(e),a=(i||e).length,o=0;o<a;o++){var s=i?i[o]:o;if(t(e[s],s,e))return!0}return!1},S.contains=S.includes=S.include=function(e,t,n,i){return k(e)||(e=S.values(e)),("number"!=typeof n||i)&&(n=0),0<=S.indexOf(e,t,n)},S.invoke=function(e,n){var i=d.call(arguments,2),a=S.isFunction(n);return S.map(e,(function(e){var t=a?n:e[n];return null==t?t:t.apply(e,i)}))},S.pluck=function(e,t){return S.map(e,S.property(t))},S.where=function(e,t){return S.filter(e,S.matcher(t))},S.findWhere=function(e,t){return S.find(e,S.matcher(t))},S.max=function(e,i,t){var n,a,o=-1/0,s=-1/0;if(null==i&&null!=e)for(var r=0,l=(e=k(e)?e:S.values(e)).length;r<l;r++)n=e[r],o<n&&(o=n);else i=M(i,t),S.each(e,(function(e,t,n){a=i(e,t,n),(s<a||a===-1/0&&o===-1/0)&&(o=e,s=a)}));return o},S.min=function(e,i,t){var n,a,o=1/0,s=1/0;if(null==i&&null!=e)for(var r=0,l=(e=k(e)?e:S.values(e)).length;r<l;r++)(n=e[r])<o&&(o=n);else i=M(i,t),S.each(e,(function(e,t,n){((a=i(e,t,n))<s||1/0===a&&1/0===o)&&(o=e,s=a)}));return o},S.shuffle=function(e){for(var t,n=k(e)?e:S.values(e),i=n.length,a=Array(i),o=0;o<i;o++)(t=S.random(0,o))!==o&&(a[o]=a[t]),a[t]=n[o];return a},S.sample=function(e,t,n){return null==t||n?(k(e)||(e=S.values(e)),e[S.random(e.length-1)]):S.shuffle(e).slice(0,Math.max(0,t))},S.sortBy=function(e,i,t){return i=M(i,t),S.pluck(S.map(e,(function(e,t,n){return{value:e,index:t,criteria:i(e,t,n)}})).sort((function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(i<n||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index-t.index})),"value")};var E=function(s){return function(i,a,e){var o={};return a=M(a,e),S.each(i,(function(e,t){var n=a(e,t,i);s(o,e,n)})),o}};S.groupBy=E((function(e,t,n){S.has(e,n)?e[n].push(t):e[n]=[t]})),S.indexBy=E((function(e,t,n){e[n]=t})),S.countBy=E((function(e,t,n){S.has(e,n)?e[n]++:e[n]=1})),S.toArray=function(e){return e?S.isArray(e)?d.call(e):k(e)?S.map(e,S.identity):S.values(e):[]},S.size=function(e){return null==e?0:k(e)?e.length:S.keys(e).length},S.partition=function(e,i,t){i=M(i,t);var a=[],o=[];return S.each(e,(function(e,t,n){(i(e,t,n)?a:o).push(e)})),[a,o]},S.first=S.head=S.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:S.initial(e,e.length-t)},S.initial=function(e,t,n){return d.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},S.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:S.rest(e,Math.max(0,e.length-t))},S.rest=S.tail=S.drop=function(e,t,n){return d.call(e,null==t||n?1:t)},S.compact=function(e){return S.filter(e,S.identity)};var T=function(e,t,n,i){for(var a=[],o=0,s=i||0,r=_(e);s<r;s++){var l=e[s];if(k(l)&&(S.isArray(l)||S.isArguments(l))){t||(l=T(l,t,n));var c=0,d=l.length;for(a.length+=d;c<d;)a[o++]=l[c++]}else n||(a[o++]=l)}return a};S.flatten=function(e,t){return T(e,t,!1)},S.without=function(e){return S.difference(e,d.call(arguments,1))},S.uniq=S.unique=function(e,t,n,i){S.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=M(n,i));for(var a=[],o=[],s=0,r=_(e);s<r;s++){var l=e[s],c=n?n(l,s,e):l;t?(s&&o===c||a.push(l),o=c):n?S.contains(o,c)||(o.push(c),a.push(l)):S.contains(a,l)||a.push(l)}return a},S.union=function(){return S.uniq(T(arguments,!0,!0))},S.intersection=function(e){for(var t=[],n=arguments.length,i=0,a=_(e);i<a;i++){var o=e[i];if(!S.contains(t,o)){for(var s=1;s<n&&S.contains(arguments[s],o);s++);s===n&&t.push(o)}}return t},S.difference=function(e){var t=T(arguments,!0,!0,1);return S.filter(e,(function(e){return!S.contains(t,e)}))},S.zip=function(){return S.unzip(arguments)},S.unzip=function(e){for(var t=e&&S.max(e,_).length||0,n=Array(t),i=0;i<t;i++)n[i]=S.pluck(e,i);return n},S.object=function(e,t){for(var n={},i=0,a=_(e);i<a;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},S.findIndex=t(1),S.findLastIndex=t(-1),S.sortedIndex=function(e,t,n,i){for(var a=(n=M(n,i,1))(t),o=0,s=_(e);o<s;){var r=Math.floor((o+s)/2);n(e[r])<a?o=r+1:s=r}return o},S.indexOf=n(1,S.findIndex,S.sortedIndex),S.lastIndexOf=n(-1,S.findLastIndex),S.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var i=Math.max(Math.ceil((t-e)/n),0),a=Array(i),o=0;o<i;o++,e+=n)a[o]=e;return a};var I=function(e,t,n,i,a){if(!(i instanceof t))return e.apply(n,a);var o=w(e.prototype),s=e.apply(o,a);return S.isObject(s)?s:o};S.bind=function(e,t){if(h&&e.bind===h)return h.apply(e,d.call(arguments,1));if(!S.isFunction(e))throw new TypeError("Bind must be called on a function");var n=d.call(arguments,2),i=function(){return I(e,i,t,this,n.concat(d.call(arguments)))};return i},S.partial=function(a){var o=d.call(arguments,1),s=function(){for(var e=0,t=o.length,n=Array(t),i=0;i<t;i++)n[i]=o[i]===S?arguments[e++]:o[i];for(;e<arguments.length;)n.push(arguments[e++]);return I(a,s,this,this,n)};return s},S.bindAll=function(e){var t,n,i=arguments.length;if(i<=1)throw new Error("bindAll must be passed function names");for(t=1;t<i;t++)e[n=arguments[t]]=S.bind(e[n],e);return e},S.memoize=function(i,a){var o=function(e){var t=o.cache,n=""+(a?a.apply(this,arguments):e);return S.has(t,n)||(t[n]=i.apply(this,arguments)),t[n]};return o.cache={},o},S.delay=function(e,t){var n=d.call(arguments,2);return setTimeout((function(){return e.apply(null,n)}),t)},S.defer=S.partial(S.delay,S,1),S.throttle=function(n,i,a){var o,s,r,l=null,c=0;a||(a={});var d=function(){c=!1===a.leading?0:S.now(),l=null,r=n.apply(o,s),l||(o=s=null)};return function(){var e=S.now();c||!1!==a.leading||(c=e);var t=i-(e-c);return o=this,s=arguments,t<=0||i<t?(l&&(clearTimeout(l),l=null),c=e,r=n.apply(o,s),l||(o=s=null)):l||!1===a.trailing||(l=setTimeout(d,t)),r}},S.debounce=function(t,n,i){var a,o,s,r,l,c=function(){var e=S.now()-r;e<n&&0<=e?a=setTimeout(c,n-e):(a=null,i||(l=t.apply(s,o),a||(s=o=null)))};return function(){s=this,o=arguments,r=S.now();var e=i&&!a;return a||(a=setTimeout(c,n)),e&&(l=t.apply(s,o),s=o=null),l}},S.wrap=function(e,t){return S.partial(t,e)},S.negate=function(e){return function(){return!e.apply(this,arguments)}},S.compose=function(){var n=arguments,i=n.length-1;return function(){for(var e=i,t=n[i].apply(this,arguments);e--;)t=n[e].call(this,t);return t}},S.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},S.before=function(e,t){var n;return function(){return 0<--e&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},S.once=S.partial(S.before,2);var x=!{toString:null}.propertyIsEnumerable("toString"),$=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];S.keys=function(e){if(!S.isObject(e))return[];if(g)return g(e);var t=[];for(var n in e)S.has(e,n)&&t.push(n);return x&&i(e,t),t},S.allKeys=function(e){if(!S.isObject(e))return[];var t=[];for(var n in e)t.push(n);return x&&i(e,t),t},S.values=function(e){for(var t=S.keys(e),n=t.length,i=Array(n),a=0;a<n;a++)i[a]=e[t[a]];return i},S.mapObject=function(e,t,n){t=M(t,n);for(var i,a=S.keys(e),o=a.length,s={},r=0;r<o;r++)s[i=a[r]]=t(e[i],i,e);return s},S.pairs=function(e){for(var t=S.keys(e),n=t.length,i=Array(n),a=0;a<n;a++)i[a]=[t[a],e[t[a]]];return i},S.invert=function(e){for(var t={},n=S.keys(e),i=0,a=n.length;i<a;i++)t[e[n[i]]]=n[i];return t},S.functions=S.methods=function(e){var t=[];for(var n in e)S.isFunction(e[n])&&t.push(n);return t.sort()},S.extend=b(S.allKeys),S.extendOwn=S.assign=b(S.keys),S.findKey=function(e,t,n){t=M(t,n);for(var i,a=S.keys(e),o=0,s=a.length;o<s;o++)if(t(e[i=a[o]],i,e))return i},S.pick=function(e,t,n){var i,a,o={},s=e;if(null==s)return o;S.isFunction(t)?(a=S.allKeys(s),i=y(t,n)):(a=T(arguments,!1,!1,1),i=function(e,t,n){return t in n},s=Object(s));for(var r=0,l=a.length;r<l;r++){var c=a[r],d=s[c];i(d,c,s)&&(o[c]=d)}return o},S.omit=function(e,t,n){if(S.isFunction(t))t=S.negate(t);else{var i=S.map(T(arguments,!1,!1,1),String);t=function(e,t){return!S.contains(i,t)}}return S.pick(e,t,n)},S.defaults=b(S.allKeys,!0),S.create=function(e,t){var n=w(e);return t&&S.extendOwn(n,t),n},S.clone=function(e){return S.isObject(e)?S.isArray(e)?e.slice():S.extend({},e):e},S.tap=function(e,t){return t(e),e},S.isMatch=function(e,t){var n=S.keys(t),i=n.length;if(null==e)return!i;for(var a=Object(e),o=0;o<i;o++){var s=n[o];if(t[s]!==a[s]||!(s in a))return!1}return!0};var A=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof S&&(e=e._wrapped),t instanceof S&&(t=t._wrapped);var a=u.call(e);if(a!==u.call(t))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}var o="[object Array]"===a;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,r=t.constructor;if(s!==r&&!(S.isFunction(s)&&s instanceof s&&S.isFunction(r)&&r instanceof r)&&"constructor"in e&&"constructor"in t)return!1}i=i||[];for(var l=(n=n||[]).length;l--;)if(n[l]===e)return i[l]===t;if(n.push(e),i.push(t),o){if((l=e.length)!==t.length)return!1;for(;l--;)if(!A(e[l],t[l],n,i))return!1}else{var c,d=S.keys(e);if(l=d.length,S.keys(t).length!==l)return!1;for(;l--;)if(c=d[l],!S.has(t,c)||!A(e[c],t[c],n,i))return!1}return n.pop(),i.pop(),!0};S.isEqual=function(e,t){return A(e,t)},S.isEmpty=function(e){return null==e||(k(e)&&(S.isArray(e)||S.isString(e)||S.isArguments(e))?0===e.length:0===S.keys(e).length)},S.isElement=function(e){return!(!e||1!==e.nodeType)},S.isArray=f||function(e){return"[object Array]"===u.call(e)},S.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},S.each(["Arguments","Function","String","Number","Date","RegExp","Error"],(function(t){S["is"+t]=function(e){return u.call(e)==="[object "+t+"]"}})),S.isArguments(arguments)||(S.isArguments=function(e){return S.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(S.isFunction=function(e){return"function"==typeof e||!1}),S.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},S.isNaN=function(e){return S.isNumber(e)&&e!==+e},S.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===u.call(e)},S.isNull=function(e){return null===e},S.isUndefined=function(e){return void 0===e},S.has=function(e,t){return null!=e&&p.call(e,t)},S.noConflict=function(){return a._=o,this},S.identity=function(e){return e},S.constant=function(e){return function(){return e}},S.noop=function(){},S.property=B,S.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},S.matcher=S.matches=function(t){return t=S.extendOwn({},t),function(e){return S.isMatch(e,t)}},S.times=function(e,t,n){var i=Array(Math.max(0,e));t=y(t,n,1);for(var a=0;a<e;a++)i[a]=t(a);return i},S.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},S.now=Date.now||function(){return(new Date).getTime()};var L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},R=S.invert(L),D=function(t){var n=function(e){return t[e]},e="(?:"+S.keys(t).join("|")+")",i=RegExp(e),a=RegExp(e,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(a,n):e}};S.escape=D(L),S.unescape=D(R),S.result=function(e,t,n){var i=null==e?void 0:e[t];return void 0===i&&(i=n),S.isFunction(i)?i.call(e):i};var P=0;S.uniqueId=function(e){var t=++P+"";return e?e+t:t},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},U=/\\|'|\r|\n|\u2028|\u2029/g,G=function(e){return"\\"+O[e]};S.template=function(o,e,t){!e&&t&&(e=t),e=S.defaults({},e,S.templateSettings);var n=RegExp([(e.escape||N).source,(e.interpolate||N).source,(e.evaluate||N).source].join("|")+"|$","g"),s=0,r="__p+='";o.replace(n,(function(e,t,n,i,a){return r+=o.slice(s,a).replace(U,G),s=a+e.length,t?r+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":n?r+="'+\n((__t=("+n+"))==null?'':__t)+\n'":i&&(r+="';\n"+i+"\n__p+='"),e})),r+="';\n",e.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{var i=new Function(e.variable||"obj","_",r)}catch(e){throw e.source=r,e}var a=function(e){return i.call(this,e,S)},l=e.variable||"obj";return a.source="function("+l+"){\n"+r+"}",a},S.chain=function(e){var t=S(e);return t._chain=!0,t};var F=function(e,t){return e._chain?S(t).chain():t};S.mixin=function(n){S.each(S.functions(n),(function(e){var t=S[e]=n[e];S.prototype[e]=function(){var e=[this._wrapped];return c.apply(e,arguments),F(this,t.apply(S,e))}}))},S.mixin(S),S.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var n=s[t];S.prototype[t]=function(){var e=this._wrapped;return n.apply(e,arguments),"shift"!==t&&"splice"!==t||0!==e.length||delete e[0],F(this,e)}})),S.each(["concat","join","slice"],(function(e){var t=s[e];S.prototype[e]=function(){return F(this,t.apply(this._wrapped,arguments))}})),S.prototype.value=function(){return this._wrapped},S.prototype.valueOf=S.prototype.toJSON=S.prototype.value,S.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],(function(){return S}))}.call(this),(function(e,t){"function"==typeof define&&define.amd?define("typeahead.js",["jquery"],(function(e){return t(e)})):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)})(0,(function(y){var M=(function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:y.isArray,isFunction:y.isFunction,isObject:y.isPlainObject,isUndefined:function(e){return void 0===e},isElement:function(e){return!(!e||1!==e.nodeType)},isJQuery:function(e){return e instanceof y},toStr:function(e){return M.isUndefined(e)||null===e?"":e+""},bind:y.proxy,each:function(e,n){y.each(e,(function(e,t){return n(t,e)}))},map:y.map,filter:y.grep,every:function(n,i){var a=!0;return n?(y.each(n,(function(e,t){if(!(a=i.call(null,t,e,n)))return!1})),!!a):a},some:function(n,i){var a=!1;return n?(y.each(n,(function(e,t){if(a=i.call(null,t,e,n))return!1})),!!a):a},mixin:y.extend,identity:function(e){return e},clone:function(e){return y.extend(!0,{},e)},getIdGenerator:function(){var e=0;return function(){return e++}},templatify:function(e){return y.isFunction(e)?e:function(){return String(e)}},defer:function(e){setTimeout(e,0)},debounce:function(a,o,s){var r,l;return function(){var e,t,n=this,i=arguments;return e=function(){r=null,s||(l=a.apply(n,i))},t=s&&!r,clearTimeout(r),r=setTimeout(e,o),t&&(l=a.apply(n,i)),l}},throttle:function(n,i){var a,o,s,r,l,c;return l=0,c=function(){l=new Date,s=null,r=n.apply(a,o)},function(){var e=new Date,t=i-(e-l);return a=this,o=arguments,t<=0?(clearTimeout(s),s=null,l=e,r=n.apply(a,o)):s||(s=setTimeout(c,t)),r}},stringify:function(e){return M.isString(e)?e:JSON.stringify(e)},noop:function(){}}})(),n=(function(){"use strict";var r={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return function(e){var t,n;return n=M.mixin({},r,e),{css:(t={css:(s={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}},M.isMsie()&&M.mixin(s.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),s),classes:n,html:(o=n,{wrapper:'<span class="'+o.wrapper+'"></span>',menu:'<div class="'+o.menu+'"></div>'}),selectors:(i=n,a={},M.each(i,(function(e,t){a[t]="."+e})),a)}).css,html:t.html,classes:t.classes,selectors:t.selectors,mixin:function(e){M.mixin(e,t)}};var i,a;var o;var s}})(),b=(function(){"use strict";var n;function e(e){e&&e.el||y.error("EventBus initialized without el"),this.$el=y(e.el)}return"typeahead:",n={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},M.mixin(e.prototype,{_trigger:function(e,t){var n;return n=y.Event("typeahead:"+e),(t=t||[]).unshift(n),this.$el.trigger.apply(this.$el,t),n},before:function(e){var t;return t=[].slice.call(arguments,1),this._trigger("before"+e,t).isDefaultPrevented()},trigger:function(e){var t;this._trigger(e,[].slice.call(arguments,1)),(t=n[e])&&this._trigger(t,[].slice.call(arguments,1))}}),e})(),t=(function(){"use strict";var r=/\s+/,s=(function(){var e;e=window.setImmediate?function(e){setImmediate((function(){e()}))}:function(e){setTimeout((function(){e()}),0)};return e})();return{onSync:function(e,t,n){return i.call(this,"sync",e,t,n)},onAsync:function(e,t,n){return i.call(this,"async",e,t,n)},off:function(e){var t;if(!this._callbacks)return this;e=e.split(r);for(;t=e.shift();)delete this._callbacks[t];return this},trigger:function(e){var t,n,i,a,o;if(!this._callbacks)return this;e=e.split(r),i=[].slice.call(arguments,1);for(;(t=e.shift())&&(n=this._callbacks[t]);)a=l(n.sync,this,[t].concat(i)),o=l(n.async,this,[t].concat(i)),a()&&s(o);return this}};function i(e,t,n,i){var a,o,s;if(!n)return this;for(t=t.split(r),n=i?(s=i,(o=n).bind?o.bind(s):function(){o.apply(s,[].slice.call(arguments,0))}):n,this._callbacks=this._callbacks||{};a=t.shift();)this._callbacks[a]=this._callbacks[a]||{sync:[],async:[]},this._callbacks[a][e].push(n);return this}function l(i,a,o){return function(){for(var e,t=0,n=i.length;!e&&t<n;t+=1)e=!1===i[t].apply(a,o);return!e}}})(),l=(function(s){"use strict";var e={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(a){var o;(a=M.mixin({},e,a)).node&&a.pattern&&(a.pattern=M.isArray(a.pattern)?a.pattern:[a.pattern],o=(function(e,t,n){for(var i,a=[],o=0,s=e.length;o<s;o++)a.push(M.escapeRegExChars(e[o]));return i=n?"\\b("+a.join("|")+")\\b":"("+a.join("|")+")",t?new RegExp(i):new RegExp(i,"i")})(a.pattern,a.caseSensitive,a.wordsOnly),(function e(t,n){var i;for(var a=0;a<t.childNodes.length;a++)3===(i=t.childNodes[a]).nodeType?a+=n(i)?1:0:e(i,n)})(a.node,(function(e){var t,n,i;(t=o.exec(e.data))&&(i=s.createElement(a.tagName),a.className&&(i.className=a.className),(n=e.splitText(t.index)).splitText(t[0].length),i.appendChild(n.cloneNode(!0)),e.parentNode.replaceChild(i,n));return!!t})))}})(window.document),w=(function(){"use strict";var o;function s(e,t){var n;(e=e||{}).input||y.error("input is missing"),t.mixin(this),this.$hint=y(e.hint),this.$input=y(e.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=(n=this.$input,y('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:n.css("font-family"),fontSize:n.css("font-size"),fontStyle:n.css("font-style"),fontVariant:n.css("font-variant"),fontWeight:n.css("font-weight"),wordSpacing:n.css("word-spacing"),letterSpacing:n.css("letter-spacing"),textIndent:n.css("text-indent"),textRendering:n.css("text-rendering"),textTransform:n.css("text-transform")}).insertAfter(n)),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=M.noop)}return o={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},s.normalizeQuery=function(e){return M.toStr(e).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},M.mixin(s.prototype,t,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(e){var t=o[e.which||e.keyCode];this._managePreventDefault(t,e),t&&this._shouldTrigger(t,e)&&this.trigger(t+"Keyed",e)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(e,t){var n;switch(e){case"up":case"down":n=!i(t);break;default:n=!1}n&&t.preventDefault()},_shouldTrigger:function(e,t){var n;switch(e){case"tab":n=!i(t);break;default:n=!0}return n},_checkLanguageDirection:function(){var e=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==e&&(this.dir=e,this.$hint.attr("dir",e),this.trigger("langDirChanged",e))},_setQuery:function(e,t){var n,i,a,o;a=e,o=this.query,i=!!(n=s.normalizeQuery(a)===s.normalizeQuery(o))&&this.query.length!==e.length,this.query=e,t||n?!t&&i&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var e,t,n,i,a=this;return e=M.bind(this._onBlur,this),t=M.bind(this._onFocus,this),n=M.bind(this._onKeydown,this),i=M.bind(this._onInput,this),this.$input.on("blur.tt",e).on("focus.tt",t).on("keydown.tt",n),!M.isMsie()||9<M.isMsie()?this.$input.on("input.tt",i):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",(function(e){o[e.which||e.keyCode]||M.defer(M.bind(a._onInput,a,e))})),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(e,t){this.setInputValue(e),this._setQuery(e,t)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(e){this.$input.val(e),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(e){this.$hint.val(e)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var e,t,n;n=(e=this.getInputValue())!==(t=this.getHint())&&0===t.indexOf(e),!(""!==e&&n&&!this.hasOverflow())&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var e=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=e},isCursorAtEnd:function(){var e,t,n;return e=this.$input.val().length,t=this.$input[0].selectionStart,M.isNumber(t)?t===e:!document.selection||((n=document.selection.createRange()).moveStart("character",-e),e===n.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=y("<div>")}}),s;function i(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}})(),a=(function(){"use strict";var p,s;function e(e,t){var n,i,a,o;(e=e||{}).templates=e.templates||{},e.templates.notFound=e.templates.notFound||e.templates.empty,e.source||y.error("missing source"),e.node||y.error("missing node"),e.name&&(n=e.name,!/^[_a-zA-Z0-9-]+$/.test(n))&&y.error("invalid dataset name: "+e.name),t.mixin(this),this.highlight=!!e.highlight,this.name=e.name||s(),this.limit=e.limit||5,this.displayFn=(i=(i=e.display||e.displayKey)||M.stringify,M.isFunction(i)?i:function(e){return e[i]}),this.displayCategory=e.displayCategory||!1,this.templates=(a=e.templates,o=this.displayFn,{notFound:a.notFound&&M.templatify(a.notFound),pending:a.pending&&M.templatify(a.pending),header:a.header&&M.templatify(a.header),footer:a.footer&&M.templatify(a.footer),suggestion:a.suggestion||function(e){return y("<div>").text(o(e))},category:{header:a.category&&a.category.header||function(e){return y("<div>").text(e)}}}),this.source=e.source.__ttAdapter?e.source.__ttAdapter():e.source,this.async=M.isUndefined(e.async)?2<this.source.length:!!e.async,this._resetLastSuggestion(),this.$el=y(e.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}return p={val:"tt-selectable-display",obj:"tt-selectable-object"},s=M.getIdGenerator(),e.extractData=function(e){var t=y(e);return t.data(p.obj)?{val:t.data(p.val)||"",obj:t.data(p.obj)||null}:null},M.mixin(e.prototype,t,{_overwrite:function(e,t){(t=t||[]).length?this._renderSuggestions(e,t):this.async&&this.templates.pending?this._renderPending(e):!this.async&&this.templates.notFound?this._renderNotFound(e):this._empty(),this.trigger("rendered",this.name,t,!1)},_append:function(e,t){(t=t||[]).length&&this.$lastSuggestion.length?this._appendSuggestions(e,t):t.length?this._renderSuggestions(e,t):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(e),this.trigger("rendered",this.name,t,!0)},_renderSuggestions:function(e,t){var n;n=this.displayCategory?this._getCategorizedSuggestionsFragment(e,t):this._getSuggestionsFragment(e,t),this.$lastSuggestion=n.children().last(),this.$el.html(n).prepend(this._getHeader(e,t)).append(this._getFooter(e,t))},_appendSuggestions:function(e,t){var n,i;i=(n=this._getSuggestionsFragment(e,t)).children().last(),this.$lastSuggestion.after(n),this.$lastSuggestion=i},_renderPending:function(e){var t=this.templates.pending;this._resetLastSuggestion(),t&&this.$el.html(t({query:e,dataset:this.name}))},_renderNotFound:function(e){var t=this.templates.notFound;this._resetLastSuggestion(),t&&this.$el.html(t({query:e,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(i,e){var a,o=this;return a=document.createDocumentFragment(),M.each(e,(function(e){var t,n;n=o._injectQuery(i,e),t=y(o.templates.suggestion(n)).data(p.obj,e).data(p.val,o.displayFn(e)).addClass(o.classes.suggestion+" "+o.classes.selectable),a.appendChild(t[0])})),this.highlight&&l({className:this.classes.highlight,node:a,pattern:i}),y(a)},_getCategorizedSuggestionsFragment:function(c,e){var t,d=this,n={},i=[];t=document.createDocumentFragment(),M.each(e,(function(e,t){void 0===n.sequenceCategory&&(n.sequenceCategory=[]),n.sequenceCategory.push(e)}));for(var a=0;a<1;a++){var o,s=i[a],u=document.createDocumentFragment(),r=n.sequenceCategory;o=y(d.templates.category.header(s)).data(p.obj,s).data(p.val,s).addClass(d.classes.category),M.each(r,(function(e){var t,n;n=d._injectQuery(c,e),t=y(d.templates.suggestion(n)).data(p.obj,e).data(p.val,d.displayFn(e)).addClass(d.classes.suggestion+" "+d.classes.selectable);var i=document.createElement("span");"video"==o?i.setAttribute("style","width:25px; height:25px; display:inline-block; vertical-align:top; margin-right:10px; margin-top:5px;"):i.setAttribute("style","width:25px; height:20px; display:inline-block; vertical-align:top; margin-right:10px; margin-top:5px;");var a=document.createElement("img");a.setAttribute("height","100%");var o=null!=e.group?e.group.toLowerCase():"",s=null!=e.type?e.type.toUpperCase():"",r=null!=e.eventStrTags?e.eventStrTags[0]:"";switch(o){case"event":switch(s){case"MT":switch(r){case"mc":a.setAttribute("src",global.strContentUrl+"/webin/common/icons/mc-loyalty.png");break;default:a.setAttribute("src",global.strContentUrl+"/webin/common/icons/search-movies.png")}break;case"AT":case"CT":a.setAttribute("src",global.strContentUrl+"/webin/common/icons/qb-events.png");break;case"PL":a.setAttribute("src",global.strContentUrl+"/webin/common/icons/qb-plays.png");break;case"SP":a.setAttribute("src",global.strContentUrl+"/webin/common/icons/qb-sports.png");break;case"PT":a.setAttribute("src",global.strContentUrl+"/webin/common/icons/qb-events.png")}break;case"venue":switch(s){case"MT":case"PL":default:a.setAttribute("src",global.strContentUrl+"/webin/common/icons/qb-venues.png")}break;case"offer":a.setAttribute("src",global.strContentUrl+"/webin/common/icons/qb-offers.png");break;case"artist":case"person":a.setAttribute("src",global.strContentUrl+"/webin/common/icons/qb-artist.png");break;case"experience":a.setAttribute("src",global.strContentUrl+"/webin/common/icons/qb-experiences.png");break;case"video":a.setAttribute("src",global.strContentUrl+"/webin/common/icons/qb-videos.png");break;case"article":a.setAttribute("src",global.strContentUrl+"/webin/common/icons/qb-article.png");break;case"boxoffice":a.setAttribute("src",global.strContentUrl+"/webin/common/icons/qb-boxoffice.png");break;default:a.setAttribute("src","")}if("videos"!=pageName){y(i).append(a),y(t[0]).css("padding","10px 0 0px 15px"),y(t[0]).css("min-height","60px"),y(t[0]).css("border-bottom","solid 1px #E5E5E5"),y(t[0]).css("position","relative");var l=document.createElement("span");l.setAttribute("style","display:inline-block; padding-bottom : 10px; width: calc(100% - 35px);"),y(l).html(y(t[0]).html()),y(t[0]).html(""),y(t[0]).append(y(i)).append(y(l))}u.appendChild(t[0])})),this.highlight&&l({className:this.classes.highlight,node:u,pattern:c}),t.appendChild(o[0]),t.appendChild(u)}return y(t)},_getFooter:function(e,t){return this.templates.footer?this.templates.footer({query:e,suggestions:t,dataset:this.name}):null},_getHeader:function(e,t){return this.templates.header?this.templates.header({query:e,suggestions:t,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=y()},_injectQuery:function(e,t){return M.isObject(t)?M.mixin({_query:e},t):t},update:function(t){var n=this,i=!1,a=!1,o=0;function e(e){a||(a=!0,e=(e||[]).slice(0,n.limit),o=e.length,n._overwrite(t,e),o<n.limit&&n.async&&n.trigger("asyncRequested",t))}this.cancel(),this.cancel=function(){i=!0,n.cancel=y.noop,n.async&&n.trigger("asyncCanceled",t)},this.source(t,e,(function(e){e=e||[],!i&&o<n.limit&&(n.cancel=y.noop,n._append(t,e.slice(0,n.limit-o)),o+=e.length,n.async&&n.trigger("asyncReceived",t))})),!a&&e([])},cancel:y.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=y("<div>")}}),e})(),B=(function(){"use strict";function e(e,n){var i=this;(e=e||{}).node||y.error("node is required"),n.mixin(this),this.$node=y(e.node),this.query=null,this.datasets=M.map(e.datasets,(function(e){var t=i.$node.find(e.node).first();return e.node=t.length?t:y("<div>").appendTo(i.$node),new a(e,n)}))}return M.mixin(e.prototype,t,{_onSelectableClick:function(e){this.trigger("selectableClicked",y(e.currentTarget))},_onRendered:function(e,t,n,i){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",t,n,i)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){return M.every(this.datasets,(function(e){return e.isEmpty()}))},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var e=this.getActiveSelectable();e&&e.removeClass(this.classes.cursor)},_ensureVisible:function(e){var t,n,i,a;n=(t=e.position().top)+e.outerHeight(!0),i=this.$node.scrollTop(),a=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),t<0?this.$node.scrollTop(i+t):a<n&&this.$node.scrollTop(i+(n-a))},bind:function(){var e,t=this;return e=M.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,e),M.each(this.datasets,(function(e){e.onSync("asyncRequested",t._propagate,t).onSync("asyncCanceled",t._propagate,t).onSync("asyncReceived",t._propagate,t).onSync("rendered",t._onRendered,t).onSync("cleared",t._onCleared,t)})),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(e){this.$node.attr("dir",e)},selectableRelativeToCursor:function(e){var t,n,i;return n=this.getActiveSelectable(),t=this._getSelectables(),-1===(i=(i=((i=(n?t.index(n):-1)+e)+1)%(t.length+1)-1)<-1?t.length-1:i)?null:t.eq(i)},setCursor:function(e){this._removeCursor(),(e=e&&e.first())&&(e.addClass(this.classes.cursor),this._ensureVisible(e))},getSelectableData:function(e){return e&&e.length?a.extractData(e):null},getActiveSelectable:function(){var e=this._getSelectables().filter(this.selectors.cursor).first();return e.length?e:null},getTopSelectable:function(){var e=this._getSelectables().first();return e.length?e:null},update:function(t){var e=t!==this.query;return e&&(this.query=t,M.each(this.datasets,(function(e){e.update(t)}))),e},empty:function(){M.each(this.datasets,(function(e){e.clear()})),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){this.$node.off(".tt"),this.$node=y("<div>"),M.each(this.datasets,(function(e){e.destroy()}))}}),e})(),C=(function(){"use strict";var t=B.prototype;function e(){B.apply(this,[].slice.call(arguments,0))}return M.mixin(e.prototype,B.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),t.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),t.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),t._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),t._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(e){return this.$node.css("ltr"===e?this.css.ltr:this.css.rtl),t.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),e})(),_=(function(){"use strict";function e(e,t){var n,i,a,o,s,r,l,c,d,u,p;(e=e||{}).input||y.error("missing input"),e.menu||y.error("missing menu"),e.eventBus||y.error("missing event bus"),t.mixin(this),this.eventBus=e.eventBus,this.minLength=M.isNumber(e.minLength)?e.minLength:1,this.input=e.input,this.menu=e.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),n=f(this,"activate","open","_onFocused"),i=f(this,"deactivate","_onBlurred"),a=f(this,"isActive","isOpen","_onEnterKeyed"),o=f(this,"isActive","isOpen","_onTabKeyed"),s=f(this,"isActive","_onEscKeyed"),r=f(this,"isActive","open","_onUpKeyed"),l=f(this,"isActive","open","_onDownKeyed"),c=f(this,"isActive","isOpen","_onLeftKeyed"),d=f(this,"isActive","isOpen","_onRightKeyed"),u=f(this,"_openIfActive","_onQueryChanged"),p=f(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",n,this).onSync("blurred",i,this).onSync("enterKeyed",a,this).onSync("tabKeyed",o,this).onSync("escKeyed",s,this).onSync("upKeyed",r,this).onSync("downKeyed",l,this).onSync("leftKeyed",c,this).onSync("rightKeyed",d,this).onSync("queryChanged",u,this).onSync("whitespaceChanged",p,this).onSync("langDirChanged",this._onLangDirChanged,this)}return M.mixin(e.prototype,{_hacks:function(){var a,o;a=this.input.$input||y("<div>"),o=this.menu.$node||y("<div>"),a.on("blur.tt",(function(e){var t,n,i;t=document.activeElement,n=o.is(t),i=0<o.has(t).length,M.isMsie()&&(n||i)&&(e.preventDefault(),e.stopImmediatePropagation(),M.defer((function(){a.focus()})))})),o.on("mousedown.tt",(function(e){e.preventDefault()}))},_onSelectableClicked:function(e,t){this.select(t)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(e,t,n,i){this._updateHint(),this.eventBus.trigger("render",n,i,t)},_onAsyncRequested:function(e,t,n){this.eventBus.trigger("asyncrequest",n,t)},_onAsyncCanceled:function(e,t,n){this.eventBus.trigger("asynccancel",n,t)},_onAsyncReceived:function(e,t,n){this.eventBus.trigger("asyncreceive",n,t)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(e,t){var n;(n=this.menu.getActiveSelectable())&&this.select(n)&&t.preventDefault()},_onTabKeyed:function(e,t){var n;(n=this.menu.getActiveSelectable())?this.select(n)&&t.preventDefault():(n=this.menu.getTopSelectable())&&this.autocomplete(n)&&t.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(e,t){this._minLengthMet(t)?this.menu.update(t):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(e,t){this.dir!==t&&(this.dir=t,this.menu.setLanguageDirection(t))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(e){return(e=M.isString(e)?e:this.input.getQuery()||"").length>=this.minLength},_updateHint:function(){var e,t,n,i,a,o;e=this.menu.getTopSelectable(),t=this.menu.getSelectableData(e),n=this.input.getInputValue(),!t||M.isBlankString(n)||this.input.hasOverflow()?this.input.clearHint():(i=w.normalizeQuery(n),a=M.escapeRegExChars(i),(o=new RegExp("^(?:"+a+")(.+$)","i").exec(t.val))&&this.input.setHint(n+o[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return!!this.isActive()||!(!this.isEnabled()||this.eventBus.before("active"))&&(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return!this.isActive()||!this.eventBus.before("idle")&&(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0)},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(e){this.input.setQuery(M.toStr(e))},getVal:function(){return this.input.getQuery()},select:function(e){var t=this.menu.getSelectableData(e);return!(!t||this.eventBus.before("select",t.obj))&&(this.input.setQuery(t.val,!0),this.eventBus.trigger("select",t.obj),this.close(),!0)},autocomplete:function(e){var t,n;return t=this.input.getQuery(),!(!((n=this.menu.getSelectableData(e))&&t!==n.val)||this.eventBus.before("autocomplete",n.obj))&&(this.input.setQuery(n.val),this.eventBus.trigger("autocomplete",n.obj),!0)},moveCursor:function(e){var t,n,i,a;return t=this.input.getQuery(),n=this.menu.selectableRelativeToCursor(e),a=(i=this.menu.getSelectableData(n))?i.obj:null,!(this._minLengthMet()&&this.menu.update(t))&&!this.eventBus.before("cursorchange",a)&&(this.menu.setCursor(n),i?this.input.setInputValue(i.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",a),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),e;function f(n){var e=[].slice.call(arguments,1);return function(){var t=[].slice.call(arguments);M.each(e,(function(e){return n[e].apply(n,t)}))}}})();!(function(){"use strict";var e,v,t;function i(e,n){e.each((function(){var e,t=y(this);(e=t.data(v.typeahead))&&n(e,t)}))}function S(e){var t;return(t=M.isJQuery(e)||M.isElement(e)?y(e).first():[]).length?t:null}e=y.fn.typeahead,v={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},t={initialize:function(g,h){var m;return h=M.isArray(h)?h:[].slice.call(arguments,1),m=n((g=g||{}).classNames),this.each((function(){var e,t,n,i,a,o,s,r,l,c,d;M.each(h,(function(e){e.highlight=!!g.highlight})),e=y(this),t=y(m.html.wrapper),n=S(g.hint),i=S(g.menu),a=!1!==g.hint&&!n,o=!1!==g.menu&&!i,a&&(u=e,p=m,n=u.clone().addClass(p.classes.hint).removeData().css(p.css.hint).css((f=u,{backgroundAttachment:f.css("background-attachment"),backgroundClip:f.css("background-clip"),backgroundColor:f.css("background-color"),backgroundImage:f.css("background-image"),backgroundOrigin:f.css("background-origin"),backgroundPosition:f.css("background-position"),backgroundRepeat:f.css("background-repeat"),backgroundSize:f.css("background-size")})).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})),o&&(i=y(m.html.menu).css(m.css.menu)),n&&n.val(""),e=(function(e,t){e.data(v.attrs,{dir:e.attr("dir"),autocomplete:e.attr("autocomplete"),spellcheck:e.attr("spellcheck"),style:e.attr("style")}),e.addClass(t.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!e.attr("dir")&&e.attr("dir","auto")}catch(e){}return e})(e,m),(a||o)&&(t.css(m.css.wrapper),e.css(a?m.css.input:m.css.inputWithNoHint),e.wrap(t).parent().prepend(a?n:null).append(o?i:null));var u,p,f;d=o?C:B,s=new b({el:e}),r=new w({hint:n,input:e},m),l=new d({node:i,datasets:h},m),c=new _({input:r,menu:l,eventBus:s,minLength:g.minLength},m),e.data(v.www,m),e.data(v.typeahead,c)}))},isEnabled:function(){var t;return i(this.first(),(function(e){t=e.isEnabled()})),t},enable:function(){return i(this,(function(e){e.enable()})),this},disable:function(){return i(this,(function(e){e.disable()})),this},isActive:function(){var t;return i(this.first(),(function(e){t=e.isActive()})),t},activate:function(){return i(this,(function(e){e.activate()})),this},deactivate:function(){return i(this,(function(e){e.deactivate()})),this},isOpen:function(){var t;return i(this.first(),(function(e){t=e.isOpen()})),t},open:function(){return i(this,(function(e){e.open()})),this},close:function(){return i(this,(function(e){e.close()})),this},select:function(e){var t=!1,n=y(e);return i(this.first(),(function(e){t=e.select(n)})),t},autocomplete:function(e){var t=!1,n=y(e);return i(this.first(),(function(e){t=e.autocomplete(n)})),t},moveCursor:function(t){var n=!1;return i(this.first(),(function(e){n=e.moveCursor(t)})),n},val:function(t){var n;return arguments.length?(i(this,(function(e){e.setVal(t)})),this):(i(this.first(),(function(e){n=e.getVal()})),n)},destroy:function(){return i(this,(function(e,t){var n,i,a;i=(n=t).data(v.www),a=n.parent().filter(i.selectors.wrapper),M.each(n.data(v.attrs),(function(e,t){M.isUndefined(e)?n.removeAttr(t):n.attr(t,e)})),n.removeData(v.typeahead).removeData(v.www).removeData(v.attr).removeClass(i.classes.input),a.length&&(n.detach().insertAfter(a),a.remove()),e.destroy()})),this}},y.fn.typeahead=function(e){return t[e]?t[e].apply(this,[].slice.call(arguments,1)):t.initialize.apply(this,arguments)},y.fn.typeahead.noConflict=function(){return y.fn.typeahead=e,this}})()})),(function(a){a.fn.typeaheadWrapper=function(e){var t=a(this),n=a.extend(!0,{config:{hint:!0,highlight:!0,minLength:2},dataSet:{name:"result",source:function(){return[]},templates:{notFound:'<div class="tt-no-results">No matching results</div>',pending:'<div class="tt-searching">Searching...</div>'}},onResultSelection:function(e,t){}},e),i=function(){t.parent().find(".tt-suggestion").first().addClass("tt-cursor")};return t.typeahead(n.config,n.dataSet),t.bind("keyup",(function(e){a(this).typeahead("val").length<n.config.minLength||13!==e.keyCode||t.parent().find(".tt-cursor").trigger("click")})),t.bind("typeahead:render",i),t.bind("typeahead:open",i),_.isFunction(n.onResultSelection)&&t.bind("typeahead:select",n.onResultSelection),t}})(jQuery),(function(p){"use strict";var m={},v={},o={},e={},d={container:{},filters:{},grid:{},tabs:{},cinemas:{grid:{}}},S={},l={},u=!1,i=null,a=null,s=null,r=null,c=null,n=!0,f=!0,g=null,h=null,y=["2D","3D"],M=null,b=null,w=BMS.Misc.fnUrlName(BMS.Storage.get({name:"Rgn",key:"text"})),B=BMS.Misc.fnUrlName(BMS.Storage.get({name:"Rgn",key:"Code"})),t=BMS.Storage.get({name:"Rgn",key:"subregionDetails"}),C=""!=t?BMS.Misc.fnUrlName(JSON.parse(t).SubRegionName.toLowerCase()):"",k=""!=t?JSON.parse(t).SubRegionCode.toLowerCase():"",E={},T=100,I=90,x=-20,$=90,A=null,L=!1,R=null,D=!1,P="movies";function N(e){_.isArray(e)||(e=[e]),A.rejectWith({type:P},e)}function O(e,t){var n;n=e.recommendedData,_.isUndefined(n)||_.isNull(n)||_.isEmpty(n.data)||_.isEmpty(n.data.QUICKBOOK)||(g=n.data.QUICKBOOK.MT,v.recommendEvents=v.getRecommendedEvents(),_.isEmpty(BMS.Misc)||_.isEmpty(BMS.Misc.Showtimes)||!_.isFunction(BMS.Misc.Showtimes.renderRecommendations)||BMS.Misc.Showtimes.renderRecommendations(n)),_.isEmpty(e.moviesData)&&_.isEmpty(e.cinemas)?_.isEmpty(A)||N({error:"no-data"}):(i=e.moviesData&&e.moviesData.BookMyShow||{},s=i.arrEvents,c=i.arrLanguages,_.isEmpty(e.cinemas)||_.isEmpty(e.cinemas.BookMyShow)||(a=e.cinemas.BookMyShow,r=a.aiVN||{}),v.events=v.getEvents(),v.languages=v.getLanguages(),(function(e){_.isUndefined(e)||_.isNull(e)||_.isEmpty(e.data)||_.isEmpty(e.data.LANGTRANS)||(h=e.data.LANGTRANS.MT.Languages,v.preferredLanguages=v.getPreferredLanguages());v.getPersistentFilters()})(e.preferredLanguages),v.dimensions=v.getDimensions(),v.langSequence=v.getLangSequence(),v.cinemas=v.getCinemas(),v.subRegions=v.getSubRegions(),!0!==L&&(S.quickBook(),l.dispatchRecommendWizEvent()))}function U(e){if(!_.isEmpty(i))return v.getPersistentFilters(),S.quickBook(),void l.dispatchRecommendWizEvent();if(_.isEmpty(R)||1==L){var t={url:"/serv/getData",data:{cmd:"QUICKBOOK",type:"MT"}};!0===BMS.Storage.isset({name:"ld"})&&!0===n&&(t.data.getSeenData=1),f&&(t.data.getRecommendedData=1),(R=m.makeAjaxCall(t)).done((function(e){O(e)})),R.fail((function(){_.isEmpty(A)||N({error:"ajax"})}))}}var G,F,j=new Date;F=G=j.getDay(),F+=5<=G?1:8;var q=new Date(j);q.setDate(j.getDate()-F),q.setHours(0,0,0,0),m={sanitize:{date:function(e){var t=e.split("-");return new Date(t[0],t[1]-1,t[2])},time:function(e){var t=e.getHours(),n=e.getMinutes();return 12<t&&(t-=12,!0),n<10&&(n="0"+n),t+":"+n+" pm"},boolean:function(n){return"string"==typeof n?"Y"==n?n=!0:"N"==n?n=!1:n:("object"!=typeof n&&"array"!=typeof n||_.each(n,(function(e,t){n[t]=m.sanitize.boolean(e)})),n)}},render:function(e,s,t){var n=p("#"+e).html();if(!p.isEmptyObject(n)){e=n.split("\n").join("");var i,a,o,r,l,c,d=/([$\^\\\/()|?+*\[\]{}.\-])/g;return t=t||{},r=(c="{{}}").length,l=Math.ceil(r/2),a=c.substr(0,l).replace(d,"\\$1"),o=c.substr(l,r).replace(d,"\\$1")||a,i=new RegExp(a+"[^"+a+o+"]+"+o,"g"),e.replace(i,(function(e){var t,n=e.slice(l,-l),i=n.split("."),a=0,o=i.length;if(n in s)t=s[n];else for(t=s;a<o;a++){if(!(i[a]in t))return e;t=t[i[a]]}return t}))}},eventMatchesFilter:function(e){var t=!0;return E.hasOwnProperty("dimension")&&(t=-1!==E.dimension.indexOf(e.dimension)),E.hasOwnProperty("language")&&(t=-1!==E.language.indexOf(e.lang)),t&&E.hasOwnProperty("isAtmosEnabled")&&(t=!0===e.isAtmosEnabled),t},cinemaMatchesFilter:function(e){var t=!0;return E.hasOwnProperty("subRegion")&&(t=-1!==E.subRegion.indexOf(e.subRegionCode)),t},isNewEvent:function(e){var t=new Date(e);return t.setHours(0,0,0,0),q<=t},formattedDate:function(e,t){t=t||"-";var n=(e=e instanceof Date?e:new Date(e)).getMonth()+1;return n=n<10?"0"+n:n,e.getFullYear()+t+n+t+e.getDate()},sortDimensions:function(e){var i=/^\d+/,a=[],o=[],s={};e.forEach((function(e,t){var n=e.match(i);null!==n?void 0===s[n]?(s[n]=[e],a.push(n)):s[n].push(e):o.push(e)}));var t=a.sort((function(e,t){return e-t})),n=[];t.forEach((function(e){var t=s[e];1===t.length?n.push(t[0]):(t.sort(),n=n.concat(t))}));var r=o.sort();return n.concat(r)},makeAjaxCall:function(e){return p.ajax({url:e.url,data:e.data,dataType:e.responseType||"JSON",method:e.method||"GET",cache:!1})}},v.getCinemas=function(){var a={},o=BMS.Misc.QuickbookModal.getPreferredCinemas();return _.isEmpty(r)||r.forEach((function(e){var t=e.VenueCode,n=e.VenueName,i="/buytickets/"+BMS.Misc.fnUrlName(n.toLowerCase())+"-"+(""!=C?C:w.toLowerCase())+"/cinema-"+(""!=k?k:B.toLowerCase())+"-"+t+"-MT";a[t]={venueCode:t,companyCode:e.CompanyCode,name:n,isAtmosEnabled:e.IsATMOSEnabled,url:i,isPreferred:!_.isUndefined(o[t]),latitude:e.VenueLatitude,longitude:e.VenueLongitude,subRegionCode:e.VenueSubRegionCode,subRegionName:e.VenueSubRegionName,isCinemaNew:"Y"==e.CinemaIsNew,CinemaUnpaidFlag:e.CinemaUnpaidFlag}})),a},v.getSubRegions=function(){var t={};return _.each(v.cinemas,(function(e){_.isEmpty(e.subRegionName)||_.isEmpty(e.subRegionCode)||(t[e.subRegionCode]=e.subRegionName)})),_.map(t,(function(e,t){return{code:t,name:e}}))},v.eventTitleDim={},v.getEvents=function(){var p={};if(_.isEmpty(s))return p;var f=BMS.Misc.fnUrlName(BMS.Storage.get({name:"Rgn",key:"text"}));return f=f.toLowerCase(),s.forEach((function(l,c){var d=l.EventTitle,e=l.ChildEvents,u=l.eventGroup;_.isUndefined(e)||e.forEach((function(e,t){var n=e.EventCode,i="/buytickets/"+(e.EventURL||"#")+"-"+(""!=C?C:f)+"/movie-"+(""!=k?k:B.toLowerCase())+"-"+n+"-MT",a=m.sanitize.boolean(e.isDefault),o=e.EventDimension.trim().toUpperCase(),s=m.sanitize.date(e.EventDate),r=!_.isEmpty(v.recommendEvents)&&v.recommendEvents.hasOwnProperty(n);p[n]={id:n,isMovieClubEnabled:"Y"===e.IsMovieClubEnabled,lang:e.EventLanguage,group:u,censor:e.EventCensor,genre:e.JsonGenre,url:i,syno:e.EventSyno,title:d,eventName:e.EventName,trailerUrl:e.TrailerURL,eventDate:s,isAtmosEnabled:m.sanitize.boolean(e.EventIsAtmosEnabled),duration:e.Duration,dimension:o,isDefault:a,isNew:e.isNewEvent&&"Y"==e.isNewEvent,sequence:c,isSeen:l.isSeen,isRated:l.isRated,isRecommended:r,avgRating:l.avgRating,totalVotes:l.totalVotes},a&&(v.eventTitleDim[d]={dim:o,eventId:n,isMovieClubEnabled:"Y"===e.IsMovieClubEnabled})}))})),p},v.getRecommendedEvents=function(){var n={};return g.forEach((function(e){var t=e.EventCode;n[t]={id:t,venueCode:e.VenueCode,dates:e.Dates}})),n},v.getLanguages=function(){var n=[];return _.each(c,(function(e){var t={};t.code=e.EventLangCode,t.name=e.EventLangName,n.push(t)})),n},v.getPreferredLanguages=function(){var i=[];return _.each(h,(function(e,t){var n={};n.language=t,i.push(n)})),i},v.getDimensions=function(){var t={};return _.each(v.events,(function(e){_.isEmpty(e.dimension)||(t[e.dimension]=!0)})),_.map(t,(function(e,t){return t}))},v.getLangSequence=function(){var n=[];return _.isEmpty(h)||_.each(h,(function(e,t){_.findWhere(v.languages,{name:t})&&n.push(t)})),_.each(v.languages,(function(e){n.push(e.name)})),n=_.uniq(n)},v.languagesEvents=null,v.getLanguagesEvents=function(){var c={},e=v.events;v.langSequence;return _.each(e,(function(e,t){var n=null;n=!!m.eventMatchesFilter(e);var i=e.lang;(_.isUndefined(c[i])||_.isUndefined(c[i].events))&&(c[i]={events:{}});var a=c[e.lang].events,o=e.title;if(_.isUndefined(a[o])&&(a[o]={firstChildEventId:e.id},e.isFirstChild=!0),!0===n){var s=a[o].firstChildEventId,r=v.events[s];r.matchesFilter=!0,v.events[s]=r}else e.isFirstChild&&(e.matchesFilter=n);if(a[o].isMovieClubEnabled=e.isMovieClubEnabled,!_.isEmpty(e.dimension)){_.isEmpty(a[o].dimensions)&&(a[o].dimensions=[]);var l={dim:e.dimension,eventId:e.id};a[o].dimensions.push(l)}})),c},v.calculateEventScore=function(e){var t=0;return!0===e.matchesFilter&&(t+=T),!0===e.isSeen&&(t+=x),!0===e.isRecommended&&(t+=I),t},v.calculateCinemaScore=function(e){var t=0;return!0===e.matchesFilter&&(t+=T),!0===e.isPreferred&&(t+=$),t},v.getScoredLanguagesEvents=function(){var e=p.extend(!0,{},v.getLanguagesEvents()),a={};return _.each(e,(function(e,t){var n,i=e.events,o=[];_.each(i,(function(e,t){var n=e.firstChildEventId,i={title:t,isMovieClubEnabled:e.isMovieClubEnabled,dimensions:e.dimensions,firstChildEventId:n},a=v.events[n];i.score=v.calculateEventScore(a),o.push(i)})),n=_(o).chain().sortBy((function(e){return e.title})).sortBy((function(e){return-e.score})).value(),a[t]={},a[t].events=n})),a},v.getPersistentFilters=function(){if(BMS.Storage.isset({name:"quickbook"})){var e=BMS.Storage.get({name:"quickbook",key:"moviefilters"});if(e){if(E=JSON.parse(e),!_.isEmpty(v.preferredLanguages)){_.each(v.preferredLanguages,(function(e,t){E.language.push(e.language)})),E.language=_.uniq(E.language)}var n=[];_.each(E.language,(function(e,t){_.findWhere(v.languages,{name:e})&&n.push(e)})),E={},_.isEmpty(n)||(E.language=n)}}},v.getFilteredLanguageSequence=function(){if(E.hasOwnProperty("language")){var t=[];return _.each(v.langSequence,(function(e){-1<E.language.indexOf(e)&&t.push(e)})),_.each(v.languages,(function(e){t.push(e.name)})),t=_.uniq(t)}return v.langSequence},o.rows=function(){var o=[];v.languagesEvents=v.getScoredLanguagesEvents();for(var e=v.languagesEvents,t=v.getFilteredLanguageSequence(),n=0;n<t.length;n++){var i=t[n],a=e[i];if(!_.isEmpty(a)&&!_.isEmpty(a.events)){var s=!0;if(_.each(a.events,(function(e){!_.isUndefined(e)&&p.isEmptyObject(e.firstChildEventId)&&(s=!1)})),s){var r=a.events;o.push({text:i,type:"header"});var l=r.length;_.each(r,(function(e,t){var n=e.title;if(!_.isEmpty(e.firstChildEventId)){var i={firstChildEventId:e.firstChildEventId,type:"evt",isMovieClubEnabled:e.isMovieClubEnabled,url:v.events[e.firstChildEventId].url};t==l-1&&(i.isLastRowForHeader=!0);if(!_.isUndefined(e.dimensions)&&!_.isEmpty(e.dimensions)){!0,i.hasDimensions=!0;var a=null;e.dimensions.forEach((function(e){var t=v.eventTitleDim[n];p.isEmptyObject(t)||e.dim!==t.dim||(a=e.eventId)})),_.isEmpty(a)||(i.url=v.events[a].url),i.dimensions=e.dimensions}o.push(i)}}))}}}return o},o.cinemaRows=function(){var t=[],e=_(v.cinemas).chain().each((function(e){e.matchesFilter=m.cinemaMatchesFilter(e),e.score=v.calculateCinemaScore(e)})).sortBy((function(e){return e.name})).sortBy((function(e){return-e.score})).value();return _.each(e,(function(e){t.push({type:"venue",venueCode:e.venueCode})})),t},o.gridBasedOnAverage=function(e){for(var t={},n=1,i=0,a=0;i<M;)_.isUndefined(t[n])&&(t[n]={rows:[]}),t[n].rows.push(e[i]),i++,++a===b&&(n++,a=0);return t},o.minDataGrid=function(e){!1;for(var t={},n=0,i=0;i<M;)"header"===e[i].type&&(n++,0),_.isUndefined(t[n])&&(t[n]={rows:[]}),t[n].rows.push(e[i]),i++,0;return t},o.grid=function(){var l,e=o.rows();M=e.length,b=Math.ceil(M/4),l=M<=10?p.extend(!0,{},o.minDataGrid(e)):p.extend(!0,{},o.gridBasedOnAverage(e));var c={},d=null,u=0;return _.each(l,(function(e,o){o=parseInt(o);var s=e.rows;_.isEmpty(c[o])&&(c[o]={rows:[]});var r=c[o].rows;s.forEach((function(e,t){var n=!1;if(d=u<3&&4<b?4:2,"header"==e.type){if(t>=s.length-d&&o<4&&0<u&&0<t){var i=o+1;_.isEmpty(c[i])&&(c[i]={rows:[]}),_.isEmpty(l[i])&&(l[i]={rows:[]});var a=s.splice(t,s.length);a.length,n=!0,l[i].rows=a.concat(l[i].rows)}u++}!n&&0==t&&"evt"==e.type&&e.isLastRowForHeader&&(c[i=o-1].rows.push(e),n=!0);n||r.push(e)}))})),c},o.cinemasGrid=function(){for(var e={},t=1,n=o.cinemaRows(),i=Math.ceil(n.length/4),a=0;a<n.length;)_.isEmpty(e[t])&&(e[t]={rows:[]}),e[t].rows.push(n[a]),i*t<=++a&&t++;return e},o.setPreferredLanguageFilters=function(){if(!_.isEmpty(v.preferredLanguages)){var n=[];_.each(v.preferredLanguages,(function(e,t){_.findWhere(v.languages,{name:e.language})&&n.push(e.language)})),(!_.isEmpty(n)||1<=n.length)&&(E.language=n)}},e.grid=o.grid,e.cinemasGrid=o.cinemasGrid,S.filters={},S.filters.clearFilters=function(){E={}},S.filters.dimensions=function(e,t){if(e||(e=_.clone(v.dimensions)),!(_.isEmpty(e)||e.length<=1)){e=e.filter((function(e){return-1!==y.indexOf(e.toUpperCase())||-1!==e.toUpperCase().indexOf("IMAX")&&!0})),e=m.sortDimensions(e);var n='<div class="__label">Filter</div>';_.each(e,(function(e){n+=m.render("temp-filter",{text:e,filterValue:e,filterKey:"dimension",hiddenFilters:""})})),t&&(n+=m.render("temp-filter",{text:"DOLBY ATMOS",filterValue:!0,filterKey:"isAtmosEnabled"})),S.filters.appendFilterSet(n,"movie-listing-filter",l.click.applyDimensionFilter)}},S.filters.languages=function(e){if(e||(e=_.clone(v.languages)),!(_.isEmpty(e)||e.length<=1)){for(var t=0;t<v.langSequence.length;t++)e[t]=v.langSequence[t];var i='<div class="__label">Filter</div>';if(e.length<=6)_.each(e,(function(e){var t="",n=!1;E.hasOwnProperty("language")&&-1!==E.language.indexOf(e)&&(n=!0,t="_active"),i+=m.render("temp-filter",{text:e,filterValue:e,filterKey:"language",cssClass:t,active:n,hiddenFilters:""})}));else{var n=e.length-6;for(t=0;t<6;t++){var a="",o=!1;E.hasOwnProperty("language")&&-1!==E.language.indexOf(e[t])&&(o=!0,a="_active"),i+=m.render("temp-filter",{text:e[t],filterValue:e[t],filterKey:"language",cssClass:a,active:o,hiddenFilters:""})}var s="";for(t=6;t<e.length;t++)s+=m.render("temp-hidden-filter",{text:e[t],filterValue:e[t],filterKey:"language",cssClass:a,active:o});s=m.render("temp-hidden-filter-set",{filters:s}),i+=m.render("temp-filter",{text:"+ "+n+" More",filterValue:"languages-dropdown",filterKey:"language",cssClass:" dropdown ",active:o,hiddenFilters:s})}S.filters.appendFilterSet(i,"movie-listing-filter",l.click.applyLanguageFilter)}},S.filters.subRegions=function(e){if(e||(e=_.clone(v.subRegions)),!(_.isEmpty(e)||e.length<=1)){var t='<div class="__label">Filter</div>';_.each(e,(function(e){t+=m.render("temp-filter",{text:e.name,filterValue:e.code,filterKey:"subRegion",hiddenFilters:""})})),S.filters.appendFilterSet(t,"cinema-listing-filter",l.click.applySubRegionsFilter)}},S.filters.appendFilterSet=function(e,t,n){var i=m.render("temp-filter-set",{filters:e,cssClasses:t}),a=p(i);a.find(".__filter").click(n),a.find('input[type="checkbox"]').click(n),a.find(".dropdown").mouseenter(l.mouseenter.filtermenu),a.find(".__filter-menu").mouseleave(l.mouseleave.filtermenu),a.find(".__filter-menu").find("input").each((function(){var e=p(this),t=e.data("filterKey"),n=e.data("filterValue");E.hasOwnProperty("language")&&-1<E[t].indexOf(n)?(e.prop("checked",!0),e.data("active",!0)):(e.removeAttr("checked"),e.data("active",!1))})),d.filters.append(a)},S.getEventTitleForEvt=function(e,t){var n=v.events[e],i=n.title.trim();return _.isEmpty(t)||(i+=" - "+t+" "),!1===n.isDefault&&(i+=" - "+n.lang),_.isEmpty(n.censor)||(i+=" ("+n.censor+")"),i},S.evt=function(e,t){var n=v.events[e.firstChildEventId],i=!0===n.isNew&&!0!==n.isRecommended&&!0!==n.isSeen?"new-event":"",a="",o="",s="",r="",l="";!1===n.matchesFilter?a+=" filter-false":_.isEmpty(E)||(a+=" matches-filter");var c,d=e.dimensions;if(!_.isUndefined(d)&&1==d.length){var u=d[0].dim;"2D"!==u&&(c=u)}var p=S.getEventTitleForEvt(n.id,c),f="";!0===n.isSeen?(a+=" _seen",o=m.render("temp-seen-evt-svg")):!_.isUndefined(d)&&1<d.length&&(f=S.dimensions(e.dimensions,t));!0===n.isSeen&&n.isRated;var g="";!0===n.isRecommended&&(a+=" _recommended",g=m.render("temp-recommended-evt-svg")),_.isUndefined(n.avgRating)||(a+=" _rating",l=n.avgRating,r=n.totalVotes,s=m.render("temp-rating-evt-svg",{cssRating:"",votes:r,rating:l}));var h="";return n.isMovieClubEnabled&&(h=m.render("temp-movie-club-icon")),m.render("temp-event",{seenContent:o,text:p,eventURL:e.url,cssClass:i,containerCssClass:a,dimensions:f,ratingHTML:"",eventId:n.id,recommendedContent:g,ratingContent:s,dataGALabel:t,movieClubIcon:h})},S.label=function(e){var t="";return E.hasOwnProperty("language")&&-1==E.language.indexOf(e.text)&&(t="filter-false"),m.render("temp-label",{text:e.text.toUpperCase(),cssClass:t})},S.dimensions=function(e,n){var i="",t=e[0];v.events[t.eventId].title;if(1==e.length)return"";var a=_.map(e,(function(e){return e.dim})),o=m.sortDimensions(a);if(_.uniq(o).length<=1)return"";var s=[];return e.forEach((function(e){s[o.indexOf(e.dim)]=e})),_.each(s,(function(e){var t=v.events[e.eventId];i+=m.render("temp-dimension",{text:e.dim,eventURL:t.url,eventId:t.id,dataGALabel:n})})),_.isEmpty(i)||(i='<div class="dimension-container">'+i+"</div>"),i},S.grid=function(){var o=[],s=1,r="";_.each(e.grid(),(function(e,t){var i="";if(e.rows.forEach((function(e){if(!_.isUndefined(e)){var t=null;switch(e.type){case"header":var n=S[t="label"](e);r=p(n).text().trim(),s=1;break;case"evt":n=S[t="evt"](e,r+"-"+s);break;case"dimension":n=S[t="dimension"](e)}_.isEmpty(n)||(i+='<li class="'+t+'-container">'+n+"</li>"),"evt"==t&&++s}})),!_.isEmpty(i)){var n=m.render("temp-grid-col",{listHtml:i,viewMore:""}),a=p(n);o.push({domObj:a})}}));var t="";0===o.length?t=_.isEmpty(E)?m.render("temp-no-results"):m.render("temp-no-results-with-filters"):o.forEach((function(e){t+=e.domObj.wrap("<div/>").parent().html()})),d.grid.html(t),d.grid.find(".__event").on("click",l.click.handleEventClick),d.grid.find(".__dimension").on("click",l.click.handleDimensionClick),d.grid.find(".__rating-container").on("mouseenter",l.mouseenter.heart),d.grid.find(".__rating-container").on("mouseleave",l.mouseleave.heart)},S.applyFilter=function(e,t,n){if(!0===t)switch(e.filterKey){case"dimension":case"language":if(!_.isEmpty(E[e.filterKey])){var i=E[e.filterKey].indexOf(e.filterValue);E[e.filterKey].splice(i,1)}0==E[e.filterKey].length&&delete E[e.filterKey];break;default:delete E[e.filterKey]}else if(!_.isEmpty(e))switch(e.filterKey){case"dimension":_.isEmpty(E[e.filterKey])&&(E[e.filterKey]=[]);var a=E[e.filterKey];a.push(e.filterValue),E[e.filterKey]=_.uniq(a);break;case"language":_.isEmpty(E[e.filterKey])&&(E[e.filterKey]=[]);var o=E[e.filterKey];o.push(e.filterValue),E[e.filterKey]=_.uniq(o);break;default:E[e.filterKey]=e.filterValue}S.grid(),BMS.Misc.QuickbookModal.postRender(d.container);var s=_.values(E).join(",");BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"QuickBook",{"Filter Used":s,"Event Type":"MT",Appcode:window.global.strAppCode});var r=[];_.isEmpty(E.language)||p.each(E.language,(function(e,t){r.push(t)}));var l=BMS.Storage.get({name:"ld",storage:"C"});BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"applied_quickbook_7",action:"language",label:r.join(","),user_mode:""!=l?"Logged In":"Guest Mode"})},S.cinemas={},S.cinemas.venue=function(e,t){var n=v.cinemas[e.venueCode],i=n.isCinemaNew?"new-venue":"",a="",o="";return!1===n.matchesFilter?(i+=" filter-false",a+=" filter-false"):_.isEmpty(E)||(a+=" matches-filter"),n.isPreferred&&!0===n.matchesFilter&&(i+="preferred-venue"),"Z"===n.CinemaUnpaidFlag&&(o=m.render("temp-unpaid")),m.render("temp-venue",{text:n.name,venueUrl:n.url,cssClass:i,containerCssClass:a,venueCode:n.venueCode,unpaidContent:o,dataPostion:t})},S.cinemas.grid=function(){var n,i="",s=1;_.each(e.cinemasGrid(),(function(e,t){var o="";e.rows.forEach((function(e,t){if(!_.isUndefined(e)){var n=null;switch(e.type){case"venue":n="venue"}var i=S.cinemas[n](e,s),a=[n+"-container"];_.isEmpty(i)||(o+='<li class="'+a.join(" ")+'">'+i+"</li>"),++s}})),_.isEmpty(o)||(i+=m.render("temp-grid-col",{listHtml:o,viewMore:""}),n=p(i))})),_.isEmpty(n)?d.cinemas.grid.html(m.render("temp-no-results")):(d.cinemas.grid.html(n),d.cinemas.grid.find(".__venue").on("click",l.click.handleVenueClick))},S.cinemas.applyFilter=function(e,t,n){if(!0===t)switch(e.filterKey){case"subRegion":if(!_.isEmpty(E[e.filterKey])){var i=E[e.filterKey].indexOf(e.filterValue);E[e.filterKey].splice(i,1)}0==E[e.filterKey].length&&delete E[e.filterKey];break;default:delete E[e.filterKey]}else if(!_.isEmpty(e))switch(e.filterKey){case"subRegion":_.isEmpty(E[e.filterKey])&&(E[e.filterKey]=[]);var a=E[e.filterKey];a.push(e.filterValue),E[e.filterKey]=_.uniq(a);break;default:E[e.filterKey]=e.filterValue}S.cinemas.grid(),BMS.Misc.QuickbookModal.postRender(d.container);var o=[];_.isEmpty(E.subRegion)||p.each(E.subRegion,(function(e,t){o.push(p('.cinema-listing-filter [data-filter-value="'+t+'"]').text().trim())}));var s=BMS.Storage.get({name:"ld",storage:"C"});BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"applied_quickbook_7",action:"subregion",label:o.join(","),user_mode:""!=s?"Logged In":"Guest Mode"})},S.renderMoviesFilters=function(){E.hasOwnProperty("language")||!BMS.Storage.isset({name:"ld"})&&!BMS.Storage.isset({name:"le"})||o.setPreferredLanguageFilters(),S.filters.languages(null)},S.renderCinemasFilters=function(){S.filters.subRegions()},S.renderTabs=function(){var e=m.render("temp-qb-listing-tabs",{primaryButtonText:"Movies",secondaryButtonText:"Cinemas"});d.tabs.html(e).removeClass("none"),d.tabs.find("button").click((function(){var e=p(this);if(!e.hasClass("_active")){e.addClass("_active"),e.hasClass("primary-tab")?S.showPrimaryTabContent():S.showSecondaryTabContent(),e.siblings().removeClass("_active");var t=BMS.Storage.get({name:"ld",storage:"C"});if(e.hasClass("primary-tab")){var n={event:"applied_quickbook_7",action:"secondary",label:"movies",user_mode:""!=t?"Logged In":"Guest Mode"};BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},n)}else if(e.hasClass("secondary-tab")){n={event:"applied_quickbook_7",action:"secondary",label:"venues",user_mode:""!=t?"Logged In":"Guest Mode"};BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},n)}}}))},S.toggleMovieListing=function(e){!0===e?(d.grid.removeClass("none"),d.filters.find(".movie-listing-filter").removeClass("none")):(d.grid.addClass("none"),d.filters.find(".movie-listing-filter").addClass("none"))},S.toggleCinemaListing=function(e){!0===e?(d.cinemas.grid.removeClass("none"),d.filters.find(".cinema-listing-filter").removeClass("none"),BMS.Misc.QuickbookModal.hidePreferredCinemasContainer()):(d.cinemas.grid.addClass("none"),d.filters.find(".cinema-listing-filter").addClass("none"),BMS.Misc.QuickbookModal.showPreferredCinemasContainer())},S.showPrimaryTabContent=function(){u=!0,S.toggleMovieListing(!0),S.toggleCinemaListing()},S.showSecondaryTabContent=function(){u=!1,S.toggleMovieListing(),S.toggleCinemaListing(!0)},S.renderTabsContent=function(){S.renderTabs(),S.renderMoviesListing(),S.renderCinemasListing(),S.showPrimaryTabContent(),d.container.addClass("_has-tabs"),d.filters.removeClass("none")},S.renderMoviesListing=function(){d.clearContainers(),S.renderMoviesFilters(),S.grid(),d.grid.find(".evt-dim-container").removeClass("matches-filter")},S.renderCinemasListing=function(){d.clearCinemaContainers(),S.renderCinemasFilters(),S.cinemas.grid()},S.quickBook=function(){var e;S.renderTabsContent(),e=d.container,_.isArray(e)||(e=[e]),A.resolveWith({type:P},e)},S.quickBookPostRender=function(){if(!0===u){var a=[],o=[],s={index:0,width:0},r=0;d.grid.find("ul").each((function(e,t){var n=p(t);o.push(n);var i=n.width();a.push(parseInt(i)),r+=parseInt(i),i>s.width&&(s.index=e,s.width=i)}));var e=parseInt(d.container.width()),t=o.length;t<=2&&(t*=3);var n=(e-r)/(2*t);if(o.forEach((function(e,t){a[t]})),e<r){o[s.index];var i=n-(r-e)/2;s.width}var l=d.filters.find(".__filter-menu"),c=d.filters.find(".__filter-menu").parent();l.width(),c.width()}},d.prepareContainer=function(){d.container=p(m.render("temp-quickbook-container",{quickbookType:"quickbook-movies",containerClass:""})),d.tabs=d.container.find(".qb-tabs"),d.filters=d.container.find(".filters"),d.grid=d.container.find(".grid"),d.cinemas.grid=d.container.find(".venue-grid")},d.clearContainers=function(){d.filters.addClass("none").find(".movie-listing-filter").remove(),d.grid.empty().addClass("none")},d.clearCinemaContainers=function(){d.filters.addClass("none").find(".cinema-listing-filter").remove(),d.cinemas.grid.empty().addClass("none")},l.click={},l.mouseenter={},l.mouseleave={},l.click.applyDimensionFilter=function(e){var t=p(this),n=t.data("filter-key"),i=t.data("filter-value"),a=!0===t.data("active"),o={};if("All"!=i?(o.filterKey=n,o.filterValue=i):S.filters.clearFilters(),S.applyFilter(o,a,e),"dimension"===n)if("All"==i)t.parent().siblings().find("._active").removeClass("_active").data("active",!1);else{var s=t.parent().siblings().find("[data-filter-value=All]");s.data("active")&&(s.data("active",!1),s.removeClass("_active"))}return t.data("active",!a),a?t.removeClass("_active"):t.addClass("_active"),!1},l.click.applyLanguageFilter=function(e){var t=p(this),n=t.data("filter-key"),i=t.data("filter-value");if("languages-dropdown"==i){var a=d.filters.find(".__filter-menu").parent();return a.hasClass("_active")?a.removeClass("_active"):a.addClass("_active"),!1}var o=!0===t.data("active"),s={};if("All"!=i?(s.filterKey=n,s.filterValue=i):S.filters.clearFilters(),S.applyFilter(s,o,e),E.hasOwnProperty("language")?BMS.Storage.set({name:"quickbook",key:"moviefilters",value:JSON.stringify(E)}):BMS.Storage.del({name:"quickbook",key:"moviefilters",value:JSON.stringify(E)}),"language"===n)if("All"==i)t.parent().siblings().find("._active").removeClass("_active").data("active",!1);else{var r=t.parent().siblings().find("[data-filter-value=All]");r.data("active")&&(r.data("active",!1),r.removeClass("_active"))}t.data("active",!o),o?t.removeClass("_active"):t.addClass("_active")},l.click.applySubRegionsFilter=function(e){var t=p(this),n=t.data("filter-key"),i=t.data("filter-value"),a=!0===t.data("active"),o={};if("All"!=i?(o.filterKey=n,o.filterValue=i):S.filters.clearFilters(),S.cinemas.applyFilter(o,a,e),"All"==i)t.parent().siblings().find("._active").removeClass("_active").data("active",!1);else{var s=t.parent().siblings().find("[data-filter-value=All]");s.data("active")&&(s.data("active",!1),s.removeClass("_active"))}return t.data("active",!a),a?t.removeClass("_active"):t.addClass("_active"),!1},l.click.handleEventClick=function(){var e=p(this).data("id"),t=v.events[e];BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"QuickBook",{ProductID:e,"Event Name":t.eventName,"Event Type":"MT",Appcode:window.global.strAppCode});var n=BMS.Storage.get({name:"ld",storage:"C"}),i={event:"clicked_quickbook_6",action:"movielist",label:p(this).data("ga-label"),meta_1:"title",meta_2:p(this).text().trim(),user_mode:""!=n?"Logged In":"Guest Mode"};BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},i)},l.click.handleVenueClick=function(){var e=BMS.Storage.get({name:"ld",storage:"C"}),t={event:"clicked_quickbook_6",action:"venuelist",label:p(this).data("position"),meta_1:p(this).text().trim(),user_mode:""!=e?"Logged In":"Guest Mode"};BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},t)},l.click.handleDimensionClick=function(){var e=p(this).data("id"),t=v.events[e],n={ProductID:e,"Event Name":t.eventName,"Experience Clicked":t.dimension,"Event Type":"MT",Appcode:window.global.strAppCode};BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"QuickBook",n);var i=BMS.Storage.get({name:"ld",storage:"C"}),a={event:"clicked_quickbook_6",action:"movielist",label:p(this).data("ga-label"),meta_1:"format",meta_2:p(this).text().trim(),user_mode:""!=i?"Logged In":"Guest Mode"};BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},a)},l.mouseenter.heart=function(e){p(this).find(".__event-votes").show()},l.mouseleave.heart=function(){p(this).find(".__event-votes").hide()},l.mouseenter.filtermenu=function(){p(this).parent().addClass("_active")},l.mouseleave.filtermenu=function(){p(this).parent().removeClass("_active")},l.dispatchRecommendWizEvent=function(){if(!0!==D){D=!0;var e={"Recommendation Shown":_.isEmpty(g)?"No":"Yes",Appcode:window.global.strAppCode};BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"QuickBook",e)}};BMS.Misc.Quickbook=BMS.Misc.Quickbook||{},BMS.Misc.Quickbook.movies={getFragment:function(){return d.prepareContainer(),d.clearContainers(),L=!1,A=null,A=new p.Deferred,_.delay(U,1),A.promise()},resetData:function(){S.filters.clearFilters(),D=!(L=!(i=null)),U()},prefetchAPIData:function(){L=!0,"buytickets"!=pageName&&U()},postRender:S.quickBookPostRender}})(jQuery),blnCallSeatHtml=!1,(function(u){"use strict";var a={},p=null,n={events:"CT",sports:"SP",plays:"PL",activities:"AT"},r={events:"ET",plays:"PL",sports:"ST",activities:"AT"},i={events:{event_click:"Events-Click"},plays:{event_click:"Plays-Click"},sports:{event_click:"Sports-Click"},activities:{event_click:"Activities-Click"}},f={events:"events",sports:"sports",plays:"plays",activities:"activities"},g={},c={},o={},e={},s={filters:{},container:{},grid:{}},l={},d={},h={},m=100,v=!0,S=null,y="Featured Events",M=!1,b=null,w=null,B=null,C=6,t=u(window).height();500<t&&t<700?C=8:700<t&&t<1050?C=18:1050<t&&(C=25);var k=!1,E="Today",T="Tomorrow",I="This Weekend",x="Next Weekend",$=null,A=[n.sports,n.activities],L={};L[n.events]=["genres"],L[n.plays]=["language"];var R=BMS.Misc.fnUrlName(BMS.Storage.get({name:"Rgn",key:"text"}));function D(e){_.isArray(e)||(e=[e]),$.rejectWith({type:p},e)}function P(e){var t=a[p];_.isEmpty(t)||_.isEmpty(t.data)?_.isEmpty($)||D({error:"no-data"}):(!_.isEmpty(t.featured)&&v?(S=t.featured[0],M=!0):(S=null,c.featuredEvents={}),b=t.data.BookMyShow,w=b.arrEvent,b.arrLanguages,B=b.arrJsonGenres,c.labels=c.getLabels(),c.events=c.getEvents(),c.genres=c.getGenres(),c.featuredEvents=c.getFeaturedEvents(),c.languages=c.getLanguages(),!0!==e&&d.quickBook())}function N(i){if(_.isEmpty(a[p])||_.isEmpty(a[p].data)){var e={timestamp:u.now(),cmd:"QUICKBOOK",type:n[p]};u.get("/serv/getData",e,(function(e){var t,n;t=e,n=i,a[p]=t,P(n)}),"json").fail((function(){_.isEmpty($)||D({error:"ajax"})}))}else P()}g={getLabelByDate:function(e){var t=c.labels,n="";return g.date.isToday(e)&&-1!==t.indexOf(E)?n=E:g.date.isTomorrow(e)&&-1!==t.indexOf(T)?n=T:g.date.isThisWeekend(e)&&-1!==t.indexOf(I)?n=I:g.date.isNextWeekend(e)&&-1!==t.indexOf(x)&&(n=x),n},date:{isToday:function(e){return g.formattedDate(e)===U},isTomorrow:function(e){return g.formattedDate(e)===F},isThisWeekend:function(e){var t=g.formattedDate(e);return t==q||t==H},isNextWeekend:function(e){var t=g.formattedDate(e);return t==W||t==K}},formattedDate:function(e,t){t=t||"-";var n=(e=e instanceof Date?e:new Date(e)).getMonth()+1;return n=n<10?"0"+n:n,e.getFullYear()+t+n+t+e.getDate()},daysInMonth:function(e,t){return new Date(year,e,0).getDate()},weekendDates:function(){},sanitize:{date:function(e){return new Date(e.substr(0,4),Number(e.substr(4,2))-1,e.substr(6,2),e.substr(8,2),e.substr(10,2))},time:function(e){var t=e.getHours(),n=e.getMinutes();return 12<t&&(t-=12,!0),n<10&&(n="0"+n),t+":"+n+" pm"},boolean:function(n){return"string"==typeof n?"Y"==n?n=!0:"N"==n?n=!1:n:("object"!=typeof n&&"array"!=typeof n||_.each(n,(function(e,t){n[t]=g.sanitize.boolean(e)})),n)}},render:function(e,s,t){var n=u("#"+e).html();if(!u.isEmptyObject(n)){e=n.split("\n").join("");var i,a,o,r,l,c,d=/([$\^\\\/()|?+*\[\]{}.\-])/g;return t=t||{},r=(c="{{}}").length,l=Math.ceil(r/2),a=c.substr(0,l).replace(d,"\\$1"),o=c.substr(l,r).replace(d,"\\$1")||a,i=new RegExp(a+"[^"+a+o+"]+"+o,"g"),e.replace(i,(function(e){var t,n=e.slice(l,-l),i=n.split("."),a=0,o=i.length;if(n in s)t=s[n];else for(t=s;a<o;a++){if(!(i[a]in t))return e;t=t[i[a]]}return t}))}},eventMatchesFilter:function(r){var l=_.isEmpty(h);c.labels;return _.each(h,(function(e,t){switch(t){case"parent-genre":(r.genre.hasOwnProperty(e)||r.genre.hasOwnProperty(_.escape(e)))&&(l=!0);break;case"sub-genre":var n=h["parent-genre"],i=[],a=h[t],o=[];a.forEach((function(e,t){o.push(e);var n=_.escape(e);e!==n&&o.push(n)})),_.isEmpty(r.genre)||(i=r.genre[n]);var s=_.intersection(i,o);l=0<s.length;break;default:l=-1!==e.indexOf(r[t])}})),l},sortLanguagesForFilters:function(e){return _.clone(e).sort()}};var O=new Date,U=g.formattedDate(O),G=new Date(O);G.setDate(G.getDate()+1);var F=g.formattedDate(G),j=new Date(O);j.setDate(j.getDate()+(6-O.getDay()));var q=g.formattedDate(j),V=new Date(j);V.setDate(V.getDate()+1);var H=g.formattedDate(V),z=new Date(V);z.setDate(z.getDate()+6);var W=g.formattedDate(z),Y=new Date(z);Y.setDate(Y.getDate()+1);var K=g.formattedDate(Y);c.getFeaturedEvents=function(){var n={};return _.isEmpty(S)||S.forEach((function(e,t){n[e.EventCode]={eventId:e.ID,id:e.EventCode,title:e.EventName,details:e.EventDetails,arrDates:e.EventDates,fromDate:e.DateFrom,toDate:e.DateTo,url:e.RedirectURL,location:e.EventLocation,regionCode:e.RegCode,isFeatured:!0,sequence:t}})),n},c.getEvents=function(){var u={};return w.forEach((function(e,t){var n=e.EventTitle,i=e.EventCode,a=BMS.Misc.fnUrlName(n).toLowerCase(),o="";f[p]!==f.sports||_.isEmpty(R)||_.isUndefined(R)||(o="/"+R.toLowerCase()),o+="/"+f[p]+"/"+(""==a?"-":a)+"/"+i;var s={},r=e.jsonGenre;_.isEmpty(r)||(_.isObject(r)?s=r:_.isString(r)&&(s=JSON.parse(r)));var l,c=[],d={};(e.arrDates?e.arrDates:[]).forEach((function(e){var t=e.ShowDateCode,n=g.sanitize.date(t),i=g.getLabelByDate(n);c.push(n),_.isEmpty(i)||(d[i]=!0)})),l=_.keys(d),u[i]={id:i,type:e.EventType,title:n,language:e.Language,arrDates:e.arrDates,eventDates:c,ratings:e.Ratings,url:o,viewLabels:l,genre:s,sequence:t}})),u},c.getLanguages=function(){if(n[p]!==n.plays)return[];var t={};return _.each(c.events,(function(e){0!==_.intersection(e.viewLabels,c.labels).length&&(t[e.language]=!0)})),_.keys(t)},c.getLabels=function(){var e=[E],t=O.getDay();5===t?e.push(I,x):0===t||6===t?e.push(T,x):e.push(T,I);return M&&e.push(y),e},c.labelsEvents=function(){var n={};c.labels.forEach((function(e){n[e]={events:[]}}));var e=c.events;if(_.each(e,(function(t,e){t.matchesFilter=g.eventMatchesFilter(t),t.viewLabels.forEach((function(e){_.isUndefined(n[e])||n[e].events.push(t.id)}))})),M){var t=[];_.each(c.featuredEvents,(function(e){t.push(e.id)})),n[y]={events:t}}return n},c.calculateEventScore=function(e){var t=0;!0!==e.matchesFilter&&!0!==e.isFeatured||(t+=m);var n=e.viewLabels;return!_.isUndefined(n)&&1<n.length&&(t-=n.length),t},c.getScoredLabelsEvents=function(){var e=u.extend(!0,{},c.labelsEvents()),i={};return _.each(e,(function(e,a){var t,n=e.events,o=[];_.each(n,(function(e,t){var n;n=M&&a===y?c.featuredEvents[e]:c.events[e];var i={id:e};i.score=c.calculateEventScore(n),o.push(i)})),t=_(o).chain().sortBy((function(e){return a===y?c.featuredEvents[e.id].title:c.events[e.id].title})).sortBy((function(e){return-e.score})).value(),i[a]={},i[a].events=t})),i},c.getGenres=function(){var n={};_.each(c.events,(function(e){if(0!==_.intersection(e.viewLabels,c.labels).length){var t=e.genre;_.each(t,(function(e,t){_.isEmpty(n[t])&&(n[t]=[]),e||(e=[]),e=e.concat(n[t]),e=_.uniq(e),e=_.map(e,(function(e){return e.replace(/&amp;/g,"&")})),_.isEmpty(e)||(n[t]=e)}))}}));var s=[];return _.each(B,(function(i){var a=i.Code,o=i.childGenres;_.each(n,(function(t,e){if(a===e){var n=[];_.each(o,(function(e){_.contains(t,e.Code)&&n.push(e)})),i.childGenres=n,s.push(i)}}))})),n=s},o.rows=function(){for(var t=[],e=c.getScoredLabelsEvents(),n=0;n<c.labels.length;n++){var i=c.labels[n],a=e[i];if(!(_.isUndefined(a)||_.isUndefined(a.events)||_.isEmpty(a.events))){t.push({text:i,type:"header"});var o=a.events;_.each(o,(function(e){t.push({type:"event",id:e.id,isFeatured:i===y&&M})}))}}return t},o.grid=function(){for(var e={},t=1,n=o.rows(),i=0;i<n.length;)_.isEmpty(e[t])&&(e[t]={rows:[]}),e[t].rows.push(n[i]),i++,_.isUndefined(n[i])||"header"!=n[i].type||t++;return e},o.sportRows=function(){var t=[];return _.each(c.events,(function(e){t.push({type:"event",id:e.id,isFeatured:!1})})),t},o.sportsGrid=function(){for(var e={},t=1,n=o.sportRows(),i=Math.ceil(n.length/4),a=0;a<n.length;)_.isEmpty(e[t])&&(e[t]={rows:[]}),e[t].rows.push(n[a]),i*t<=++a&&t++;return e},e.grid=function(){return n[p]===n.sports?o.sportsGrid():o.grid()},d.filters={},d.filters.clearFilters=function(){_.isEmpty("sub-genre")||d.filters.hideSubgenres(),h={}},d.filters.genres=function(e){if(e||(e=_.clone(c.genres)),!_.isEmpty(e)){var t=e;t=_.sortBy(t,(function(e){return e.Code}));var n="";t.forEach((function(e){n+=d.filters.getFilterItemHtml("parent-genre",e.Code,e.Name)})),s.genreFilters=d.filters.appendFilterSet(n)}},d.filters.getFilterItemHtml=function(e,t,n){return g.render("temp-filter",{text:n,filterValue:t,filterKey:e,hiddenFilters:""})},d.filters.subGenres=function(t){var e=_.filter(c.genres,(function(e){return e.Code==t}))[0].childGenres;if(_.isEmpty(e)||(e=_.clone(e)),_.isEmpty(e)||e.length<=1)d.filters.hideSubgenres();else{e=_.sortBy(e,(function(e){return e.Code}));var n="";_.each(e,(function(e){n+=d.filters.getFilterItemHtml("sub-genre",e.Code,e.Name)})),d.filters.hideSubgenres(),s.subGenreFilters=d.filters.appendFilterSet(n,"child-filters")}},d.filters.hideSubgenres=function(){_.isEmpty(s.subGenreFilters)||s.subGenreFilters.empty().addClass("none")},d.filters.appendFilterSet=function(e,t){var n=g.render("temp-filter-set",{filters:e,cssClasses:t||""}),i=u(n);return i.find(".__filter").click(l.click.applyFilters),s.filters.append(i),k||(s.filters.removeClass("none"),k=!0),i},d.filters.languages=function(e){if(e||(e=_.clone(c.languages)),!(_.isEmpty(e)||e.length<=1)){e=_.filter(e,(function(e){return e.indexOf("/")<0}));var t=(e=g.sortLanguagesForFilters(e)).indexOf("Others");if(-1===t&&(t=e.indexOf("others")),-1!==t){var n=e.splice(t,1);e.push(n)}var i='<div class="__label">Language</div>';_.each(e,(function(e){i+=g.render("temp-filter",{text:e,filterValue:e,filterKey:"language",hiddenFilters:""})})),s.languageFilters=d.filters.appendFilterSet(i)}},d.evt=function(e){var t,n={},i="",a="";return!1===(t=e.isFeatured?c.featuredEvents[e.id]:c.events[e.id]).matchesFilter?i+=" filter-false":!0===e.isFeatured?i+=" featured-event":_.isEmpty(h)||(a+=" matches-filter"),n.html=g.render("temp-event",{seenContent:"",text:t.title,eventURL:t.url,cssClass:"",containerCssClass:a,dimensions:"",ratingHTML:"",eventId:e.id,recommendedContent:"",ratingContent:"",movieClubIcon:""}),n.cssClass=i,n},d.label=function(e){return g.render("temp-label",{text:e.text.toUpperCase()})},d.grid=function(){var i,a="";_.each(e.grid(),(function(e,t){var o="",s=!1;if(e.rows.forEach((function(e,t){if(!_.isUndefined(e)){var n=null;switch(e.type){case"header":n="label";break;case"event":n="evt"}var i=d[n](e),a=[n+"-container"];_.isEmpty(i)||(C<t&&(s=!0,a.push("_hidden")),_.isObject(i)?(a.push(i.cssClass),o+='<li class="'+a.join(" ")+'">'+i.html+"</li>"):o+='<li class="'+a.join(" ")+'">'+i+"</li>")}})),!_.isEmpty(o)){var n="";!0===s&&(n+=g.render("temp-view-more")),a+=g.render("temp-grid-col",{listHtml:o,viewMore:n}),(i=u(a)).find(".__view-more").click(l.click.handleViewMoreLink)}})),_.isEmpty(i)?D({error:"no-data"}):(s.grid.html(i).removeClass("none"),s.grid.find(".__event").on("click",l.click.handleEventClick))},d.applyFilter=function(e,t,n){if(!0===t)switch(e.filterKey){case"parent-genre":_.isEmpty(h[e.filterKey])||delete h[e.filterKey],_.isEmpty(h["sub-genre"])||delete h["sub-genre"],d.filters.hideSubgenres();break;case"sub-genre":var i=h[e.filterKey].indexOf(e.filterValue);h[e.filterKey].splice(i,1),0===h[e.filterKey].length&&delete h[e.filterKey];break;default:i=h[e.filterKey].indexOf(e.filterValue);h[e.filterKey].splice(i,1),0===h[e.filterKey].length&&delete h[e.filterKey]}else if(!_.isEmpty(e))switch(e.filterKey){case"parent-genre":h[e.filterKey]=e.filterValue,_.isEmpty(h["sub-genre"])||delete h["sub-genre"],d.filters.subGenres(h["parent-genre"]);break;case"sub-genre":_.isEmpty(h[e.filterKey])&&(h[e.filterKey]=[]);var a=h[e.filterKey];a.push(e.filterValue),h[e.filterKey]=_.uniq(a);break;default:_.isEmpty(h[e.filterKey])&&(h[e.filterKey]=[]);var o=h[e.filterKey];o.push(e.filterValue),h[e.filterKey]=_.uniq(o)}d.grid();var s=_.values(h).join(",");BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"QuickBook",{"Filter Used":s,"Event Type":r[p],Appcode:window.global.strAppCode}),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"filters",category:"Quickbook",action:"Movies-Filter",label:s})},d.generateFilters=function(){-1===A.indexOf(n[p])&&(-1!==L[n[p]].indexOf("genres")&&d.filters.genres(),-1!==L[n[p]].indexOf("language")&&d.filters.languages())},d.quickBook=function(){var e,t=a[p];_.isEmpty(t)||_.isEmpty(t.data)?D({error:"no-data"}):(d.generateFilters(),d.grid(),e=s.container,_.isArray(e)||(e=[e]),$.resolveWith({type:p},e))},s.prepareContainer=function(){var e=u(g.render("temp-quickbook-container",{quickbookType:"quickbook-"+p,containerClass:"other-events"}));s.container=e,s.filters=s.container.find(".filters"),s.grid=s.container.find(".grid")},s.clearContainers=function(){k=!1,s.filters.empty().addClass("none"),s.grid.empty().addClass("none"),s.prepareContainer()},l.click={},l.click.applyFilters=function(e){var t=u(this),n=t.data("filter-key"),i=t.data("filter-value"),a={},o=!0===t.data("active");if("All"!==i?(a.filterKey=n,a.filterValue=i):(delete h[n],n==["parent-genre"]&&(delete h["sub-genre"],d.filters.hideSubgenres())),d.applyFilter(a,o,e),"parent-genre"===n||"sub-genre"===n&&"All"===i)t.parent().siblings().find("._active").removeClass("_active").data("active",!1);else if("sub-genre"==n){var s=t.parent().siblings().find("[data-filter-value=All]");s.data("active")&&(s.data("active",!1),s.removeClass("_active"))}return t.data("active",!o),o?t.removeClass("_active"):t.addClass("_active"),!1},l.click.handleEventClick=function(){var e=u(this).data("id"),t=c.events[e];BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"QuickBook",{ProductID:e,"Event Name":t.title,"Event Type":r[p],Appcode:window.global.strAppCode}),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"event_click",category:"Quickbook",action:i[p].event_click,label:t.title})},l.click.handleViewMoreLink=function(){return u(this).addClass("none").prev().find("._hidden").removeClass("_hidden"),!1};BMS.Misc.Quickbook=BMS.Misc.Quickbook||{},BMS.Misc.Quickbook.events={getFragment:function(e){return $=new u.Deferred,p=e,s.prepareContainer(),s.clearContainers(),d.filters.clearFilters(),_.delay(N,1),$.promise()},resetData:function(){a={},d.filters.clearFilters(),s.prepareContainer(),s.clearContainers()},prefetchAPIData:function(e){p=e,N(!0)}}})(jQuery),(function(){var e,l={},t=!1,a={},o={},s="",n=!1,c=["favourites","mostRecentlyBooked","mostRecentlySurfed","popular"],d="favourites",u=[],i=BMS.Storage.get({name:"Rgn",key:"subregionDetails"}),r=""!=i?BMS.Misc.fnUrlName(JSON.parse(i).SubRegionName.toLowerCase()):"",p=""!=i?JSON.parse(i).SubRegionCode.toLowerCase():"",f="movies",g="events";function h(){var e=o.modal.find(".modal-header").outerHeight(),t=$(window).height();o.modal.find(".qb-overflow-wrapper").css({height:t-e+"px"})}l.initializeDOM=function(){(o={mainBodyWrapper:$("body > .main-body-wrapper"),showCaseCarousel:$("#showcase-primary .showcase-carousel")}).quickbookWrapper=$("#quickbook-wrapper"),o.modalOverlay=o.quickbookWrapper.find(".qb-modal-overlay"),o.modal=$(".modal",o.quickbookWrapper),o.searchBoxContainer=$(".qb-search-box-container"),o.searchDropdown=o.searchBoxContainer.find("#btn-dd-search"),o.region=o.searchBoxContainer.find(".qb-region"),o.preferredCinemas=$(".preferred-cinemas-container",o.quickbookWrapper),o.quickbookOverFlowWrapper=o.modal.find(".modal-body .qb-overflow-wrapper"),o.quickbookBody=o.quickbookWrapper.find(".quickbook-body"),o.topTrending=o.modal.find(".modal-body #qb-top-trending"),o.qbSearchListIcon=o.searchBoxContainer.find("#search-list-icon")},a.render=function(e,s,t){var n=$("#"+e).html();if(!$.isEmptyObject(n)){e=n.split("\n").join("");var i,a,o,r,l,c=/([$\^\\\/()|?+*\[\]{}.\-])/g;return t=t||{},r="{{}}".length,l=Math.ceil(r/2),a="{{}}".substr(0,l).replace(c,"\\$1"),o="{{}}".substr(l,r).replace(c,"\\$1")||a,i=new RegExp(a+"[^"+a+o+"]+"+o,"g"),e.replace(i,(function(e){var t,n=e.slice(l,-l),i=n.split("."),a=0,o=i.length;if(n in s)t=s[n];else for(t=s;a<o;a++){if(!(i[a]in t))return e;t=t[i[a]]}return t}))}},l.isOpen=function(){return t},l.updateIsOpen=function(e){t=e},l.show=function(e){s=e;var t=l.isOpen();o.qbSearchListIcon.hide(),t?(l.clearQuickbookBody(),s!==f?(l.hideTopTrendingMovies(),l.hidePreferredCinemas(!0)):l.showPreferredCinemas(!0),l.showLoaderTemplate(),l.unbindResizeHandler()):(handlePopups.freezeDocument(),l.doShowAnimation(),l.showSearchbox(),s===f?l.showPreferredCinemas(!0):l.hidePreferredCinemas(!0)),h(),t||l.showLoaderTemplate(),l.showQuickbook(s),t||l.updateIsOpen(!0)},l.doShowAnimation=function(){o.modal.removeClass("none"),o.modalOverlay.removeClass("none"),o.quickbookWrapper.hasClass("_fixed")&&(n=!0,o.quickbookWrapper.removeClass("_fixed")),o.quickbookWrapper.addClass("_active")},l.hide=function(){handlePopups.releaseDocument(),l.clearQuickbookBody(),l.unbindResizeHandler(),o.qbSearchListIcon.show(),s===f&&l.hideTopTrendingMovies(),l.hideSearchbox(),l.showPreferredCinemasContainer(),l.hidePreferredCinemas(),l.updateIsOpen(!1),l.doHideAnimation(),$("#quickbook-wrapper").hide()},l.doHideAnimation=function(){o.mainBodyWrapper.removeClass("_blur"),!0===n&&(n=!1,o.quickbookWrapper.addClass("_fixed")),o.quickbookWrapper.removeClass("_active"),setTimeout((function(){}),10),o.modalOverlay.addClass("none")},l.getCurrentQuickbookObject=function(){return _.isEmpty(s)&&(s=o.searchDropdown.data("type")),s!==f?BMS.Misc.Quickbook.events:BMS.Misc.Quickbook[s]},l.showQuickbook=function(){var e=l.getCurrentQuickbookObject().getFragment(s);e.done((function(e){this.type===s&&l.renderQuickbookContent(e,s)})),e.fail((function(e){this.type===s&&l.showNoResultsTemplate(e)}))},l.renderQuickbookContent=function(e){s===f&&o.quickbookBody.css("visibility","hidden"),o.quickbookBody.html(e),l.postRender(),o.quickbookBody.css("visibility","visible"),s===f&&l.showTopTrendingMovies(),l.bindResizeHandler()},l.bindResizeHandler=function(){e=_.debounce((function(){l.postRender(),h()}),400),$(window).bind("resize",e)},l.unbindResizeHandler=function(){$(window).unbind("resize",e)},l.postRender=function(){var e=l.getCurrentQuickbookObject();_.isUndefined(e)||_.isUndefined(e.postRender)||e.postRender.call(this)},l.clearQuickbookBody=function(){o.quickbookBody.html("")},l.showNoResultsTemplate=function(){o.quickbookBody.html(a.render("temp-no-results"))},l.showLoaderTemplate=function(){o.quickbookBody.html(a.render("temp-qb-loader"))},l.showRegion=function(){_.isEmpty(o.region.find(".region-name").html())||o.region.removeClass("none")},l.hideRegion=function(){o.region.addClass("none")},l.showPreferredCinemas=function(e){0<o.preferredCinemas.html().trim().length&&o.preferredCinemas.removeClass("none"),!0===e&&o.preferredCinemas.addClass("qb-active")},l.hidePreferredCinemas=function(e){o.preferredCinemas.removeClass("qb-active"),1==e&&o.preferredCinemas.addClass("none")},l.showSearchbox=function(){o.searchBoxContainer.addClass("_fixed"),o.searchBoxContainer.addClass("_shift")},l.hideSearchbox=function(){o.searchBoxContainer.removeClass("_shift"),setTimeout((function(){o.searchBoxContainer.removeClass("_fixed")}),200)},l.showTopTrendingMovies=function(){},l.hideTopTrendingMovies=function(){},l.resetQuickbookListingData=function(){BMS.Misc.Quickbook[f].resetData(),BMS.Misc.Quickbook[g].resetData(),l.getPreferredCinemasData()},l.prefetchAPIData=function(){l.getCurrentQuickbookObject().prefetchAPIData(s)},l.getPreferredCinemasData=function(){$.ajax({url:"/serv/getData",data:{cmd:"GETPREFERREDCINEMAS"},dataType:"json",cache:!1}).done((function(e){l.processPreferredCinemas(e)}))},l.processPreferredCinemas=function(e){if(!_.isEmpty(e)){try{BMS.Storage.set({name:"userCine",key:"pop",value:_.keys(e.popular).join(";"),storage:"C",sess:!1})}catch(e){}var t,n,i=0,a={};for(t=0;t<c.length;t++){if(3<=i)break;var o=c[t],s=e[o];_.each(s,(function(e,t){if(3===i)return!1;o===d&&(n="Favourite Cinemas"),a.hasOwnProperty(t)||(a[t]=e,i++)}))}_.isEmpty(n)&&(n="Preferred Cinemas");var r=_.map(a,(function(e){return e}));(r=_.compact(r)).length<1||(u=r,l.renderPreferredCinemas({label:n,data:r}))}},l.renderPreferredCinemas=function(e){var n=[],i=1;e.data.forEach((function(e){var t="/buytickets/"+BMS.Misc.fnUrlName(e.venueName.toLowerCase())+"-"+(""!=r?r:BMS.Misc.fnUrlName(e.regionName.toLowerCase()))+"/cinema-"+(""!=p?p:e.regionCode.toLowerCase())+"-"+e.venueCode+"-MT";n.push(a.render("temp-preferred-cinema-item",{url:t,name:e.venueName,dataPosition:i})),++i}));var t=a.render("temp-preferred-cinemas",{label:e.label.trim(),data:n.join(", ")});o.preferredCinemas.html(t),s===f&&l.showPreferredCinemas(),o.preferredCinemas.find("a").on("click.preferred",(function(e){e.stopPropagation(),o.preferredCinemas.hasClass("qb-active")?"QuickBook":"Home";var t=BMS.Storage.get({name:"ld",storage:"C"}),n={event:"clicked_quickbook_6",action:"recommendedvenue",label:$(this).data("position"),meta_1:$(this).text().trim(),user_mode:""!=t?"Logged In":"Guest Mode"};BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},n)}))},l.getPreferredCinemasObject=function(){var t={};return u.forEach((function(e){t[e.venueCode]=e})),t},l.showPreferredCinemasContainer=function(){o.preferredCinemas.removeClass("none")},l.hidePreferredCinemasContainer=function(){o.preferredCinemas.addClass("none")},l.initialize=function(){l.initializeDOM(),0<o.quickbookWrapper.length&&(l.prefetchAPIData(),l.getPreferredCinemasData(),!0!==global.blnIsTouchScreen&&(BMS.SignIn.fnRegister("quickbook-preferred-cinemas",l.getPreferredCinemasData),BMS.SignIn.fnRegister("quickbook-listing",l.resetQuickbookListingData),global.RgnCallBack.push(l.resetQuickbookListingData)))},BMS.Misc.QuickbookModal={initialize:l.initialize,show:l.show,hide:l.hide,postRender:l.postRender,getPreferredCinemas:l.getPreferredCinemasObject,showPreferredCinemasContainer:l.showPreferredCinemasContainer,hidePreferredCinemasContainer:l.hidePreferredCinemasContainer,isOpen:l.isOpen}})(),(function(){var b={startedTyping:!1,timeElapsed:0,timer:null,fiveSecondsElapsed:!1,results:null,time:null,ti:"",statusCode:"",emptyResponseTimeOut:null,typedAfterEmptyResponse:!1,output:[]},w={SUCCESS:"SUCCESS","NO-CLICK":"NO-CLICK",LATE:"LATE","NO-RESULT":"NO-RESULT",EXIT:"EXIT",CLEAR:"CLEAR"};if("videos"==pageName)var r=12;else r=8;showQuickBookRecomm=!1;var B="",C="",k=BMS.Misc.fnUrlName(BMS.Storage.get({name:"Rgn",key:"text"})),E=BMS.Misc.fnUrlName(BMS.Storage.get({name:"Rgn",key:"Code"})),e=BMS.Storage.get({name:"Rgn",key:"subregionDetails"}),T=""!=e?BMS.Misc.fnUrlName(JSON.parse(e).SubRegionName.toLowerCase()):"",I=""!=e?JSON.parse(e).SubRegionCode.toLowerCase():"",x={MT:"MT",CT:"ET",PL:"PL",SP:"ST",videos:"videos"},A={All:"All-Search",MT:"Movies-Search",CT:"Events-Search",PL:"Plays-Search",SP:"Sports-Search",videos:"Videos-Search"},l=null,o=!1,t=BMS.Storage.get({name:"userCine"}),c={url:"/quickbook-search.bms",type:"GET",headers:{"x-requested-from":"WEB"},data:{d:{mrs:BMS.Misc.fnGVal({key:"mrs",data:t}).replace(/;/g,"|"),mrb:BMS.Misc.fnGVal({key:"mrb",data:t}).replace(/;/g,"|")},cat:"",_:$.now()},dataType:"json"},d=[],u={},L={},R={NCPA:"/ncpa",PTHV:"/venue/prithvi-theatre/PTHV"},D=[];$.each(R,(function(e,t){D.push(e.toLowerCase())})),window.gaSendShowDates=function(e,t,n){var i=new Date;i=i.toString(),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"quickbook_bookticketfor",section_click:e,daypart_click:t,click_datetime:i,eventID:n})};var P=null,N=[],p={options:{config:{minLength:1},dataSet:{name:"quickbook",source:function(e,t,a){l&&l.abort(),P=e;var n=L.dropdownButton.data("value"),i=L.dropdownButton.data("type"),o={q:e,sz:r="videos"==i?12:8,st:"ON",em:BMS.Storage.get({name:"le",storage:"C"}),lt:"",lg:""};!(function(e){if(2<(e=void 0!==e?e:"").length);})(P);var s=global.blnIsTouchScreen?"":L.dropdownButton.data("label").toLowerCase();1!==L.dropdownButton.data("isall")&&"all"!==s?o.sc=n:delete c.data.sc,"videos"==L.dropdownButton.data("type")||global.blnIsTouchScreen&&"videos"==pageName?(o.sc="",o.c="video"):"video"==c.data.c&&delete c.data.c,-1===d.indexOf(n)&&(o.r=E,o.sr=I.toUpperCase()),c.data=$.extend(c.data,o,!0),c.data._=$.now(),l="in.bms.bz"==window.location.hostname?$.ajax(c).done((function(e,t,n){var i=p.getProcessedSearchResults(e);a(i),b.statusCode=n.status})).fail((function(e){400==e.status&&$(".tt-searching").html("No Results Found"),b.statusCode=e.status})):$.ajax(c).done((function(e,t,n){var i=p.getProcessedSearchResults(e);a(i),b.statusCode=n.status})).fail((function(e){b.statusCode=e.status}))},limit:r,display:function(e){return e.title},templates:{suggestion:function(e){var t;if(t="releaseDate"in e&&null!=e.releaseDate?e.title+'<span class="__release-date">('+e.releaseDate+")</span>":e.title,"Video"==e.group?t+='<div class = "__cast">'+e.category+"</div>":"desc"in e&&null!=e.desc&&0<e.desc.length&&(t+='<div class = "__cast">'+e.desc.splice(0,3).join(", ")+"</div>"),null!=e.showDates&&0<e.showDates.length){t+=' <div class ="__booktext">Book tickets for ';for(var n=0;n<e.showDates.length;n++){t+='<span class="__showdate">';var i="";i+='" onclick="gaSendShowDates(',i+="'"+(null!=e.showDates[n].flag?"daypart":"dayofweek")+"',",i+="'"+e.showDates[n].text+"',",i+="'"+e.companyCode+"'",i+=')">',0==n?(t+='<a href="/buytickets/'+BMS.Misc.fnUrlName(e.title)+"-"+(""!=T?T:k.toLowerCase())+"/movie-"+(""!=I?I:E.toLowerCase())+"-"+e.companyCode+"-MT/"+e.showDates[n].value,null!=e.showDates[n].flag?t+="?q="+e.showDates[n].flag:t+="?q=DEL"):t+=' | <a href="/buytickets/'+BMS.Misc.fnUrlName(e.title)+"-"+(""!=T?T:k.toLowerCase())+"/movie-"+(""!=I?I:E.toLowerCase())+"-"+e.companyCode+"-MT/"+e.showDates[n].value+"/?q=DEL",t+=i,t+=e.showDates[n].text+"</a>  ",t+="</span>"}t+="</div>"}var a=L.dropdownButton.data("type");if("Video"==e.group&&"videos"==a&&"videos"==pageName&&!global.blnIsTouchScreen){switch(e.category){case"MyBollywood":categoryUrl="bollywood";break;case"MyStyle":categoryUrl="fashion-lifestyle";break;case"MyTV":categoryUrl="tv-news";break;default:categoryUrl="movie-trailers"}var o=global.blnIsTouchScreen?60:30,s=e.title.length>o?e.title.substring(0,o)+"...":e.title;t='<div class="'+(global.blnIsTouchScreen?"video-card _touch":"video-card")+'" title="'+e.title+'">\t\t\t\t\t\t\t\t\t\t\t\t<div class="top-block">\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="img-container">\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img src="'+e.imgURL+'" alt="'+e.title+'" />\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="overlay-container">\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="play">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="__play-button"></div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="overlay"></div>\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t<div class="details">'+s+"</div>\t\t\t\t\t\t\t\t\t\t\t</div>"}return $("<div>").html(t)},category:{header:function(e){return $("<div>").text("")}}},displayCategory:function(e){var t="",n=null!=e.group?e.group.toLowerCase():"",i=null!=e.type?e.type.toUpperCase():"",a=null!=e.category?e.category.toLowerCase():"";switch(n){case"event":switch(i){case"MT":t="Movies";break;case"CT":t="Events";break;case"PL":t="Plays";break;case"SP":t="Sports"}break;case"venue":switch(i){case"MT":t="Cinemas";break;case"PL":t="Theaters";break;default:t="Venues"}break;case"offer":t="Offers";break;case"artist":t="Artists";break;case"person":t="Persons";break;case"experience":t="Experiences";break;case"video":if("videos"!=L.dropdownButton.data("type")||global.blnIsTouchScreen)t="Videos";else switch(a){case"mybollywood":t="MyBollywood";break;case"mytv":t="MyTV";break;case"mystyle":t="MyStyle";break;default:t="Trailers"}}return t}},onResultSelection:function(e,t){p.processSelectedResult(t)}},getProcessedSearchResults:function(e){!(function(e){try{null!=b.timer&&clearInterval(b.timer),null!=b.emptyResponseTimeOut&&clearTimeout(b.emptyResponseTimeOut),b.timeElapsed=0,b.results=e,b.time=e.meta&&e.meta.time?e.meta.time:"",b.ti=e.meta&&e.meta.ti?e.meta.ti:b.ti,b.output=e.hits?e.hits:[],0==b.output.length&&(b.emptyResponseTimeOut=setTimeout((function(){b.typedAfterEmptyResponse=!1,b.typedAfterEmptyResponse||j(w["NO-RESULT"],"FAILED",0,0)}),5e3)),b.timer=setInterval((function(){b.timeElapsed++,5==b.timeElapsed&&""!=$(".search-box.tt-input").val()&&0!=b.output.length&&(b.fiveSecondsElapsed=!0,j(w["NO-CLICK"],"FAILED",5,0))}),1e3)}catch(e){BMS.Misc.fnErr({fnName:"initializeSearchRelevancyTimer",err:e})}})(e),N=e.hits||[];var t=[],n=["BFMU","BFRM"],i=0;if("videos"==L.dropdownButton.data("type")&&"object"==typeof e&&!_.isEmpty(e)){for(var a=[],o=[],s=[],r=e.hits,l=0;l<r.length;l++)"MyTV"==r[l].TYPE?s.push(r[l]):"MyBollywood"==r[l].TYPE?a.push(e.hits[l]):o.push(r[l]);e.hits=a.concat(o,s)}return _.each(e.hits,(function(e){if(void 0===e.Group){if("venue"===e.GRP.toLowerCase())if(-1!=$.inArray(e.ID,n)&&++i,1==i)e.ID="BFRM",hitType="|CT|PT|";else if(1<i&&i<=n.length)return void++i}else if("venue"===e.Group.toLowerCase())if(-1!=$.inArray(e.Code,n)&&++i,1==i)e.Code="BFRM",hitType="|CT|PT|";else if(1<i&&i<=n.length)return void++i;t.push(e)})),_.map(t,(function(e){var t;void 0===e.Type?t=-1!==e.TYPE.indexOf("|")?e.TYPE.split("|")[1]:e.TYPE:t=-1!==e.Type.indexOf("|")?e.Type.split("|")[1]:e.Type;if(void 0===e.GRP)var n={group:e.Group,type:t,title:e.Title,groupCode:e.Code,companyCode:e.CompanyCode,status:e.Status,releaseDate:e.ReleaseDate,desc:e["Desc.title"]};else if("Video"===e.GRP)n={group:e.GRP,category:e.TYPE,title:e.TITLE,videoId:e.ID,desc:e.DESC,videoURL:e.VURL,imgURL:e.IURL};else if("Article"===e.GRP||"BoxOffice"===e.GRP)n={group:e.GRP,type:e.TYPE,title:e.TITLE,desc:e.DESC,pageURL:e.L_URL};else n={group:e.GRP,type:t,title:e.TITLE,webUrl:e.WEB_REDIRECT_URL,groupTitle:e.GROUP_TITLE,groupCode:e.CODE,companyCode:e.ID,status:e.ST,releaseDate:e.RDATE,desc:e.DESC,experienceName:e.UNAME,venuesCC:e.CC,showDates:e.SHOWDATE,eventStrTags:e.EVENTSTRTAGS};var i=null,a=null;return _.isUndefined(e.inner_hits)||$.isEmptyObject(e.inner_hits)||(i=e.inner_hits.map((function(e,t){return 0===t?a=e.Code:"Y"===e.IsDefault&&(a=e.Code),{isDefault:e.IsDefault,dimension:e.Format,language:e.Language,code:e.code}})),n.defaultEventCode=a),_.isNull(a)&&(a=void 0===e.CODE?e.Code:e.CODE),n.innerHits=i,n}))},processSelectedResult:function(e,t){for(var n={},i=0,a=null,o=0;o<N.length;o++)if("Video"==e.group){if(N[o].GRP==e.group&&N[o].TYPE==e.category&&N[o].ID==e.videoId){n=N[o],i=o+1;break}}else if(N[o].GRP==e.group&&N[o].CODE==e.groupCode&&N[o].ID==e.companyCode){n=N[o],i=o+1;break}a=global.blnIsTouchScreen?"M5":"WEB";try{var s=BMS.Storage.get({name:"ld",key:"MEMBEREMAIL"});n.INPUT=P,n.REGION=BMS.Storage.get({name:"Rgn",storage:"C",key:"Code"});var r=JSON.parse(BMS.Storage.get({name:"buytickets",storage:"L",key:"filters"})||"{}").subRegions||[];n.SUBREGION=r.join(", "),n.POSN=i,n.SRC=a,n.EMAIL=""!=s?s:"",n.LAT=B,n.LONG=C,n.GRP=e.group?e.group:"",n.BMSID=BMS.Storage.get({name:"bmsId"})?BMS.Storage.get({name:"bmsId"}):"",n.THRESHOLD=1e3*b.timeElapsed,n.TIME=b.time,n.MSG=b.statusCode,n.ti=b.ti,b.timeElapsed<5?n.ERR_TYPE=w.SUCCESS:5<b.timeElapsed&&(n.ERR_TYPE=w.LATE),n.OUTPUT=[]}catch(e){}if("video"==e.group.toLowerCase())var l="MyBollywood"==e.category?"bollywood":"MyTV"==e.category?"tv-news":"fashion-lifestyle",c=e.title.toLowerCase(),d=BMS.Misc.fnUrlName(e.title).toLowerCase(),u=e.videoId,p="videos",f=e.group.toLowerCase();else{var g="",h=(c=e.title.toLowerCase(),u=void 0===e.companyCode?e.defaultEventCode:e.companyCode,e.groupCode),m=(f=e.group.toLowerCase(),p=e.type.toUpperCase(),BMS.Misc.fnUrlName(c));if(m=""==m?"-":m,"CT"==p||"PL"==p||"PT"==p||"SP"==p||"AT"==p)var v=e.webUrl,S=void 0===e.groupTitle?"":e.groupTitle.toLowerCase()}if("event"===f)switch(p){case"MT":_.isEmpty(e.status)||"CS"!==e.status&&"OF"!==e.status?g="/buytickets/"+m+"-"+(""!=T?T:k.toLowerCase())+"/movie-"+(""!=I?I:E.toLowerCase())+"-"+u+"-MT":(_.isEmpty(k)||_.isUndefined(k)||(g="/"+k.toLowerCase()),g+="/movies/"+m+"/"+u);break;case"CT":g=void 0!==v?v:"/events/"+BMS.Misc.fnUrlName(S);break;case"AT":g=void 0!==v?v:"/activities/"+BMS.Misc.fnUrlName(S);break;case"PL":g=void 0!==v?v:"/plays/"+BMS.Misc.fnUrlName(S);break;case"PT":g=void 0!==v?v:"/events/"+BMS.Misc.fnUrlName(S);break;case"SP":_.isEmpty(k)||_.isUndefined(k)||(g="/"+k.toLowerCase(),g+="/sports/"+BMS.Misc.fnUrlName(S)+"/"+u),void 0!==v&&(g=v)}else if("venue"===f)switch(p){case"MT":g=void 0===e.venuesCC?"/buytickets/"+m+"-"+(""!=T?T:k.toLowerCase())+"/cinema-"+(""!=I?I:E.toLowerCase())+"-"+h+"-MT":"/buytickets/"+m+"-"+(""!=T?T:k.toLowerCase())+"/cinema-"+(""!=I?I:E.toLowerCase())+"-"+u+"-MT";break;default:if(void 0===e.venuesCC)g=-1!=$.inArray(e.companyCode.toLowerCase(),D)?R[e.companyCode.toUpperCase()]:e.companyCode.toLowerCase()!=e.companyCode.toLowerCase()?"/venue/"+m+"/"+e.companyCode+"-"+e.groupCode:"/venue/"+m+"/"+e.companyCode;else g=-1!=$.inArray(e.venuesCC.toLowerCase(),D)?R[e.venuesCC.toUpperCase()]:u.toLowerCase()!=e.venuesCC.toLowerCase()?"/venue/"+m+"/"+e.venuesCC+"-"+u:"/venue/"+m+"/"+u}else"person"===f?g="/person/"+m+"/"+u:"offer"===f?g="/offers/"+m+"/"+(void 0===h?u:h):"experience"===f?g="/experiences/bms-picks/"+e.experienceName+"/"+u:"video"===f?g="/videos/"+l+"/"+d+"/"+u:"article"!==f&&"boxoffice"!==f||(g=e.pageURL);BMS.Misc.fnBusy(!0),"venue"===f&&(u=e.groupCode),BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"QuickBook",{"Is Search":"Yes","Search Term":P,ProductID:u,"Event Name":c,"Event Type":x[p],Appcode:window.global.strAppCode});var y=L.dropdownButton.data(),M=null;M=_.isEmpty(y)?p:1===y.isall&&"videos"!=y.value?"All":y.value,BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"search",category:"Quickbook",action:A[M],label:P}),window.location.assign(g)}};function f(e){if(27!=e.keyCode&&27!=e.which||o||!s().length){if(o=!1,global.blnIsTouchScreen&&!s())if(13===e.keyCode||13==e.which){var t=$(e.target).parent().find(".tt-cursor");0<t.length&&t.trigger("tap")}else U()}else o=!0,q(),e.stopPropagation();if("videos"==pageName){var n="videos"==L.dropdownButton.data("type"),i=$(".tt-menu .tt-dataset"),a=$("#search-list-icon");n||global.blnIsTouchScreen&&"videos"==pageName?(i.addClass("tt-dataset-videos"),global.blnIsTouchScreen&&i.addClass("_touch"),n&&a.hide()):i.removeClass("tt-dataset-videos")}}var g=function(){n("")},n=function(e){u.typeahead("val",e)},s=function(){return u.typeahead("val")};function h(e){27!=e.keyCode&&27!=e.which||v(!1)}var i=function(e){var t;_.isUndefined(e)&&(e=L.dropdownButton.data("type")),t=1===L.dropdownButton.data("isall")?L.searchBoxContainer.find('li [data-type="'+e+'"][data-isall=1]').data("search-placeholder"):L.searchBoxContainer.find('li [data-type="'+e+'"][data-isall=0]').data("search-placeholder"),L.searchBox.attr("placeholder",t),BMS.Misc.QuickbookModal.show(e),L.searchBox.focus(),$(document).bind("keyup",h)},m=function(e){if(_.isUndefined(e)&&(e=L.dropdownButton.data("type"),L.dropdownMenu.find("[data-type="+e+"][data-isall=0]").parent().removeClass("none")),!$("#quickbook-wrapper .qb-modal-overlay").hasClass("none")){BMS.Misc.QuickbookModal.hide();var t=L.dropdownMenu.find("[data-isall=1]"),n=t.data("type"),i=t.data("value"),a=t.data("placeholder"),o=(t.data("search-placeholder"),t.text());L.searchBox.attr("placeholder",a),t.parent().addClass("none"),L.dropdownButton.data({type:n,value:i,isall:1}).find(".icon-type").html(t.find(".icon-type").html()).next().text(o),g(),L.searchBox.blur(),$(document).unbind("keyup",h)}},v=function(e){!0===e?(BMS.Misc.QuickbookModal.isOpen()||BMS.Misc.Router.triggerRoute("quickbook",!1),i()):(BMS.Misc.Router.triggerRoute("",!1),m())};function S(e){var t=$(this),n=t.data("type"),i=t.data("value"),a=t.data("label");L.searchDropdown.removeClass("_hovered"),g();var o,s,r,l,c=0;1===t.data("isall")&&(c=1),L.dropdownButton.data({type:n,value:i,isall:c,label:a}).find(".icon-type").html(t.find(".icon-type").html()).next().text(t.text()),L.dropdownMenu.children().removeClass("none"),t.parent().addClass("none"),o=L.dropdownButton.data("type"),s="videos"==o,r=$(".tt-menu .tt-dataset"),l=$("#search-list-icon"),s||global.blnIsTouchScreen&&"videos"==pageName?(r.addClass("tt-dataset-videos"),global.blnIsTouchScreen&&r.addClass("_touch"),m(o)):(r.removeClass("tt-dataset-videos"),v(!0)),"videos"!=pageName||global.blnIsTouchScreen||s&&l.hide(),fnHandleQuickbookRecommendation(i);var d={"Category Selected":L.dropdownButton.text().trim(),Appcode:window.global.strAppCode};BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"QuickBook",d);var u={event:"applied_quickbook_7",action:"primary",label:a,user_mode:""!=BMS.Storage.get({name:"ld",storage:"C"})?"Logged In":"Guest Mode"};return BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},u),!1}function y(){var e=L.dropdownButton.data("type");$("#quickbook-wrapper .qb-modal-overlay").hasClass("none")&&("videos"!=e?v(!0):m(e),L.searchDropdown.removeClass("_hovered"))}function M(){var e=L.dropdownButton.data("type");$("#quickbook-wrapper .qb-modal-overlay").hasClass("none")&&0<$("#quickbook-wrapper").length&&("videos"!=e?v(!0):m(e)),U(),global.blnIsTouchScreen||(handleRecommendedEventTextResize(),fnHandleQuickbookRecommendation($("#btn-dd-search").data("value"))),fireSearchViewEvent()}var O={trendingSearchData:{},TYPES:{MOVIES:"MT",EVENTS:"CT",ALL:"ALL",FINAL:"FINAL"},hitsData:{},getCategoryDetails:function(e){var t="",n="";switch(e){case"MT":default:t="Movie",n="icon-movie";break;case"CT":t="Event",n="icon-event";break;case"PL":t="Play",n="icon-plays";break;case"SP":t="Sport",n="icon-sports"}return{category:t,icon:n}}};function U(){if(global.blnIsTouchScreen&&!s()&&"videos"!=pageName)if(_.isEmpty(O.trendingSearchData)){var e=$("#qb-search-box-container .tt-menu");e.find(".tt-dataset").html('<div class="tt-searching">Searching...</div>'),e.show()}else 0<$("#qb-search-box-container").length&&0<$("#qb-search-box-container .trending-search-suggestion").length?$("#qb-search-box-container .tt-menu").show():a()}function G(){var e,t,n=$(".ts-desktop-main .trending-search-text"),i=$(".ts-desktop-main .trending-search-result-block");e=n.attr("width"),t=Math.floor(parseInt($(".ts-desktop-main .ts-desktop-wrapper").css("width")))-(Math.floor(e)+2),n.css("width",e+"px"),i.css("width",t+"px")}function a(){for(var e=O.TYPES.FINAL,t=O.hitsData[e],n=t.length,i=$("#qb-search-box-container .tt-menu"),a=i.find(".tt-dataset"),o='<div class="tt-category">Popular Searches in '+BMS.Storage.get({name:"Rgn",key:"text"})+"</div>",s=0;s<n;s++){var r=O.getCategoryDetails(t[s].TYPE);o+='<div data-search-type="'+e+'" \t\t\t\t\t\tdata-search-index="'+s+'" \t\t\t\t\t\tclass = "tt-suggestion tt-selectable trending-search-suggestion'+(0===s?" tt-cursor":"")+'" >\t\t\t\t\t\t<span class="icon-type">\t\t\t\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">\t\t\t\t\t\t\t<use xlink:href="/icons/common-icons.svg#'+r.icon+'"></use>\t\t\t\t\t\t\t</svg>\t\t\t\t\t\t</span>\t\t\t\t\t\t<div class="trending-data">\t\t\t\t\t\t\t<div class="__title">'+t[s].TITLE+'</div>\t\t\t\t\t\t\t<div class="__category">'+r.category+"</div>\t\t\t\t\t\t</div>\t\t\t\t\t</div>"}a.html(o),$("#qb-search-box-container .trending-search-suggestion").off(".trending").on("tap.trending",F),i.show()}function F(e){var t=$(e.currentTarget),n=t.data("search-type"),i=O.hitsData[n],a=t.data("search-index"),o=i[a],s=$.extend(!0,{},o),r="",l=o.TITLE.toLowerCase(),c=o.ID,d=o.ST,u=JSON.parse(BMS.Storage.get({name:"buytickets",storage:"L",key:"filters"})||"{}").subRegions||[],p=o.TYPE.toUpperCase(),f=BMS.Misc.fnUrlName(l);f=f||"-";try{s.INPUT="",s.REGION=BMS.Storage.get({name:"Rgn",storage:"C",key:"Code"}),s.SUBREGION=u.join(", "),s.POSN=a+1,s.SRC="M5",s.LAT=B,s.LONG=C}catch(e){}switch(p){case"MT":_.isEmpty(d)||"CS"!==d?r="/buytickets/"+f+"-"+(""!=T?T:k.toLowerCase())+"/movie-"+(""!=I?I:E.toLowerCase())+"-"+c+"-MT":(_.isEmpty(k)||_.isUndefined(k)||(r="/"+k.toLowerCase()),r+="/movies/"+f+"/"+c);break;case"CT":r="/events/"+f+"/"+c;break;case"PL":r="/plays/"+f+"/"+c;break;case"SP":_.isEmpty(k)||_.isUndefined(k)||(r="/"+k.toLowerCase()),r+="/sports/"+f+"/"+c}void 0,BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"trending_quickbook_5",domain:"bms_mobileweb",pagetype:"QuickBook",product_type:p,product_name:o.TITLE}),BMS.Misc.fnBusy(!0),window.location.assign(r)}function j(e,t,n,i){try{var a=BMS.Storage.get({name:"ld",key:"MEMBEREMAIL"}),o={};o.INPUT=$(".search-box.tt-input").val(),o.REGION=BMS.Storage.get({name:"Rgn",storage:"C",key:"Code"});var s=JSON.parse(BMS.Storage.get({name:"buytickets",storage:"L",key:"filters"})||"{}").subRegions||[];o.SUBREGION=s.join(", "),o.SRC=global.blnIsTouchScreen?"M5":"WEB",o.EMAIL=""!=a?a:"",o.LAT=B,o.LONG=C,o.ST="",o.CODE="",o.TITLE="",o.ID="",o.TYPE="",e==w["NO-CLICK"]?o.OUTPUT=b.output:o.OUTPUT=[],o.GRP=t,o.BMSID=""!=BMS.Storage.get({name:"bmsId"})?BMS.Storage.get({name:"bmsId"}):"",o.THRESHOLD=1e3*n,o.TIME=b.time,o.MSG=b.statusCode,o.ERR_TYPE=e,o.POSN=i,o.ti=b.ti}catch(e){BMS.Misc.fnErr({fnName:"fnPushSearchRelevancyData",err:e})}}function q(){try{b.startedTyping&&j(w.EXIT,"FAILED",0,0),null!=b.timer&&clearInterval(b.timer),null!=b.emptyResponseTimeOut&&clearTimeout(b.emptyResponseTimeOut),b={startedTyping:!1,timeElapsed:0,timer:null,fiveSecondsElapsed:!1,results:null,time:null,ti:"",statusCode:"",emptyResponseTimeOut:null,typedAfterEmptyResponse:!1,output:[]}}catch(e){BMS.Misc.fnErr({fnName:"fnResetSearchRelevancy",err:e})}}function V(){var e=L.dropdownButton.data("type");"videos"!=e?v(!0):m(e)}$((function(){if(L.searchBoxContainer=$(".qb-search-box-container"),L.searchBox=L.searchBoxContainer.find(".search-box"),L.dropdownButton=L.searchBoxContainer.find("#btn-dd-search"),L.dropdownMenu=L.searchBoxContainer.find(".search-dropdown-menu"),L.searchDropdown=L.searchBoxContainer.find(".search-dropdown"),u=L.searchBox.typeaheadWrapper(p.options),BMS.Misc.QuickbookModal.initialize(),u.on("keyup",f),L.dropdownMenu.find(".__item").click(S),L.dropdownButton.on("click",y),L.searchBox.on("focus",M),$("#search-list-icon",L.searchBoxContainer).on("click",V),L.searchBoxContainer.on("click","#qb-region-link",(function(){return BMS.Region.fnSwStates(""),!1})),L.searchDropdown.on("mouseover",(function(){L.searchDropdown.addClass("_hovered")})),L.searchDropdown.on("mouseleave",(function(){L.searchDropdown.removeClass("_hovered")})),L.searchBoxContainer.find(".twitter-typeahead").css("width","100%"),L.searchBoxContainer.find(".search-box.tt-input").on("input",(function(){b.startedTyping=!0,b.typedAfterEmptyResponse=!0,""==this.value&&b.startedTyping&&j(w.CLEAR,"FAILED",0,0)})),$(".qb-modal-overlay #btn-close, .qb-modal-overlay #btn-back").click((function(){if(v(!1),"videos"==pageName){var e="videos"==L.dropdownButton.data("type"),t=$(".tt-menu .tt-dataset"),n=$("#search-list-icon");e||global.blnIsTouchScreen&&"videos"==pageName?(t.addClass("tt-dataset-videos"),global.blnIsTouchScreen&&t.addClass("_touch"),e&&n.hide()):t.removeClass("tt-dataset-videos")}q()})),"videos"==pageName){var e="videos"==L.dropdownButton.data("type"),t=$(".tt-menu .tt-dataset"),n=$("#search-list-icon");e||global.blnIsTouchScreen&&"videos"==pageName?(t.addClass("tt-dataset-videos"),global.blnIsTouchScreen&&t.addClass("_touch"),e&&n.hide()):t.removeClass("tt-dataset-videos")}var i,a,o,s,r,l,c="MT";switch(pageName){case"moives":c="MT";break;case"events":c="CT";break;case"sports":c="SP";break;case"plays":c="PL";break;default:c="MT"}fnShowQuickBookRecommendation(c),global.blnIsTouchScreen||(o="",s=$(".ts-desktop-main .trending-search-text"),r=$(".ts-desktop-main .trending-search-result-block"),l=BMS.Storage.get({name:"Rgn",key:"text"}),o=_.isEmpty(l)?"":"in "+l+" ",s.find(".trending-in-region-text").html(o),i=parseInt(s.css("width"))+parseInt(s.css("padding-left"))+parseInt(s.css("padding-right")),s.attr("width",i),a=Math.floor(parseInt($(".ts-desktop-main .ts-desktop-wrapper").css("width")))-(Math.floor(i)+2),s.css("width",i+"px"),r.css("width",a+"px"),G(),handleWindowResize())})),fnInitializeQuickbookRecommendation=function(){if(!global.blnIsTouchScreen){var e=$(".quickbook-recommendation-header");0<e.length&&e.off(".recomm").on("click.recomm",(function(e){$(this).closest(".quickbook-recommendation-wrapper").find(".quickbook-recommendation-body").toggle(),$(this).find(".qb-symbol").toggle()}))}},fnShowQuickBookRecommendation=function(e){fnInitializeQuickbookRecommendation(),fnHandleQuickbookRecommendation(e),fnBindQBRecommAnalytics()},handleRecommendedEventTextResize=function(){var e={event:$(".quickbook-recommendation-wrapper.reco-events"),play:$(".quickbook-recommendation-wrapper.reco-plays"),sport:$(".quickbook-recommendation-wrapper.reco-sports"),movie:$(".quickbook-recommendation-wrapper.reco-movies")};$.each(e,(function(e,t){if(0!=t.length&&0!=t.find(".recommended-event-card").length&&"none"!=$(t).find(".quickbook-recommendation-body").css("display")){var n=$(t).find(".quickbook-recommendation-body").offset().left,i=$(t).find(".recommended-event-card").first().offset().left;$(t).find(".quickbook-recommendation-header").css("margin-left",i-n)}}))},fnHandleQuickbookRecommendation=function(e){var t=$(".qb-overflow-wrapper .qb-overflow-container").find(".quickbook-recommendation-container");if(0<t.length){var n="";switch(t.addClass("hidden"),e){case"MT":n=".reco-movies";break;case"CT":n=".reco-events";break;case"PL":n=".reco-plays";break;case"SP":n=".reco-sports"}$typeRecommendation=t.closest(n);var i=$typeRecommendation.find(".recommended-event-card");0<i.length?($typeRecommendation.removeClass("hidden"),i.each((function(e,t){var n=$(t).find(".event-image-container img");n.attr("src",n.attr("data-src"))}))):$typeRecommendation.addClass("hidden"),handleRecommendedEventTextResize(),fnFormatEllipses($(".quickbook-recommendation-body.reco-events, .quickbook-recommendation-body.reco-plays, .quickbook-recommendation-body.reco-sports").find(".recommended-event-card").find(".event-name-container"))}},fnBindQBRecommAnalytics=function(){showQuickBookRecomm&&$(".quickbook-recommendation-container .quickbook-recommendation-body .__movie-name,\t\t\t\t.quickbook-recommendation-container .quickbook-recommendation-body .__location").off(".qbrecommanalytics").on("click.qbrecommanalytics",fnPushQBRecommMovieCinemaNameClick)},fnFormatEllipses=function(e){try{var t=e.length;maxLength=60,minLength=20,0<t&&e.map((function(e,t){var n=$(t),i=n.text()?n.text().trim():"",a=i.length;if(a>=maxLength){maxLength;i=i.substr(0,maxLength),n.text(i+"...").addClass("resizedFont")}else a<maxLength&&a>minLength&&n.addClass("resizedFont")}))}catch(e){BMS.Misc.fnErr({fnName:"formatEllipses",err:e})}},fnPushQBRecommMovieCinemaNameClick=function(e){if(e){var t=$(e.currentTarget),n=$(e.currentTarget).parents(".detail"),i=n.data("movie-name"),a=n.data("venue-name"),o=n.data("position"),s={event:t.hasClass("__movie-name")?"click_moviename_quickbook_1":"click_cinemaname_quickbook_2",eventname:i||null,venue_name:a||null,rposition:o||null};BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},s)}},fnPushQBShowtimeClick=function(e,t,n,i,a){var o=BMS.Storage.get({name:"ld",storage:"C"}),s=$(".quickbook-recommendation-container").find(".recommended-event-card[data-position='"+e+"']").data("movie-name"),r={event:"clicked_quickbook_6",action:"recommendedmovie",label:e,meta_1:a&&i?"showtime":"title",meta_2:a&&i?a:s,user_mode:""!=o?"Logged In":"Guest Mode"};BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},r)},fnPushQBViewAnalytics=function(){if(showQuickBookRecomm)for(var e=$(".quickbook-recommendation-container .detail"),t=e.length,n=0;n<t;n++){for(var i=$(e[n]),a={event:"view_recommend_quickbook_4",eventname:i.data("movie-name"),venue_name:i.data("venue-name")},o=i.find(".__day"),s=o.length,r=i.find(".__details"),l=r.length,c=0;c<s;c++)a["date"+(c+1)]=$(o[c]).text();for(c=0;c<l;c++){for(var d=$(r[c]).find(".timestamp"),u="",p=d.length,f=0;f<p;f++)u+=0!==f?"|":"",u+=d[f].innerHTML;a["showtime"+(c+1)]=u}BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},a)}};BMS.Misc.Router.registerRoute("quickbook","quickbookSearchBox",i,m),BMS.Misc.Quickbook=BMS.Misc.Quickbook||{},BMS.Misc.Quickbook.searchBox={getVal:s,setVal:n,triggerQuickbook:function(){v(!0)}},handleWindowResize=function(){$(window).resize((function(){G(),handleRecommendedEventTextResize()}))}})(),(function(e){var T=e(window);e.fn.visible=function(e,t,n){if(!(this.length<1)){var i=1<this.length?this.eq(0):this,a=i.get(0),o=T.width(),s=T.height(),r=(n=n||"both",!0!==t||a.offsetWidth*a.offsetHeight);if("function"==typeof a.getBoundingClientRect){var l=a.getBoundingClientRect(),c=0<=l.top&&l.top<s,d=0<l.bottom&&l.bottom<=s,u=0<=l.left&&l.left<o,p=0<l.right&&l.right<=o,f=e?c||d:c&&d,g=e?u||p:u&&p;if("both"===n)return r&&f&&g;if("vertical"===n)return r&&f;if("horizontal"===n)return r&&g}else{var h=T.scrollTop(),m=h+s,v=T.scrollLeft(),S=v+o,y=i.offset(),M=y.top,b=M+i.height(),w=y.left,B=w+i.width(),C=!0===e?b:M,_=!0===e?M:b,k=!0===e?B:w,E=!0===e?w:B;if("both"===n)return!!r&&_<=m&&h<=C&&E<=S&&v<=k;if("vertical"===n)return!!r&&_<=m&&h<=C;if("horizontal"===n)return!!r&&E<=S&&v<=k}}}})(jQuery),(function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)})((function(c){"use strict";var a,o=window.Slick||{};a=0,(o=function(e,t){var n,i=this;i.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:c(e),appendDots:c(e),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button"><svg version="1.1" style="stroke-width: 10px; stroke: #FFF; fill: #FFF;" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><use xlink:href="/icons/common-icons.svg#icon-prev-arrow"></use></svg></button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button"><svg version="1.1" style="stroke-width: 5px; stroke: #FFF; fill: #FFF;" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><use xlink:href="/icons/common-icons.svg#icon-next-arrow"></use></svg></button>',autoplay:!0,autoplaySpeed:3e3,centerMode:!0,centerPadding:"50px",cssEase:"ease",customPaging:function(e,t){return'<button type="button" data-role="none" role="button" aria-required="false" tabindex="0">'+(t+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",offset:-75,mobileFirst:!1,pauseOnHover:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},i.initials={animating:!1,dragging:!1,autoPlayTimer:500,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},c.extend(i,i.initials),i.activeBreakpoint=null,i.animType=null,i.animProp=null,i.breakpoints=[],i.breakpointSettings=[],i.cssTransitions=!1,i.hidden="hidden",i.paused=!1,i.positionProp=null,i.respondTo=null,i.rowCount=1,i.shouldClick=!0,i.$slider=c(e),i.$slidesCache=null,i.transformType=null,i.transitionType=null,i.visibilityChange="visibilitychange",i.windowWidth=0,i.windowTimer=null,i.visibleDiv=!1,n=c(e).data("slick")||{},i.options=c.extend({},i.defaults,n,t),i.currentSlide=i.options.initialSlide,i.originalSettings=i.options,void 0!==document.mozHidden?(i.hidden="mozHidden",i.visibilityChange="mozvisibilitychange"):void 0!==document.webkitHidden&&(i.hidden="webkitHidden",i.visibilityChange="webkitvisibilitychange"),i.autoPlay=c.proxy(i.autoPlay,i),i.autoPlayClear=c.proxy(i.autoPlayClear,i),i.changeSlide=c.proxy(i.changeSlide,i),i.clickHandler=c.proxy(i.clickHandler,i),i.selectHandler=c.proxy(i.selectHandler,i),i.setPosition=c.proxy(i.setPosition,i),i.swipeHandler=c.proxy(i.swipeHandler,i),i.dragHandler=c.proxy(i.dragHandler,i),i.keyHandler=c.proxy(i.keyHandler,i),i.autoPlayIterator=c.proxy(i.autoPlayIterator,i),i.instanceUid=a++,i.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,i.registerBreakpoints(),i.init(!0),i.checkResponsive(!0),c(window).scroll((function(){i.lazyLoad.call(i,!0)})),c(window).resize((function(){i.lazyLoad.call(i)}))}).prototype.checkResponsive=function(e,t){var n,i,a,o=this,s=!1,r=o.$slider.width(),l=window.innerWidth||c(window).width();if("window"===o.respondTo?a=l:"slider"===o.respondTo?a=r:"min"===o.respondTo&&(a=Math.min(l,r)),o.options.responsive&&o.options.responsive.length&&null!==o.options.responsive){for(n in i=null,o.breakpoints)o.breakpoints.hasOwnProperty(n)&&(!1===o.originalSettings.mobileFirst?a<o.breakpoints[n]&&(i=o.breakpoints[n]):a>o.breakpoints[n]&&(i=o.breakpoints[n]));null!==i?null!==o.activeBreakpoint?(i!==o.activeBreakpoint||t)&&(o.activeBreakpoint=i,"unslick"===o.breakpointSettings[i]?o.unslick(i):(o.options=c.extend({},o.originalSettings,o.breakpointSettings[i]),!0===e&&(o.currentSlide=o.options.initialSlide),o.refresh(e)),s=i):(o.activeBreakpoint=i,"unslick"===o.breakpointSettings[i]?o.unslick(i):(o.options=c.extend({},o.originalSettings,o.breakpointSettings[i]),!0===e&&(o.currentSlide=o.options.initialSlide),o.refresh(e)),s=i):null!==o.activeBreakpoint&&(o.activeBreakpoint=null,o.options=o.originalSettings,!0===e&&(o.currentSlide=o.options.initialSlide),o.refresh(e),s=i),e||!1===s||o.$slider.trigger("breakpoint",[o,s])}},o.prototype.registerBreakpoints=function(){var e,t,n,i=this,a=i.options.responsive||null;if("array"===c.type(a)&&a.length){for(e in i.respondTo=i.options.respondTo||"window",a)if(n=i.breakpoints.length-1,t=a[e].breakpoint,a.hasOwnProperty(e)){for(;0<=n;)i.breakpoints[n]&&i.breakpoints[n]===t&&i.breakpoints.splice(n,1),n--;i.breakpoints.push(t),i.breakpointSettings[t]=a[e].settings}i.breakpoints.sort((function(e,t){return i.options.mobileFirst?e-t:t-e}))}},o.prototype.addSlide=o.prototype.slickAdd=function(e,t,n){var i=this;if("boolean"==typeof t)n=t,t=null;else if(t<0||t>=i.slideCount)return!1;i.unload(),"number"==typeof t?0===t&&0===i.$slides.length?c(e).appendTo(i.$slideTrack):n?c(e).insertBefore(i.$slides.eq(t)):c(e).insertAfter(i.$slides.eq(t)):!0===n?c(e).prependTo(i.$slideTrack):c(e).appendTo(i.$slideTrack),i.$slides=i.$slideTrack.children(this.options.slide),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.append(i.$slides),i.$slides.each((function(e,t){c(t).attr("data-slick-index",e)})),i.$slidesCache=i.$slides,i.reinit()},o.prototype.animateSlide=function(e,t){var n={},i=this;!0===i.options.rtl&&!1===i.options.vertical&&(e=-e),!1===i.transformsEnabled?!1===i.options.vertical?i.$slideTrack.animate({left:e},i.options.speed,i.options.easing,t):i.$slideTrack.animate({top:e},i.options.speed,i.options.easing,t):!1===i.cssTransitions?(!0===i.options.rtl&&(i.currentLeft=-i.currentLeft),c({animStart:i.currentLeft}).animate({animStart:e},{duration:i.options.speed,easing:i.options.easing,step:function(e){e=Math.ceil(e),!1===i.options.vertical?n[i.animType]="translate("+e+"px, 0px)":n[i.animType]="translate(0px,"+e+"px)",i.$slideTrack.css(n)},complete:function(){t&&t.call()}})):(i.applyTransition(),e=Math.ceil(e),!1===i.options.vertical?n[i.animType]="translate3d("+e+"px, 0px, 0px)":n[i.animType]="translate3d(0px,"+e+"px, 0px)",i.$slideTrack.css(n),t&&setTimeout((function(){i.disableTransition(),t.call()}),i.options.speed))},o.prototype.asNavFor=function(t){var e=this.options.asNavFor;e&&null!==e&&(e=c(e).not(this.$slider)),null!==e&&"object"==typeof e&&e.each((function(){var e=c(this).slick("getSlick");e.unslicked||e.slideHandler(t,!0)}))},o.prototype.applyTransition=function(e){var t=this,n={};!1===t.options.fade?n[t.transitionType]=t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:n[t.transitionType]="opacity "+t.options.speed+"ms "+t.options.cssEase,!1===t.options.fade?t.$slideTrack.css(n):t.$slides.eq(e).css(n)},o.prototype.autoPlay=function(){this.autoPlayTimer&&clearInterval(this.autoPlayTimer),this.slideCount>this.options.slidesToShow&&!0!==this.paused&&(this.autoPlayTimer=setInterval(this.autoPlayIterator,this.options.autoplaySpeed))},o.prototype.autoPlayClear=function(){this.autoPlayTimer&&clearInterval(this.autoPlayTimer)},o.prototype.autoPlayIterator=function(){var e=this;!1===e.options.infinite?1===e.direction?(e.currentSlide+1===e.slideCount-1&&(e.direction=0),e.slideHandler(e.currentSlide+e.options.slidesToScroll)):(e.currentSlide-1==0&&(e.direction=1),e.slideHandler(e.currentSlide-e.options.slidesToScroll)):e.slideHandler(e.currentSlide+e.options.slidesToScroll)},o.prototype.buildArrows=function(){var e=this;!0===e.options.arrows&&(e.$prevArrow=c(e.options.prevArrow).addClass("slick-arrow"),e.$nextArrow=c(e.options.nextArrow).addClass("slick-arrow"),e.slideCount>e.options.slidesToShow?(e.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),e.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.prependTo(e.options.appendArrows),e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.appendTo(e.options.appendArrows),!0!==e.options.infinite&&e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):e.$prevArrow.add(e.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},o.prototype.buildDots=function(){var e,t,n=this;if(!0===n.options.dots&&n.slideCount>n.options.slidesToShow){for(t='<ul class="'+n.options.dotsClass+'">',e=0;e<=n.getDotCount();e+=1)t+="<li>"+n.options.customPaging.call(this,n,e)+"</li>";t+="</ul>",n.$dots=c(t).appendTo(n.options.appendDots),n.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},o.prototype.buildOut=function(){var e=this;e.$slides=e.$slider.children(e.options.slide+":not(.slick-cloned)").addClass("slick-slide"),e.slideCount=e.$slides.length,e.$slides.each((function(e,t){c(t).attr("data-slick-index",e).data("originalStyling",c(t).attr("style")||"")})),e.$slidesCache=e.$slides,e.$slider.addClass("slick-slider"),e.$slideTrack=0===e.slideCount?c('<div class="slick-track"/>').appendTo(e.$slider):e.$slides.wrapAll('<div class="slick-track"/>').parent(),e.$list=e.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),e.$slideTrack.css("opacity",0),!0!==e.options.centerMode&&!0!==e.options.swipeToSlide||(e.options.slidesToScroll=1),c("img[data-lazy]",e.$slider).not("[src]").addClass("slick-loading"),e.setupInfinite(),e.buildArrows(),e.buildDots(),e.updateDots(),e.setSlideClasses("number"==typeof e.currentSlide?e.currentSlide:0),!0===e.options.draggable&&e.$list.addClass("draggable")},o.prototype.buildRows=function(){var e,t,n,i,a,o,s,r=this;if(i=document.createDocumentFragment(),o=r.$slider.children(),1<r.options.rows){for(s=r.options.slidesPerRow*r.options.rows,a=Math.ceil(o.length/s),e=0;e<a;e++){var l=document.createElement("div");for(t=0;t<r.options.rows;t++){var c=document.createElement("div");for(n=0;n<r.options.slidesPerRow;n++){var d=e*s+(t*r.options.slidesPerRow+n);o.get(d)&&c.appendChild(o.get(d))}l.appendChild(c)}i.appendChild(l)}r.$slider.html(i),r.$slider.children().children().children().css({width:100/r.options.slidesPerRow+"%",display:"inline-block"})}},o.prototype.changeSlide=function(e,t){var n,i,a=this,o=c(e.target);switch(o.is("a")&&e.preventDefault(),o.is("li")||(o=o.closest("li")),n=a.slideCount%a.options.slidesToScroll!=0?0:(a.slideCount-a.currentSlide)%a.options.slidesToScroll,e.data.message){case"previous":i=0===n?a.options.slidesToScroll:a.options.slidesToShow-n,a.slideCount>a.options.slidesToShow&&a.slideHandler(a.currentSlide-i,!1,t);break;case"next":i=0===n?a.options.slidesToScroll:n,a.slideCount>a.options.slidesToShow&&a.slideHandler(a.currentSlide+i,!1,t);break;case"index":var s=0===e.data.index?0:e.data.index||o.index()*a.options.slidesToScroll;a.slideHandler(a.checkNavigable(s),!1,t),o.children().trigger("focus");break;default:return}},o.prototype.checkNavigable=function(e){var t,n;if(n=0,e>(t=this.getNavigableIndexes())[t.length-1])e=t[t.length-1];else for(var i in t){if(e<t[i]){e=n;break}n=t[i]}return e},o.prototype.cleanUpEvents=function(){var e=this;e.options.dots&&null!==e.$dots&&c("li",e.$dots).off("click.slick",e.changeSlide),!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow&&e.$prevArrow.off("click.slick",e.changeSlide),e.$nextArrow&&e.$nextArrow.off("click.slick",e.changeSlide)),e.$list.off("click.slick",e.clickHandler),c(document).off(e.visibilityChange,e.visibility),!0===e.options.accessibility&&e.$list.off("keydown.slick",e.keyHandler),!0===e.options.focusOnSelect&&c(e.$slideTrack).children().off("click.slick",e.selectHandler),c(window).off("orientationchange.slick.slick-"+e.instanceUid,e.orientationChange),c(window).off("resize.slick.slick-"+e.instanceUid,e.resize),c("[draggable!=true]",e.$slideTrack).off("dragstart",e.preventDefault),c(window).off("load.slick.slick-"+e.instanceUid,e.setPosition),c(document).off("ready.slick.slick-"+e.instanceUid,e.setPosition)},o.prototype.cleanUpRows=function(){var e;1<this.options.rows&&((e=this.$slides.children().children()).removeAttr("style"),this.$slider.html(e))},o.prototype.clickHandler=function(e){!1===this.shouldClick&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())},o.prototype.destroy=function(e){var t=this;t.autoPlayClear(),t.touchObject={},t.cleanUpEvents(),c(".slick-cloned",t.$slider).detach(),t.$dots&&t.$dots.remove(),!0===t.options.arrows&&(t.$prevArrow&&t.$prevArrow.length&&(t.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove()),t.$nextArrow&&t.$nextArrow.length&&(t.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove())),t.$slides&&(t.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each((function(){c(this).attr("style",c(this).data("originalStyling"))})),t.$slideTrack.children(this.options.slide).detach(),t.$slideTrack.detach(),t.$list.detach(),t.$slider.append(t.$slides)),t.cleanUpRows(),t.$slider.removeClass("slick-slider"),t.$slider.removeClass("slick-initialized"),t.unslicked=!0,e||t.$slider.trigger("destroy",[t])},o.prototype.disableTransition=function(e){var t={};t[this.transitionType]="",!1===this.options.fade?this.$slideTrack.css(t):this.$slides.eq(e).css(t)},o.prototype.fadeSlide=function(e,t){var n=this;!1===n.cssTransitions?(n.$slides.eq(e).css({zIndex:n.options.zIndex}),n.$slides.eq(e).animate({opacity:1},n.options.speed,n.options.easing,t)):(n.applyTransition(e),n.$slides.eq(e).css({opacity:1,zIndex:n.options.zIndex}),t&&setTimeout((function(){n.disableTransition(e),t.call()}),n.options.speed))},o.prototype.fadeSlideOut=function(e){!1===this.cssTransitions?this.$slides.eq(e).animate({opacity:0,zIndex:this.options.zIndex-2},this.options.speed,this.options.easing):(this.applyTransition(e),this.$slides.eq(e).css({opacity:0,zIndex:this.options.zIndex-2}))},o.prototype.filterSlides=o.prototype.slickFilter=function(e){null!==e&&(this.unload(),this.$slideTrack.children(this.options.slide).detach(),this.$slidesCache.filter(e).appendTo(this.$slideTrack),this.reinit())},o.prototype.getCurrent=o.prototype.slickCurrentSlide=function(){return this.currentSlide},o.prototype.getDotCount=function(){var e=this,t=0,n=0,i=0;if(!0===e.options.infinite)for(;t<e.slideCount;)++i,t=n+e.options.slidesToShow,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else if(!0===e.options.centerMode)i=e.slideCount;else for(;t<e.slideCount;)++i,t=n+e.options.slidesToShow,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return i-1},o.prototype.getLeft=function(e){var t,n,i,a=this,o=0;return a.slideOffset=0,n=a.$slides.first().outerHeight(!0),!0===a.options.infinite?(a.slideCount>a.options.slidesToShow&&(a.slideOffset=a.slideWidth*a.options.slidesToShow*-1,o=n*a.options.slidesToShow*-1),a.slideCount%a.options.slidesToScroll!=0&&e+a.options.slidesToScroll>a.slideCount&&a.slideCount>a.options.slidesToShow&&(e>a.slideCount?(a.slideOffset=(a.options.slidesToShow-(e-a.slideCount))*a.slideWidth*-1,o=(a.options.slidesToShow-(e-a.slideCount))*n*-1):(a.slideOffset=a.slideCount%a.options.slidesToScroll*a.slideWidth*-1,o=a.slideCount%a.options.slidesToScroll*n*-1))):e+a.options.slidesToShow>a.slideCount&&(a.slideOffset=(e+a.options.slidesToShow-a.slideCount)*a.slideWidth,o=(e+a.options.slidesToShow-a.slideCount)*n),a.slideCount<=a.options.slidesToShow&&(o=a.slideOffset=0),!0===a.options.centerMode&&!0===a.options.infinite?a.slideOffset+=a.slideWidth*Math.floor(a.options.slidesToShow/2)-a.slideWidth:!0===a.options.centerMode&&(a.slideOffset=0,a.slideOffset+=a.slideWidth*Math.floor(a.options.slidesToShow/2)),t=!1===a.options.vertical?e*a.slideWidth*-1+a.slideOffset:e*n*-1+o,!0===a.options.variableWidth&&(t=(i=a.slideCount<=a.options.slidesToShow||!1===a.options.infinite?a.$slideTrack.children(".slick-slide").eq(e):a.$slideTrack.children(".slick-slide").eq(e+a.options.slidesToShow))[0]?-1*i[0].offsetLeft:0,!0===a.options.centerMode&&(t=(i=!1===a.options.infinite?a.$slideTrack.children(".slick-slide").eq(e):a.$slideTrack.children(".slick-slide").eq(e+a.options.slidesToShow+1))[0]?-1*i[0].offsetLeft:0,t+=(a.$list.width()-i.outerWidth())/2)),t},o.prototype.getOption=o.prototype.slickGetOption=function(e){return this.options[e]},o.prototype.getNavigableIndexes=function(){var e,t=this,n=0,i=0,a=[];for(!1===t.options.infinite?e=t.slideCount:(n=-1*t.options.slidesToScroll,i=-1*t.options.slidesToScroll,e=2*t.slideCount);n<e;)a.push(n),n=i+t.options.slidesToScroll,i+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;return a},o.prototype.getSlick=function(){return this},o.prototype.getSlideCount=function(){return!0===this.options.centerMode?this.slideWidth*Math.floor(this.options.slidesToShow/2):0,this.options.slidesToScroll},o.prototype.goTo=o.prototype.slickGoTo=function(e,t){this.changeSlide({data:{message:"index",index:parseInt(e)}},t)},o.prototype.init=function(e){var t=this;c(t.$slider).hasClass("slick-initialized")||(c(t.$slider).addClass("slick-initialized"),t.buildRows(),t.buildOut(),t.setProps(),t.startLoad(),t.loadSlider(),t.initializeEvents(),t.updateArrows(),t.updateDots()),t.lazyLoad(),e&&t.$slider.trigger("init",[t]),t.options.accessibility},o.prototype.initArrowEvents=function(){!0===this.options.arrows&&this.slideCount>this.options.slidesToShow&&(this.$prevArrow.on("click.slick",{message:"previous"},this.changeSlide),this.$nextArrow.on("click.slick",{message:"next"},this.changeSlide))},o.prototype.initDotEvents=function(){!0===this.options.dots&&this.slideCount>this.options.slidesToShow&&c("li",this.$dots).on("click.slick",{message:"index"},this.changeSlide)},o.prototype.initializeEvents=function(){var e=this;e.initArrowEvents(),e.initDotEvents(),e.$list.on("click.slick",e.clickHandler),c(document).on(e.visibilityChange,c.proxy(e.visibility,e)),!0===e.options.accessibility&&e.$list.on("keydown.slick",e.keyHandler),!0===e.options.focusOnSelect&&c(e.$slideTrack).children().on("click.slick",e.selectHandler),c(window).on("orientationchange.slick.slick-"+e.instanceUid,c.proxy(e.orientationChange,e)),c(window).on("resize.slick.slick-"+e.instanceUid,c.proxy(e.resize,e)),c("[draggable!=true]",e.$slideTrack).on("dragstart",e.preventDefault),c(window).on("load.slick.slick-"+e.instanceUid,e.setPosition),c(document).on("ready.slick.slick-"+e.instanceUid,e.setPosition)},o.prototype.initUI=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.show(),e.$nextArrow.show()),!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&e.$dots.show(),!0===e.options.autoplay&&e.autoPlay()},o.prototype.keyHandler=function(e){e.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===e.keyCode&&!0===this.options.accessibility?this.changeSlide({data:{message:"previous"}}):39===e.keyCode&&!0===this.options.accessibility&&this.changeSlide({data:{message:"next"}}))},o.prototype.lazyLoad=function(e){var t,n,i=this;if(e){if(this.visibleDiv)return;if(1!=i.isVisible.call(i,i.$slides.eq(0)))return}function a(e){c("img[data-lazy]",e).each((function(){var e=c(this),t=c(this).attr("data-lazy"),n=document.createElement("img"),i=c(this).attr("data-error");n.onload=function(){e.attr("src",t).removeAttr("data-lazy").removeAttr("slick-loading"),e.parents(".is-loading").removeClass("is-loading")},n.onerror=function(){""!=i&&e.animate({opacity:0},100,(function(){void 0,e.attr("src",i).removeAttr("data-lazy").removeAttr("data-error").animate({opacity:1},200,(function(){e.removeAttr("data-lazy").removeClass("slick-loading")})),i=""}))},n.src=t}))}(this.visibleDiv||1==i.isVisible.call(i,i.$slides.eq(0)))&&(!0===i.options.centerMode?!0===i.options.infinite?n=(t=i.currentSlide+(i.options.slidesToShow/2+1))+i.options.slidesToShow+2:(t=Math.max(0,i.currentSlide-(i.options.slidesToShow/2+1)),n=i.options.slidesToShow/2+1+2+i.currentSlide):(n=(t=i.options.infinite?i.options.slidesToShow+i.currentSlide:i.currentSlide)+i.options.slidesToShow,!0===i.options.fade&&(0<t&&t--,n<=i.slideCount&&n++)),a(i.$slider.find(".slick-slide").slice(t,n)),i.slideCount<=i.options.slidesToShow?a(i.$slider.find(".slick-slide")):i.currentSlide>=i.slideCount-i.options.slidesToShow?a(i.$slider.find(".slick-cloned").slice(0,i.options.slidesToShow)):0===i.currentSlide&&a(i.$slider.find(".slick-cloned").slice(-1*i.options.slidesToShow)))},o.prototype.loadSlider=function(){this.setPosition(),this.$slideTrack.css({opacity:1}),this.$slider.removeClass("slick-loading"),this.initUI(),"progressive"===this.options.lazyLoad&&this.progressiveLazyLoad()},o.prototype.next=o.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})},o.prototype.orientationChange=function(){this.setPosition()},o.prototype.pause=o.prototype.slickPause=function(){this.autoPlayClear(),this.paused=!0},o.prototype.play=o.prototype.slickPlay=function(){this.paused=!1,this.autoPlay()},o.prototype.postSlide=function(e){this.$slider.trigger("afterChange",[this,e]),this.animating=!1,this.setPosition(),!(this.swipeLeft=null)===this.options.autoplay&&!1===this.paused&&this.autoPlay(),this.options.accessibility},o.prototype.prev=o.prototype.slickPrev=function(){this.changeSlide({data:{message:"previous"}})},o.prototype.preventDefault=function(e){e.preventDefault()},o.prototype.progressiveLazyLoad=function(){var e,t=this;0<c("img[data-lazy]",t.$slider).length&&(e=c("img[data-lazy]",t.$slider).first()).attr("src",e.attr("data-lazy")).removeClass("slick-loading").load((function(){e.removeAttr("data-lazy"),t.progressiveLazyLoad(),!0===t.options.adaptiveHeight&&t.setPosition()})).error((function(){e.removeAttr("data-lazy"),t.progressiveLazyLoad()}))},o.prototype.refresh=function(e){var t=this.currentSlide;this.destroy(!0),c.extend(this,this.initials,{currentSlide:t}),this.init(),e||this.changeSlide({data:{message:"index",index:t}},!1)},o.prototype.reinit=function(){var e=this;e.$slides=e.$slideTrack.children(e.options.slide).addClass("slick-slide"),e.slideCount=e.$slides.length,e.currentSlide>=e.slideCount&&0!==e.currentSlide&&(e.currentSlide=e.currentSlide-e.options.slidesToScroll),e.slideCount<=e.options.slidesToShow&&(e.currentSlide=0),e.setProps(),e.setupInfinite(),e.buildArrows(),e.updateArrows(),e.initArrowEvents(),e.buildDots(),e.updateDots(),e.initDotEvents(),e.checkResponsive(!1,!0),!0===e.options.focusOnSelect&&c(e.$slideTrack).children().on("click.slick",e.selectHandler),e.setSlideClasses(0),e.setPosition(),e.$slider.trigger("reInit",[e]),!0===e.options.autoplay&&e.focusHandler()},o.prototype.resize=function(){var e=this;c(window).width()!==e.windowWidth&&(clearTimeout(e.windowDelay),e.windowDelay=window.setTimeout((function(){e.windowWidth=c(window).width(),e.checkResponsive(),e.unslicked||e.setPosition()}),50))},o.prototype.removeSlide=o.prototype.slickRemove=function(e,t,n){var i=this;if(e="boolean"==typeof e?!0===(t=e)?0:i.slideCount-1:!0===t?--e:e,i.slideCount<1||e<0||e>i.slideCount-1)return!1;i.unload(),!0===n?i.$slideTrack.children().remove():i.$slideTrack.children(this.options.slide).eq(e).remove(),i.$slides=i.$slideTrack.children(this.options.slide),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.append(i.$slides),i.$slidesCache=i.$slides,i.reinit()},o.prototype.setCSS=function(e){var t,n,i=this,a={};!0===i.options.rtl&&(e=-e),t="left"==i.positionProp?Math.ceil(e)+"px":"0px",n="top"==i.positionProp?Math.ceil(e)+"px":"0px",a[i.positionProp]=e,!1===i.transformsEnabled||(!(a={})===i.cssTransitions?a[i.animType]="translate("+t+", "+n+")":a[i.animType]="translate3d("+t+", "+n+", 0px)"),i.$slideTrack.css(a)},o.prototype.setDimensions=function(){var e=this;!1===e.options.vertical?!0===e.options.centerMode&&e.$list.css({padding:"0 "+e.options.centerPadding+" 0"}):(e.$list.height(e.$slides.first().outerHeight(!0)*e.options.slidesToShow),!0===e.options.centerMode&&e.$list.css({padding:e.options.centerPadding+" 0px"})),e.listWidth=e.$list.width(),e.listHeight=e.$list.height(),!1===e.options.vertical&&!1===e.options.variableWidth?(e.slideWidth=Math.ceil(e.listWidth/e.options.slidesToShow),e.$slideTrack.width(Math.ceil(e.slideWidth*e.$slideTrack.children(".slick-slide").length))):!0===e.options.variableWidth?e.$slideTrack.width(5e3*e.slideCount):(e.slideWidth=Math.ceil(e.listWidth),e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight(!0)*e.$slideTrack.children(".slick-slide").length)));var t=e.$slides.first().outerWidth(!0)-e.$slides.first().width();!1===e.options.variableWidth&&e.$slideTrack.children(".slick-slide").width(e.slideWidth-t)},o.prototype.setFade=function(){var n,i=this;i.$slides.each((function(e,t){n=i.slideWidth*e*-1,!0===i.options.rtl?c(t).css({position:"relative",right:n,top:0,zIndex:i.options.zIndex-2,opacity:0}):c(t).css({position:"relative",left:n,top:0,zIndex:i.options.zIndex-2,opacity:0})})),i.$slides.eq(i.currentSlide).css({zIndex:i.options.zIndex-1,opacity:1})},o.prototype.setOption=o.prototype.slickSetOption=function(e,t,n){var i,a;if("responsive"===e&&"array"===c.type(t))for(a in t)if("array"!==c.type(this.options.responsive))this.options.responsive=[t[a]];else{for(i=this.options.responsive.length-1;0<=i;)this.options.responsive[i].breakpoint===t[a].breakpoint&&this.options.responsive.splice(i,1),i--;this.options.responsive.push(t[a])}else this.options[e]=t;!0===n&&(this.unload(),this.reinit())},o.prototype.setPosition=function(){this.setDimensions(),!1===this.options.fade?this.setCSS(this.getLeft(this.currentSlide)):this.setFade(),this.$slider.trigger("setPosition",[this])},o.prototype.setHeight=function(){if(1===this.options.slidesToShow&&!0===this.options.adaptiveHeight&&!1===this.options.vertical){var e=this.$slides.eq(this.currentSlide).outerHeight(!0);this.$list.css("height",e)}},o.prototype.setProps=function(){var e=this,t=document.body.style;e.positionProp=!0===e.options.vertical?"top":"left","top"===e.positionProp?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),void 0===t.WebkitTransition&&void 0===t.MozTransition&&void 0===t.msTransition||!0===e.options.useCSS&&(e.cssTransitions=!0),e.options.fade&&("number"==typeof e.options.zIndex?e.options.zIndex<3&&(e.options.zIndex=3):e.options.zIndex=e.defaults.zIndex),void 0!==t.OTransform&&(e.animType="OTransform",e.transformType="-o-transform",e.transitionType="OTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.MozTransform&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition",void 0===t.perspectiveProperty&&void 0===t.MozPerspective&&(e.animType=!1)),void 0!==t.webkitTransform&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.msTransform&&(e.animType="msTransform",e.transformType="-ms-transform",e.transitionType="msTransition",void 0===t.msTransform&&(e.animType=!1)),void 0!==t.transform&&!1!==e.animType&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=null!==e.animType&&!1!==e.animType},o.prototype.setSlideClasses=function(e){var t,n,i,a,o=this;n=o.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),o.$slides.eq(e).addClass("slick-current"),!0===o.options.centerMode?(t=Math.floor(o.options.slidesToShow/2),!0===o.options.infinite&&(t<=e&&e<=o.slideCount-1-t?o.$slides.slice(e-t,e+t+1).addClass("slick-active").attr("aria-hidden","false"):(i=o.options.slidesToShow+e,n.slice(i-t+1,i+t+2).addClass("slick-active").attr("aria-hidden","false")),0===e?n.eq(n.length-1-o.options.slidesToShow).addClass("slick-center"):e===o.slideCount-1&&n.eq(o.options.slidesToShow).addClass("slick-center")),o.$slides.eq(e).addClass("slick-center")):0<=e&&e<=o.slideCount-o.options.slidesToShow?o.$slides.slice(e,e+o.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):n.length<=o.options.slidesToShow?n.addClass("slick-active").attr("aria-hidden","false"):(a=o.slideCount%o.options.slidesToShow,i=!0===o.options.infinite?o.options.slidesToShow+e:e,o.options.slidesToShow==o.options.slidesToScroll&&o.slideCount-e<o.options.slidesToShow?n.slice(i-(o.options.slidesToShow-a),i+a).addClass("slick-active").attr("aria-hidden","false"):n.slice(i,i+o.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),"ondemand"===o.options.lazyLoad&&o.lazyLoad()},o.prototype.setupInfinite=function(){var e,t,n,i=this;if(!0===i.options.fade&&(i.options.centerMode=!1),!0===i.options.infinite&&!1===i.options.fade&&(t=null,i.slideCount>i.options.slidesToShow)){for(n=!0===i.options.centerMode?i.options.slidesToShow+1:i.options.slidesToShow,e=i.slideCount;e>i.slideCount-n;e-=1)t=e-1,c(i.$slides[t]).clone(!0).attr("id","").attr("data-slick-index",t-i.slideCount).prependTo(i.$slideTrack).addClass("slick-cloned");for(e=0;e<n;e+=1)t=e,c(i.$slides[t]).clone(!0).attr("id","").attr("data-slick-index",t+i.slideCount).appendTo(i.$slideTrack).addClass("slick-cloned");i.$slideTrack.find(".slick-cloned").find("[id]").each((function(){c(this).attr("id","")}))}},o.prototype.setPaused=function(e){!0===this.options.autoplay&&!0===this.options.pauseOnHover&&((this.paused=e)?this.autoPlayClear():this.autoPlay())},o.prototype.selectHandler=function(e){var t=c(e.target).is(".slick-slide")?c(e.target):c(e.target).parents(".slick-slide"),n=parseInt(t.attr("data-slick-index"));if(n||(n=0),this.slideCount<=this.options.slidesToShow)return this.setSlideClasses(n),void this.asNavFor(n);this.slideHandler(n)},o.prototype.slideHandler=function(e,t,n){var i,a,o,s,r,l=this;t=t||!1,!0===l.animating&&!0===l.options.waitForAnimate||!0===l.options.fade&&l.currentSlide===e||l.slideCount<=l.options.slidesToShow||(!1===t&&l.asNavFor(e),i=e,r=l.getLeft(i),s=l.getLeft(l.currentSlide),l.currentLeft=null===l.swipeLeft?s:l.swipeLeft,!1===l.options.infinite&&!1===l.options.centerMode&&(e<0||e>l.getDotCount()*l.options.slidesToScroll)?!1===l.options.fade&&(i=l.currentSlide,!0!==n?l.animateSlide(s,(function(){l.postSlide(i)})):l.postSlide(i)):!1===l.options.infinite&&!0===l.options.centerMode&&(e<0||e>l.slideCount-l.options.slidesToScroll)?!1===l.options.fade&&(i=l.currentSlide,!0!==n?l.animateSlide(s,(function(){l.postSlide(i)})):l.postSlide(i)):(!0===l.options.autoplay&&clearInterval(l.autoPlayTimer),a=i<0?l.slideCount%l.options.slidesToScroll!=0?l.slideCount-l.slideCount%l.options.slidesToScroll:l.slideCount+i:i>=l.slideCount?l.slideCount%l.options.slidesToScroll!=0?0:i-l.slideCount:i,l.animating=!0,l.$slider.trigger("beforeChange",[l,l.currentSlide,a]),o=l.currentSlide,l.currentSlide=a,l.setSlideClasses(l.currentSlide),l.updateDots(),l.updateArrows(),!0!==l.options.fade?!0!==n?l.animateSlide(r,(function(){l.postSlide(a)})):l.postSlide(a):!0!==n?(l.fadeSlideOut(o),l.fadeSlide(a,(function(){l.postSlide(a)}))):l.postSlide(a)))},o.prototype.startLoad=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.hide(),e.$nextArrow.hide()),!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&e.$dots.hide(),e.$slider.addClass("slick-loading")},o.prototype.unfilterSlides=o.prototype.slickUnfilter=function(){null!==this.$slidesCache&&(this.unload(),this.$slideTrack.children(this.options.slide).detach(),this.$slidesCache.appendTo(this.$slideTrack),this.reinit())},o.prototype.unload=function(){var e=this;c(".slick-cloned",e.$slider).remove(),e.$dots&&e.$dots.remove(),e.$prevArrow&&e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.remove(),e.$nextArrow&&e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.remove(),e.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},o.prototype.unslick=function(e){this.$slider.trigger("unslick",[this,e]),this.destroy()},o.prototype.updateArrows=function(){var e=this;Math.floor(e.options.slidesToShow/2),!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&!e.options.infinite&&(e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===e.currentSlide?(e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):e.currentSlide>=e.slideCount-e.options.slidesToShow&&!1===e.options.centerMode?(e.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):e.currentSlide>=e.slideCount-1&&!0===e.options.centerMode&&(e.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},o.prototype.updateDots=function(){null!==this.$dots&&(this.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),this.$dots.find("li").eq(Math.floor(this.currentSlide/this.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},o.prototype.visibility=function(){document[this.hidden]?(this.paused=!0,this.autoPlayClear()):!0===this.options.autoplay&&(this.paused=!1,this.autoPlay())},o.prototype.focusHandler=function(){var n=this;n.$slider.on("focus.slick blur.slick","*",(function(e){e.stopImmediatePropagation();var t=c(this);setTimeout((function(){n.isPlay&&(t.is(":focus")?(n.autoPlayClear(),n.paused=!0):(n.paused=!1,n.autoPlay()))}),0)}))},o.prototype.offsetTop=function(e){for(var t;void 0===e.offsetTop;)e=e.parentNode;for(t=e.offsetTop;e==e.offsetParent;)t+=e.offsetTop;return t},o.prototype.isVisible=function(e){var t,n,i,a=window.pageYOffset;return t=this.options.offset,i=a+c(window).height()-t,n=e[0]&&e.offset().top||0,e.find(".experience-card")[0],this.visibleDiv=n<=i,n<=i},o.prototype.addEvent=function(e,t,n){return null!=e.addEventListener?e.addEventListener(t,n,!1):null!=e.attachEvent?e.attachEvent("on"+t,n):e[t]=n},c.fn.slick=function(){for(var e,t=arguments[0],n=Array.prototype.slice.call(arguments,1),i=this.length,a=0;a<i;a++)if("object"==typeof t||void 0===t?this[a].slick=new o(this[a],t):e=this[a].slick[t].apply(this[a].slick,n),void 0!==e)return e;return this}})),(function(c){c.fn.showcaseTrailer=function(e){if(c.extend(e,{autoplay:!0}),"undefined"!=typeof pageName&&"synopsis"==pageName)var t=c(".synopsis-banner"),n=c(".poster");else t=c(".banner-container, .overlay-card");var i=c(this).attr("data-trailer-code"),a=c('<div id="showcase-trailer-wrapper">').append('<div class="header">\t\t\t\t\t\t\t\t\t\t<button id="st-btn-close">\t\t\t\t\t\t\t\t\t\t\t<span class="icon-cancel">\t\t\t\t\t\t\t\t\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">\t\t\t\t\t\t\t\t\t\t\t\t\t<use xlink:href="/icons/common-icons.svg#icon-cancel"></use>\t\t\t\t\t\t\t\t\t\t\t\t</svg>\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t</button>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t<div class="body">\t\t\t\t\t\t\t\t\t</div>'),o=!1,s="";"#trailer"==window.location.hash&&("undefined"!=typeof pageName&&"home"==pageName&&(i=c(".__play-video","#showcase-primary .overlay-card").data("trailer-code"),setTimeout((function(){c(".__dismiss","#showcase-primary .showcase-overlay").trigger("click")}),300)),i&&l("show"));var r=function(e){27==e.keyCode&&l("hide"),e.stopPropagation()};function l(e){switch(e){case"show":o||(t.find(".__play").transition({scale:1.5,opacity:0},300),c("#quickbook-wrapper").transition({opacity:0},300),c(".secondary","#navbar").transition({opacity:0},300),c(".mv-synopsis-wrapper").transition({opacity:0},300),setTimeout((function(){(s=c('<div id="youtube-container" class="wow fadeIn"><iframe width="100%" height="100%" src="" id="youtube-iframe" frameborder="0" allowfullscreen autoplay="true"></iframe></div></div>')).find("iframe").attr({src:"https://www.youtube.com/embed/"+i+"?autoplay=1&mute=1"}),"undefined"!=typeof pageName&&"synopsis"==pageName&&(BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"Viewed trailer",analyticsObj),"synopsis"==pageName&&BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"YoutubeVideoAppended",videopath:"Videoopened",videolabel:"undefined"!=typeof eventTitle?eventTitle:""})),"undefined"!=typeof pageName&&"synopsis"==pageName&&t.clone().appendTo(a.find(".body")),a.css("margin-top","0px"),a.show(),c("body").append(a),c("#st-btn-close").one("click",(function(){a.find(".body").html(""),l("hide")})),setTimeout((function(){a.addClass("_dance")}),100),setTimeout((function(){a.find(".body").append(s)}),500),o=!0}),200));break;case"hide":o&&(s.html(""),a.css("margin-top","100px"),a.removeClass("_dance"),setTimeout((function(){a.hide(),setTimeout((function(){c("#quickbook-wrapper").transition({opacity:1}),c(".secondary","#navbar").transition({opacity:1}),c(".mv-synopsis-wrapper").transition({opacity:1}),t.find(".__play").transition({scale:1,opacity:.75}),t.find(".__play")[0].style="",a.find(".body").html(""),a.detach()}),50)}),500),o=!1,c(document).unbind("keyup",r)),"synopsis"==pageName&&BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"YoutubeVideoClosed",videopath:"Videoclosed",videolabel:"undefined"!=typeof eventTitle?eventTitle:""})}}c([n,t]).each((function(){c(this).find(".__play").click((function(){if("undefined"!=typeof pageName&&"synopsis"==pageName?i=t.data("trailer-code"):(i=c(this).data("trailer-code"),c(this).parents(".banner-container")),"undefined"!=typeof fnPushDLShowcase)try{""!=c(this).attr("data-dl-data")&&fnPushDLShowcase(JSON.parse(c(this).attr("data-dl-data")))}catch(e){}l("show"),c(document).bind("keyup",r)}))}))},c(document).ready((function(){if("undefined"!=typeof pageName)switch(pageName){case"synopsis":c(".synopsis-banner").showcaseTrailer();break;default:c(".banner-container").showcaseTrailer()}}))})(jQuery),(function(c){var d={regionSearch:{regionName:[],regionCode:[],stringMatcher:function(e){return function(n,e){d.regionSearch.regionName=[],d.regionSearch.regionCode=[],substrRegex=new RegExp(n,"i");var i=new RegExp("\\b"+n.toUpperCase()+"\\w*\\b","gi"),a=["Mumbai","Mumbai : Western","Mumbai : South Central","Navi Mumbai","Kalyan","Ulhasnagar","National Capital Region (NCR)"],o=[];c.each(regionlst,(function(e,t){c.each(t,(function(e,t){(i=new RegExp("\\b"+n.toUpperCase()+"\\w*\\b","gi")).test(t.alias.toUpperCase())&&-1==c.inArray(t.alias,a)&&o.push(new Array(t.code,t.name))}))}));for(var t=0;t<regionalias.length;t++){for(var s=!1,r=0;r<regionalias[t].Alias.length;r++)if(i.test(regionalias[t].Alias[r].toUpperCase())){s=!0;break}s&&o.push(new Array(regionalias[t].code,regionalias[t].name))}(i.test("BOMBAY")||i.test("MUMBAI")||i.test("MUMBAI WESTERN")||i.test("Mumbai South Central")||i.test("NAVI MUMBAI")||i.test("KALYAN")||i.test("ULHASNAGAR"))&&o.push(new Array("MUMBAI","Mumbai")),(i.test("NATIONAL CAPITAL REGION")||i.test("NCR"))&&o.push(new Array("NCR","National Capital Region (NCR)")),i.test("BANGALORE")&&o.push(new Array("BANG","Bengaluru"));for(var l=0;l<o.length;l++)-1==d.regionSearch.regionName.indexOf(o[l][1])&&(d.regionSearch.regionName.push(o[l][1]),d.regionSearch.regionCode.push(o[l][0]));e(d.regionSearch.regionName)}},onSelection:function(e,n){var t=BMS.Storage.get({name:"lang",storage:"C"});if(""==t||"eng"==t){var i=n.trim(),a=d.regionSearch.regionName.indexOf(i);BMS.Region.fnSTopReg(d.regionSearch.regionCode[a],d.regionSearch.regionName[a])}else{var o="",s="";c.each(regionlst,(function(e,t){if(c.each(t,(function(e,t){if(t.name==n)return o=t.alias,s=t.code,!1})),0<o.length)return!1}));i=o.trim();0<=["Mumbai","Mumbai : Western","Mumbai : South Central","Navi Mumbai","Kalyan","Ulhasnagar"].indexOf(n)?(s="MUMBAI",i="Mumbai"):0<=["Bangalore","Bengaluru"].indexOf(n)&&(s="BANG",i="Bengaluru"),BMS.Region.fnSTopReg(s,i)}}}};c(document).ready((function(){c(".form-input.__input._default").typeaheadWrapper({dataSet:{source:d.regionSearch.stringMatcher(),limit:8},onResultSelection:d.regionSearch.onSelection}),c("#inp_RegionSearch.form-input._dos").typeaheadWrapper({dataSet:{source:d.regionSearch.stringMatcher(),limit:8},onResultSelection:d.regionSearch.onSelection})}))})(jQuery),(function(s){"namespace sumo";s.fn.SumoSelect=function(e){var o=s.extend({placeholder:"Select Here",csvDispCount:3,captionFormat:"{0} Selected",floatWidth:400,forceCustomRendering:!0,nativeOnDevice:["Android","BlackBerry","iPhone","iPad","iPod","Opera Mini","IEMobile","Silk"],outputAsCSV:!1,csvSepChar:",",okCancelInMulti:!1,triggerChangeCombined:!0,selectAll:!1,selectAlltext:"Select All"},e),t=this.each((function(){var a=this;!this.sumo&&s(this).is("select")&&(this.sumo={E:s(a),is_multi:s(a).attr("multiple"),select:"",caption:"",placeholder:"",optDiv:"",CaptionCont:"",is_floating:!1,is_opened:!1,mob:!1,Pstate:[],createElems:function(){var n=this;n.E.wrap('<div class="SumoSelect" tabindex="0">'),n.select=n.E.parent(),n.caption=s("<span></span>"),n.CaptionCont=s('<p class="CaptionCont"><label><i class="downChevron"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 500 500" enable-background="new 0 0 100 100" xml:space="preserve"><use xlink:href="/icons/common-icons.svg#icon-arrow-down-new"></use></svg></i></label></p>').addClass("SlectBox").attr("style",n.E.attr("style")).prepend(n.caption),n.select.append(n.CaptionCont),n.E.attr("disabled")&&n.select.addClass("disabled").removeAttr("tabindex"),o.outputAsCSV&&n.is_multi&&n.E.attr("name")&&(n.select.append(s('<input class="HEMANT123" type="hidden" />').attr("name",n.E.attr("name")).val(n.getSelStr())),n.E.removeAttr("name")),!n.isMobile()||o.forceCustomRendering?(n.E.hide(),n.optDiv=s('<div class="optWrapper">'),n.floatingList(),ul=s('<ul class="options">'),n.optDiv.append(ul),o.selectAll&&n.selAll(),s(n.E.children("option")).each((function(e,t){t=s(t),n.createLi(t)})),n.is_multi&&n.multiSelelect(),n.select.append(n.optDiv),n.basicEvents(),n.selAllState()):n.setNativeMobile()},createLi:function(e,t){return e.attr("value")||e.attr("value",e.val()),li=s('<li data-val="'+e.val()+'"><label>'+e.text()+"</label></li>"),this.is_multi&&li.prepend("<span><i></i></span>"),e[0].disabled&&(li=li.addClass("disabled")),this.onOptClick(li),e[0].selected&&li.addClass("selected"),e.attr("class")&&li.addClass(e.attr("class")),ul=this.optDiv.children("ul.options"),void 0===t?ul.append(li):ul.children("li").eq(t).before(li),li},getSelStr:function(){return sopt=[],this.E.children("option:selected").each((function(){sopt.push(s(this).val())})),sopt.join(o.csvSepChar)},multiSelelect:function(){var e=this;e.optDiv.addClass("multiple"),e.okbtn=s('<p class="btnOk">OK</p>').click((function(){o.triggerChangeCombined&&(changed=!1,e.E.children("option:selected").length!=e.Pstate.length?changed=!0:e.E.children("option:selected").each((function(){e.Pstate.indexOf(s(this).val())<0&&(changed=!0)})),changed&&(e.E.trigger("change").trigger("click"),e.setText())),e.hideOpts()})),e.cancelBtn=s('<p class="btnCancel">Cancel</p>').click((function(){e._cnbtn(),e.hideOpts()})),e.optDiv.append(s('<div class="MultiControls">').append(e.okbtn).append(e.cancelBtn))},_cnbtn:function(){for(this.E.children("option:selected").each((function(){this.selected=!1})),this.optDiv.find("li.selected").removeClass("selected"),i=0;i<this.Pstate.length;i++)this.E.children('option[value="'+this.Pstate[i]+'"]')[0].selected=!0,this.optDiv.find('li[data-val="'+this.Pstate[i]+'"]').addClass("selected");this.selAllState()},selAll:function(){var n=this;n.is_multi&&(n.chkAll=s("<i>"),n.selAll=s('<p class="select-all"><label>'+o.selectAlltext+"</label></p>").prepend(s("<span></span>").append(n.chkAll)),n.chkAll.on("click",(function(){n.selAll.toggleClass("selected"),n.optDiv.find("ul.options li").each((function(e,t){t=s(t),n.selAll.hasClass("selected")?t.hasClass("selected")||t.trigger("click"):t.hasClass("selected")&&t.trigger("click")}))})),n.optDiv.prepend(n.selAll))},selAllState:function(){if(o.selectAll){var n=0,i=0;this.optDiv.find("ul.options li").each((function(e,t){s(t).hasClass("selected")&&n++,s(t).hasClass("disabled")||i++})),n==i?this.selAll.removeClass("partial").addClass("selected"):0==n?this.selAll.removeClass("selected partial"):this.selAll.addClass("partial")}},showOpts:function(){var t=this;t.E.attr("disabled")||(t.is_opened=!0,t.optDiv.addClass("open"),t.optDiv.closest(".SumoSelect").find(".CaptionCont").find("span").addClass("_active"),t.optDiv.closest(".SumoSelect").find(".CaptionCont").find(".downChevron").addClass("rotate"),s(document).on("click.sumo",(function(e){if(!t.select.is(e.target)&&0===t.select.has(e.target).length){if(!t.is_opened)return;t.hideOpts(),t.is_multi&&o.okCancelInMulti&&t._cnbtn()}})),t.is_floating&&(H=t.optDiv.children("ul").outerHeight()+2,t.is_multi&&(H+=parseInt(t.optDiv.css("padding-bottom"))),t.optDiv.css("height",H)),t.is_multi&&(t.is_floating||o.okCancelInMulti)&&(t.Pstate=[],t.E.children("option:selected").each((function(){t.Pstate.push(s(this).val())}))))},hideOpts:function(){this.is_opened=!1,this.optDiv.removeClass("open").find("ul li.sel").removeClass("sel"),this.optDiv.closest(".SumoSelect").find(".CaptionCont").find("span").removeClass("_active"),this.optDiv.closest(".SumoSelect").find(".CaptionCont").find(".downChevron").removeClass("rotate"),s(document).off("click.sumo")},setOnOpen:function(){this.optDiv.find("ul li").eq(this.E[0].selectedIndex).addClass("sel"),this.showOpts()},nav:function(e){var t,n=this.optDiv.find("ul li.sel");if(this.is_opened&&n.length){if(!(t=e?n.prevAll("li:not(.disabled)"):n.nextAll("li:not(.disabled)")).length)return;n.removeClass("sel"),n=t.first().addClass("sel");var i=this.optDiv.find("ul"),a=i.scrollTop(),o=n.position().top+a;o>=a+i.height()-n.outerHeight()&&i.scrollTop(o-i.height()+n.outerHeight()),o<a&&i.scrollTop(o)}else this.setOnOpen()},basicEvents:function(){var t=this;t.CaptionCont.click((function(e){t.E.trigger("click"),t.is_opened?t.hideOpts():t.showOpts(),e.stopPropagation()})),t.select.on("keydown",(function(e){switch(e.which){case 38:t.nav(!0);break;case 40:t.nav(!1);break;case 32:case 13:t.is_opened?t.optDiv.find("ul li.sel").trigger("click"):t.setOnOpen();break;case 9:case 27:return t.is_multi&&o.okCancelInMulti&&t._cnbtn(),void t.hideOpts();default:return}e.preventDefault()})),s(window).on("resize.sumo",(function(){t.floatingList()}))},onOptClick:function(e){var t=this;e.click((function(){var e=s(this);e.hasClass("disabled")||(txt="",t.is_multi?(e.toggleClass("selected"),t.E.children('option[value="'+e.data("val")+'"]')[0].selected=e.hasClass("selected"),t.selAllState()):(e.parent().find("li.selected").removeClass("selected"),e.toggleClass("selected"),t.E.val(e.attr("data-val"))),t.is_multi&&o.triggerChangeCombined&&(t.is_floating||o.okCancelInMulti)||(t.setText(),t.E.trigger("change").trigger("click")),t.is_multi||t.hideOpts())}))},setText:function(){var e=this;if(e.placeholder="",e.is_multi){for(sels=e.E.children(":selected").not(":disabled"),i=0;i<sels.length;i++){if(i>=o.csvDispCount&&o.csvDispCount){e.placeholder=o.captionFormat.replace("{0}",sels.length);break}e.placeholder+=s(sels[i]).text()+", "}e.placeholder=e.placeholder.replace(/,([^,]*)$/,"$1")}else e.placeholder=e.E.children(":selected").not(":disabled").text();return is_placeholder=!1,e.placeholder||(is_placeholder=!0,e.placeholder=e.E.attr("placeholder"),e.placeholder||(e.placeholder=e.E.children("option:disabled:selected").text())),e.placeholder=e.placeholder?e.placeholder:o.placeholder,e.caption.text(e.placeholder),csvField=e.select.find("input.HEMANT123"),csvField.length&&csvField.val(e.getSelStr()),is_placeholder?e.caption.addClass("placeholder"):e.caption.removeClass("placeholder"),e.placeholder},isMobile:function(){for(var e=navigator.userAgent||navigator.vendor||window.opera,t=0;t<o.nativeOnDevice.length;t++)if(0<e.toString().toLowerCase().indexOf(o.nativeOnDevice[t].toLowerCase()))return o.nativeOnDevice[t];return!1},setNativeMobile:function(){var e=this;e.E.addClass("SelectClass"),e.mob=!0,e.E.change((function(){e.setText()}))},floatingList:function(){this.is_floating=s(window).width()<=o.floatWidth,this.optDiv.toggleClass("isFloating",this.is_floating),this.is_floating||this.optDiv.css("height",""),this.optDiv.toggleClass("okCancelInMulti",o.okCancelInMulti&&!this.is_floating)},vRange:function(e){if(opts=this.E.children("option"),opts.length<=e||e<0)throw"index out of bounds";return this},toggSel:function(e,t){var n=this.vRange(t);n.E.children("option")[t].disabled||(n.E.children("option")[t].selected=e,n.mob||n.optDiv.find("ul.options li").eq(t).toggleClass("selected",e),n.setText())},toggDis:function(e,t){var n=this.vRange(t);(n.E.children("option")[t].disabled=e)&&(n.E.children("option")[t].selected=!1),n.mob||n.optDiv.find("ul.options li").eq(t).toggleClass("disabled",e).removeClass("selected"),n.setText()},toggSumo:function(e){return this.enabled=e,this.select.toggleClass("disabled",e),e?(this.E.attr("disabled","disabled"),this.select.removeAttr("tabindex")):(this.E.removeAttr("disabled"),this.select.attr("tabindex","0")),this},toggSelAll:function(n){var i=this;i.E.find("option").each((function(e,t){i.E.find("option")[s(this).index()].disabled||(i.E.find("option")[s(this).index()].selected=n,i.mob||i.optDiv.find("ul.options li").eq(s(this).index()).toggleClass("selected",n),i.setText())})),!i.mob&&o.selectAll&&i.selAll.removeClass("partial").toggleClass("selected",n)},reload:function(){var e=this.unload();return s(e).SumoSelect(o)},unload:function(){return this.select.before(this.E),this.E.show(),o.outputAsCSV&&this.is_multi&&this.select.find("input.HEMANT123").length&&this.E.attr("name",this.select.find("input.HEMANT123").attr("name")),this.select.remove(),delete a.sumo,a},add:function(e,t,n){if(void 0===e)throw"No value to add";if(opts=this.E.children("option"),"number"==typeof t&&(n=t,t=e),void 0===t&&(t=e),opt=s("<option></option>").val(e).html(t),opts.length<n)throw"index out of bounds";return void 0===n||opts.length==n?(this.E.append(opt),this.mob||this.createLi(opt)):(opts.eq(n).before(opt),this.mob||this.createLi(opt,n)),a},remove:function(e){var t=this.vRange(e);t.E.children("option").eq(e).remove(),t.mob||t.optDiv.find("ul.options li").eq(e).remove(),t.setText()},selectItem:function(e){this.toggSel(!0,e)},unSelectItem:function(e){this.toggSel(!1,e)},selectAll:function(){this.toggSelAll(!0)},unSelectAll:function(){this.toggSelAll(!1)},disableItem:function(e){this.toggDis(!0,e)},enableItem:function(e){this.toggDis(!1,e)},enabled:!0,enable:function(){return this.toggSumo(!1)},disable:function(){return this.toggSumo(!0)},init:function(){return this.createElems(),this.setText(),this}},a.sumo.init())}));return 1==t.length?t[0]:t}})(jQuery),0<window.navigator.userAgent.indexOf("MSIE"))var use="svg";else var use="use";function ratingFuncDesktop(){$(".rating-stars").on("mouseenter",(function(e){var t=$(this).attr("data-review-id");void 0===t||""==t?(e.preventDefault(),e.stopPropagation(),$(".js-ratingSpan svg").on("mouseenter",(function(e){var t=$(this).parents(".rating-stars").attr("data-review-id");if(void 0===t||""==t){e.preventDefault(),e.stopPropagation();var n=$(this),i=n.parents(".rating-stars"),a=n.parents(".js-ratingSpan"),o=n.parents(".stars");o.nextAll().find(".js-ratingSpan").removeClass("active"),a.nextAll().removeClass("active"),o.prevAll().find(".js-ratingSpan").addClass("active"),a.prevAll().andSelf().addClass("active"),i.find(".js-ratingSpan").not("active").find(use).css({fill:"#e0e0e0"}),$(".__fivestar").length,i.find(".js-ratingSpan.active").find(use).css({fill:"#c9363c"});var s=a.data("value");i.siblings(".rate-o-meter").html(s),i.siblings(".rate-o-meter").attr("data-value",s)}else $(document).off("mouseleave",$(this))})),$(".js-ratingSpan svg").on("click",(function(e){var t=$(this).parents(".rating-stars").attr("data-review-id");if(void 0===t||""==t){e.preventDefault();var n=$(this),i=n.parents(".rating-stars"),a=n.parents(".js-ratingSpan"),o=n.parents(".stars");o.nextAll().find(".js-ratingSpan").removeClass("selected"),a.nextAll().removeClass("selected"),i.find(".js-ratingSpan").not("selected").find(use).css({fill:"#e0e0e0"}),$(".__fivestar").length,o.prevAll().find(".js-ratingSpan").addClass("selected").find(use).css({fill:"#c9363c"}),a.prevAll().andSelf().addClass("selected").find(use).css({fill:"#c9363c"});var s=a.data("value");i.siblings(".rate-o-meter").html(s),i.siblings(".rate-o-meter").attr("data-value",s),$(this).parents(".show-more-info").removeClass("showRating")}}))):$(document).off("mouseleave",$(this))})),$(".rating-stars").on("mouseleave",(function(e){var t=$(this).attr("data-review-id");if(void 0===t||""==t){e.preventDefault(),e.stopPropagation();var n=$(this),i=n.find(".js-ratingSpan.selected");n.find(".js-ratingSpan").not("selected").removeClass("active").find(use).css({fill:"#e0e0e0"}),$(".__fivestar").length,n.find(".js-ratingSpan.selected").find(use).css({fill:"#c9363c"});var a=$(i[i.length-1]).data("value");void 0!==a?(n.siblings(".rate-o-meter").html(a),n.siblings(".rate-o-meter").attr("data-value",a)):(n.siblings(".rate-o-meter").attr("data-value",0),n.siblings(".rate-o-meter").html("0.0"))}else $(document).off("mouseenter",$(this))}))}function ratingFuncMobile(){$(".rating-stars .js-ratingSpan svg").on("click",(function(e){var t=$(this).parents(".rating-stars").attr("data-review-id");if(void 0===t||""==t){e.preventDefault();var n=$(this),i=n.parents(".rating-stars"),a=n.parents(".js-ratingSpan"),o=n.parents(".stars");o.nextAll().find(".js-ratingSpan").removeClass("selected"),a.nextAll().removeClass("selected"),i.find(".js-ratingSpan").not("selected").find(use).css({fill:"#e0e0e0"}),0<$(".__fivestar").length?(n.find(".js-ratingSpan.selected").find(use).css({fill:"#cc3333"}),o.prevAll().find(".js-ratingSpan").addClass("selected").find(use).css({fill:"#cc3333"}),a.prevAll().andSelf().addClass("selected").find(use).css({fill:"#cc3333"})):(o.prevAll().find(".js-ratingSpan").addClass("selected").find(use).css({fill:"#f3c600"}),a.prevAll().andSelf().addClass("selected").find(use).css({fill:"#f3c600"}));var s=a.data("value");i.siblings(".rate-o-meter").html(s),i.siblings(".rate-o-meter").attr("data-value",s),$(this).parents(".movie-card").find(".show-more-info-overlay").trigger("tap")}}))}$(document).ready((function(){global.blnIsTouchScreen?ratingFuncMobile():ratingFuncDesktop(),$(".js-rating").click((function(){$(this).parents(".show-more-info").addClass("showRating")})),$(".poster-container").on("mouseleave",(function(e){e.preventDefault(),e.stopPropagation(),$(this).find(".show-more-info").removeClass("showRating")})),$(".ns-card-multiple .book-button").click((function(){var e=$(this);e.children(".__container").removeClass("opaqueOnHover"),e.parents(".card-container").addClass("showExperience"),e.children().html("Pick A Format"),e.addClass("button-false")})),$(".hideExperienceOnClick").click((function(){var e=$(this).parents(".card-container");e.removeClass("showExperience"),e.find(".book-button").children(".__container").addClass("opaqueOnHover").html("BOOK NOW"),e.find(".book-button").removeClass("button-false")})),global.blnIsTouchScreen&&($(".movie-card .more-info-button, .poster-container").on("tap",(function(e){e.stopPropagation(),$(this).parents(".movie-card").addClass("infoContainerIsActive")})),$(".movie-card .show-more-info-overlay").on("tap",(function(e){e.stopPropagation(),$(this).parents(".movie-card").removeClass("infoContainerIsActive"),$(this).parents(".movie-card").find(".show-more-info-container .show-more-info").removeClass("showRating")})));var e=$(".movie-card").find(".genre-list"),t=$(".ev-card").find(".tags");!(function(e,t){for(var n=0;n<e.length;n++)for(var i=0,a=0<$(e[n]).find(".__genre").length?$(e[n]).find(".__genre"):$(e[n]).find(".__tag"),o=0;o<a.length;o++){var s=$(a[o]).text().length;if(t<(i=s+i)){var r=$(a[o]).text(),l=r.slice(0,3)+"...";$(a[o]).text(l)}}})(e,24),(function(e,t){for(var n=0;n<e.length;n++){var i=0;genreItems=0<$(e[n]).find(".__genre").length?$(e[n]).find(".__genre"):$(e[n]).find(".__tag");for(var a=0;a<genreItems.length;a++)if(i=$(genreItems[a]).text().length,t<i){var o=$(genreItems[a]).text(),s=o.slice(0,8)+"...";$(genreItems[a]).text(s)}}})(t,20),$(".__day").click((function(e){e.preventDefault();var t=$(this),n=t.parents(".showtimes").find(".__details"),i=t.index();t.hasClass("_active")?t.siblings().addClass("_inactive").removeClass("_active"):(t.addClass("_active").removeClass("_inactive"),t.siblings().addClass("_inactive").removeClass("_active"),0==i?($(n[0]).addClass("_active").removeClass("_inactive"),$(n[1]).addClass("_inactive").removeClass("_active")):1==i&&($(n[1]).addClass("_active").removeClass("_inactive"),$(n[0]).addClass("_inactive").removeClass("_active")))}));var n=$(".ev-card").find(".__name a");$(".ev-card").find(".__location");function i(e,t,n){if(0<e.length)for(var i=0;i<e.length;i++){var a=$(e[i]).text().length;if(n<=a){var o=$(e[i]).text();o=(o=o.substr(0,n)).replace(/[.]*(\s?\w*)$/," ..."),$(e[i]).text(o),$(e[i]).text(o).addClass("resizedFont")}else a<n&&t<a&&$(e[i]).addClass("resizedFont")}}venueListName=$(".ve-card").find(".__name a"),venueListLocation=$(".ve-card").find(".__location"),movieListName=$(".movie-card").find(".__name a"),mamiEventTitle=$(".mami-event-card").find(".title"),i(n,30,60),i(n,30,60),i(venueListName,30,60),i(venueListLocation,40,80),i(movieListName,30,37),i(mamiEventTitle,40,50)})),(function(_){"use strict";_.fn.socialSharer=function(r){var l=function(e,s,t){var n;if(n=t&&t.isTemplate?e:b[e],!_.isEmptyObject(n)){var i,a,o,r,l,c=n.split("\n").join(""),d=/([$\^\\\/()|?+*\[\]{}.\-])/g;return t=t||{},r="{{}}".length,l=Math.ceil(r/2),a="{{}}".substr(0,l).replace(d,"\\$1"),o="{{}}".substr(l,r).replace(d,"\\$1")||a,i=new RegExp(a+"[^"+a+o+"]+"+o,"g"),c.replace(i,(function(e){var t,n=e.slice(l,-l),i=n.split("."),a=0,o=i.length;if(n in s)t=s[n];else for(t=s;a<o;a++){if(!(i[a]in t))return e;t=t[i[a]]}return t}))}},c=function(e,t){return e.replace(/{{url}}/g,encodeURIComponent(t.url)).replace(/{{title}}/g,encodeURIComponent(t.title)).replace(/{{description}}/g,encodeURIComponent(t.description)).replace(/{{media}}/g,encodeURIComponent(t.media)).replace(/{{fbAppId}}/g,encodeURIComponent(t.fbAppId)).replace(/{{via}}/g,encodeURIComponent(t.via))},d={pinterest:{url:"http://pinterest.com/pin/create/button/?url={{url}}&utm_source=pinterestshare&utm_medium=social&media={{media}}&description={{description}}",linkTitle:"Pinterest"},facebook:{url:"https://www.facebook.com/sharer/sharer.php?s=100&p[title]={{title}}&p[summary]={{description}}&p[url]={{url}}&utm_source=FBLIKE&fbrefresh=1&utm_medium=social&p[images][0]={{media}}",linkTitle:"Facebook"},twitter:{url:"https://twitter.com/share?url={{url}}&utm_source=twittershare&utm_medium=social&via={{via}}&text={{title}}",linkTitle:"Twitter"},linkedin:{url:"https://www.linkedin.com/shareArticle?mini=true&url={{url}}&utm_source=lkdnshare&title={{title}}&summary={{description}}+&source={{via}}&utm_medium=social",linkTitle:"Linked In"},facebookFeed:{url:"https://www.facebook.com/dialog/feed?app_id={{fbAppId}}&link={{url}}&utm_source=FBLIKE&utm_medium=social&fbrefresh=1&caption={{title}}&description={{description}}&picture={{media}}",linkTitle:"Facebook"},facebookShare:{url:"https://www.facebook.com/dialog/share?app_id={{fbAppId}}&display=popup&href={{url}}&utm_source=FBLIKE&utm_medium=social&fbrefresh=1&quote={{description}}",linkTitle:"Facebook"},whatsapp:{url:"whatsapp://send?text={{url}}&utm_source=whatsappshare&utm_medium=social",linkTitle:"Whatsapp"}},t="facebook",n="twitter",i="linkedin",e="pinterest",a="facebookFeed",o="facebookShare",s="whatsapp",u=_(document).find("title").text();r=r||{};var p,f,g,h,m,v={og:{title:_('meta[property="og:title"]'),url:_('meta[property="og:url"]'),description:_('meta[property="og:description"]'),media:_('meta[property="og:image"]'),siteName:_('meta[property="og:site_name"]')}};v.og.title.length&&(p=v.og.title.attr("content")),v.og.url.length&&(f=v.og.url.attr("content").replace("?utm_source=FBLIKE&fbrefresh=1","")),v.og.description.length&&(g=v.og.description.attr("content")),v.og.media.length&&(h=v.og.media.attr("content")),v.og.siteName.length&&(m=v.og.siteName.attr("content"));var S,y=_.extend({url:f||location.href,description:g||u,media:h||"",title:p,via:m||"BookMyShow",showCount:!1,showLinkTitle:!0,callback:function(){}},r.config);S=r.buttons&&r.buttons.length?r.buttons:[e,t,n];var M={},b={};b[e]='<svg class="social-sharer-svg svg-pinterest" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve" class="svg-pinterest"><use xlink:href="/icons/common-icons.svg#icon-pinterest-icon"></use></svg>',b[t]='<svg class="social-sharer-svg svg-facebook" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve" class="svg-facebook"><use xlink:href="/icons/common-icons.svg#icon-facebook-modal"></use></svg>',b[n]='<svg class="social-sharer-svg svg-twitter" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve" class="svg-facebook"><use xlink:href="/icons/common-icons.svg#icon-twitter-icon"></use></svg>',b[s]='<svg class="social-sharer-svg svg-whatsapp" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" enable-background="new 0 0 100 100" xml:space="preserve" class="svg-facebook"><use xlink:href="/icons/common-icons.svg#icon-whatsapp"></use></svg>',b[a]=b[t],b[o]=b[t];var w=_("<a>").attr("data-type","{{type}}").attr("data-url","{{url}}").attr("href","#").attr("title","{{title}}").addClass("share-item {{type}}");b.shareLink=w.wrap("<div>").parent().html();var B=_(this),C=function(){var s=_("<div>").addClass("social-share-container");S.forEach((function(e){var t={type:e,url:c(d[e].url,y)};t.title=!0===y.showLinkTitle?d[e].linkTitle:"";var n,i=l("shareLink",t),a=_(i);n=r.renderer&&r.renderer[e]&&"function"==typeof r.renderer[e].label?r.renderer[e].label.call(this):b[t.type];var o=_("<span>").addClass("__label").html(n);a.append(o),y.showCount&&M[e]&&0<M[e]&&(a.attr("data-tooltip",+M[e]+" Shares"),global.blnIsTouchScreen),s.append(a)}));_("a",s).click((function(e){BMS.Misc.fnPopup({url:_(this).data("url")})})),B.html(s)};if(!0===y.showCount){_.ajax({url:"/serv/getData",dataType:"json",type:"GET",data:{saurl:y.url,cmd:"SHARE"},success:function(e){M[t]=e.FBcnt,M[n]=e.TWtcnt,M[i]=e.Lincnt,C(),y.callback()},error:function(){y.showCount=!1,C()}})}else C();return B}})(jQuery),(function(r){r.extend(r,{placeholder:{browser_supported:function(){return void 0!==this._supported?this._supported:this._supported=!!("placeholder"in r('<input type="text">')[0])},shim:function(e){var t={color:"#888",cls:"placeholder",selector:"input[placeholder], textarea[placeholder]"};return r.extend(t,e),!this.browser_supported()&&r(t.selector)._placeholder_shim(t)}}}),r.extend(r.fn,{_placeholder_shim:function(o){function s(e){var t=r(e).offsetParent().offset(),n=r(e).offset();return{top:n.top-t.top,left:n.left-t.left,width:r(e).width()}}return this.each((function(){var e=r(this);if(e.is(":visible")){if(e.data("placeholder"))return e.data("placeholder").css(s(e)),!0;var t={};e.is("textarea")||"auto"==e.css("height")||(t={lineHeight:e.css("height"),whiteSpace:"nowrap"});var n="border-box"===e.css("box-sizing"),i=e.is("textarea"),a=r("<label />").text(e.attr("placeholder")).addClass(o.cls).css(r.extend({position:"absolute",display:"inline",float:"none",overflow:"hidden",textAlign:"left",color:o.color,cursor:"text",paddingTop:!i&&n?"0":e.css("padding-top"),paddingRight:e.css("padding-right"),paddingBottom:!i&&n?"0":e.css("padding-bottom"),paddingLeft:e.css("padding-left"),fontSize:e.css("font-size"),fontFamily:e.css("font-family"),fontStyle:e.css("font-style"),fontWeight:e.css("font-weight"),textTransform:e.css("text-transform"),backgroundColor:"transparent",zIndex:99},t)).css(s(this)).attr("for",this.id).data("target",e).click((function(){r(this).data("target").is(":disabled")||r(this).data("target").focus()})).insertBefore(this);e.data("placeholder",a).on("keydown",(function(){a.hide()})).on("blur change",(function(){a[e.val().length?"hide":"show"]()})).triggerHandler("blur"),r(window).one("resize",(function(){!(function e(t){var n=t.data("target");void 0!==n&&(t.css(s(n)),r(window).one("resize",(function(){e(t)})))})(a)}))}}))}})})(jQuery),jQuery(document).add(window).bind("ready load",(function(){jQuery.placeholder&&jQuery.placeholder.shim()})),(function(v){function e(){var e=i();e!==a&&(a=e,r.trigger("orientationchange"))}function S(e,t,n,i){var a=n.type;n.type=t,v.event.dispatch.call(e,n,i),n.type=a}v.attrFn=v.attrFn||{};var t=navigator.userAgent.toLowerCase(),n=-1<t.indexOf("chrome")&&(-1<t.indexOf("windows")||-1<t.indexOf("macintosh")||-1<t.indexOf("linux"))&&t.indexOf("mobile")<0&&t.indexOf("android")<0,y={tap_pixel_range:5,swipe_h_threshold:50,swipe_v_threshold:50,taphold_threshold:750,doubletap_int:500,touch_capable:"ontouchstart"in window&&!n,orientation_support:"orientation"in window&&"onorientationchange"in window,startevent:"ontouchstart"in window&&!n?"touchstart":"mousedown",endevent:"ontouchstart"in window&&!n?"touchend":"mouseup",moveevent:"ontouchstart"in window&&!n?"touchmove":"mousemove",tapevent:"ontouchstart"in window&&!n?"tap":"click",scrollevent:"ontouchstart"in window&&!n?"touchmove":"scroll",hold_timer:null,tap_timer:null};v.isTouchCapable=function(){return y.touch_capable},v.getStartEvent=function(){return y.startevent},v.getEndEvent=function(){return y.endevent},v.getMoveEvent=function(){return y.moveevent},v.getTapEvent=function(){return y.tapevent},v.getScrollEvent=function(){return y.scrollevent},v.each(["tapstart","tapend","tapmove","tap","tap2","tap3","tap4","singletap","doubletap","taphold","swipe","swipeup","swiperight","swipedown","swipeleft","swipeend","scrollstart","scrollend","orientationchange"],(function(e,t){v.fn[t]=function(e){return e?this.on(t,e):this.trigger(t)},v.attrFn[t]=!0})),v.event.special.tapstart={setup:function(){var i=this,a=v(i);a.on(y.startevent,(function(e){if(a.data("callee",arguments.callee),e.which&&1!==e.which)return!1;var t=e.originalEvent,n={position:{x:y.touch_capable?t.touches[0].screenX:e.screenX,y:y.touch_capable?t.touches[0].screenY:e.screenY},offset:{x:y.touch_capable?t.touches[0].pageX-t.touches[0].target.offsetLeft:e.offsetX,y:y.touch_capable?t.touches[0].pageY-t.touches[0].target.offsetTop:e.offsetY},time:Date.now(),target:e.target};return S(i,"tapstart",e,n),!0}))},remove:function(){v(this).off(y.startevent,v(this).data.callee)}},v.event.special.tapmove={setup:function(){var i=this,a=v(i);a.on(y.moveevent,(function(e){a.data("callee",arguments.callee);var t=e.originalEvent,n={position:{x:y.touch_capable?t.touches[0].screenX:e.screenX,y:y.touch_capable?t.touches[0].screenY:e.screenY},offset:{x:y.touch_capable?t.touches[0].pageX-t.touches[0].target.offsetLeft:e.offsetX,y:y.touch_capable?t.touches[0].pageY-t.touches[0].target.offsetTop:e.offsetY},time:Date.now(),target:e.target};return S(i,"tapmove",e,n),!0}))},remove:function(){v(this).off(y.moveevent,v(this).data.callee)}},v.event.special.tapend={setup:function(){var i=this,a=v(i);a.on(y.endevent,(function(e){a.data("callee",arguments.callee);var t=e.originalEvent,n={position:{x:y.touch_capable?t.changedTouches[0].screenX:e.screenX,y:y.touch_capable?t.changedTouches[0].screenY:e.screenY},offset:{x:y.touch_capable?t.changedTouches[0].pageX-t.changedTouches[0].target.offsetLeft:e.offsetX,y:y.touch_capable?t.changedTouches[0].pageY-t.changedTouches[0].target.offsetTop:e.offsetY},time:Date.now(),target:e.target};return S(i,"tapend",e,n),!0}))},remove:function(){v(this).off(y.endevent,v(this).data.callee)}},v.event.special.taphold={setup:function(){var u,p=this,f=v(p),g={x:0,y:0},h=0,m=0;f.on(y.startevent,(function(s){if(s.which&&1!==s.which)return!1;f.data("tapheld",!1),u=s.target;var r=s.originalEvent,l=Date.now(),c={x:y.touch_capable?r.touches[0].screenX:s.screenX,y:y.touch_capable?r.touches[0].screenY:s.screenY},d={x:y.touch_capable?r.touches[0].pageX-r.touches[0].target.offsetLeft:s.offsetX,y:y.touch_capable?r.touches[0].pageY-r.touches[0].target.offsetTop:s.offsetY};return g.x=s.originalEvent.targetTouches?s.originalEvent.targetTouches[0].pageX:s.pageX,g.y=s.originalEvent.targetTouches?s.originalEvent.targetTouches[0].pageY:s.pageY,h=g.x,m=g.y,y.hold_timer=window.setTimeout((function(){var e=g.x-h,t=g.y-m;if(s.target==u&&(g.x==h&&g.y==m||e>=-y.tap_pixel_range&&e<=y.tap_pixel_range&&t>=-y.tap_pixel_range&&t<=y.tap_pixel_range)){f.data("tapheld",!0);var n=Date.now(),i={x:y.touch_capable?r.touches[0].screenX:s.screenX,y:y.touch_capable?r.touches[0].screenY:s.screenY},a={x:y.touch_capable?r.touches[0].pageX-r.touches[0].target.offsetLeft:s.offsetX,y:y.touch_capable?r.touches[0].pageY-r.touches[0].target.offsetTop:s.offsetY};duration=n-l;var o={startTime:l,endTime:n,startPosition:c,startOffset:d,endPosition:i,endOffset:a,duration:duration,target:s.target};f.data("callee1",arguments.callee),S(p,"taphold",s,o)}}),y.taphold_threshold),!0})).on(y.endevent,(function(){f.data("callee2",arguments.callee),f.data("tapheld",!1),window.clearTimeout(y.hold_timer)})).on(y.moveevent,(function(e){f.data("callee3",arguments.callee),h=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX,m=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageY:e.pageY}))},remove:function(){v(this).off(y.startevent,v(this).data.callee1).off(y.endevent,v(this).data.callee2).off(y.moveevent,v(this).data.callee3)}},v.event.special.doubletap={setup:function(){var o,s,r,t,l=this,c=v(l),d=!1;c.on(y.startevent,(function(e){return(!e.which||1===e.which)&&(c.data("doubletapped",!1),o=e.target,c.data("callee1",arguments.callee),t=e.originalEvent,r={position:{x:y.touch_capable?t.touches[0].screenX:e.screenX,y:y.touch_capable?t.touches[0].screenY:e.screenY},offset:{x:y.touch_capable?t.touches[0].pageX-t.touches[0].target.offsetLeft:e.offsetX,y:y.touch_capable?t.touches[0].pageY-t.touches[0].target.offsetTop:e.offsetY},time:Date.now(),target:e.target},!0)})).on(y.endevent,(function(e){var t=Date.now(),n=t-(c.data("lastTouch")||t+1);if(window.clearTimeout(s),c.data("callee2",arguments.callee),n<y.doubletap_int&&e.target==o&&100<n){c.data("doubletapped",!0),window.clearTimeout(y.tap_timer);var i={position:{x:y.touch_capable?e.originalEvent.changedTouches[0].screenX:e.screenX,y:y.touch_capable?e.originalEvent.changedTouches[0].screenY:e.screenY},offset:{x:y.touch_capable?e.originalEvent.changedTouches[0].pageX-e.originalEvent.changedTouches[0].target.offsetLeft:e.offsetX,y:y.touch_capable?e.originalEvent.changedTouches[0].pageY-e.originalEvent.changedTouches[0].target.offsetTop:e.offsetY},time:Date.now(),target:e.target},a={firstTap:r,secondTap:i,interval:i.time-r.time};d||S(l,"doubletap",e,a),d=!0,window.setTimeout((function(){d=!1}),y.doubletap_int)}else c.data("lastTouch",t),s=window.setTimeout((function(){window.clearTimeout(s)}),y.doubletap_int,[e]);c.data("lastTouch",t)}))},remove:function(){v(this).off(y.startevent,v(this).data.callee1).off(y.endevent,v(this).data.callee2)}},v.event.special.singletap={setup:function(){var i=this,a=v(i),t=null,o=null,s={x:0,y:0};a.on(y.startevent,(function(e){return(!e.which||1===e.which)&&(o=Date.now(),t=e.target,a.data("callee1",arguments.callee),s.x=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX,s.y=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageY:e.pageY,!0)})).on(y.endevent,(function(n){a.data("callee2",arguments.callee),n.target==t&&(end_pos_x=n.originalEvent.changedTouches?n.originalEvent.changedTouches[0].pageX:n.pageX,end_pos_y=n.originalEvent.changedTouches?n.originalEvent.changedTouches[0].pageY:n.pageY,y.tap_timer=window.setTimeout((function(){if(!a.data("doubletapped")&&!a.data("tapheld")&&s.x==end_pos_x&&s.y==end_pos_y){var e=n.originalEvent,t={position:{x:y.touch_capable?e.changedTouches[0].screenX:n.screenX,y:y.touch_capable?e.changedTouches[0].screenY:n.screenY},offset:{x:y.touch_capable?e.changedTouches[0].pageX-e.changedTouches[0].target.offsetLeft:n.offsetX,y:y.touch_capable?e.changedTouches[0].pageY-e.changedTouches[0].target.offsetTop:n.offsetY},time:Date.now(),target:n.target};t.time-o<y.taphold_threshold&&S(i,"singletap",n,t)}}),y.doubletap_int))}))},remove:function(){v(this).off(y.startevent,v(this).data.callee1).off(y.endevent,v(this).data.callee2)}},v.event.special.tap={setup:function(){var d,u,p=this,f=v(p),g=!1,h=null,m={x:0,y:0};f.on(y.startevent,(function(e){return f.data("callee1",arguments.callee),(!e.which||1===e.which)&&(g=!0,m.x=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX,m.y=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageY:e.pageY,d=Date.now(),h=e.target,u=e.originalEvent.targetTouches?e.originalEvent.targetTouches:[e],!0)})).on(y.endevent,(function(e){f.data("callee2",arguments.callee);var t,n=e.originalEvent.targetTouches?e.originalEvent.changedTouches[0].pageX:e.pageX,i=e.originalEvent.targetTouches?e.originalEvent.changedTouches[0].pageY:e.pageY,a=m.x-n,o=m.y-i;if(h==e.target&&g&&Date.now()-d<y.taphold_threshold&&(m.x==n&&m.y==i||a>=-y.tap_pixel_range&&a<=y.tap_pixel_range&&o>=-y.tap_pixel_range&&o<=y.tap_pixel_range)){for(var s=e.originalEvent,r=[],l=0;l<u.length;l++){var c={position:{x:y.touch_capable?s.changedTouches[l].screenX:e.screenX,y:y.touch_capable?s.changedTouches[l].screenY:e.screenY},offset:{x:y.touch_capable?s.changedTouches[l].pageX-s.changedTouches[l].target.offsetLeft:e.offsetX,y:y.touch_capable?s.changedTouches[l].pageY-s.changedTouches[l].target.offsetTop:e.offsetY},time:Date.now(),target:e.target};r.push(c)}switch(u.length){case 1:t="tap";break;case 2:t="tap2";break;case 3:t="tap3";break;case 4:t="tap4"}S(p,t,e,r)}}))},remove:function(){v(this).off(y.startevent,v(this).data.callee1).off(y.endevent,v(this).data.callee2)}},v.event.special.swipe={setup:function(){var d,u=v(this),p=!1,f=!1,g={x:0,y:0},h={x:0,y:0};u.on(y.startevent,(function(e){(u=v(e.currentTarget)).data("callee1",arguments.callee),g.x=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX,g.y=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageY:e.pageY,h.x=g.x,h.y=g.y,p=!0;var t=e.originalEvent;d={position:{x:y.touch_capable?t.touches[0].screenX:e.screenX,y:y.touch_capable?t.touches[0].screenY:e.screenY},offset:{x:y.touch_capable?t.touches[0].pageX-t.touches[0].target.offsetLeft:e.offsetX,y:y.touch_capable?t.touches[0].pageY-t.touches[0].target.offsetTop:e.offsetY},time:Date.now(),target:e.target}})),u.on(y.moveevent,(function(e){(u=v(e.currentTarget)).data("callee2",arguments.callee),h.x=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX,h.y=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageY:e.pageY;var t,n=u.parent().data("xthreshold")?u.parent().data("xthreshold"):u.data("xthreshold"),i=u.parent().data("ythreshold")?u.parent().data("ythreshold"):u.data("ythreshold"),a=void 0!==n&&!1!==n&&parseInt(n)?parseInt(n):y.swipe_h_threshold,o=void 0!==i&&!1!==i&&parseInt(i)?parseInt(i):y.swipe_v_threshold;if(g.y>h.y&&g.y-h.y>o&&(t="swipeup"),g.x<h.x&&h.x-g.x>a&&(t="swiperight"),g.y<h.y&&h.y-g.y>o&&(t="swipedown"),g.x>h.x&&g.x-h.x>a&&(t="swipeleft"),null!=t&&p){g.x=0,g.y=0,h.x=0,h.y=0,p=!1;var s=e.originalEvent;endEvnt={position:{x:y.touch_capable?s.touches[0].screenX:e.screenX,y:y.touch_capable?s.touches[0].screenY:e.screenY},offset:{x:y.touch_capable?s.touches[0].pageX-s.touches[0].target.offsetLeft:e.offsetX,y:y.touch_capable?s.touches[0].pageY-s.touches[0].target.offsetTop:e.offsetY},time:Date.now(),target:e.target};var r=Math.abs(d.position.x-endEvnt.position.x),l=Math.abs(d.position.y-endEvnt.position.y),c={startEvnt:d,endEvnt:endEvnt,direction:t.replace("swipe",""),xAmount:r,yAmount:l,duration:endEvnt.time-d.time};f=!0,u.trigger("swipe",c).trigger(t,c)}})),u.on(y.endevent,(function(e){var t="";if((u=v(e.currentTarget)).data("callee3",arguments.callee),f){var n=u.data("xthreshold"),i=u.data("ythreshold"),a=void 0!==n&&!1!==n&&parseInt(n)?parseInt(n):y.swipe_h_threshold,o=void 0!==i&&!1!==i&&parseInt(i)?parseInt(i):y.swipe_v_threshold,s=e.originalEvent;endEvnt={position:{x:y.touch_capable?s.changedTouches[0].screenX:e.screenX,y:y.touch_capable?s.changedTouches[0].screenY:e.screenY},offset:{x:y.touch_capable?s.changedTouches[0].pageX-s.changedTouches[0].target.offsetLeft:e.offsetX,y:y.touch_capable?s.changedTouches[0].pageY-s.changedTouches[0].target.offsetTop:e.offsetY},time:Date.now(),target:e.target},d.position.y>endEvnt.position.y&&d.position.y-endEvnt.position.y>o&&(t="swipeup"),d.position.x<endEvnt.position.x&&endEvnt.position.x-d.position.x>a&&(t="swiperight"),d.position.y<endEvnt.position.y&&endEvnt.position.y-d.position.y>o&&(t="swipedown"),d.position.x>endEvnt.position.x&&d.position.x-endEvnt.position.x>a&&(t="swipeleft");var r=Math.abs(d.position.x-endEvnt.position.x),l=Math.abs(d.position.y-endEvnt.position.y),c={startEvnt:d,endEvnt:endEvnt,direction:t.replace("swipe",""),xAmount:r,yAmount:l,duration:endEvnt.time-d.time};u.trigger("swipeend",c)}f=p=!1}))},remove:function(){v(this).off(y.startevent,v(this).data.callee1).off(y.moveevent,v(this).data.callee2).off(y.endevent,v(this).data.callee3)}},v.event.special.scrollstart={setup:function(){function t(e,t){S(a,(n=t)?"scrollstart":"scrollend",e)}var n,i,a=this,o=v(a);o.on(y.scrollevent,(function(e){o.data("callee",arguments.callee),n||t(e,!0),clearTimeout(i),i=setTimeout((function(){t(e,!1)}),50)}))},remove:function(){v(this).off(y.scrollevent,v(this).data.callee)}};var i,a,o,s,r=v(window),l={0:!0,180:!0};if(y.orientation_support){var c=window.innerWidth||r.width(),d=window.innerHeight||r.height();o=d<c&&50<c-d,s=l[window.orientation],(o&&s||!o&&!s)&&(l={"-90":!0,90:!0})}v.event.special.orientationchange={setup:function(){return!y.orientation_support&&(a=i(),r.on("throttledresize",e),!0)},teardown:function(){return!y.orientation_support&&(r.off("throttledresize",e),!0)},add:function(e){var t=e.handler;e.handler=function(e){return e.orientation=i(),t.apply(this,arguments)}}},v.event.special.orientationchange.orientation=i=function(){var e=document.documentElement;return(y.orientation_support?l[window.orientation]:e&&e.clientWidth/e.clientHeight<1.1)?"portrait":"landscape"},v.event.special.throttledresize={setup:function(){v(this).on("resize",g)},teardown:function(){v(this).off("resize",g)}};var u,p,f,g=function(){p=Date.now(),250<=(f=p-h)?(h=p,v(this).trigger("throttledresize")):(u&&window.clearTimeout(u),u=window.setTimeout(e,250-f))},h=0;v.each({scrollend:"scrollstart",swipeup:"swipe",swiperight:"swipe",swipedown:"swipe",swipeleft:"swipe",swipeend:"swipe",tap2:"tap"},(function(e,t){v.event.special[e]={setup:function(){v(this).on(t,v.noop)}}}))})(jQuery),jQuery,window.mt={},mt.templates={},mt.templates.card='<aside class="mt-card-wrapper wow fadeIn fixed-card" data-wow-offset="-50" data-index="{{index}}">\t\t<div class="trailer-card">\t\t\t<div class="card-container">\t\t\t\t<div class="poster-container">\t\t\t\t\t<img class="__poster" src="{{ieposterURL}}" data-src="{{posterURL}}" data-error="{{fallbackURL}}">\t\t\t\t\t<div class="__overlay"></div>\t\t\t\t\t<div class="show-more-info">\t\t\t\t\t\t<div class="trailer-player">\t\t\t\t\t\t\t<span class="trailer-icon __icon" data-url="" data-eventcode="{{eventCode}}">\t\t\t\t\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">\t\t\t\t\t\t\t\t\t<use xlink:href="/icons/movies-icons.svg#icon-play"></use>\t\t\t\t\t\t\t\t</svg>\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t<span class="now-playing">\t\t\t\t\t\t\t\t<span class="__text">NOW PLAYING</span>\t\t\t\t\t\t\t</span>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t\t<div class="release-info {{datePillContainerClass}}">\t\t\t\t\t   <div class="date">\t\t\t\t\t   \t\t<div class="day">{{date}}</div>\t\t\t\t\t   \t\t<div class="month">{{month}}</div>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t\t<div class="stats-wrapper">\t\t\t\t\t\t<div class="stats">\t\t\t\t\t\t\t<div class="popularity">\t\t\t\t\t\t\t\t<div class="__likes {{noLikes}}">\t\t\t\t\t\t\t\t\t<div class="__thumbs">\t\t\t\t\t\t\t\t\t\t<svg class="thumb-like" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">\t\t\t\t\t\t\t\t\t\t\t<use xlink:href="/icons/movies-icons.svg#icon-like"></use>\t\t\t\t\t\t\t\t\t\t</svg>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t<div class="__percentage">{{wtsPerc}} %</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<div class="__votes">\t\t\t\t\t\t\t\t\t<div class="__count">{{totalVotes}}</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t\t<div class="detail">\t\t\t\t\t\t<div class="__title">\t\t\t\t\t\t\t<a class="__movie-link" href="{{url}}" target="_blank" title="{{title}}">{{title}}</a>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t</div>\t\t</div>\t</aside>',mt.templates.nscard='<aside class="mt-card-wrapper wow fadeIn fixed-card" data-wow-offset="-50" data-index="{{index}}">\t\t<div class=" trailer-card now-showing ">\t\t\t<div class="card-container">\t\t\t\t<div class="poster-container">\t\t\t\t\t<img class="__poster" src="{{ieposterURL}}" data-src="{{posterURL}}" data-error="{{fallbackURL}}">\t\t\t\t\t<div class="__overlay"></div>\t\t\t\t\t<div class="show-more-info">\t\t\t\t\t\t<div class="trailer-player">\t\t\t\t\t\t\t<span class="trailer-icon __icon" data-url="" data-eventcode="{{eventCode}}">\t\t\t\t\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">\t\t\t\t\t\t\t\t\t<use xlink:href="/icons/movies-icons.svg#icon-play"></use>\t\t\t\t\t\t\t\t</svg>\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t<span class="now-playing">\t\t\t\t\t\t\t\t<span class="__text">NOW PLAYING</span>\t\t\t\t\t\t\t</span>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t\t<div class="stats-wrapper">\t\t\t\t\t\t<div class="stats">\t\t\t\t\t\t\t<div class="popularity">\t\t\t\t\t\t\t\t<div class="__likes {{noLikes}}">\t\t\t\t\t\t\t\t\t<div class="__thumbs">\t\t\t\t\t\t\t\t\t\t<svg version="1.1" style="fill: #D6181F;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">\t\t\t\t\t\t\t\t\t\t\t<use xlink:href="/icons/movies-icons.svg#icon-heart"></use>\t\t\t\t\t\t\t\t\t\t</svg>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t<div class="__percentage">{{wtsPerc}} %</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<div class="__votes">\t\t\t\t\t\t\t\t\t<div class="__count">{{totalVotes}}</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t\t<div class="detail">\t\t\t\t\t\t<div class="__title">\t\t\t\t\t\t\t<a class="__movie-link" href="{{url}}" target="_blank" title="{{title}}">{{title}}</a>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t\t<div class="book-button">\t\t\t\t\t{{book_now_button}}\t\t\t    </div>\t\t\t</div>\t\t</div>\t</aside>',mt.templates.trailerScreen='<div class="mt-single-trailer">\t\t\t\t\t<div class="__bg"></div>\t\t\t\t\t<div class="mt-single-video" id="player">\t\t\t\t\t\t\x3c!--<iframe width="100%" height="100%" src="" id="youtube-iframe" frameborder="0" allowfullscreen autoplay="true"></iframe>--\x3e\t\t\t\t\t</div>\t\t\t\t\t<div class="mt-single-synopsis">\t\t\t\t\t\t<div class="mt-synopsis-wrapper">\t\t\t\t\t\t\t<div class="mt-synopsis-content">\t\t\t\t\t\t\t\t<div class="movie-info">\t\t\t\t\t\t\t\t\t<div class="movie-name">\t\t\t\t\t\t\t\t\t\t<div id="eventTitle" class="__name" itemprop="name" title="The Grey">The Grey</div>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t<div class="language-container">\t\t\t\t\t\t\t\t\t\t<span class="__language-tag">ENGLISH</span>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t<div class="genre-container">\t\t\t\t\t\t\t\t\t\t\x3c!--<span class="__genre-tag">DRAMA</span>\t\t\t\t\t\t\t\t\t\t<span class="__genre-tag">THRILLER</span>--\x3e\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<div class="mt-stats">\t\t\t\t\t\t\t\t\t<div class="thumbs-ups">\t\t\t\t\t\t\t\t\t\t<span class="__icon">\t\t\t\t\t\t\t\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">\t\t\t\t\t\t\t\t\t\t\t\t<use xlink:href="/icons/movies-icons.svg#icon-like"></use>\t\t\t\t\t\t\t\t\t\t\t</svg>\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t<span class="__text-container">\t\t\t\t\t\t\t\t\t\t\t<span class="__percentage">&nbsp;</span>\t\t\t\t\t\t\t\t\t\t\t<span class="__votes">&nbsp;</span>\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t<div class="release-date-container">\t\t\t\t\t\t\t\t\t\t<div class="calendar-detail">\t\t\t\t\t\t\t\t\t\t\t<span class="__icon">\t\t\t\t\t\t\t\t\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">\t\t\t\t\t\t\t\t\t\t\t\t\t<use xlink:href="/icons/movies-icons.svg#icon-date"></use>\t\t\t\t\t\t\t\t\t\t\t\t</svg>\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t\t<span class="__date">\t\t\t\t\t\t\t\t\t\t\t\t<span class="day-and-month">1 Sep</span>\t\t\t\t\t\t\t\t\t\t\t\t<span class="year">2015</span>\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<div class="summary-reviews">\t\t\t\t\t\t\t\t\t<div id="mt-summary" class="tab-content">\t\t\t\t\t\t\t\t\t\t<div class="synopsis">\t\t\t\t\t\t\t\t\t\t\t<blockquote>\t\t\t\t\t\t\t\t\t\t\t\tAfter their plane crashes in Alaska, six oil workers are led by a skilled huntsman to survival, but a pack of merciless wolves haunts their every step.\t\t\t\t\t\t\t\t\t\t\t</blockquote>\t\t\t\t\t\t\t\t\t\t\t<a href="#"><span class="__read-more">Read more</span></a>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<div class="wts-wrapper">\t\t\t\t\t\t\t\t\t<div class="wts-true" id="wts-true" event-code="" event-type="MT" event-wts="1">\t\t\t\t\t\t\t\t\t\t<div class="wts-container">\t\t\t\t\t\t\t\t\t\t\t<span class="__icon">\t\t\t\t\t\t\t\t\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">\t\t\t\t\t\t\t\t\t\t\t\t\t<use xlink:href="/icons/movies-icons.svg#icon-like"></use>\t\t\t\t\t\t\t\t\t\t\t\t</svg>\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t\t<span class="__text">WILL WATCH</span>\t\t\t\t\t\t\t\t\t\t\t<span class="__text count"></span>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t<div class="wts-undefined" id="wts-undefined" event-code="" event-type="MT" event-wts="-2">\t\t\t\t\t\t\t\t\t\t<div class="wts-container">\t\t\t\t\t\t\t\t\t\t\t<span class="__icon">\t\t\t\t\t\t\t\t\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">\t\t\t\t\t\t                            <use xlink:href="/icons/movies-icons.svg#icon-question"></use>\t\t\t\t\t\t                        </svg>\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t\t<span class="__text">MAYBE</span>\t\t\t\t\t\t\t\t\t\t\t<span class="__text un-count"></span>\t\t\t\t\t\t\t\t\t\t</div>                    \t\t\t\t</div>\t\t\t\t\t\t\t\t\t<div class="wts-false" id="wts-false" event-code="" event-type="MT" event-wts="-1">\t\t\t\t\t\t\t\t\t\t<div class="wts-container">\t\t\t\t\t\t\t\t\t\t\t<span class="__icon">\t\t\t\t\t\t\t\t\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">\t\t\t\t\t\t\t\t\t\t\t\t\t<use xlink:href="/icons/movies-icons.svg#icon-dislike"></use>\t\t\t\t\t\t\t\t\t\t\t\t</svg>\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t\t<span class="__text">WON\'T WATCH</span>\t\t\t\t\t\t\t\t\t\t\t<span class="__text count"></span>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<div class="btn-wrapper">\t\t\t\t\t\t\t\t\t<a id="trailerbuyBtn" class="btn _cuatro" href="">Book Now</a>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<div class="error-text">\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t</div>',(function(u){BMS.Misc.Trailers={};var e=window.mt.API,t=window.mt.NSAPI,p={},f={events:{},analyticsObj:{}},i={},g={},h={pill:{},modal:{},popular:{},fresh:{},genres:{},nowShowing:{},languages:{},trailerScreen:{},tabs:{}},o={popular:{},fresh:{},nowShowing:{},trailerScreen:{},languages:{}},n={modal:{show:{},hide:{}},toggle:{tabs:{},langs:{}},launchTrailer:{},stop:{},load:{}},a=BMS.Storage.get({name:"Rgn",key:"subregionDetails"}),m=(""!=a&&BMS.Misc.fnUrlName(JSON.parse(a).SubRegionName.toLowerCase()),""!=a?JSON.parse(a).SubRegionCode.toLowerCase():"");function s(e){return(e+"").replace(/^([a-z])|\s+([a-z])/g,(function(e){return e.toUpperCase()}))}p={sanitize:{date:function(e){return new Date(e.substr(0,4)+" "+e.substr(4,2)+" "+e.substr(6,2)+" "+e.substr(8,2)+":"+e.substr(10,2))},time:function(e){var t=e.getHours(),n=e.getMinutes(),i=!1;return 12<t?(t-=12,i=!0):12==t?i=!0:0==t&&(t=12),n<10&&(n="0"+n),t+":"+n+" "+(i=i?"pm":"am")},boolean:function(n){return"string"==typeof n?"Y"==n?n=!0:"N"==n?n=!1:n:("object"!=typeof n&&"array"!=typeof n||_.each(n,(function(e,t){n[t]=p.sanitize.boolean(e)})),n)}},venueName:function(e){return e.replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"").replace(/\s/g,"-").toLowerCase()+"/cinema"},render:function(e,s,t){e=e.split("\n").join("");var n,i,a,o,r,l=/([$\^\\\/()|?+*\[\]{}.\-])/g;return t=t||{},o="{{}}".length,r=Math.ceil(o/2),i="{{}}".substr(0,r).replace(l,"\\$1"),a="{{}}".substr(r,o).replace(l,"\\$1")||i,n=new RegExp(i+"[^"+i+a+"]+"+a,"g"),e.replace(n,(function(e){var t,n=e.slice(r,-r),i=n.split("."),a=0,o=i.length;if(n in s)t=s[n];else for(t=s;a<o;a++){if(!(i[a]in t))return e;t=t[i[a]]}return t}))},difference:function(e){for(var t=[],n=e.length-1,i=0;i<e.length-1;i++)if(i!=n)return parseInt(e[i])>parseInt(e[i+1])?t.push(parseInt(e[i])-parseInt(e[i+1])):t.push(parseInt(e[i+1])-parseInt(e[i]))},getLatLongDistance:function(e,t){var n=e.lat,i=t.lat,a=e.lng,o=t.lng,s=function(e){return e*(Math.PI/180)},r=s(i-n),l=s(o-a),c=Math.sin(r/2)*Math.sin(r/2)+Math.cos(s(n))*Math.cos(s(i))*Math.sin(l/2)*Math.sin(l/2);return(6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))).toFixed(2)},between:function(e,t){var n=Math.min.apply(Math,[e,t]),i=Math.max.apply(Math,[e,t]);return n<this&&this<i},getCatAvailability:function(e){(e=parseInt(e))<0&&(e=0);for(var t=0;t<availSeatRange.length;t++){if(void 0,n=availSeatRange[t].range.split("-"),e>=parseInt(n[0])&&e<=parseInt(n[1]))return availSeatRange[t]}var n},fnExtractVideoCode:function(e){return _.compact(e.split(/[\\?&]v=([^&#]*)/))[1]},calculateNumberOfCardsInRow:function(e,t){var n=Math.round(t.width()/e.width());return void 0,n}},u.extend(BMS.Misc.Trailers,{helpers:p,models:f,presenters:g,views:i,render:o,events:n,dom:h}),f.languages={},f.genres={},f.events.popular=function(){var n={};return _.each(e,(function(e,t){n[e.EventCode]={id:e.EventCode,title:e.EventName,language:[e.EventLanguage,"All Languages"],url:"/movies/"+e.EventURL+"/"+e.EventCode,trailerURL:e.TrailerURL,trailerUploadDate:e.trailerUploadDate,posterURL:global.strContentUrl+"/events/moviecard/"+e.EventCode+".jpg",fallbackURL:"",synopsis:e.EventSyno,wtsCount:e.wtsCount,dwtsCount:e.dwtsCount,wtsPerc:e.wtsPerc,visible:!0,enabled:!0,active:!1,buyBtn:!1,buyURL:""},f.languages[e.EventLanguage]=!0})),n},f.events.fresh=function(){var n={};return _.each(e,(function(e,t){n[e.EventCode]={id:e.EventCode,title:e.EventTitle,language:[e.EventLanguage,"All Languages"],url:"/movies/"+e.EventURL+"/"+e.EventCode,trailerURL:e.TrailerURL,trailerUploadDate:e.trailerUploadDate,posterURL:global.strContentUrl+"/events/moviecard/"+e.EventCode+".jpg",fallbackURL:"",synopsis:e.EventSyno,wtsCount:e.wtsCount,dwtsCount:e.dwtsCount,wtsPerc:e.wtsPerc,visible:!0,enabled:!0,active:!1,buyBtn:!1,buyURL:""},f.languages[e.EventLanguage]=!0})),n},f.events.nowShowing=function(){var n={};_.each(t,(function(e,t){n[e.EventCode]={id:e.EventCode,title:e.EventTitle,language:[e.EventLanguage,"All Languages"],url:"/movies/"+e.EventURL+"/"+e.EventCode,trailerURL:e.TrailerURL,trailerUploadDate:e.trailerUploadDate,posterURL:global.strContentUrl+"/events/moviecard/"+e.EventCode+".jpg",fallbackURL:"",synopsis:e.EventSyno,wtsCount:e.wtsCount,dwtsCount:e.dwtsCount,wtsPerc:e.wtsPerc,visible:!0,enabled:!0,active:!1,buyBtn:!0,buyURL:"/buytickets/"+e.EventCode},f.languages[e.EventLanguage]=!0}))},f.active={language:[],genre:[],pills:[],tab:"comingSoon",comingsoon:"fresh",isPlaying:!1,nextSibling:null},g.languages=function(){return _.uniq(_.union(BMS.Misc.Trailers.models.nsLanguageSequence,BMS.Misc.Trailers.models.cslanguageSequence))},g.genre=function(){var e=_.map(f.genres,(function(e,t){return t}));return e=_.sortBy(e,(function(e,t){return e})),e=_.uniq(e)},g.popular=function(){return void 0,_.sortBy(f.events.cs,(function(e){return-e.wtsCount}))},g.nowShowing=function(){return void 0,f.events.ns},g.fresh=function(){return void 0,_.sortBy(f.events.cs,(function(e){return-e.trailerUploadDate}))},g.toggleLanguage=function(e){var n=[];return"comingSoon"==f.active.tab?_.each(i[f.active.comingsoon],(function(e){e.visible=!1})):_.each(i[f.active.tab],(function(e){e.visible=!1})),void 0,_.each(e,(function(t,e){void 0,void 0,_.each(f.active.language,(function(e){-1<t.languageFilter.indexOf(e)&&(void 0,t.visible=!0,n.push(t))}))})),n},g.showtrailerScreen=function(){var e=u(this);void 0;var t=parseInt(u(window).width()/e.width()),n=e.siblings(":visible").addBack().index(e)+1,i=global.strContentUrl+"/events/showcasesynopsis/"+e.find(".trailer-icon").attr("data-eventcode")+".jpg";for(h.trailerScreen.find(".__bg").css({"background-image":"url("+i+")"}),n%t==0&&n--;n%t!=0;)n--;n<0&&(n=0);var a=e.siblings(":visible").addBack().eq(n);a.before(h.trailerScreen);var o=u(window).height()-(e.find(".trailer-card").height()+u(".modal-header","#mt-wrapper").height()+80);o<400&&(o=420),h.trailerScreen.height(o),a.parents(".fixed-wrapper").scrollTop(a.parents(".fixed-wrapper").scrollTop()+h.trailerScreen.offset().top-(u(".modal-header","#mt-wrapper").height()+20)),f.active.isPlaying=!0},g.toggleGenre=function(e){var n=[];return"comingSoon"==f.active.tab?_.each(i[f.active.comingsoon],(function(e){e.visible=!1})):_.each(i[f.active.tab],(function(e){e.visible=!1})),_.each(e,(function(t,e){_.each(f.active.genre,(function(e){-1<t.genreFilter.indexOf(e)&&(t.visible=!0,n.push(t))}))})),n},g.toggleFilters=function(){var e=[];e="comingSoon"==f.active.tab?i[f.active.comingsoon]:i[f.active.tab],0!=f.active.language.length&&(e=g.toggleLanguage(e)),0!=f.active.genre.length&&(e=g.toggleGenre(e)),0==f.active.genre.length&&0==f.active.language.length&&_.each(e,(function(e){e.visible=!0})),f.active.card_models=e,"comingSoon"==f.active.tab?o[f.active.comingsoon](e):o[f.active.tab](e),wow.scrollHandler()},g.clearFilters=function(){u.each(h.languages.language,(function(e,t){t.find("input").is(":checked")&&t.find("input").prop("checked",!1)})),u.each(h.genres.genre,(function(e,t){t.find("input").is(":checked")&&t.find("input").prop("checked",!1)})),f.active.genre=[],f.active.language=[]},g.trailerIconClick=function(e){var t=u(this).parents(".mt-card-wrapper");o.trailerIconClick.call(t[0],e)},g.renderPills=function(){o.renderPills()},g.setUserInterest=function(e,t,n,i){try{BMS.Storage.isset({name:"ld"})?g.sendUserVote(e,t,n,i):(BMS.SignIn.fnSignIn(!0),null==global.SignInCallBack&&(global.SignInCallBack=[]),global.SignInCallBack.push((function(){g.sendUserVote(e,t,n,i)})))}catch(i){void 0}},g.sendUserVote=function(e,t,n,i){BMS.Misc.fnAjax({url:"/serv/getData.bms",dataType:"json",data:{cmd:"SETINTEREST",eid:e,intId:t,etype:n},success:function(e){if(g.updateUserInterest(e,i),e.data)BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"Want to see",{ProductID:f.analyticsObj.ProductID,"Event Type":f.analyticsObj["Event Type"],"Event Name":f.analyticsObj["Event Name"],Language:f.analyticsObj.Language,Genre:f.analyticsObj.Genre,Choice:1==f.analyticsObj.Choice?"Yes":"No",Appcode:global.strAppCode});else{var t=e.error.text;u(".error-text").text(t).addClass("_occur");window.setTimeout((function(){u(".error-text").text(t).removeClass("_occur")}),3e3)}},error:function(e,t,n){void 0}})},g.updateUserInterest=function(e,t){if(""!=e.data){var n=e.data.EventInterest.wtsCount,i=e.data.EventInterest.dwtsCount,a=e.data.EventInterest.totCount,o=e.data.EventInterest.maybeCount,s="#"+t.currentTarget.id+" .wts-container";u(s).addClass("_active"),u("#wts-true .__text.count").text("("+n+")"),u("#wts-false  .__text.count").text("("+i+")"),u("#wts-undefined .__text.un-count").text("("+o+")"),u(".like-rating .__votes").text(a+" votes")}else{var r=e.error.text;u(".error-text").text(r).addClass("_occur");window.setTimeout((function(){u(".error-text").text(r).removeClass("_occur")}),3e3)}},g.togglePills=function(e){var t=u(e.currentTarget),n=t.attr("data-value");u('input[value="'+n+'"]').prop("checked",!1),f.active.language=_.without(f.active.language,n),f.active.genre=_.without(f.active.genre,n),f.active.pills=_.without(f.active.pills,n),g.toggleFilters(),t.remove()},g.clearPills=function(){h.pill.container&&(h.pill.container.html(""),f.active.pills=[])},g.resetView=function(){u(".trailer-card").removeClass("_active"),h.trailerScreen.find(".error-text").removeClass("_occur"),h.trailerScreen.find(".wts-container").removeClass("_active"),h.trailerScreen.detach()},g.clearContainers=function(){h.popular.container&&h.popular.container.html(""),h.fresh.container&&h.fresh.container.html(""),h.nowShowing.container&&h.nowShowing.container.html(""),h.popular={},h.fresh={},h.nowShowing={}},g.setSelectText=function(){h.tabs[f.active.tab].addClass("_active"),h.tabs[f.active.tab].siblings().removeClass("_active"),"popular"==f.active.comingsoon&&u(".__right-pf-filters .__text").html("Popular"),"fresh"==f.active.comingsoon&&u(".__right-pf-filters .__text").html("Fresh")},g.initializePlayer=function(){window.YT&&(h.player=new YT.Player("player",{height:"100%",width:"100%",events:{onReady:n.onPlayerReady,onStateChange:n.onPlayerStateChange}}))},g.resetTrailerScreen=function(){f.active.isPlaying&&(h.trailerScreen.detach(),u(".trailer-card","#mt-wrapper").removeClass("_active"),f.active.isPlaying=!1)},o.popular=function(e){e||(e=i.popular=g.popular()),h.tabs.popular.siblings().removeClass("_active"),h.tabs.popular.addClass("_active"),h.popular.container?(h.popular.container.show(),h.popular.container.siblings().hide(),u.each(h.popular.cards,(function(e,t){t.addClass("none")})),_.each(e,(function(n,e){n.visible&&u.each(h.popular.cards,(function(e,t){u(t).find(".trailer-icon.__icon").attr("data-eventcode")==n.id&&t.removeClass("none")}))}))):(h.popular.container=u('<div class="popular-wrapper">'),h.popular.container.show(),h.popular.cards=[],_.each(e,(function(e,t){var n,i=[];1==e.isTentative?((i=(n=e.releaseDate.split(", "))[0].split(" "))[0]=i[1],i[1]=n[1]):i=(n=e.releaseDate.split(", "))[0].split(" ");h.popular.cards.push(u(p.render(mt.templates.card,{title:e.title,url:e.url,eventCode:e.id,date:i[0],month:i[1],posterURL:1==global.blnIsIE?"":e.posterURL,ieposterURL:1==global.blnIsIE?e.posterURL:"",fallbackURL:e.fallbackURL,index:e.card_index,wts:e.wtsCount+" | "+e.dwtsCount+" | "+e.wtsPerc,totalVotes:e.wtsCount+e.dwtsCount?e.wtsCount+e.dwtsCount+" votes":" ",noLikes:e.wtsPerc?" ":"no-likes",wtsPerc:e.wtsPerc?e.wtsPerc:" "})))})),h.popular.container.append(h.popular.cards),u(".mt-overflow-wrapper").on("click",".show-more-info",n.click.trailerIconClick),wow.scrollHandler(),u(".mt-overflow-wrapper","#mt-wrapper").append(h.popular.container),h.popular.container.siblings().hide())},o.comingSoon=function(){o[f.active.comingsoon]()},o.nowShowing=function(e){e||(e=i.nowShowing=g.nowShowing()),h.nowShowing.container?(h.nowShowing.container.show(),h.nowShowing.container.siblings().hide(),u.each(h.nowShowing.cards,(function(e,t){t.addClass("none")})),_.each(e,(function(n,e){n.visible&&u.each(h.nowShowing.cards,(function(e,t){u(t).find(".trailer-icon.__icon").attr("data-eventcode")==n.id&&t.removeClass("none")}))}))):(h.nowShowing.container=u('<div class="nowshowing-wrapper">'),h.nowShowing.container.show(),h.nowShowing.cards=[],_.each(e,(function(e,t){if(0!=e.avgRating)var n=e.avgRating,i=e.totalCount,a="nscard";else n=e.wtsPerc,i=e.wtsCount+e.dwtsCount,a="nscard";var o=BMS.Storage.get({name:"Rgn",key:"text",storage:"C"}),s=BMS.Storage.get({name:"Rgn",key:"Code",storage:"C"});o=BMS.Misc.fnUrlName(o);var r="/buytickets/"+BMS.Misc.fnUrlName(e.title.toLowerCase())+"-"+o.toLowerCase()+"/movie-"+(""!=m?m.toLowerCase():s.toLowerCase())+"-"+e.id+"-MT";h.nowShowing.cards.push(u(p.render(mt.templates[a],{title:e.title,url:e.url,eventCode:e.id,posterURL:1==global.blnIsIE?"":e.posterURL,ieposterURL:1==global.blnIsIE?e.posterURL:"",fallbackURL:e.fallbackURL,index:e.card_index,wts:e.wtsCount+" | "+e.dwtsCount+" | "+e.wtsPerc,totalVotes:i?i+" votes":" ",noLikes:0!=n?" ":"no-likes",wtsPerc:n||" ",book_now_button:'<a href="'+r+'" ><div class="__container">BOOK NOW</div></a>',datePillContainerClass:"_none"})))})),h.nowShowing.container.append(h.nowShowing.cards),u(".mt-overflow-wrapper").on("click",".show-more-info",n.click.trailerIconClick),wow.scrollHandler(),u(".mt-overflow-wrapper","#mt-wrapper").append(h.nowShowing.container),h.nowShowing.container.siblings().hide())},o.fresh=function(e){e||(e=i.fresh=g.fresh()),h.tabs.fresh.siblings().removeClass("_active"),h.tabs.fresh.addClass("_active"),h.fresh.container?(h.fresh.container.show(),h.fresh.container.siblings().hide(),u.each(h.fresh.cards,(function(e,t){t.addClass("none")})),_.each(e,(function(n,e){n.visible&&u.each(h.fresh.cards,(function(e,t){u(t).find(".trailer-icon.__icon").attr("data-eventcode")==n.id&&t.removeClass("none")}))}))):(h.fresh.container=u('<div class="fresh-wrapper">'),h.fresh.cards=[],h.fresh.container.show(),_.each(e,(function(e,t){var n,i=[];1==e.isTentative?((i=(n=e.releaseDate.split(", "))[0].split(" "))[0]=i[1],i[1]=n[1]):i=(n=e.releaseDate.split(", "))[0].split(" ");h.fresh.cards.push(u(p.render(mt.templates.card,{title:e.title,url:e.url,eventCode:e.id,date:i[0],month:i[1],posterURL:e.posterURL,fallbackURL:e.fallbackURL,index:t+1,wts:e.wtsCount+" | "+e.dwtsCount+" | "+e.wtsPerc,totalVotes:e.wtsCount+e.dwtsCount?e.wtsCount+e.dwtsCount+" votes":" ",noLikes:e.wtsPerc?" ":"no-likes",wtsPerc:e.wtsPerc?e.wtsPerc:" "})))})),h.fresh.container.append(h.fresh.cards),u(".mt-overflow-wrapper").on("click",".show-more-info",n.click.trailerIconClick),wow.scrollHandler(),u(".mt-overflow-wrapper","#mt-wrapper").append(h.fresh.container),h.fresh.container.siblings().hide())},o.languages=function(){i.languages||(i.languages=g.languages()),h.languages.select?h.languages.select.val(f.active.language):(h.languages.select=u('<ul class="mt-languages">'),h.languages.language=[],_.each(i.languages,(function(e){h.languages.language.push(u('<li class="list"><input type="checkbox" id="'+e+'" value="'+e+'"><label for="'+e+'"><span class="__tick"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><use xlink:href="/icons/common-icons.svg#icon-tick"></use></svg></span>'+e+"</label></li>"))})),h.languages.select.append(h.languages.language),u(".__right-lang-filters").append(u('<div class="language-wrapper">').html(h.languages.select)),h.languages.select.find(".list input").on("click",n.click.toggleFilters))},o.genre=function(){i.genre||(i.genres=g.genre()),h.genres.select||(h.genres.select=u('<ul class="mt-genres">'),h.genres.genre=[],_.each(i.genres,(function(e){h.genres.genre.push(u('<li class="list"><input type="checkbox" id="'+e+'" value="'+e+'"><label for="'+e+'"><span class="__tick"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><use xlink:href="/icons/common-icons.svg#icon-tick"></use></svg></span>'+e+"</label></li>"))})),h.genres.select.append(h.genres.genre),u(".__right-gen-filters").append(u('<div class="genre-wrapper">').html(h.genres.select)),h.genres.select.find(".list input").on("click",n.click.toggleFilters))},o.renderPills=function(){h.pill.container?(h.pill.pills=[],h.pill.pills.push('<span class="__applied-text">Applied Filters: </span>'),_.each(f.active.pills,(function(e){h.pill.pills.push(u('<span class="__selc-pills" data-value="'+e+'">'+e+'<span class="__rm-filter"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><use xlink:href="/icons/common-icons.svg#icon-cancel"></use></svg></span></span>'))})),h.pill.container.html(h.pill.pills)):(h.pill.container=u('<div class="mt-pills">'),h.pill.pills=[],h.pill.pills.push('<span class="__applied-text">Applied Filters: </span>'),_.each(f.active.pills,(function(e){h.pill.pills.push(u('<span class="__selc-pills" data-value="'+e+'">'+e+'<span class="__rm-filter"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><use xlink:href="/icons/common-icons.svg#icon-cancel"></use></svg></span></span>'))})),h.pill.container.html(h.pill.pills),u("#mt-wrapper .modal-header").append(u('<div class="__selected-filters">').html(h.pill.container))),u(".__selc-pills").on("click",n.click.togglePills)},o.trailerIconClick=function(e){if(g.resetView(),u(this).find(".trailer-card").addClass("_active"),"nowShowing"==f.active.tab)var t=f.events.ns[u(this).find(".trailer-icon").attr("data-eventcode")];else t=f.events.cs[u(this).find(".trailer-icon").attr("data-eventcode")];var n=p.fnExtractVideoCode(t.trailerURL);h.trailerScreen.find("#youtube-iframe").attr("src","https://www.youtube.com/embed/"+n+"?autoplay=1"),h.trailerScreen.find("#eventTitle").attr("title",t.title).html(t.title),h.trailerScreen.find(".synopsis blockquote").html(t.synopsis),h.trailerScreen.find(".language-container .__language-tag").html(t.language[0]);var i=BMS.Misc.fnGVal({key:"text",data:BMS.Storage.get({name:"Rgn"})}).toLowerCase(),a=BMS.Misc.fnGVal({key:"Code",data:BMS.Storage.get({name:"Rgn"})}).toLowerCase(),o=""!=(i=BMS.Misc.fnUrlName(i))?"/"+i+t.url:"/"+t.url;h.trailerScreen.find(".synopsis .__read-more").parent().attr("href",o),"1"==t.isTentative?h.trailerScreen.find(".release-date-container .__date .day-and-month").html(t.releaseDate.split(",")[0].split(" ")[1]):h.trailerScreen.find(".release-date-container .__date .day-and-month").html(t.releaseDate.split(",")[0]);var s="/buytickets/"+BMS.Misc.fnUrlName(t.title.toLowerCase())+"-"+i.toLowerCase()+"/movie-"+(""!=m?m.toLowerCase():a.toLowerCase())+"-"+t.id+"-MT";"nowShowing"==f.active.tab?(h.trailerScreen.find(".wts-wrapper").hide(),h.trailerScreen.find(".btn-wrapper").children("a").show().attr("href",s)):(h.trailerScreen.find(".wts-wrapper").show(),h.trailerScreen.find(".btn-wrapper").children("a").hide().attr("href","")),null!=t.wtsCount&&h.trailerScreen.find("#wts-true .__text.count").html("("+t.wtsCount+")"),null!=t.dwtsCount&&h.trailerScreen.find("#wts-false .__text.count").html("("+t.dwtsCount+")"),null!=t.maybeCount&&h.trailerScreen.find("#wts-undefined .__text.un-count").html("("+t.maybeCount+")");for(var r=t.genre.split("|"),l="",c=0,d=r.length;c<d;c++)l+='<span class="__genre-tag">'+r[c].toUpperCase()+"</span>";h.trailerScreen.find(".thumbs-ups .__icon").hide(),0!=t.avgRating?(h.trailerScreen.find(".thumbs-ups .__percentage").html(t.avgRating+"%"),h.trailerScreen.find(".__votes").html(t.totalCount+" votes"),h.trailerScreen.find(".thumbs-ups .__icon").show()):0!=t.wtsPerc&&(h.trailerScreen.find(".thumbs-ups .__percentage").html(t.wtsPerc+"%"),h.trailerScreen.find(".__votes").html(t.csCount+" votes"),h.trailerScreen.find(".thumbs-ups .__icon").show()),h.trailerScreen.find(".genre-container").html(l),h.trailerScreen.find("#wts-true").attr("event-code",t.id),h.trailerScreen.find("#wts-false").attr("event-code",t.id),h.trailerScreen.find("#wts-undefined").attr("event-code",t.id),h.trailerScreen.find(".release-date-container .__date .year").html(t.releaseDate.split(",")[1]),g.showtrailerScreen.call(this),g.initializePlayer(),g.playVideo=function(e){e.target.loadVideoById(n,0,"default")},f.analyticsObj.ProductID=t.id,f.analyticsObj["Event Type"]="MT",f.analyticsObj["Event Name"]=t.title,f.analyticsObj.Language=t.language[0],f.analyticsObj.Genre=t.genre.split("|").join(","),f.analyticsObj.Appcode=global.strAppCode,void 0,BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"Viewed trailer",{ProductID:t.id,"Event Type":"MT","Event Name":t.title,Language:t.dataLanguage,Genre:t.genre.split("|").join(","),"Percentage watched":"","Cast and Crew":"","Event Group":t.eventGroup,Page:"Movie Trailers Popup - "+("undefined"!=typeof pageName?pageName:""),Appcode:global.strAppCode})},o.selectBoxText=function(){0!=f.active.language.length?u(".__right-lang-filters .__text").html(f.active.language.join(",")):u(".__right-lang-filters .__text").html("All Languages"),0!=f.active.genre.length?u(".__right-gen-filters .__text").html(f.active.genre.join(",")):u(".__right-gen-filters .__text").html("All Genres")},o.resetCards=function(){h.popular.container&&h.popular.container.html(""),h.fresh.container&&h.fresh.container.html("")},n.click={},n.keypress={},n.click.toggleLanguage=function(){var e=u(this).val();g.toggleLanguage(e)},n.click.toggleGenre=function(){u(this).val()},n.click.toggleFilters=function(e){var t=u(e.currentTarget).parent().parent(),n=u(e.currentTarget);g.resetTrailerScreen(),"mt-languages"==t.attr("class")?n.is(":checked")?(f.active.language.push(n.val()),f.active.pills.push(n.val())):(f.active.language=_.without(f.active.language,n.val()),f.active.pills=_.without(f.active.pills,n.val())):"mt-genres"==t.attr("class")&&(n.is(":checked")?(f.active.genre.push(n.val()),f.active.pills.push(n.val())):(f.active.genre=_.without(f.active.genre,n.val()),f.active.pills=_.without(f.active.pills,n.val()))),o.selectBoxText(),o.renderPills(),g.toggleFilters(),BMS.Misc.fnPushEventDataToAnalytics(["WR","GA"],"",{},{event:"Trailer Popup",page:"Trailers Page",section:s(u(".mt-filters").find("span._active").html()),"Sort by":u(".__right-pf-filters .__text").html(),Language:BMS.Misc.Trailers.models.active.language.join(","),Genre:BMS.Misc.Trailers.models.active.genre.join(","),Appcode:global.strAppCode})},n.click.togglePills=function(e){g.resetTrailerScreen(),g.togglePills(e),o.selectBoxText()},n.click.popularTab=function(e){f.active.tab="popular",f.active.comingsoon=f.active.tab,g.resetTrailerScreen(),g.setSelectText(),u(".__selected-filters,.__right-lang-filters,.__right-gen-filters,.__right-pf-filters").show(),o.popular(),g.toggleFilters(),BMS.Misc.fnPushEventDataToAnalytics(["WR","GA"],"",{},{event:"Trailer Popup",page:"Trailers Page",section:s(u(".mt-filters").find("span._active").html()),"Sort by":u(".__right-pf-filters .__text").html(),Language:BMS.Misc.Trailers.models.active.language.join(","),Genre:BMS.Misc.Trailers.models.active.genre.join(","),Appcode:global.strAppCode})},n.click.comingSoonTab=function(e){f.active.tab=f.active.comingsoon,h.tabs.comingSoon.siblings().removeClass("_active"),h.tabs.comingSoon.addClass("_active"),g.setSelectText(),g.resetTrailerScreen(),u(".__selected-filters,.__right-lang-filters,.__right-gen-filters,.__right-pf-filters").show(),g.toggleFilters(),BMS.Misc.fnPushEventDataToAnalytics(["WR","GA"],"",{},{event:"Trailer Popup",page:"Trailers Page",section:s(u(".mt-filters").find("span._active").html()),"Sort by":u(".__right-pf-filters .__text").html(),Language:BMS.Misc.Trailers.models.active.language.join(","),Genre:BMS.Misc.Trailers.models.active.genre.join(","),Appcode:global.strAppCode})},n.click.freshTab=function(e){f.active.tab="fresh",f.active.comingsoon=f.active.tab,g.setSelectText(),g.resetTrailerScreen(),u(".__right-pf-filters .__text").html("Fresh"),o.fresh(),u(".__selected-filters,.__right-lang-filters,.__right-gen-filters,.__right-pf-filters").show(),g.toggleFilters(),BMS.Misc.fnPushEventDataToAnalytics(["WR","GA"],"",{},{event:"Trailer Popup",page:"Trailers Page",section:s(u(".mt-filters").find("span._active").html()),"Sort by":u(".__right-pf-filters .__text").html(),Language:BMS.Misc.Trailers.models.active.language.join(","),Genre:BMS.Misc.Trailers.models.active.genre.join(","),Appcode:global.strAppCode})},n.click.nowShowingTab=function(e){f.active.tab="nowShowing",h.tabs.nowShowing.siblings().removeClass("_active"),h.tabs.nowShowing.addClass("_active"),g.resetTrailerScreen(),u(".__right-pf-filters").hide(),o.nowShowing(),g.toggleFilters(),BMS.Misc.fnPushEventDataToAnalytics(["WR","GA"],"",{},{event:"Trailer Popup",page:"Trailers Page",section:s(u(".mt-filters").find("span._active").html()),"Sort by":"",Language:BMS.Misc.Trailers.models.active.language.join(","),Genre:BMS.Misc.Trailers.models.active.genre.join(","),Appcode:global.strAppCode})},n.click.trailerIconClick=function(e){f.active.nextSibling=u(e.currentTarget).parents(".mt-card-wrapper").next(),g.trailerIconClick.call(this,e)},n.click.wtsClick=function(e){var t=u("#wts-true").attr("event-code"),n=parseInt(u("#wts-true").attr("event-wts")),i=u("#wts-true").attr("event-type");f.analyticsObj.Choice=1,g.setUserInterest(t,n,i,e)},n.click.dwtsClick=function(e){var t=u("#wts-false").attr("event-code"),n=parseInt(u("#wts-false").attr("event-wts")),i=u("#wts-false").attr("event-type");f.analyticsObj.Choice=-1,g.setUserInterest(t,n,i,e)},n.click.maybeClick=function(e){var t=u("#wts-undefined").attr("event-code"),n=parseInt(u("#wts-undefined").attr("event-wts")),i=u("#wts-undefined").attr("event-type");g.setUserInterest(t,n,i,e)},n.onPlayerReady=function(e){g.playVideo(e)},n.onPlayerStateChange=function(e){switch(e.data){case YT.PlayerState.UNSTARTED:break;case YT.PlayerState.ENDED:f.active.nextSibling.find(".show-more-info").trigger("click");break;case YT.PlayerState.PLAYING:case YT.PlayerState.PAUSED:case YT.PlayerState.BUFFERING:case YT.PlayerState.CUED:}},n.load=function(e){this.modal.show();var t=!1;BMS.Misc.fnAjax({dataType:"script",type:"GET",url:"/serv/getData",data:{cmd:"GETTRAILERS",mtype:"cs"},dataType:"json",success:function(e){var i,a;f.events.cs=(i={},e[a=0]&&(f.cslanguageSequence=e[0]),_.each(e[1],(function(e,t){void 0;var n=_.compact(e.EventGenre.split("|"));i[e.EventCode]={id:e.EventCode,title:e.EventTitle,language:[e.EventLanguage,"All Languages"],dataLanguage:e.EventLanguage,eventGroup:e.EventGroup,languageFilter:e.EventLanguage+"|All Languages",url:"/movies/"+e.EventURL+"/"+e.EventCode,trailerURL:e.TrailerURL,posterURL:global.strContentUrl+"/events/moviecard/"+e.EventCode+".jpg",fallbackURL:global.strContentUrl+"/events/moviecard/noimage.jpg",genre:e.EventGenre,genreFilter:e.EventGenre+"|All Genres",releaseDate:e.ShowDate,eventIsDefault:e.EventIsDefault,isTentative:e.TentativeReleaseDate,trailerUploadDate:e.trailerUploadDate,synopsis:e.EventSyno,wtsCount:e.wtsCount,dwtsCount:e.dwtsCount,maybeCount:e.maybeCount,avgRating:e.avgRating,totalVotes:e.totalVotes,wtsPerc:e.wtsPerc,csCount:e.csCount,card_index:a,visible:!0,enabled:!0,active:!1},a+=1,f.languages[e.EventLanguage]=!0,_.each(n,(function(e,t){f.genres[e.trim()]=!0}))})),i),window.mt.API=f.events.cs,f.active.comingsoon="fresh",f.active.tab="comingSoon",u(".__selected-filters,.__right-lang-filters,.__right-gen-filters,.__right-pf-filters").show(),g.setSelectText(),o.fresh(),o.genre(),t?(n.handleGetTrailersSuccess(),t=!1):t=!0},error:function(e){void 0}}),BMS.Misc.fnAjax({dataType:"script",type:"GET",url:"/serv/getData",data:{cmd:"GETTRAILERS",mtype:"ns"},dataType:"json",success:function(e){var i,a;f.events.ns=(i={},e[a=0]&&(f.nsLanguageSequence=e[0]),_.each(e[1],(function(e,t){void 0;var n=_.compact(e.EventGenre.split("|"));i[e.EventCode]={id:e.EventCode,title:e.EventTitle,language:[e.EventLanguage,"All Languages"],dataLanguage:e.EventLanguage,eventGroup:e.EventGroup,languageFilter:e.EventLanguage+"|All Languages",url:"/movies/"+e.EventURL+"/"+e.EventCode,trailerURL:e.TrailerURL,posterURL:global.strContentUrl+"/events/moviecard/"+e.EventCode+".jpg",fallbackURL:global.strContentUrl+"/events/moviecard/noimage.jpg",genre:e.EventGenre,genreFilter:e.EventGenre+"|All Genres",releaseDate:e.ShowDate,eventIsDefault:e.EventIsDefault,isTentative:e.TentativeReleaseDate,trailerUploadDate:e.trailerUploadDate,synopsis:e.EventSyno,wtsCount:e.wtsCount,dwtsCount:e.dwtsCount,maybeCount:e.maybeCount,wtsPerc:e.wtsPerc,totalCount:e.totalVotes,userCount:e.userCount,criticCount:e.criticCount,avgRating:e.avgRating,csCount:e.csCount,card_index:a,visible:!0,enabled:!0,active:!1,buyURL:"hello"},a+=1,f.languages[e.EventLanguage]=!0,_.each(n,(function(e,t){f.genres[e.trim()]=!0}))})),i),window.mt.NSAPI=f.events.ns,t?(n.handleGetTrailersSuccess(),t=!1):t=!0},error:function(e){void 0}})},n.handleGetTrailersSuccess=function(){o.languages(),o.genre()},n.modal.show=function(){void 0,h.modal.wrapper.removeClass("none"),h.modal.overlay.removeClass("none").addClass("puff"),handlePopups.freezeDocument(),u(".mt-modal-overlay").scroll((function(){wow.scrollHandler()}))},n.modal.hide=function(){h.modal.overlay.removeClass("puff"),setTimeout((function(){h.modal.overlay.addClass("puff-reverse")}),10),setTimeout((function(){h.modal.overlay.addClass("none").removeClass("puff-reverse")}),300),handlePopups.releaseDocument(),u(".mt-modal-overlay").unbind("scroll",(function(){wow.scrollHandler()}))},u(document).ready((function(){h.modal.wrapper=u("#mt-wrapper"),h.modal.overlay=u(".mt-modal-overlay","#mt-wrapper"),h.trailerScreen=u(mt.templates.trailerScreen),h.trailerScreen.videoContainer=u(".mt-single-video #youtube-iframe"),h.trailerScreen.find("#wts-true").on("click",n.click.wtsClick),h.trailerScreen.find("#wts-false").on("click",n.click.dwtsClick),h.trailerScreen.find("#wts-undefined").on("click",n.click.maybeClick),h.tabs.fresh=u(".__right-pf-filters .__fresh"),h.tabs.popular=u(".__right-pf-filters .__popular"),h.tabs.comingSoon=u(".mt-filters .__comingsoon"),h.tabs.nowShowing=u(".mt-filters .__nowshowing"),h.tabs.fresh.on("click",n.click.freshTab),h.tabs.popular.on("click",n.click.popularTab),h.tabs.nowShowing.on("click",n.click.nowShowingTab),h.tabs.comingSoon.on("click",n.click.comingSoonTab),u(".mt-trigger").click((function(){n.load(),BMS.Misc.Router.triggerRoute("trailers ",!1),BMS.Misc.fnPushEventDataToAnalytics(["WR","GA"],"",{},{event:"Trailer Popup",page:s("undefined"!=typeof pageName?pageName:"")+" Page",section:"Coming Soon","Sort by":u(".__right-pf-filters .__text").html(),Language:BMS.Misc.Trailers.models.active.language.join(","),Genre:BMS.Misc.Trailers.models.active.genre.join(","),Appcode:global.strAppCode})})),global.SignOutCallBack.push((function(){void 0,h.trailerScreen.find(".wts-container").hasClass("_active")&&h.trailerScreen.find(".wts-container").removeClass("_active")})),BMS.Misc.Router.registerRoute("trailers","trailersPopup",(function(){void 0,n.load(),h.tabs[f.active.tab].addClass("_active")}),(function(){void 0,n.modal.hide(),g.clearFilters(),g.clearPills(),o.selectBoxText(),u(".trailer-card","#mt-wrapper").removeClass("_active")})),u("#mt-btn-close").click((function(){f.active.isPlaying?(h.trailerScreen.detach(),f.active.isPlaying=!1,u(".trailer-card","#mt-wrapper").removeClass("_active")):(n.modal.hide(),g.clearFilters(),g.clearPills(),g.clearContainers(),BMS.Misc.Router.triggerRoute("",!1),h.tabs[f.active.tab].removeClass("_active"),o.selectBoxText(),u(".trailer-card","#mt-wrapper").removeClass("_active"),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"Clicked Close on Movie Trailers Link",page:"undefined"!=typeof pageName?pageName:"",section:"header"}))}))}))})(jQuery),(function(i){i.fn.sticky=function(e){var t=this,n=i.extend({addelement:"_active",addfrom:40,removefrom:40},e);i(window).scroll((function(){var e=window.pageYOffset||document.documentElement.scrollTop;e>=n.addfrom?t.addClass(n.addelement):e<=n.removefrom&&t.removeClass(n.addelement)}))}})(jQuery),(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(jQuery)})((function(i){var e=(function(){if(i&&i.fn&&i.fn.select2&&i.fn.select2.amd)var e=i.fn.select2.amd;var t,a,c,n;return e&&e.requirejs||(e?a=e:e={},(function(p){var o,s,f,g,h={},m={},v={},S={},n=Object.prototype.hasOwnProperty,i=[].slice,y=/\.js$/;function M(e,t){return n.call(e,t)}function r(e,t){var n,i,a,o,s,r,l,c,d,u,p,f=t&&t.split("/"),g=v.map,h=g&&g["*"]||{};if(e&&"."===e.charAt(0))if(t){for(s=(e=e.split("/")).length-1,v.nodeIdCompat&&y.test(e[s])&&(e[s]=e[s].replace(y,"")),e=f.slice(0,f.length-1).concat(e),d=0;d<e.length;d+=1)if("."===(p=e[d]))e.splice(d,1),d-=1;else if(".."===p){if(1===d&&(".."===e[2]||".."===e[0]))break;0<d&&(e.splice(d-1,2),d-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((f||h)&&g){for(d=(n=e.split("/")).length;0<d;d-=1){if(i=n.slice(0,d).join("/"),f)for(u=f.length;0<u;u-=1)if((a=g[f.slice(0,u).join("/")])&&(a=a[i])){o=a,r=d;break}if(o)break;!l&&h&&h[i]&&(l=h[i],c=d)}!o&&l&&(o=l,r=c),o&&(n.splice(0,r,o),e=n.join("/"))}return e}function b(t,n){return function(){var e=i.call(arguments,0);return"string"!=typeof e[0]&&1===e.length&&e.push(null),s.apply(p,e.concat([t,n]))}}function w(t){return function(e){h[t]=e}}function B(e){if(M(m,e)){var t=m[e];delete m[e],S[e]=!0,o.apply(p,t)}if(!M(h,e)&&!M(S,e))throw new Error("No "+e);return h[e]}function l(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}f=function(e,t){var n,i,a=l(e),o=a[0];return e=a[1],o&&(n=B(o=r(o,t))),o?e=n&&n.normalize?n.normalize(e,(i=t,function(e){return r(e,i)})):r(e,t):(o=(a=l(e=r(e,t)))[0],e=a[1],o&&(n=B(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:n}},g={require:function(e){return b(e)},exports:function(e){var t=h[e];return void 0!==t?t:h[e]={}},module:function(e){return{id:e,uri:"",exports:h[e],config:(t=e,function(){return v&&v.config&&v.config[t]||{}})};var t}},o=function(e,t,n,i){var a,o,s,r,l,c,d=[],u=typeof n;if(i=i||e,"undefined"===u||"function"===u){for(t=!t.length&&n.length?["require","exports","module"]:t,l=0;l<t.length;l+=1)if("require"===(o=(r=f(t[l],i)).f))d[l]=g.require(e);else if("exports"===o)d[l]=g.exports(e),c=!0;else if("module"===o)a=d[l]=g.module(e);else if(M(h,o)||M(m,o)||M(S,o))d[l]=B(o);else{if(!r.p)throw new Error(e+" missing "+o);r.p.load(r.n,b(i,!0),w(o),{}),d[l]=h[o]}s=n?n.apply(h[e],d):void 0,e&&(a&&a.exports!==p&&a.exports!==h[e]?h[e]=a.exports:s===p&&c||(h[e]=s))}else e&&(h[e]=n)},t=a=s=function(e,t,n,i,a){if("string"==typeof e)return g[e]?g[e](t):B(f(e,t).f);if(!e.splice){if((v=e).deps&&s(v.deps,v.callback),!t)return;t.splice?(e=t,t=n,n=null):e=p}return t=t||function(){},"function"==typeof n&&(n=i,i=a),i?o(p,e,t,n):setTimeout((function(){o(p,e,t,n)}),4),s},s.config=function(e){return s(e)},t._defined=h,(c=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),M(h,e)||M(m,e)||(m[e]=[e,t,n])}).amd={jQuery:!0}})(),e.requirejs=t,e.require=a,e.define=c),e.define("almond",(function(){})),e.define("jquery",[],(function(){var e=i||$;return null==e&&console&&console.error&&void 0,e})),e.define("select2/utils",["jquery"],(function(o){var e={};function d(e){var t=e.prototype,n=[];for(var i in t){"function"==typeof t[i]&&("constructor"!==i&&n.push(i))}return n}e.Extend=function(e,t){var n={}.hasOwnProperty;function i(){this.constructor=e}for(var a in t)n.call(t,a)&&(e[a]=t[a]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},e.Decorate=function(i,a){var e=d(a),t=d(i);function o(){var e=Array.prototype.unshift,t=a.prototype.constructor.length,n=i.prototype.constructor;0<t&&(e.call(arguments,i.prototype.constructor),n=a.prototype.constructor),n.apply(this,arguments)}a.displayName=i.displayName,o.prototype=new function(){this.constructor=o};for(var n=0;n<t.length;n++){var s=t[n];o.prototype[s]=i.prototype[s]}for(var r=function(e){var t=function(){};e in o.prototype&&(t=o.prototype[e]);var n=a.prototype[e];return function(){return Array.prototype.unshift.call(arguments,t),n.apply(this,arguments)}},l=0;l<e.length;l++){var c=e[l];o.prototype[c]=r(c)}return o};var t=function(){this.listeners={}};return t.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},t.prototype.trigger=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);this.listeners=this.listeners||{},null==n&&(n=[]),0===n.length&&n.push({}),(n[0]._type=e)in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},t.prototype.invoke=function(e,t){for(var n=0,i=e.length;n<i;n++)e[n].apply(this,t)},e.Observable=t,e.generateChars=function(e){for(var t="",n=0;n<e;n++){t+=Math.floor(36*Math.random()).toString(36)}return t},e.bind=function(e,t){return function(){e.apply(t,arguments)}},e._convertData=function(e){for(var t in e){var n=t.split("-"),i=e;if(1!==n.length){for(var a=0;a<n.length;a++){var o=n[a];(o=o.substring(0,1).toLowerCase()+o.substring(1))in i||(i[o]={}),a==n.length-1&&(i[o]=e[t]),i=i[o]}delete e[t]}}return e},e.hasScroll=function(e,t){var n=o(t),i=t.style.overflowX,a=t.style.overflowY;return(i!==a||"hidden"!==a&&"visible"!==a)&&("scroll"===i||"scroll"===a||(n.innerHeight()<t.scrollHeight||n.innerWidth()<t.scrollWidth))},e.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,(function(e){return t[e]}))},e.appendMany=function(e,t){if("1.7"===o.fn.jquery.substr(0,3)){var n=o();o.map(t,(function(e){n=n.add(e)})),t=n}e.append(t)},e})),e.define("select2/results",["jquery","./utils"],(function(p,e){function i(e,t,n){this.$element=e,this.data=n,this.options=t,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=p('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e},i.prototype.clear=function(){this.$results.empty()},i.prototype.displayMessage=function(e){var t=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var n=p('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),i=this.options.get("translations").get(e.message);n.append(t(i(e.args))),n[0].className+=" select2-results__message",this.$results.append(n)},i.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},i.prototype.append=function(e){this.hideLoading();var t=[];if(null!=e.results&&0!==e.results.length){e.results=this.sort(e.results);for(var n=0;n<e.results.length;n++){var i=e.results[n],a=this.option(i);t.push(a)}this.$results.append(t)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},i.prototype.position=function(e,t){t.find(".select2-results").append(e)},i.prototype.sort=function(e){return this.options.get("sorter")(e)},i.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option[aria-selected]"),t=e.filter("[aria-selected=true]");0<t.length?t.first().trigger("mouseenter"):e.first().trigger("mouseenter"),this.ensureHighlightVisible()},i.prototype.setClasses=function(){var t=this;this.data.current((function(e){var i=p.map(e,(function(e){return e.id.toString()}));t.$results.find(".select2-results__option[aria-selected]").each((function(){var e=p(this),t=p.data(this,"data"),n=""+t.id;null!=t.element&&t.element.selected||null==t.element&&-1<p.inArray(n,i)?e.attr("aria-selected","true"):e.attr("aria-selected","false")}))}))},i.prototype.showLoading=function(e){this.hideLoading();var t={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(e)},n=this.option(t);n.className+=" loading-results",this.$results.prepend(n)},i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},i.prototype.option=function(e){var t=document.createElement("li");t.className="select2-results__option";var n={role:"treeitem","aria-selected":"false"};for(var i in e.disabled&&(delete n["aria-selected"],n["aria-disabled"]="true"),null==e.id&&delete n["aria-selected"],null!=e._resultId&&(t.id=e._resultId),e.title&&(t.title=e.title),e.children&&(n.role="group",n["aria-label"]=e.text,delete n["aria-selected"]),n){var a=n[i];t.setAttribute(i,a)}if(e.children){var o=p(t),s=document.createElement("strong");s.className="select2-results__group";p(s);this.template(e,s);for(var r=[],l=0;l<e.children.length;l++){var c=e.children[l],d=this.option(c);r.push(d)}var u=p("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});u.append(r),o.append(s),o.append(u)}else this.template(e,t);return p.data(t,"data",e),t},i.prototype.bind=function(t,e){var l=this,n=t.id+"-results";this.$results.attr("id",n),t.on("results:all",(function(e){l.clear(),l.append(e.data),t.isOpen()&&(l.setClasses(),l.highlightFirstItem())})),t.on("results:append",(function(e){l.append(e.data),t.isOpen()&&l.setClasses()})),t.on("query",(function(e){l.hideMessages(),l.showLoading(e)})),t.on("select",(function(){t.isOpen()&&(l.setClasses(),l.highlightFirstItem())})),t.on("unselect",(function(){t.isOpen()&&(l.setClasses(),l.highlightFirstItem())})),t.on("open",(function(){l.$results.attr("aria-expanded","true"),l.$results.attr("aria-hidden","false"),l.setClasses(),l.ensureHighlightVisible()})),t.on("close",(function(){l.$results.attr("aria-expanded","false"),l.$results.attr("aria-hidden","true"),l.$results.removeAttr("aria-activedescendant")})),t.on("results:toggle",(function(){var e=l.getHighlightedResults();0!==e.length&&e.trigger("mouseup")})),t.on("results:select",(function(){var e=l.getHighlightedResults();if(0!==e.length){var t=e.data("data");"true"==e.attr("aria-selected")?l.trigger("close",{}):l.trigger("select",{data:t})}})),t.on("results:previous",(function(){var e=l.getHighlightedResults(),t=l.$results.find("[aria-selected]"),n=t.index(e);if(0!==n){var i=n-1;0===e.length&&(i=0);var a=t.eq(i);a.trigger("mouseenter");var o=l.$results.offset().top,s=a.offset().top,r=l.$results.scrollTop()+(s-o);0===i?l.$results.scrollTop(0):s-o<0&&l.$results.scrollTop(r)}})),t.on("results:next",(function(){var e=l.getHighlightedResults(),t=l.$results.find("[aria-selected]"),n=t.index(e)+1;if(!(n>=t.length)){var i=t.eq(n);i.trigger("mouseenter");var a=l.$results.offset().top+l.$results.outerHeight(!1),o=i.offset().top+i.outerHeight(!1),s=l.$results.scrollTop()+o-a;0===n?l.$results.scrollTop(0):a<o&&l.$results.scrollTop(s)}})),t.on("results:focus",(function(e){e.element.addClass("select2-results__option--highlighted")})),t.on("results:message",(function(e){l.displayMessage(e)})),p.fn.mousewheel&&this.$results.on("mousewheel",(function(e){var t=l.$results.scrollTop(),n=l.$results.get(0).scrollHeight-t+e.deltaY,i=0<e.deltaY&&t-e.deltaY<=0,a=e.deltaY<0&&n<=l.$results.height();i?(l.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):a&&(l.$results.scrollTop(l.$results.get(0).scrollHeight-l.$results.height()),e.preventDefault(),e.stopPropagation())})),this.$results.on("mouseup",".select2-results__option[aria-selected]",(function(e){var t=p(this),n=t.data("data");"true"!==t.attr("aria-selected")?l.trigger("select",{originalEvent:e,data:n}):l.options.get("multiple")?l.trigger("unselect",{originalEvent:e,data:n}):l.trigger("close",{})})),this.$results.on("mouseenter",".select2-results__option[aria-selected]",(function(e){var t=p(this).data("data");l.getHighlightedResults().removeClass("select2-results__option--highlighted"),l.trigger("results:focus",{data:t,element:p(this)})}))},i.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},i.prototype.destroy=function(){this.$results.remove()},i.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(0!==e.length){var t=this.$results.find("[aria-selected]").index(e),n=this.$results.offset().top,i=e.offset().top,a=this.$results.scrollTop()+(i-n),o=i-n;a-=2*e.outerHeight(!1),t<=2?this.$results.scrollTop(0):(o>this.$results.outerHeight()||o<0)&&this.$results.scrollTop(a)}},i.prototype.template=function(e,t){var n=this.options.get("templateResult"),i=this.options.get("escapeMarkup"),a=n(e,t);null==a?t.style.display="none":"string"==typeof a?t.innerHTML=i(a):p(t).append(a)},i})),e.define("select2/keys",[],(function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}})),e.define("select2/selection/base",["jquery","../utils","../keys"],(function(n,e,a){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=n('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),e.attr("title",this.$element.attr("title")),e.attr("tabindex",this._tabindex),this.$selection=e},i.prototype.bind=function(e,t){var n=this,i=(e.id,e.id+"-results");this.container=e,this.$selection.on("focus",(function(e){n.trigger("focus",e)})),this.$selection.on("blur",(function(e){n._handleBlur(e)})),this.$selection.on("keydown",(function(e){n.trigger("keypress",e),e.which===a.SPACE&&e.preventDefault()})),e.on("results:focus",(function(e){n.$selection.attr("aria-activedescendant",e.data._resultId)})),e.on("selection:update",(function(e){n.update(e.data)})),e.on("open",(function(){n.$selection.attr("aria-expanded","true"),n.$selection.attr("aria-owns",i),n._attachCloseHandler(e)})),e.on("close",(function(){n.$selection.attr("aria-expanded","false"),n.$selection.removeAttr("aria-activedescendant"),n.$selection.removeAttr("aria-owns"),n.$selection.focus(),n._detachCloseHandler(e)})),e.on("enable",(function(){n.$selection.attr("tabindex",n._tabindex)})),e.on("disable",(function(){n.$selection.attr("tabindex","-1")}))},i.prototype._handleBlur=function(e){var t=this;window.setTimeout((function(){document.activeElement==t.$selection[0]||n.contains(t.$selection[0],document.activeElement)||t.trigger("blur",e)}),1)},i.prototype._attachCloseHandler=function(e){n(document.body).on("mousedown.select2."+e.id,(function(e){var t=n(e.target).closest(".select2");n(".select2.select2-container--open").each((function(){var e=n(this);this!=t[0]&&e.data("element").select2("close")}))}))},i.prototype._detachCloseHandler=function(e){n(document.body).off("mousedown.select2."+e.id)},i.prototype.position=function(e,t){t.find(".selection").append(e)},i.prototype.destroy=function(){this._detachCloseHandler(this.container)},i.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},i})),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],(function(e,t,n,i){function a(){a.__super__.constructor.apply(this,arguments)}return n.Extend(a,t),a.prototype.render=function(){var e=a.__super__.render.call(this);return e.addClass("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},a.prototype.bind=function(t,e){var n=this;a.__super__.bind.apply(this,arguments);var i=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i),this.$selection.attr("aria-labelledby",i),this.$selection.on("mousedown",(function(e){1===e.which&&n.trigger("toggle",{originalEvent:e})})),this.$selection.on("focus",(function(e){})),this.$selection.on("blur",(function(e){})),t.on("focus",(function(e){t.isOpen()||n.$selection.focus()})),t.on("selection:update",(function(e){n.update(e.data)}))},a.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},a.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},a.prototype.selectionContainer=function(){return e("<span></span>")},a.prototype.update=function(e){if(0!==e.length){var t=e[0],n=this.$selection.find(".select2-selection__rendered"),i=this.display(t,n);n.empty().append(i),n.prop("title",t.title||t.text)}else this.clear()},a})),e.define("select2/selection/multiple",["jquery","./base","../utils"],(function(i,e,r){function a(e,t){a.__super__.constructor.apply(this,arguments)}return r.Extend(a,e),a.prototype.render=function(){var e=a.__super__.render.call(this);return e.addClass("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},a.prototype.bind=function(e,t){var n=this;a.__super__.bind.apply(this,arguments),this.$selection.on("click",(function(e){n.trigger("toggle",{originalEvent:e})})),this.$selection.on("click",".select2-selection__choice__remove",(function(e){if(!n.options.get("disabled")){var t=i(this).parent().data("data");n.trigger("unselect",{originalEvent:e,data:t})}}))},a.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},a.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},a.prototype.selectionContainer=function(){return i('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},a.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],n=0;n<e.length;n++){var i=e[n],a=this.selectionContainer(),o=this.display(i,a);a.append(o),a.prop("title",i.title||i.text),a.data("data",i),t.push(a)}var s=this.$selection.find(".select2-selection__rendered");r.appendMany(s,t)}},a})),e.define("select2/selection/placeholder",["../utils"],(function(e){function t(e,t,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n)}return t.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},t.prototype.createPlaceholder=function(e,t){var n=this.selectionContainer();return n.html(this.display(t)),n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),n},t.prototype.update=function(e,t){var n=1==t.length&&t[0].id!=this.placeholder.id;if(1<t.length||n)return e.call(this,t);this.clear();var i=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(i)},t})),e.define("select2/selection/allowClear",["jquery","../keys"],(function(i,a){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&void 0,this.$selection.on("mousedown",".select2-selection__clear",(function(e){i._handleClear(e)})),t.on("keypress",(function(e){i._handleKeyboardClear(e,t)}))},e.prototype._handleClear=function(e,t){if(!this.options.get("disabled")){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){t.stopPropagation();for(var i=n.data("data"),a=0;a<i.length;a++){var o={data:i[a]};if(this.trigger("unselect",o),o.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},e.prototype._handleKeyboardClear=function(e,t,n){n.isOpen()||t.which!=a.DELETE&&t.which!=a.BACKSPACE||this._handleClear(t)},e.prototype.update=function(e,t){if(e.call(this,t),!(0<this.$selection.find(".select2-selection__placeholder").length||0===t.length)){var n=i('<span class="select2-selection__clear">&times;</span>');n.data("data",t),this.$selection.find(".select2-selection__rendered").prepend(n)}},e})),e.define("select2/selection/search",["jquery","../utils","../keys"],(function(i,e,s){function t(e,t,n){e.call(this,t,n)}return t.prototype.render=function(e){var t=i('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=t,this.$search=t.find("input");var n=e.call(this);return this._transferTabIndex(),n},t.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("open",(function(){i.$search.trigger("focus")})),t.on("close",(function(){i.$search.val(""),i.$search.removeAttr("aria-activedescendant"),i.$search.trigger("focus")})),t.on("enable",(function(){i.$search.prop("disabled",!1),i._transferTabIndex()})),t.on("disable",(function(){i.$search.prop("disabled",!0)})),t.on("focus",(function(e){i.$search.trigger("focus")})),t.on("results:focus",(function(e){i.$search.attr("aria-activedescendant",e.id)})),this.$selection.on("focusin",".select2-search--inline",(function(e){i.trigger("focus",e)})),this.$selection.on("focusout",".select2-search--inline",(function(e){i._handleBlur(e)})),this.$selection.on("keydown",".select2-search--inline",(function(e){if(e.stopPropagation(),i.trigger("keypress",e),i._keyUpPrevented=e.isDefaultPrevented(),e.which===s.BACKSPACE&&""===i.$search.val()){var t=i.$searchContainer.prev(".select2-selection__choice");if(0<t.length){var n=t.data("data");i.searchRemoveChoice(n),e.preventDefault()}}}));var a=document.documentMode,o=a&&a<=11;this.$selection.on("input.searchcheck",".select2-search--inline",(function(e){o?i.$selection.off("input.search input.searchcheck"):i.$selection.off("keyup.search")})),this.$selection.on("keyup.search input.search",".select2-search--inline",(function(e){if(o&&"input"===e.type)i.$selection.off("input.search input.searchcheck");else{var t=e.which;t!=s.SHIFT&&t!=s.CTRL&&t!=s.ALT&&t!=s.TAB&&i.handleSearch(e)}}))},t.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},t.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},t.prototype.update=function(e,t){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),n&&this.$search.focus()},t.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},t.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},t.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";""!==this.$search.attr("placeholder")?e=this.$selection.find(".select2-selection__rendered").innerWidth():e=.75*(this.$search.val().length+1)+"em";this.$search.css("width",e)},t})),e.define("select2/selection/eventRelay",["jquery"],(function(s){function e(){}return e.prototype.bind=function(e,t,n){var i=this,a=["open","opening","close","closing","select","selecting","unselect","unselecting"],o=["opening","closing","selecting","unselecting"];e.call(this,t,n),t.on("*",(function(e,t){if(-1!==s.inArray(e,a)){t=t||{};var n=s.Event("select2:"+e,{params:t});i.$element.trigger(n),-1!==s.inArray(e,o)&&(t.prevented=n.isDefaultPrevented())}}))},e})),e.define("select2/translation",["jquery","require"],(function(t,n){function i(e){this.dict=e||{}}return i.prototype.all=function(){return this.dict},i.prototype.get=function(e){return this.dict[e]},i.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},i._cache={},i.loadPath=function(e){if(!(e in i._cache)){var t=n(e);i._cache[e]=t}return new i(i._cache[e])},i})),e.define("select2/diacritics",[],(function(){return{"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""}})),e.define("select2/data/base",["../utils"],(function(i){function n(e,t){n.__super__.constructor.call(this)}return i.Extend(n,i.Observable),n.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},n.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},n.prototype.bind=function(e,t){},n.prototype.destroy=function(){},n.prototype.generateResultId=function(e,t){var n=e.id+"-result-";return n+=i.generateChars(4),null!=t.id?n+="-"+t.id.toString():n+="-"+i.generateChars(4),n},n})),e.define("select2/data/select",["./base","../utils","jquery"],(function(e,t,r){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,e),n.prototype.current=function(e){var n=[],i=this;this.$element.find(":selected").each((function(){var e=r(this),t=i.item(e);n.push(t)})),e(n)},n.prototype.select=function(a){var o=this;if(a.selected=!0,r(a.element).is("option"))return a.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current((function(e){var t=[];(a=[a]).push.apply(a,e);for(var n=0;n<a.length;n++){var i=a[n].id;-1===r.inArray(i,t)&&t.push(i)}o.$element.val(t),o.$element.trigger("change")}));else{var e=a.id;this.$element.val(e),this.$element.trigger("change")}},n.prototype.unselect=function(a){var o=this;if(this.$element.prop("multiple")){if(a.selected=!1,r(a.element).is("option"))return a.element.selected=!1,void this.$element.trigger("change");this.current((function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n].id;i!==a.id&&-1===r.inArray(i,t)&&t.push(i)}o.$element.val(t),o.$element.trigger("change")}))}},n.prototype.bind=function(e,t){var n=this;(this.container=e).on("select",(function(e){n.select(e.data)})),e.on("unselect",(function(e){n.unselect(e.data)}))},n.prototype.destroy=function(){this.$element.find("*").each((function(){r.removeData(this,"data")}))},n.prototype.query=function(i,e){var a=[],o=this;this.$element.children().each((function(){var e=r(this);if(e.is("option")||e.is("optgroup")){var t=o.item(e),n=o.matches(i,t);null!==n&&a.push(n)}})),e({results:a})},n.prototype.addOptions=function(e){t.appendMany(this.$element,e)},n.prototype.option=function(e){var t;e.children?(t=document.createElement("optgroup")).label=e.text:void 0!==(t=document.createElement("option")).textContent?t.textContent=e.text:t.innerText=e.text,e.id&&(t.value=e.id),e.disabled&&(t.disabled=!0),e.selected&&(t.selected=!0),e.title&&(t.title=e.title);var n=r(t),i=this._normalizeItem(e);return i.element=t,r.data(t,"data",i),n},n.prototype.item=function(e){var t={};if(null!=(t=r.data(e[0],"data")))return t;if(e.is("option"))t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if(e.is("optgroup")){t={text:e.prop("label"),children:[],title:e.prop("title")};for(var n=e.children("option"),i=[],a=0;a<n.length;a++){var o=r(n[a]),s=this.item(o);i.push(s)}t.children=i}return(t=this._normalizeItem(t)).element=e[0],r.data(e[0],"data",t),t},n.prototype._normalizeItem=function(e){r.isPlainObject(e)||(e={id:e,text:e});return null!=(e=r.extend({},{text:""},e)).id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),r.extend({},{selected:!1,disabled:!1},e)},n.prototype.matches=function(e,t){return this.options.get("matcher")(e,t)},n})),e.define("select2/data/array",["./select","../utils","jquery"],(function(e,g,h){function i(e,t){var n=t.get("data")||[];i.__super__.constructor.call(this,e,t),this.addOptions(this.convertToOptions(n))}return g.Extend(i,e),i.prototype.select=function(n){var e=this.$element.find("option").filter((function(e,t){return t.value==n.id.toString()}));0===e.length&&(e=this.option(n),this.addOptions(e)),i.__super__.select.call(this,n)},i.prototype.convertToOptions=function(e){var t=this,n=this.$element.find("option"),i=n.map((function(){return t.item(h(this)).id})).get(),a=[];function o(e){return function(){return h(this).val()==e.id}}for(var s=0;s<e.length;s++){var r=this._normalizeItem(e[s]);if(0<=h.inArray(r.id,i)){var l=n.filter(o(r)),c=this.item(l),d=h.extend(!0,{},r,c),u=this.option(d);l.replaceWith(u)}else{var p=this.option(r);if(r.children){var f=this.convertToOptions(r.children);g.appendMany(p,f)}a.push(p)}}return a},i})),e.define("select2/data/ajax",["./array","../utils","jquery"],(function(e,t,o){function n(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),n.__super__.constructor.call(this,e,t)}return t.Extend(n,e),n.prototype._applyDefaults=function(e){var t={data:function(e){return o.extend({},e,{q:e.term})},transport:function(e,t,n){var i=o.ajax(e);return i.then(t),i.fail(n),i}};return o.extend({},t,e,!0)},n.prototype.processResults=function(e){return e},n.prototype.query=function(n,i){var a=this;null!=this._request&&(o.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var t=o.extend({type:"GET"},this.ajaxOptions);function e(){var e=t.transport(t,(function(e){var t=a.processResults(e,n);a.options.get("debug")&&window.console&&console.error&&(t&&t.results&&o.isArray(t.results)||void 0),i(t)}),(function(){e.status&&"0"===e.status||a.trigger("results:message",{message:"errorLoading"})}));a._request=e}"function"==typeof t.url&&(t.url=t.url.call(this.$element,n)),"function"==typeof t.data&&(t.data=t.data.call(this.$element,n)),this.ajaxOptions.delay&&null!=n.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(e,this.ajaxOptions.delay)):e()},n})),e.define("select2/data/tags",["jquery"],(function(d){function e(e,t,n){var i=n.get("tags"),a=n.get("createTag");void 0!==a&&(this.createTag=a);var o=n.get("insertTag");if(void 0!==o&&(this.insertTag=o),e.call(this,t,n),d.isArray(i))for(var s=0;s<i.length;s++){var r=i[s],l=this._normalizeItem(r),c=this.option(l);this.$element.append(c)}}return e.prototype.query=function(e,c,d){var u=this;this._removeOldTags(),null!=c.term&&null==c.page?e.call(this,c,(function e(t,n){for(var i=t.results,a=0;a<i.length;a++){var o=i[a],s=null!=o.children&&!e({results:o.children},!0);if(o.text===c.term||s)return!n&&(t.data=i,void d(t))}if(n)return!0;var r=u.createTag(c);if(null!=r){var l=u.option(r);l.attr("data-select2-tag",!0),u.addOptions([l]),u.insertTag(i,r)}t.results=i,d(t)})):e.call(this,c,d)},e.prototype.createTag=function(e,t){var n=d.trim(t.term);return""===n?null:{id:n,text:n}},e.prototype.insertTag=function(e,t,n){t.unshift(n)},e.prototype._removeOldTags=function(e){this._lastTag;this.$element.find("option[data-select2-tag]").each((function(){this.selected||d(this).remove()}))},e})),e.define("select2/data/tokenizer",["jquery"],(function(u){function e(e,t,n){var i=n.get("tokenizer");void 0!==i&&(this.tokenizer=i),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},e.prototype.query=function(e,t,n){var a=this;t.term=t.term||"";var i=this.tokenizer(t,this.options,(function(e){var t,n=a._normalizeItem(e);if(!a.$element.find("option").filter((function(){return u(this).val()===n.id})).length){var i=a.option(n);i.attr("data-select2-tag",!0),a._removeOldTags(),a.addOptions([i])}t=n,a.trigger("select",{data:t})}));i.term!==t.term&&(this.$search.length&&(this.$search.val(i.term),this.$search.focus()),t.term=i.term),e.call(this,t,n)},e.prototype.tokenizer=function(e,t,n,i){for(var a=n.get("tokenSeparators")||[],o=t.term,s=0,r=this.createTag||function(e){return{id:e.term,text:e.term}};s<o.length;){var l=o[s];if(-1!==u.inArray(l,a)){var c=o.substr(0,s),d=r(u.extend({},t,{term:c}));null!=d?(i(d),o=o.substr(s+1)||"",s=0):s++}else s++}return{term:o}},e})),e.define("select2/data/minimumInputLength",[],(function(){function e(e,t,n){this.minimumInputLength=n.get("minimumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",t.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e})),e.define("select2/data/maximumInputLength",[],(function(){function e(e,t,n){this.maximumInputLength=n.get("maximumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",0<this.maximumInputLength&&t.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e})),e.define("select2/data/maximumSelectionLength",[],(function(){function e(e,t,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),e.call(this,t,n)}return e.prototype.query=function(n,i,a){var o=this;this.current((function(e){var t=null!=e?e.length:0;0<o.maximumSelectionLength&&t>=o.maximumSelectionLength?o.trigger("results:message",{message:"maximumSelected",args:{maximum:o.maximumSelectionLength}}):n.call(o,i,a)}))},e})),e.define("select2/dropdown",["jquery","./utils"],(function(t,e){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e},n.prototype.bind=function(){},n.prototype.position=function(e,t){},n.prototype.destroy=function(){this.$dropdown.remove()},n})),e.define("select2/dropdown/search",["jquery","../utils"],(function(a,e){function t(){}return t.prototype.render=function(e){var t=e.call(this),n=a('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=n,this.$search=n.find("input"),t.prepend(n),t},t.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),this.$search.on("keydown",(function(e){i.trigger("keypress",e),i._keyUpPrevented=e.isDefaultPrevented()})),this.$search.on("input",(function(e){a(this).off("keyup")})),this.$search.on("keyup input",(function(e){i.handleSearch(e)})),t.on("open",(function(){i.$search.attr("tabindex",0),i.$search.focus(),window.setTimeout((function(){i.$search.focus()}),0)})),t.on("close",(function(){i.$search.attr("tabindex",-1),i.$search.val("")})),t.on("focus",(function(){t.isOpen()&&i.$search.focus()})),t.on("results:all",(function(e){null!=e.query.term&&""!==e.query.term||(i.showSearch(e)?i.$searchContainer.removeClass("select2-search--hide"):i.$searchContainer.addClass("select2-search--hide"))}))},t.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},t.prototype.showSearch=function(e,t){return!0},t})),e.define("select2/dropdown/hidePlaceholder",[],(function(){function e(e,t,n,i){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n,i)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.removePlaceholder=function(e,t){for(var n=t.slice(0),i=t.length-1;0<=i;i--){var a=t[i];this.placeholder.id===a.id&&n.splice(i,1)}return n},e})),e.define("select2/dropdown/infiniteScroll",["jquery"],(function(a){function e(e,t,n,i){this.lastParams={},e.call(this,t,n,i),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&this.$results.append(this.$loadingMore)},e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("query",(function(e){i.lastParams=e,i.loading=!0})),t.on("query:append",(function(e){i.lastParams=e,i.loading=!0})),this.$results.on("scroll",(function(){var e=a.contains(document.documentElement,i.$loadingMore[0]);if(!i.loading&&e){var t=i.$results.offset().top+i.$results.outerHeight(!1);i.$loadingMore.offset().top+i.$loadingMore.outerHeight(!1)<=t+50&&i.loadMore()}}))},e.prototype.loadMore=function(){this.loading=!0;var e=a.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},e.prototype.createLoadingMore=function(){var e=a('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),t=this.options.get("translations").get("loadingMore");return e.html(t(this.lastParams)),e},e})),e.define("select2/dropdown/attachBody",["jquery","../utils"],(function(g,r){function e(e,t,n){this.$dropdownParent=n.get("dropdownParent")||g(document.body),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){var i=this,a=!1;e.call(this,t,n),t.on("open",(function(){i._showDropdown(),i._attachPositioningHandler(t),a||(a=!0,t.on("results:all",(function(){i._positionDropdown(),i._resizeDropdown()})),t.on("results:append",(function(){i._positionDropdown(),i._resizeDropdown()})))})),t.on("close",(function(){i._hideDropdown(),i._detachPositioningHandler(t)})),this.$dropdownContainer.on("mousedown",(function(e){e.stopPropagation()}))},e.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},e.prototype.position=function(e,t,n){t.attr("class",n.attr("class")),t.removeClass("select2"),t.addClass("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=n},e.prototype.render=function(e){var t=g("<span></span>"),n=e.call(this);return t.append(n),this.$dropdownContainer=t},e.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},e.prototype._attachPositioningHandler=function(e,t){var n=this,i="scroll.select2."+t.id,a="resize.select2."+t.id,o="orientationchange.select2."+t.id,s=this.$container.parents().filter(r.hasScroll);s.each((function(){g(this).data("select2-scroll-position",{x:g(this).scrollLeft(),y:g(this).scrollTop()})})),s.on(i,(function(e){var t=g(this).data("select2-scroll-position");g(this).scrollTop(t.y)})),g(window).on(i+" "+a+" "+o,(function(e){n._positionDropdown(),n._resizeDropdown()}))},e.prototype._detachPositioningHandler=function(e,t){var n="scroll.select2."+t.id,i="resize.select2."+t.id,a="orientationchange.select2."+t.id;this.$container.parents().filter(r.hasScroll).off(n),g(window).off(n+" "+i+" "+a)},e.prototype._positionDropdown=function(){var e=g(window),t=this.$dropdown.hasClass("select2-dropdown--above"),n=this.$dropdown.hasClass("select2-dropdown--below"),i=null,a=this.$container.offset();a.bottom=a.top+this.$container.outerHeight(!1);var o={height:this.$container.outerHeight(!1)};o.top=a.top,o.bottom=a.top+o.height;var s=this.$dropdown.outerHeight(!1),r=e.scrollTop(),l=e.scrollTop()+e.height(),c=r<a.top-s,d=l>a.bottom+s,u={left:a.left,top:o.bottom},p=this.$dropdownParent;"static"===p.css("position")&&(p=p.offsetParent());var f=p.offset();u.top-=f.top,u.left-=f.left,t||n||(i="below"),d||!c||t?!c&&d&&t&&(i="below"):i="above",("above"==i||t&&"below"!==i)&&(u.top=o.top-f.top-s),null!=i&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+i),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+i)),this.$dropdownContainer.css(u)},e.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},e.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},e})),e.define("select2/dropdown/minimumResultsForSearch",[],(function(){function e(e,t,n,i){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,n,i)}return e.prototype.showSearch=function(e,t){return!(function e(t){for(var n=0,i=0;i<t.length;i++){var a=t[i];a.children?n+=e(a.children):n++}return n}(t.data.results)<this.minimumResultsForSearch)&&e.call(this,t)},e})),e.define("select2/dropdown/selectOnClose",[],(function(){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("close",(function(e){i._handleSelectOnClose(e)}))},e.prototype._handleSelectOnClose=function(e,t){if(t&&null!=t.originalSelect2Event){var n=t.originalSelect2Event;if("select"===n._type||"unselect"===n._type)return}var i=this.getHighlightedResults();if(!(i.length<1)){var a=i.data("data");null!=a.element&&a.element.selected||null==a.element&&a.selected||this.trigger("select",{data:a})}},e})),e.define("select2/dropdown/closeOnSelect",[],(function(){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("select",(function(e){i._selectTriggered(e)})),t.on("unselect",(function(e){i._selectTriggered(e)}))},e.prototype._selectTriggered=function(e,t){var n=t.originalEvent;n&&n.ctrlKey||this.trigger("close",{originalEvent:n,originalSelect2Event:t})},e})),e.define("select2/i18n/en",[],(function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,n="Please delete "+t+" character";return 1!=t&&(n+="s"),n},inputTooShort:function(e){return"Please enter "+(e.minimum-e.input.length)+" or more characters"},loadingMore:function(){return"Loading more results"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching"}}})),e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],(function(g,h,m,v,S,y,M,b,w,B,C,t,_,k,E,T,I,x,$,A,L,R,D,P,N,O,U,G,e){function n(){this.reset()}return n.prototype.apply=function(t){if(null==(t=g.extend(!0,{},this.defaults,t)).dataAdapter){if(null!=t.ajax?t.dataAdapter=E:null!=t.data?t.dataAdapter=k:t.dataAdapter=_,0<t.minimumInputLength&&(t.dataAdapter=B.Decorate(t.dataAdapter,x)),0<t.maximumInputLength&&(t.dataAdapter=B.Decorate(t.dataAdapter,$)),0<t.maximumSelectionLength&&(t.dataAdapter=B.Decorate(t.dataAdapter,A)),t.tags&&(t.dataAdapter=B.Decorate(t.dataAdapter,T)),null==t.tokenSeparators&&null==t.tokenizer||(t.dataAdapter=B.Decorate(t.dataAdapter,I)),null!=t.query){var e=h(t.amdBase+"compat/query");t.dataAdapter=B.Decorate(t.dataAdapter,e)}if(null!=t.initSelection){var n=h(t.amdBase+"compat/initSelection");t.dataAdapter=B.Decorate(t.dataAdapter,n)}}if(null==t.resultsAdapter&&(t.resultsAdapter=m,null!=t.ajax&&(t.resultsAdapter=B.Decorate(t.resultsAdapter,P)),null!=t.placeholder&&(t.resultsAdapter=B.Decorate(t.resultsAdapter,D)),t.selectOnClose&&(t.resultsAdapter=B.Decorate(t.resultsAdapter,U))),null==t.dropdownAdapter){if(t.multiple)t.dropdownAdapter=L;else{var i=B.Decorate(L,R);t.dropdownAdapter=i}if(0!==t.minimumResultsForSearch&&(t.dropdownAdapter=B.Decorate(t.dropdownAdapter,O)),t.closeOnSelect&&(t.dropdownAdapter=B.Decorate(t.dropdownAdapter,G)),null!=t.dropdownCssClass||null!=t.dropdownCss||null!=t.adaptDropdownCssClass){var a=h(t.amdBase+"compat/dropdownCss");t.dropdownAdapter=B.Decorate(t.dropdownAdapter,a)}t.dropdownAdapter=B.Decorate(t.dropdownAdapter,N)}if(null==t.selectionAdapter){if(t.multiple?t.selectionAdapter=S:t.selectionAdapter=v,null!=t.placeholder&&(t.selectionAdapter=B.Decorate(t.selectionAdapter,y)),t.allowClear&&(t.selectionAdapter=B.Decorate(t.selectionAdapter,M)),t.multiple&&(t.selectionAdapter=B.Decorate(t.selectionAdapter,b)),null!=t.containerCssClass||null!=t.containerCss||null!=t.adaptContainerCssClass){var o=h(t.amdBase+"compat/containerCss");t.selectionAdapter=B.Decorate(t.selectionAdapter,o)}t.selectionAdapter=B.Decorate(t.selectionAdapter,w)}if("string"==typeof t.language)if(0<t.language.indexOf("-")){var s=t.language.split("-")[0];t.language=[t.language,s]}else t.language=[t.language];if(g.isArray(t.language)){var r=new C;t.language.push("en");for(var l=t.language,c=0;c<l.length;c++){var d=l[c],u={};try{u=C.loadPath(d)}catch(e){try{d=this.defaults.amdLanguageBase+d,u=C.loadPath(d)}catch(e){t.debug&&window.console&&console.warn&&void 0;continue}}r.extend(u)}t.translations=r}else{var p=C.loadPath(this.defaults.amdLanguageBase+"en"),f=new C(t.language);f.extend(p),t.translations=f}return t},n.prototype.reset=function(){function r(e){return e.replace(/[^\u0000-\u007E]/g,(function(e){return t[e]||e}))}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:B.escapeMarkup,language:e,matcher:function e(t,n){if(""===g.trim(t.term))return n;if(n.children&&0<n.children.length){for(var i=g.extend(!0,{},n),a=n.children.length-1;0<=a;a--)null==e(t,n.children[a])&&i.children.splice(a,1);return 0<i.children.length?i:e(t,i)}var o=r(n.text).toUpperCase(),s=r(t.term).toUpperCase();return-1<o.indexOf(s)?n:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},n.prototype.set=function(e,t){var n={};n[g.camelCase(e)]=t;var i=B._convertData(n);g.extend(this.defaults,i)},new n})),e.define("select2/options",["require","jquery","./defaults","./utils"],(function(i,o,a,s){function e(e,t){if(this.options=e,null!=t&&this.fromElement(t),this.options=a.apply(this.options),t&&t.is("input")){var n=i(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=s.Decorate(this.options.dataAdapter,n)}}return e.prototype.fromElement=function(e){var t=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.language&&(e.prop("lang")?this.options.language=e.prop("lang").toLowerCase():e.closest("[lang]").prop("lang")&&(this.options.language=e.closest("[lang]").prop("lang"))),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),e.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&void 0,e.data("data",e.data("select2Tags")),e.data("tags",!0)),e.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&void 0,e.attr("ajax--url",e.data("ajaxUrl")),e.data("ajax--url",e.data("ajaxUrl")));var n={};n=o.fn.jquery&&"1."==o.fn.jquery.substr(0,2)&&e[0].dataset?o.extend(!0,{},e[0].dataset,e.data()):e.data();var i=o.extend(!0,{},n);for(var a in i=s._convertData(i))-1<o.inArray(a,t)||(o.isPlainObject(this.options[a])?o.extend(this.options[a],i[a]):this.options[a]=i[a]);return this},e.prototype.get=function(e){return this.options[e]},e.prototype.set=function(e,t){this.options[e]=t},e})),e.define("select2/core",["jquery","./options","./utils","./keys"],(function(a,c,n,i){var d=function(e,t){null!=e.data("select2")&&e.data("select2").destroy(),this.$element=e,this.id=this._generateId(e),t=t||{},this.options=new c(t,e),d.__super__.constructor.call(this);var n=e.attr("tabindex")||0;e.data("old-tabindex",n),e.attr("tabindex","-1");var i=this.options.get("dataAdapter");this.dataAdapter=new i(e,this.options);var a=this.render();this._placeContainer(a);var o=this.options.get("selectionAdapter");this.selection=new o(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,a);var s=this.options.get("dropdownAdapter");this.dropdown=new s(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,a);var r=this.options.get("resultsAdapter");this.results=new r(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var l=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current((function(e){l.trigger("selection:update",{data:e})})),e.addClass("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),e.data("select2",this)};return n.Extend(d,n.Observable),d.prototype._generateId=function(e){return"select2-"+(null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+n.generateChars(2):n.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},d.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},d.prototype._resolveWidth=function(e,t){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var i=this._resolveWidth(e,"style");return null!=i?i:this._resolveWidth(e,"element")}if("element"==t){var a=e.outerWidth(!1);return a<=0?"auto":a+"px"}if("style"==t){var o=e.attr("style");if("string"!=typeof o)return null;for(var s=o.split(";"),r=0,l=s.length;r<l;r+=1){var c=s[r].replace(/\s/g,"").match(n);if(null!==c&&1<=c.length)return c[1]}return null}return t},d.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},d.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",(function(){t.dataAdapter.current((function(e){t.trigger("selection:update",{data:e})}))})),this.$element.on("focus.select2",(function(e){t.trigger("focus",e)})),this._syncA=n.bind(this._syncAttributes,this),this._syncS=n.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=e?(this._observer=new e(function(e){a.each(e,t._syncA),a.each(e,t._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",t._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",t._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,!1))},d.prototype._registerDataEvents=function(){var n=this;this.dataAdapter.on("*",(function(e,t){n.trigger(e,t)}))},d.prototype._registerSelectionEvents=function(){var n=this,i=["toggle","focus"];this.selection.on("toggle",(function(){n.toggleDropdown()})),this.selection.on("focus",(function(e){n.focus(e)})),this.selection.on("*",(function(e,t){-1===a.inArray(e,i)&&n.trigger(e,t)}))},d.prototype._registerDropdownEvents=function(){var n=this;this.dropdown.on("*",(function(e,t){n.trigger(e,t)}))},d.prototype._registerResultsEvents=function(){var n=this;this.results.on("*",(function(e,t){n.trigger(e,t)}))},d.prototype._registerEvents=function(){var n=this;this.on("open",(function(){n.$container.addClass("select2-container--open")})),this.on("close",(function(){n.$container.removeClass("select2-container--open")})),this.on("enable",(function(){n.$container.removeClass("select2-container--disabled")})),this.on("disable",(function(){n.$container.addClass("select2-container--disabled")})),this.on("blur",(function(){n.$container.removeClass("select2-container--focus")})),this.on("query",(function(t){n.isOpen()||n.trigger("open",{}),this.dataAdapter.query(t,(function(e){n.trigger("results:all",{data:e,query:t})}))})),this.on("query:append",(function(t){this.dataAdapter.query(t,(function(e){n.trigger("results:append",{data:e,query:t})}))})),this.on("keypress",(function(e){var t=e.which;n.isOpen()?t===i.ESC||t===i.TAB||t===i.UP&&e.altKey?(n.close(),e.preventDefault()):t===i.ENTER?(n.trigger("results:select",{}),e.preventDefault()):t===i.SPACE&&e.ctrlKey?(n.trigger("results:toggle",{}),e.preventDefault()):t===i.UP?(n.trigger("results:previous",{}),e.preventDefault()):t===i.DOWN&&(n.trigger("results:next",{}),e.preventDefault()):(t===i.ENTER||t===i.SPACE||t===i.DOWN&&e.altKey)&&(n.open(),e.preventDefault())}))},d.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},d.prototype._syncSubtree=function(e,t){var n=!1,i=this;if(!e||!e.target||"OPTION"===e.target.nodeName||"OPTGROUP"===e.target.nodeName){if(t)if(t.addedNodes&&0<t.addedNodes.length)for(var a=0;a<t.addedNodes.length;a++){t.addedNodes[a].selected&&(n=!0)}else t.removedNodes&&0<t.removedNodes.length&&(n=!0);else n=!0;n&&this.dataAdapter.current((function(e){i.trigger("selection:update",{data:e})}))}},d.prototype.trigger=function(e,t){var n=d.__super__.trigger,i={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(void 0===t&&(t={}),e in i){var a=i[e],o={prevented:!1,name:e,args:t};if(n.call(this,a,o),o.prevented)return void(t.prevented=!0)}n.call(this,e,t)},d.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},d.prototype.open=function(){this.isOpen()||this.trigger("query",{})},d.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},d.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},d.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},d.prototype.focus=function(e){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},d.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&void 0,null!=e&&0!==e.length||(e=[!0]);var t=!e[0];this.$element.prop("disabled",t)},d.prototype.data=function(){this.options.get("debug")&&0<arguments.length&&window.console&&console.warn&&void 0;var t=[];return this.dataAdapter.current((function(e){t=e})),t},d.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&void 0,null==e||0===e.length)return this.$element.val();var t=e[0];a.isArray(t)&&(t=a.map(t,(function(e){return e.toString()}))),this.$element.val(t).trigger("change")},d.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},d.prototype.render=function(){var e=a('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container.addClass("select2-container--"+this.options.get("theme")),e.data("element",this.$element),e},d})),e.define("select2/compat/utils",["jquery"],(function(s){return{syncCssClasses:function(e,t,n){var i,a,o=[];(i=s.trim(e.attr("class")))&&s((i=""+i).split(/\s+/)).each((function(){0===this.indexOf("select2-")&&o.push(this)})),(i=s.trim(t.attr("class")))&&s((i=""+i).split(/\s+/)).each((function(){0!==this.indexOf("select2-")&&null!=(a=n(this))&&o.push(a)})),e.attr("class",o.join(" "))}}})),e.define("select2/compat/containerCss",["jquery","./utils"],(function(s,r){function l(e){return null}function e(){}return e.prototype.render=function(e){var t=e.call(this),n=this.options.get("containerCssClass")||"";s.isFunction(n)&&(n=n(this.$element));var i=this.options.get("adaptContainerCssClass");if(i=i||l,-1!==n.indexOf(":all:")){n=n.replace(":all:","");var a=i;i=function(e){var t=a(e);return null!=t?t+" "+e:e}}var o=this.options.get("containerCss")||{};return s.isFunction(o)&&(o=o(this.$element)),r.syncCssClasses(t,this.$element,i),t.css(o),t.addClass(n),t},e})),e.define("select2/compat/dropdownCss",["jquery","./utils"],(function(s,r){function l(e){return null}function e(){}return e.prototype.render=function(e){var t=e.call(this),n=this.options.get("dropdownCssClass")||"";s.isFunction(n)&&(n=n(this.$element));var i=this.options.get("adaptDropdownCssClass");if(i=i||l,-1!==n.indexOf(":all:")){n=n.replace(":all:","");var a=i;i=function(e){var t=a(e);return null!=t?t+" "+e:e}}var o=this.options.get("dropdownCss")||{};return s.isFunction(o)&&(o=o(this.$element)),r.syncCssClasses(t,this.$element,i),t.css(o),t.addClass(n),t},e})),e.define("select2/compat/initSelection",["jquery"],(function(i){function e(e,t,n){n.get("debug")&&window.console&&console.warn&&void 0,this.initSelection=n.get("initSelection"),this._isInitialized=!1,e.call(this,t,n)}return e.prototype.current=function(e,t){var n=this;this._isInitialized?e.call(this,t):this.initSelection.call(null,this.$element,(function(e){n._isInitialized=!0,i.isArray(e)||(e=[e]),t(e)}))},e})),e.define("select2/compat/inputData",["jquery"],(function(s){function e(e,t,n){this._currentData=[],this._valueSeparator=n.get("valueSeparator")||",","hidden"===t.prop("type")&&n.get("debug")&&console&&console.warn&&void 0,e.call(this,t,n)}return e.prototype.current=function(e,t){function i(e,t){var n=[];return e.selected||-1!==s.inArray(e.id,t)?(e.selected=!0,n.push(e)):e.selected=!1,e.children&&n.push.apply(n,i(e.children,t)),n}for(var n=[],a=0;a<this._currentData.length;a++){var o=this._currentData[a];n.push.apply(n,i(o,this.$element.val().split(this._valueSeparator)))}t(n)},e.prototype.select=function(e,t){if(this.options.get("multiple")){var n=this.$element.val();n+=this._valueSeparator+t.id,this.$element.val(n),this.$element.trigger("change")}else this.current((function(e){s.map(e,(function(e){e.selected=!1}))})),this.$element.val(t.id),this.$element.trigger("change")},e.prototype.unselect=function(e,a){var o=this;a.selected=!1,this.current((function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];a.id!=i.id&&t.push(i.id)}o.$element.val(t.join(o._valueSeparator)),o.$element.trigger("change")}))},e.prototype.query=function(e,t,n){for(var i=[],a=0;a<this._currentData.length;a++){var o=this._currentData[a],s=this.matches(t,o);null!==s&&i.push(s)}n({results:i})},e.prototype.addOptions=function(e,t){var n=s.map(t,(function(e){return s.data(e[0],"data")}));this._currentData.push.apply(this._currentData,n)},e})),e.define("select2/compat/matcher",["jquery"],(function(s){return function(o){return function(e,t){var n=s.extend(!0,{},t);if(null==e.term||""===s.trim(e.term))return n;if(t.children){for(var i=t.children.length-1;0<=i;i--){var a=t.children[i];o(e.term,a.text,a)||n.children.splice(i,1)}if(0<n.children.length)return n}return o(e.term,t.text,t)?n:null}}})),e.define("select2/compat/query",[],(function(){function e(e,t,n){n.get("debug")&&window.console&&console.warn&&void 0,e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.callback=n,this.options.get("query").call(null,t)},e})),e.define("select2/dropdown/attachContainer",[],(function(){function e(e,t,n){e.call(this,t,n)}return e.prototype.position=function(e,t,n){n.find(".dropdown-wrapper").append(t),t.addClass("select2-dropdown--below"),n.addClass("select2-container--below")},e})),e.define("select2/dropdown/stopPropagation",[],(function(){function e(){}return e.prototype.bind=function(e,t,n){e.call(this,t,n);this.$dropdown.on(["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"].join(" "),(function(e){e.stopPropagation()}))},e})),e.define("select2/selection/stopPropagation",[],(function(){function e(){}return e.prototype.bind=function(e,t,n){e.call(this,t,n);this.$selection.on(["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"].join(" "),(function(e){e.stopPropagation()}))},e})),n=function(p){var f,g,e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],t="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],h=Array.prototype.slice;if(p.event.fixHooks)for(var n=e.length;n;)p.event.fixHooks[e[--n]]=p.event.mouseHooks;var m=p.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],i,!1);else this.onmousewheel=i;p.data(this,"mousewheel-line-height",m.getLineHeight(this)),p.data(this,"mousewheel-page-height",m.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],i,!1);else this.onmousewheel=null;p.removeData(this,"mousewheel-line-height"),p.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var t=p(e),n=t["offsetParent"in p.fn?"offsetParent":"parent"]();return n.length||(n=p("body")),parseInt(n.css("fontSize"),10)||parseInt(t.css("fontSize"),10)||16},getPageHeight:function(e){return p(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function i(e){var t,n=e||window.event,i=h.call(arguments,1),a=0,o=0,s=0,r=0,l=0;if((e=p.event.fix(n)).type="mousewheel","detail"in n&&(s=-1*n.detail),"wheelDelta"in n&&(s=n.wheelDelta),"wheelDeltaY"in n&&(s=n.wheelDeltaY),"wheelDeltaX"in n&&(o=-1*n.wheelDeltaX),"axis"in n&&n.axis===n.HORIZONTAL_AXIS&&(o=-1*s,s=0),a=0===s?o:s,"deltaY"in n&&(a=s=-1*n.deltaY),"deltaX"in n&&(o=n.deltaX,0===s&&(a=-1*o)),0!==s||0!==o){if(1===n.deltaMode){var c=p.data(this,"mousewheel-line-height");a*=c,s*=c,o*=c}else if(2===n.deltaMode){var d=p.data(this,"mousewheel-page-height");a*=d,s*=d,o*=d}if(t=Math.max(Math.abs(s),Math.abs(o)),(!g||t<g)&&S(n,g=t)&&(g/=40),S(n,t)&&(a/=40,o/=40,s/=40),a=Math[1<=a?"floor":"ceil"](a/g),o=Math[1<=o?"floor":"ceil"](o/g),s=Math[1<=s?"floor":"ceil"](s/g),m.settings.normalizeOffset&&this.getBoundingClientRect){var u=this.getBoundingClientRect();r=e.clientX-u.left,l=e.clientY-u.top}return e.deltaX=o,e.deltaY=s,e.deltaFactor=g,e.offsetX=r,e.offsetY=l,e.deltaMode=0,i.unshift(e,a,o,s),f&&clearTimeout(f),f=setTimeout(v,200),(p.event.dispatch||p.event.handle).apply(this,i)}}function v(){g=null}function S(e,t){return m.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}p.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})},"function"==typeof e.define&&e.define.amd?e.define("jquery-mousewheel",["jquery"],n):"object"==typeof exports?module.exports=n:n(i),e.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],(function(a,e,o,t){if(null==a.fn.select2){var s=["open","close","destroy"];a.fn.select2=function(t){if("object"==typeof(t=t||{}))return this.each((function(){var e=a.extend(!0,{},t);new o(a(this),e)})),this;if("string"==typeof t){var n,i=Array.prototype.slice.call(arguments,1);return this.each((function(){var e=a(this).data("select2");null==e&&window.console&&console.error&&void 0,n=e[t].apply(e,i)})),-1<a.inArray(t,s)?this:n}throw new Error("Invalid arguments for Select2: "+t)}}return null==a.fn.select2.defaults&&(a.fn.select2.defaults=t),o})),{define:e.define,require:e.require}})(),t=e.require("jquery.select2");return i.fn.select2.amd=e,t}));var loyaltyGlobal=function(){this.data=[],this.premiereData=[],this.profileBadgesCookie=BMS.Storage.get({name:loyalty.config.PROFILE_COOKIE,storage:"C"}),this.logoBadgesCookie=BMS.Storage.get({name:loyalty.config.LOGO_COOKIE,storage:"C"}),this.dashboardBadgesCookie=BMS.Storage.get({name:loyalty.config.DASHBOARD_EVENTS_COOKIE,storage:"C"}),this.dashboardPremiereBadgesCookie=BMS.Storage.get({name:loyalty.config.DASHBOARD_PREMIERE_EVENTS_COOKIE,storage:"C"}),this.profileReadEvents=this.profileBadgesCookie?this.profileBadgesCookie.split(","):[],this.readEvents=this.logoBadgesCookie?this.logoBadgesCookie.split(","):[],this.dashboardReadEvents=this.dashboardBadgesCookie?this.dashboardBadgesCookie.split(","):[],this.dashboardPremiereReadEvents=this.dashboardPremiereBadgesCookie?this.dashboardPremiereBadgesCookie.split(","):[],this.dashboardUnreadEvents=[],this.profileUnReadEvents=[],this.unReadEvents=[],this.dashboardPremiereUnreadEvents=[]};function initBadges(e){try{var t=new loyaltyGlobal;t.data=e,t.unReadEvents=t.updateUnreadEvents(t.readEvents,t.data),t.profileUnReadEvents=t.updateUnreadEvents(t.profileReadEvents,t.data),t.showBadges();var n=document.getElementById("postSignIn");if(n){var i=t;n.addEventListener("click",(function e(){i.profileClickHandler(),n.removeEventListener("click",e)}),!1)}}catch(e){BMS.Misc.fnErr({fnName:"initBadges",err:e})}}function loadVariantsData(n){try{var e=BMS.Storage.get({name:"ld",key:"LOYALTYVARIANTID",defVal:""}),t=BMS.Storage.get({name:"ld",key:"MEMBEREMAIL",defVal:""}),i=BMS.Storage.get({name:"Rgn",key:"Code"}),a="NCR"===i?"Delhi":i,o=BMS.Storage.get({name:"Rgn",key:"subregionDetails"}),s=""!=o?JSON.parse(o).SubRegionCode:"";BMS.Misc.fnAjax({url:global.getDataUrl+"?cmd=LOYALTYDATA",data:{variantId:e,emailId:t,regionCode:a,subRegionCode:s},type:"POST",success:function(e){if(!_.isEmpty(e)){var t=JSON.parse(e);return t.data&&t.data.ssEventsDetails&&0<t.data.ssEventsDetails.length&&BMS.Storage.set({name:loyalty.config.EVENTS_DATA,storage:"C",value:t.data.ssEventsDetails,sess:!1,expires:"Thu, 31 Dec 2099 23:59:59 GMT"}),n(t)}},error:function(e,t,n){void 0}})}catch(e){BMS.Misc.fnErr({fnName:"loadVariantsData",err:e})}}function fnCleanUpBadges(){try{showAndHideElement("#logo-badge","none"),showAndHideElement("#profile-badge","none"),showAndHideElement("#profile-badge-signin","none")}catch(e){BMS.Misc.fnErr({fnName:"fnCleanUpBadges",err:e})}}function showAndHideElement(e,t,n){try{e=e||"",t=t||"block";var i=document.querySelector(e);i&&(i.style.display=t),i&&n&&(i.textContent=n)}catch(e){BMS.Misc.fnErr({name:"showAndHideElement",err:e})}}function fireSearchViewEvent(){try{var e={eventName:"search_viewed",event_name:"search_viewed",event_type:"screen_view",screen_name:"search",product:"movies",experiment:"",timestamp:(new Date).toISOString()};e=$.extend({},e,BMS.Analytics.commonClickStreamParams()),bmsMQTTClient&&bmsMQTTClient.push(e)}catch(e){BMS.Misc.fnErr({fnName:"fireSearchViewEvent",err:e})}}loyaltyGlobal.prototype={updateUnreadEvents:function(e,t){try{var n=[];if(0===e.length)n=t;else for(var i=0;i<t.length;i++){for(var a=!1,o=0;o<e.length;o++)t[i]===e[o]&&(a=!0);a||n.push(t[i])}return n}catch(e){void 0}},saveReadEvents:function(e,t){try{t.length&&BMS.Storage.set({name:e,value:t,storage:"C",sess:!1,expires:"Thu, 31 Dec 2099 23:59:59 GMT"})}catch(e){BMS.Misc.fnErr({fnName:"loyaltyGlobal.saveReadEvents",err:e})}},showBadges:function(){try{this.unReadEvents.length&&showAndHideElement("#logo-badge","block","1"),this.profileUnReadEvents.length&&(showAndHideElement("#profile-badge","block","1"),showAndHideElement("#profile-badge-signin","block"))}catch(e){return!1}},showDashboardBadges:function(){try{this.dashboardUnreadEvents.length&&showAndHideElement("[data-category=ET] .dashboard-notif","block","1"),this.dashboardPremiereUnreadEvents.length&&showAndHideElement("[data-category=PR] .dashboard-notif","block","1")}catch(e){BMS.Misc.fnErr({fnName:"loyaltyGlobal.showDashboardBadges",err:e})}},updateReadCount:function(e){try{for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}catch(e){void 0}},markBadgesRead:function(){try{0===this.unReadEvents.length&&showAndHideElement("#logo-badge","none"),0===this.profileUnReadEvents.length&&(showAndHideElement("#profile-badge","none"),showAndHideElement("#profile-badge-signin","none"))}catch(e){void 0}},markDashboardBadgesRead:function(){try{0===this.dashboardUnreadEvents.length&&showAndHideElement("[data-category=ET] .dashboard-notif","none"),0===this.dashboardPremiereUnreadEvents.length&&showAndHideElement("[data-category=PR] .dashboard-notif","none")}catch(e){BMS.Misc.fnErr({fnName:"loyaltyGlobalObj.markDashboardBadgesRead",err:e})}},profileClickHandler:function(){try{this.profileUnReadEvents=[],this.markBadgesRead(),this.saveReadEvents(loyalty.config.PROFILE_COOKIE,this.data);BMS.Misc.fnGATracker({event:"SuperstarDashboard_tracking_SS_Dashboards_1",action:"SS Logo Click - My Profile",label:"Notification for PreSale - Yes"})}catch(e){BMS.Misc.fnErr({fnName:"loyaltyGlobalObj.profileClickHandler",err:e})}}},$(document).ready((function(){try{if(loyalty&&loyalty.fnIsSubscribed())if(pageName&&"home"!==pageName&&"loyalty-dashboard"!==pageName)initBadges(BMS.Storage.get({name:loyalty.config.EVENTS_DATA,storage:"C"})?BMS.Storage.get({name:loyalty.config.EVENTS_DATA,storage:"C"}).split(","):[])}catch(e){BMS.Misc.fnErr({name:"loyaltyGlobalObj",err:e})}})),global.SignInCallBack.push((function(){loyalty&&(loyalty.isTargetted=BMS.Storage.get({name:"ld",key:"LOYALTYISTARGETTED",storage:"C"}),loyalty.isSubscribed=BMS.Storage.get({name:"ld",key:"LOYALTYISSUBSCRIBED",storage:"C"})),loyalty.fnIsTargetted()&&fnCleanUpBadges()})),global.SignOutCallBack.push((function(){BMS.Storage.del({name:loyalty.config.LOGO_COOKIE}),BMS.Storage.del({name:loyalty.config.PROFILE_COOKIE}),BMS.Storage.del({name:loyalty.config.EVENTS_DATA}),BMS.Storage.del({name:loyalty.config.DASHBOARD_EVENTS_COOKIE}),BMS.Storage.del({name:loyalty.config.DASHBOARD_PREMIERE_EVENTS_COOKIE}),fnCleanUpBadges()})),$(document).ready((function(){var t={};$(".gallery-img-contr,.layout-content").each((function(){var e=parseInt($(this).attr("data-group")||0,10);t[e]||(t[e]=[]),t[e].push(this)})),$.each(t,(function(){$(this).magnificPopup({type:"image",closeOnContentClick:!0,closeBtnInside:!1,gallery:{enabled:!0}})}))})),(function(d){var u,i,p,f,a,g,t,r="Close",l="BeforeClose",h="MarkupParse",n=".mfp",m="mfp-ready",o="mfp-removing",s="mfp-prevent-close",e=function(){},c=!!window.jQuery,v=d(window),S=function(e,t){u.ev.on("mfp"+e+n,t)},y=function(e,t,n,i){var a=document.createElement("div");return a.className="mfp-"+e,n&&(a.innerHTML=n),i?t&&t.appendChild(a):(a=d(a),t&&a.appendTo(t)),a},M=function(e,t){u.ev.triggerHandler("mfp"+e,t),u.st.callbacks&&(e=e.charAt(0).toLowerCase()+e.slice(1),u.st.callbacks[e]&&u.st.callbacks[e].apply(u,d.isArray(t)?t:[t]))},b=function(e){return e===t&&u.currTemplate.closeBtn||(u.currTemplate.closeBtn=d(u.st.closeMarkup.replace("%title%",u.st.tClose)),t=e),u.currTemplate.closeBtn},w=function(){d.magnificPopup.instance||((u=new e).init(),d.magnificPopup.instance=u)};e.prototype={constructor:e,init:function(){var e=navigator.appVersion;u.isIE7=-1!==e.indexOf("MSIE 7."),u.isIE8=-1!==e.indexOf("MSIE 8."),u.isLowIE=u.isIE7||u.isIE8,u.isAndroid=/android/gi.test(e),u.isIOS=/iphone|ipad|ipod/gi.test(e),u.supportsTransition=(function(){var e=document.createElement("p").style,t=["ms","O","Moz","Webkit"];if(void 0!==e.transition)return!0;for(;t.length;)if(t.pop()+"Transition"in e)return!0;return!1})(),u.probablyMobile=u.isAndroid||u.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),f=d(document),u.popupsCache={}},open:function(e){var t;if(p||(p=d(document.body)),!1===e.isObj){u.items=e.items.toArray(),u.index=0;var n,i=e.items;for(t=0;i.length>t;t++)if((n=i[t]).parsed&&(n=n.el[0]),n===e.el[0]){u.index=t;break}}else u.items=d.isArray(e.items)?e.items:[e.items],u.index=e.index||0;if(!u.isOpen){u.types=[],g="",u.ev=e.mainEl&&e.mainEl.length?e.mainEl.eq(0):f,e.key?(u.popupsCache[e.key]||(u.popupsCache[e.key]={}),u.currTemplate=u.popupsCache[e.key]):u.currTemplate={},u.st=d.extend(!0,{},d.magnificPopup.defaults,e),u.fixedContentPos="auto"===u.st.fixedContentPos?!u.probablyMobile:u.st.fixedContentPos,u.st.modal&&(u.st.closeOnContentClick=!1,u.st.closeOnBgClick=!1,u.st.showCloseBtn=!1,u.st.enableEscapeKey=!1),u.bgOverlay||(u.bgOverlay=y("bg").on("click.mfp",(function(){u.close()})),u.wrap=y("wrap").attr("tabindex",-1).on("click.mfp",(function(e){u._checkIfClose(e.target)&&u.close()})),u.container=y("container",u.wrap)),u.contentContainer=y("content"),u.st.preloader&&(u.preloader=y("preloader",u.container,u.st.tLoading));var a=d.magnificPopup.modules;for(t=0;a.length>t;t++){var o=a[t];o=o.charAt(0).toUpperCase()+o.slice(1),u["init"+o].call(u)}M("BeforeOpen"),u.st.showCloseBtn&&(u.st.closeBtnInside?(S(h,(function(e,t,n,i){n.close_replaceWith=b(i.type)})),g+=" mfp-close-btn-in"):u.wrap.append(b())),u.st.alignTop&&(g+=" mfp-align-top"),u.fixedContentPos?u.wrap.css({overflow:u.st.overflowY,overflowX:"hidden",overflowY:u.st.overflowY}):u.wrap.css({top:v.scrollTop(),position:"absolute"}),(!1===u.st.fixedBgPos||"auto"===u.st.fixedBgPos&&!u.fixedContentPos)&&u.bgOverlay.css({height:f.height(),position:"absolute"}),u.st.enableEscapeKey&&f.on("keyup.mfp",(function(e){27===e.keyCode&&u.close()})),v.on("resize.mfp",(function(){u.updateSize()})),u.st.closeOnContentClick||(g+=" mfp-auto-cursor"),g&&u.wrap.addClass(g);var s=u.wH=v.height(),r={};if(u.fixedContentPos&&u._hasScrollBar(s)){var l=u._getScrollbarSize();l&&(r.marginRight=l)}u.fixedContentPos&&(u.isIE7?d("body, html").css("overflow","hidden"):r.overflow="hidden");var c=u.st.mainClass;return u.isIE7&&(c+=" mfp-ie7"),c&&u._addClassToMFP(c),u.updateItemHTML(),M("BuildControls"),d("html").css(r),u.bgOverlay.add(u.wrap).prependTo(u.st.prependTo||p),u._lastFocusedEl=document.activeElement,setTimeout((function(){u.content?(u._addClassToMFP(m),u._setFocus()):u.bgOverlay.addClass(m),f.on("focusin.mfp",u._onFocusIn)}),16),u.isOpen=!0,u.updateSize(s),M("Open"),e}u.updateItemHTML()},close:function(){u.isOpen&&(M(l),u.isOpen=!1,u.st.removalDelay&&!u.isLowIE&&u.supportsTransition?(u._addClassToMFP(o),setTimeout((function(){u._close()}),u.st.removalDelay)):u._close())},_close:function(){M(r);var e=o+" "+m+" ";if(u.bgOverlay.detach(),u.wrap.detach(),u.container.empty(),u.st.mainClass&&(e+=u.st.mainClass+" "),u._removeClassFromMFP(e),u.fixedContentPos){var t={marginRight:""};u.isIE7?d("body, html").css("overflow",""):t.overflow="",d("html").css(t)}f.off("keyup.mfp focusin.mfp"),u.ev.off(n),u.wrap.attr("class","mfp-wrap").removeAttr("style"),u.bgOverlay.attr("class","mfp-bg"),u.container.attr("class","mfp-container"),!u.st.showCloseBtn||u.st.closeBtnInside&&!0!==u.currTemplate[u.currItem.type]||u.currTemplate.closeBtn&&u.currTemplate.closeBtn.detach(),u._lastFocusedEl&&d(u._lastFocusedEl).focus(),u.currItem=null,u.content=null,u.currTemplate=null,u.prevHeight=0,M("AfterClose")},updateSize:function(e){if(u.isIOS){var t=document.documentElement.clientWidth/window.innerWidth,n=window.innerHeight*t;u.wrap.css("height",n),u.wH=n}else u.wH=e||v.height();u.fixedContentPos||u.wrap.css("height",u.wH),M("Resize")},updateItemHTML:function(){var e=u.items[u.index];u.contentContainer.detach(),u.content&&u.content.detach(),e.parsed||(e=u.parseEl(u.index));var t=e.type;if(M("BeforeChange",[u.currItem?u.currItem.type:"",t]),u.currItem=e,!u.currTemplate[t]){var n=!!u.st[t]&&u.st[t].markup;M("FirstMarkupParse",n),u.currTemplate[t]=!n||d(n)}a&&a!==e.type&&u.container.removeClass("mfp-"+a+"-holder");var i=u["get"+t.charAt(0).toUpperCase()+t.slice(1)](e,u.currTemplate[t]);u.appendContent(i,t),e.preloaded=!0,M("Change",e),a=e.type,u.container.prepend(u.contentContainer),M("AfterChange")},appendContent:function(e,t){(u.content=e)?u.st.showCloseBtn&&u.st.closeBtnInside&&!0===u.currTemplate[t]?u.content.find(".mfp-close").length||u.content.append(b()):u.content=e:u.content="",M("BeforeAppend"),u.container.addClass("mfp-"+t+"-holder"),u.contentContainer.append(u.content)},parseEl:function(e){var t,n=u.items[e];if(n.tagName?n={el:d(n)}:(t=n.type,n={data:n,src:n.src}),n.el){for(var i=u.types,a=0;i.length>a;a++)if(n.el.hasClass("mfp-"+i[a])){t=i[a];break}n.src=n.el.attr("data-mfp-src"),n.src||(n.src=n.el.attr("href"))}return n.type=t||u.st.type||"inline",n.index=e,n.parsed=!0,u.items[e]=n,M("ElementParse",n),u.items[e]},addGroup:function(t,n){var e=function(e){e.mfpEl=this,u._openClick(e,t,n)};n||(n={});var i="click.magnificPopup";n.mainEl=t,n.items?(n.isObj=!0,t.off(i).on(i,e)):(n.isObj=!1,n.delegate?t.off(i).on(i,n.delegate,e):(n.items=t).off(i).on(i,e))},_openClick:function(e,t,n){if((void 0!==n.midClick?n.midClick:d.magnificPopup.defaults.midClick)||2!==e.which&&!e.ctrlKey&&!e.metaKey){var i=void 0!==n.disableOn?n.disableOn:d.magnificPopup.defaults.disableOn;if(i)if(d.isFunction(i)){if(!i.call(u))return!0}else if(i>v.width())return!0;e.type&&(e.preventDefault(),u.isOpen&&e.stopPropagation()),n.el=d(e.mfpEl),n.delegate&&(n.items=t.find(n.delegate)),u.open(n)}},updateStatus:function(e,t){if(u.preloader){i!==e&&u.container.removeClass("mfp-s-"+i),t||"loading"!==e||(t=u.st.tLoading);var n={status:e,text:t};M("UpdateStatus",n),e=n.status,t=n.text,u.preloader.html(t),u.preloader.find("a").on("click",(function(e){e.stopImmediatePropagation()})),u.container.addClass("mfp-s-"+e),i=e}},_checkIfClose:function(e){if(!d(e).hasClass(s)){var t=u.st.closeOnContentClick,n=u.st.closeOnBgClick;if(t&&n)return!0;if(!u.content||d(e).hasClass("mfp-close")||u.preloader&&e===u.preloader[0])return!0;if(e===u.content[0]||d.contains(u.content[0],e)){if(t)return!0}else if(n&&d.contains(document,e))return!0;return!1}},_addClassToMFP:function(e){u.bgOverlay.addClass(e),u.wrap.addClass(e)},_removeClassFromMFP:function(e){this.bgOverlay.removeClass(e),u.wrap.removeClass(e)},_hasScrollBar:function(e){return(u.isIE7?f.height():document.body.scrollHeight)>(e||v.height())},_setFocus:function(){(u.st.focus?u.content.find(u.st.focus).eq(0):u.wrap).focus()},_onFocusIn:function(e){return e.target===u.wrap[0]||d.contains(u.wrap[0],e.target)?void 0:(u._setFocus(),!1)},_parseMarkup:function(a,e,t){var o;t.data&&(e=d.extend(t.data,e)),M(h,[a,e,t]),d.each(e,(function(e,t){if(void 0===t||!1===t)return!0;if(1<(o=e.split("_")).length){var n=a.find(".mfp-"+o[0]);if(0<n.length){var i=o[1];"replaceWith"===i?n[0]!==t[0]&&n.replaceWith(t):"img"===i?n.is("img")?n.attr("src",t):n.replaceWith('<img src="'+t+'" class="'+n.attr("class")+'" />'):n.attr(o[1],t)}}else a.find(".mfp-"+e).html(t)}))},_getScrollbarSize:function(){if(void 0===u.scrollbarSize){var e=document.createElement("div");e.id="mfp-sbm",e.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e),u.scrollbarSize=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return u.scrollbarSize}},d.magnificPopup={instance:null,proto:e.prototype,modules:[],open:function(e,t){return w(),(e=e?d.extend(!0,{},e):{}).isObj=!0,e.index=t||0,this.instance.open(e)},close:function(){return d.magnificPopup.instance&&d.magnificPopup.instance.close()},registerModule:function(e,t){t.options&&(d.magnificPopup.defaults[e]=t.options),d.extend(this.proto,t.proto),this.modules.push(e)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&times;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}},d.fn.magnificPopup=function(e){w();var t=d(this);if("string"==typeof e)if("open"===e){var n,i=c?t.data("magnificPopup"):t[0].magnificPopup,a=parseInt(arguments[1],10)||0;i.items?n=i.items[a]:(n=t,i.delegate&&(n=n.find(i.delegate)),n=n.eq(a)),u._openClick({mfpEl:n},t,i)}else u.isOpen&&u[e].apply(u,Array.prototype.slice.call(arguments,1));else e=d.extend(!0,{},e),c?t.data("magnificPopup",e):t[0].magnificPopup=e,u.addGroup(t,e);return t};var B,C,_,k="inline",E=function(){_&&(C.after(_.addClass(B)).detach(),_=null)};d.magnificPopup.registerModule(k,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){u.types.push(k),S(r+"."+k,(function(){E()}))},getInline:function(e,t){if(E(),e.src){var n=u.st.inline,i=d(e.src);if(i.length){var a=i[0].parentNode;a&&a.tagName&&(C||(B=n.hiddenClass,C=y(B),B="mfp-"+B),_=i.after(C).detach().removeClass(B)),u.updateStatus("ready")}else u.updateStatus("error",n.tNotFound),i=d("<div>");return e.inlineElement=i}return u.updateStatus("ready"),u._parseMarkup(t,{},e),t}}});var T,I="ajax",x=function(){T&&p.removeClass(T)},$=function(){x(),u.req&&u.req.abort()};d.magnificPopup.registerModule(I,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){u.types.push(I),T=u.st.ajax.cursor,S(r+"."+I,$),S("BeforeChange.ajax",$)},getAjax:function(a){T&&p.addClass(T),u.updateStatus("loading");var e=d.extend({url:a.src,success:function(e,t,n){var i={data:e,xhr:n};M("ParseAjax",i),u.appendContent(d(i.data),I),a.finished=!0,x(),u._setFocus(),setTimeout((function(){u.wrap.addClass(m)}),16),u.updateStatus("ready"),M("AjaxContentAdded")},error:function(){x(),a.finished=a.loadError=!0,u.updateStatus("error",u.st.ajax.tError.replace("%url%",a.src))}},u.st.ajax.settings);return u.req=d.ajax(e),""}}});var A;d.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var e=u.st.image,t=".image";u.types.push("image"),S("Open"+t,(function(){"image"===u.currItem.type&&e.cursor&&p.addClass(e.cursor)})),S(r+t,(function(){e.cursor&&p.removeClass(e.cursor),v.off("resize.mfp")})),S("Resize"+t,u.resizeImage),u.isLowIE&&S("AfterChange",u.resizeImage)},resizeImage:function(){var e=u.currItem;if(e&&e.img&&u.st.image.verticalFit){var t=0;u.isLowIE&&(t=parseInt(e.img.css("padding-top"),10)+parseInt(e.img.css("padding-bottom"),10)),e.img.css("max-height",u.wH-t)}},_onImageHasSize:function(e){e.img&&(e.hasSize=!0,A&&clearInterval(A),e.isCheckingImgSize=!1,M("ImageHasSize",e),e.imgHidden&&(u.content&&u.content.removeClass("mfp-loading"),e.imgHidden=!1))},findImageSize:function(t){var n=0,i=t.img[0],a=function(e){A&&clearInterval(A),A=setInterval((function(){return 0<i.naturalWidth?void u._onImageHasSize(t):(200<n&&clearInterval(A),void(3===++n?a(10):40===n?a(50):100===n&&a(500)))}),e)};a(1)},getImage:function(e,t){var n=0,i=function(){e&&(e.img[0].complete?(e.img.off(".mfploader"),e===u.currItem&&(u._onImageHasSize(e),u.updateStatus("ready")),e.hasSize=!0,e.loaded=!0,M("ImageLoadComplete")):++n<200?setTimeout(i,100):a())},a=function(){e&&(e.img.off(".mfploader"),e===u.currItem&&(u._onImageHasSize(e),u.updateStatus("error",o.tError.replace("%url%",e.src))),e.hasSize=!0,e.loaded=!0,e.loadError=!0)},o=u.st.image,s=t.find(".mfp-img");if(s.length){var r=document.createElement("img");r.className="mfp-img",e.img=d(r).on("load.mfploader",i).on("error.mfploader",a),r.src=e.src,s.is("img")&&(e.img=e.img.clone()),0<(r=e.img[0]).naturalWidth?e.hasSize=!0:r.width||(e.hasSize=!1)}return u._parseMarkup(t,{title:(function(e){if(e.data&&void 0!==e.data.title)return e.data.title;var t=u.st.image.titleSrc;if(t){if(d.isFunction(t))return t.call(u,e);if(e.el)return e.el.attr(t)||""}return""})(e),img_replaceWith:e.img},e),u.resizeImage(),e.hasSize?(A&&clearInterval(A),e.loadError?(t.addClass("mfp-loading"),u.updateStatus("error",o.tError.replace("%url%",e.src))):(t.removeClass("mfp-loading"),u.updateStatus("ready"))):(u.updateStatus("loading"),e.loading=!0,e.hasSize||(e.imgHidden=!0,t.addClass("mfp-loading"),u.findImageSize(e))),t}}});var L;d.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(e){return e.is("img")?e:e.find("img")}},proto:{initZoom:function(){var e,o=u.st.zoom;if(o.enabled&&u.supportsTransition){var t,n,i=o.duration,a=function(e){var t=e.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),n="all "+o.duration/1e3+"s "+o.easing,i={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},a="transition";return i["-webkit-"+a]=i["-moz-"+a]=i["-o-"+a]=i[a]=n,t.css(i),t},s=function(){u.content.css("visibility","visible")};S("BuildControls.zoom",(function(){if(u._allowZoom()){if(clearTimeout(t),u.content.css("visibility","hidden"),!(e=u._getItemToZoom()))return void s();(n=a(e)).css(u._getOffset()),u.wrap.append(n),t=setTimeout((function(){n.css(u._getOffset(!0)),t=setTimeout((function(){s(),setTimeout((function(){n.remove(),e=n=null,M("ZoomAnimationEnded")}),16)}),i)}),16)}})),S(l+".zoom",(function(){if(u._allowZoom()){if(clearTimeout(t),u.st.removalDelay=i,!e){if(!(e=u._getItemToZoom()))return;n=a(e)}n.css(u._getOffset(!0)),u.wrap.append(n),u.content.css("visibility","hidden"),setTimeout((function(){n.css(u._getOffset())}),16)}})),S(r+".zoom",(function(){u._allowZoom()&&(s(),n&&n.remove(),e=null)}))}},_allowZoom:function(){return"image"===u.currItem.type},_getItemToZoom:function(){return!!u.currItem.hasSize&&u.currItem.img},_getOffset:function(e){var t,n=(t=e?u.currItem.img:u.st.zoom.opener(u.currItem.el||u.currItem)).offset(),i=parseInt(t.css("padding-top"),10),a=parseInt(t.css("padding-bottom"),10);n.top-=d(window).scrollTop()-i;var o={width:t.width(),height:(c?t.innerHeight():t[0].offsetHeight)-a-i};return void 0===L&&(L=void 0!==document.createElement("p").style.MozTransform),L?o["-moz-transform"]=o.transform="translate("+n.left+"px,"+n.top+"px)":(o.left=n.left,o.top=n.top),o}}});var R="iframe",D=function(e){if(u.currTemplate[R]){var t=u.currTemplate[R].find("iframe");t.length&&(e||(t[0].src="//about:blank"),u.isIE8&&t.css("display",e?"block":"none"))}};d.magnificPopup.registerModule(R,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){u.types.push(R),S("BeforeChange",(function(e,t,n){t!==n&&(t===R?D():n===R&&D(!0))})),S(r+"."+R,(function(){D()}))},getIframe:function(e,t){var n=e.src,i=u.st.iframe;d.each(i.patterns,(function(){return-1<n.indexOf(this.index)?(this.id&&(n="string"==typeof this.id?n.substr(n.lastIndexOf(this.id)+this.id.length,n.length):this.id.call(this,n)),n=this.src.replace("%id%",n),!1):void 0}));var a={};return i.srcAction&&(a[i.srcAction]=n),u._parseMarkup(t,a,e),u.updateStatus("ready"),t}}});var P=function(e){var t=u.items.length;return t-1<e?e-t:e<0?t+e:e},N=function(e,t,n){return e.replace(/%curr%/gi,t+1).replace(/%total%/gi,n)};d.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var o=u.st.gallery,e=".mfp-gallery",a=Boolean(d.fn.mfpFastClick);return u.direction=!0,!(!o||!o.enabled)&&(g+=" mfp-gallery",S("Open"+e,(function(){o.navigateByImgClick&&u.wrap.on("click"+e,".mfp-img",(function(){return 1<u.items.length?(u.next(),!1):void 0})),f.on("keydown"+e,(function(e){37===e.keyCode?u.prev():39===e.keyCode&&u.next()}))})),S("UpdateStatus"+e,(function(e,t){t.text&&(t.text=N(t.text,u.currItem.index,u.items.length))})),S(h+e,(function(e,t,n,i){var a=u.items.length;n.counter=1<a?N(o.tCounter,i.index,a):""})),S("BuildControls"+e,(function(){if(1<u.items.length&&o.arrows&&!u.arrowLeft){var e=o.arrowMarkup,t=u.arrowLeft=d(e.replace(/%title%/gi,o.tPrev).replace(/%dir%/gi,"left")).addClass(s),n=u.arrowRight=d(e.replace(/%title%/gi,o.tNext).replace(/%dir%/gi,"right")).addClass(s),i=a?"mfpFastClick":"click";t[i]((function(){u.prev()})),n[i]((function(){u.next()})),u.isIE7&&(y("b",t[0],!1,!0),y("a",t[0],!1,!0),y("b",n[0],!1,!0),y("a",n[0],!1,!0)),u.container.append(t.add(n))}})),S("Change"+e,(function(){u._preloadTimeout&&clearTimeout(u._preloadTimeout),u._preloadTimeout=setTimeout((function(){u.preloadNearbyImages(),u._preloadTimeout=null}),16)})),void S(r+e,(function(){f.off(e),u.wrap.off("click"+e),u.arrowLeft&&a&&u.arrowLeft.add(u.arrowRight).destroyMfpFastClick(),u.arrowRight=u.arrowLeft=null})))},next:function(){u.direction=!0,u.index=P(u.index+1),u.updateItemHTML()},prev:function(){u.direction=!1,u.index=P(u.index-1),u.updateItemHTML()},goTo:function(e){u.direction=e>=u.index,u.index=e,u.updateItemHTML()},preloadNearbyImages:function(){var e,t=u.st.gallery.preload,n=Math.min(t[0],u.items.length),i=Math.min(t[1],u.items.length);for(e=1;(u.direction?i:n)>=e;e++)u._preloadItem(u.index+e);for(e=1;(u.direction?n:i)>=e;e++)u._preloadItem(u.index-e)},_preloadItem:function(e){if(e=P(e),!u.items[e].preloaded){var t=u.items[e];t.parsed||(t=u.parseEl(e)),M("LazyLoad",t),"image"===t.type&&(t.img=d('<img class="mfp-img" />').on("load.mfploader",(function(){t.hasSize=!0})).on("error.mfploader",(function(){t.hasSize=!0,t.loadError=!0,M("LazyLoadError",t)})).attr("src",t.src)),t.preloaded=!0}}}});var O,U,G,F="retina";d.magnificPopup.registerModule(F,{options:{replaceSrc:function(e){return e.src.replace(/\.\w+$/,(function(e){return"@2x"+e}))},ratio:1},proto:{initRetina:function(){if(1<window.devicePixelRatio){var n=u.st.retina,i=n.ratio;1<(i=isNaN(i)?i():i)&&(S("ImageHasSize."+F,(function(e,t){t.img.css({"max-width":t.img[0].naturalWidth/i,width:"100%"})})),S("ElementParse."+F,(function(e,t){t.src=n.replaceSrc(t,i)})))}}}}),O="ontouchstart"in window,U=function(){v.off("touchmove"+G+" touchend"+G)},G=".mfpFastClick",d.fn.mfpFastClick=function(l){return d(this).each((function(){var t,n,i,a,o,s,r,e=d(this);O&&e.on("touchstart"+G,(function(e){o=!1,r=1,s=e.originalEvent?e.originalEvent.touches[0]:e.touches[0],i=s.clientX,a=s.clientY,v.on("touchmove"+G,(function(e){s=e.originalEvent?e.originalEvent.touches:e.touches,r=s.length,s=s[0],(10<Math.abs(s.clientX-i)||10<Math.abs(s.clientY-a))&&(o=!0,U())})).on("touchend"+G,(function(e){U(),o||1<r||(t=!0,e.preventDefault(),clearTimeout(n),n=setTimeout((function(){t=!1}),1e3),l())}))})),e.on("click"+G,(function(){t||l()}))}))},d.fn.destroyMfpFastClick=function(){d(this).off("touchstart"+G+" click"+G),O&&v.off("touchmove"+G+" touchend"+G)},w()})(window.jQuery||window.Zepto),BMS.Analytics.ANALYTICS_SCHEMA_VERSION="3",BMS.Analytics.commonClickStreamParams=function(){return{schema_version:BMS.Analytics.ANALYTICS_SCHEMA_VERSION,bms_id:BMS.Storage.get({name:"bmsId"})?BMS.Storage.get({name:"bmsId"}).replace(/['"]+/g,""):"",member_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),region_code:""!=BMS.Storage.get({name:"Rgn"})?BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}):"",sub_region_code:"",user_mode:""!==BMS.Storage.get({name:"ld"})?"logged_in":"guest",page_url:window.location.href}},BMS.Analytics.pushWebLaunchEventClickStream=function(){var e=BMS.Storage.get({name:"geoLocation",storage:"C"}),t=0,n=0,i=new Date;""!==e&&(t=(e=JSON.parse(e)).lat,n=e.lng);var a={eventName:"weblaunch",app_code:global.strAppCode,clevertap_id:BMS.Storage.get({name:"WZRK_G"}).replace(/['"]+/g,""),event_name:"weblaunch",event_type:"launch",ga_id:BMS.Storage.get({name:"tvc_bmscookie"}),timestamp:i.toISOString(),user_agent:navigator.userAgent,browser_language:navigator.language,browser_vendor:navigator.vendor,browser_version:navigator.appVersion,email_id:BMS.Storage.get({name:"ld",key:"MEMBEREMAIL",defVal:""}),location:t+","+n,member_id:BMS.Storage.get({name:"ld",key:"MEMBERID"}),phone_number:BMS.Storage.get({name:"ld",key:"MOBILE",defVal:""}),do_not_track:1===navigator.doNotTrack,connection_rtt:void 0===navigator.connection?"":navigator.connection.rtt,os_platform:navigator.platform,connection_type:void 0===navigator.connection?"":navigator.connection.effectiveType,service_worker_added:void 0!==navigator.serviceWorker&&null!==navigator.serviceWorker.controller};a=$.extend({},a,BMS.Analytics.commonClickStreamParams());try{bmsMQTTClient.push(a)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Analytics.pushWebLaunchEventClickStream",err:e})}},BMS.Analytics.pushLanguageSelectionLotame=function(e){try{}catch(e){BMS.Misc.fnErr({fnName:"BMS.Analytics.pushLanguageSelectionLotame",err:e})}},$(document).ready((function(){!(function(){if(document.addEventListener("weblaunch",BMS.Analytics.pushWebLaunchEventClickStream),""!==BMS.Storage.get({name:"Rgn"})&&""!==BMS.Misc.fnGVal({key:"CODE",data:BMS.Storage.get({name:"Rgn"})}))try{bmsMQTTClient.init()}catch(e){void 0}})()}));